import{r as e,j as l}from"./react@19.1.1.osUeTYwR.js";import{h as s,d as a,c as i,f as t,b as r}from"./componentMap.dE7Nbbqk.js";import{a as n}from"./index.CPSoCv0-.js";import{u as o}from"./react-i18next@15.6.1_i18nex_74a7e71e4075fb517089ab3b681ca6ee.DYNCe44U.js";import{F as d,B as c,n as m,h as p}from"./antd@5.27.0_react-dom@19.1.1_react@19.1.1__react@19.1.1.C9M9EXgq.js";import{l as h,m as u,n as x}from"./@ant-design_icons@6.0.0_rea_847732ab2d986d5c093170829ace02ec.D9O7u4nt.js";const f=e.forwardRef((f,j)=>{var b;const{list:v,data:g,initialValues:w,isLoading:y,isSearch:C=!0,isReset:N=!0,isRowExpand:F=!0,type:_="default",style:E,className:R,children:k,labelCol:S,wrapperCol:W,defaultColCount:$=4,defaultRowExpand:P=2,handleFinish:V}=f,{t:B}=o(),{isPhone:I}=n(),[L]=d.useForm(),[M,z]=e.useState(!1),[O,T]=e.useState(!0),q=e.useMemo(()=>{if(!F)return!1;return $*P<v.length},[$,P,F,v.length]);e.useEffect(()=>{try{Object.keys(g).length&&O&&(T(!1),L.setFieldsValue({...g}))}catch(e){}},[g,L,O]);const A={...f};delete A.type,delete A.isSearch,delete A.isReset,delete A.isLoading,delete A.handleFinish;const D=e=>(null==e?void 0:e.labelWidth)?{style:{width:e.labelWidth}}:(null==e?void 0:e.labelCol)?e.labelCol:S||("grid"!==_||I?void 0:{span:6}),G=e=>(null==e?void 0:e.wrapperWidth)?{style:{width:e.wrapperWidth}}:(null==e?void 0:e.wrapperCol)?e.wrapperCol:W||("grid"!==_||I?void 0:{span:18}),H=l.jsxs("div",{className:"flex items-center flex-wrap gap-10px",children:[!!C&&l.jsx(c,{type:"primary",htmlType:"submit",className:"!mb-5px "+(I?"mr-5px":""),loading:y,icon:l.jsx(h,{}),children:B("public.search")}),!!N&&l.jsx(c,{className:"!mb-5px "+(I?"mr-5px":""),icon:l.jsx(u,{}),onClick:()=>{null==L||L.resetFields(),null==L||L.setFieldsValue(w?{...w}:{}),null==L||L.submit()},children:B("public.reset")}),k&&l.jsx("div",{className:"!mb-5px "+(I?"mr-5px":""),children:k}),"grid"===_&&!!q&&l.jsxs("div",{className:"text-12px cursor-pointer color-#1677ff hover:color-#69b1ff",onClick:()=>{z(!M)},children:[l.jsx(x,{rotate:M?180:0}),M?"收缩":"展开"]})]});return l.jsx("div",{id:"searches",style:E,className:R,children:l.jsxs(d,{layout:I?"horizontal":"inline",...A,ref:j,form:L,onFinish:e=>{if(V){let l=t(e,v);l=r(l),null==V||V(l)}},onFinishFailed:e=>{},autoComplete:"off",children:["default"===_&&l.jsxs(l.Fragment,{children:[null==v?void 0:v.map(l=>e.createElement(d.Item,{...a(l),key:`${l.name}`,className:`${(null==l?void 0:l.className)||""} !mb-5px`,labelCol:D(l),wrapperCol:G(l),valuePropName:s(l.component)},i(B,l))),H]}),"grid"===_&&l.jsxs(m,{wrap:!0,className:"w-full",children:[null==(b=(e=>{if(!q)return e;const l=$*P;for(let s=0;s<e.length;s++){const a=e[s];s<l?a.hidden=!1:a.hidden=!M}return e})(v))?void 0:b.map(e=>l.jsx("div",{style:{width:e.hidden?0:100/(I?1:$)+"%"},children:l.jsx(d.Item,{...a(e),className:`${(null==e?void 0:e.className)||""} !mb-5px`,labelCol:D(e),wrapperCol:G(e),valuePropName:s(e.component),children:i(B,e)})},`${e.name}`)),l.jsx(p,{flex:(null==v?void 0:v.length)%$===0||q?"auto":void 0,children:l.jsx(m,{justify:"flex-end",children:H})})]})]})})});export{f as B};
