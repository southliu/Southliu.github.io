import{r as e,j as t}from"./react@19.1.0.Bf1nU3Xp.js";import{g as r,c as a,u as s,a as c}from"./article.BqIlaL5J.js";import{u as o,a as i,b as n,s as d,g as m,c as p,d as l,A as _,E as f,e as j,f as b}from"./index.CKK7LeYB.js";import{r as u}from"./react-activation@0.13.4_react@19.1.0.BvJSoyqx.js";import{u as h}from"./react-i18next@15.6.1_i18nex_8494df3c5789a08eaaa9660264635b87.GGzZsTB5.js";import{u as g}from"./react-router@7.5.1_react-do_f1fae9f534dc821347354a2fafb7f11e.C5Pd8Czz.js";import{c as v,B as y}from"./BaseContent.BkCe28vJ.js";import{a as x}from"./componentMap.BziD0Wfr.js";import{W as k}from"./index.CFB9q53K.js";import{B as w}from"./BaseCard.D7gb9fDy.js";import{B as $}from"./BaseForm.C-On1bUd.js";import{B as z,s as B,f as E}from"./antd@5.26.6_react-dom@19.1.0_react@19.1.0__react@19.1.0.BblooLD6.js";import"./@babel_runtime@7.28.2.ESkOsrAB.js";import"./CustomizeInput.BCvWMOts.js";import"./react-dom@19.1.0_react@19.1.0.YCAX-SIy.js";import"./scheduler@0.26.0.6ULW7vKx.js";import"./nprogress@0.2.0.vSLqG9bG.js";import"./i18next-http-backend@3.0.2.CGpCffex.js";import"./@loadable_component@5.16.7_react@19.1.0.BU-SVdOh.js";import"./hoist-non-react-statics@3.3.2.S0Qivtn-.js";import"./react-is@16.13.1.yJGO6Amu.js";import"./crypto-js@4.2.0.BZwiXaet.js";import"./axios@1.11.0.C-1G2k3o.js";import"./lodash@4.17.21.B1rlCWCX.js";import"./zustand@5.0.6_@types_react@19.1.8_immer@9.0.21_react@19.1.0.PwgWJlpo.js";import"./@iconify_react@5.2.1_react@19.1.0.y_lUXvtW.js";import"./react-draggable@4.5.0_react_5b457deaca8ba07185000f54b516fcfc.uR38vTGO.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./clsx@2.1.1.CVo1TNh1.js";import"./@ant-design_icons@6.0.0_rea_d228a620a85a912b58178c44a57a12f1.BPuMA4if.js";import"./@ant-design_icons-svg@4.4.2.y_0dq8WL.js";import"./classnames@2.5.1.D0YHNMe_.js";import"./@ant-design_colors@8.0.0.fIX020g4.js";import"./@ant-design_fast-color@3.0.0.ii8f2EEn.js";import"./@rc-component_util@1.2.2_re_c2fb801bb067f7b71be40f4f7687a74f.CRiJnCF8.js";import"./react-is@18.3.1.USR0mOhp.js";import"./@dnd-kit_core@6.3.1_react-d_48e15fdc53b9c3dc1f051ea52fd46531.cjHHetj7.js";import"./@dnd-kit_utilities@3.2.2_react@19.1.0.BT_43y6n.js";import"./@dnd-kit_accessibility@3.1.1_react@19.1.0.BlpDSSbT.js";import"./@dnd-kit_sortable@10.0.0_@d_ca31ff33770f0dd3644b046cb0a7f8c3.zpanj8Bp.js";import"./@ant-design_cssinjs@1.24.0__59bde1acf2b2389f2a79b6173d0b48f7.aliEN-A2.js";import"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0__react@19.1.0.cDkafaIC.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.C44NkLFc.js";import"./i18next@25.3.2_typescript@5.8.3.fGy_LSgb.js";import"./i18next-browser-languagedetector@8.2.0.DrNbJIFn.js";import"./@ant-design_v5-patch-for-re_0cb8b4bdab5c748cd1da17fd59f59937.1qA-qfDR.js";import"./dayjs@1.11.13.AZtgMeec.js";import"./@ant-design_cssinjs-utils@1_83fbcff203967c213483d8d9d46bebe5.CCClgIte.js";import"./rc-resize-observer@1.4.3_re_83d0d5e9c67ffebc59212995af3a6882.CY0Jp_Qm.js";import"./resize-observer-polyfill@1.5.1.C7U_o75s.js";import"./rc-motion@2.9.5_react-dom@19.1.0_react@19.1.0__react@19.1.0.Dtmeacfz.js";import"./@rc-component_color-picker@_f45412b33e75a7ab4455f2ec6eef559b.Bnr4pML8.js";import"./@ant-design_fast-color@2.0.6.BPm0FsFr.js";import"./rc-tooltip@6.4.0_react-dom@19.1.0_react@19.1.0__react@19.1.0.D6t0Xd74.js";import"./@rc-component_trigger@2.3.0_044bfe5f4c2b866852dc402c66a3f2bd.lYjbKNTl.js";import"./@rc-component_portal@1.1.2__8aa033335f6bdcfb032385b1cecccec1.D3hlDWeL.js";import"./rc-overflow@1.4.1_react-dom_f12d57858f12593efa67d1ea99a8b899.1dKWi7nA.js";import"./rc-picker@4.11.3_dayjs@1.11_cd1b3eb56345de03aa7ecd21c8571675.CEWekHln.js";import"./@ant-design_icons@5.6.1_rea_387e90bbac0589a642e6a72f57595afa.DzSPFW1Z.js";import"./@ant-design_colors@7.2.1.VqVQu4RI.js";import"./rc-tabs@15.6.1_react-dom@19.1.0_react@19.1.0__react@19.1.0.jb4H2aKC.js";import"./rc-dropdown@4.2.1_react-dom_31f41080cd1260f5e678b0aee87ce444.DLYIkXpC.js";import"./rc-menu@9.16.1_react-dom@19.1.0_react@19.1.0__react@19.1.0.DDTwcR8O.js";import"./rc-select@14.16.8_react-dom_5315bbfa1d4753ceb7be2443a87169b9.vMYvhSil.js";import"./rc-virtual-list@3.19.1_reac_c64a508e8f36a366c7e07e98ba4d6c19.BZnMQ2g-.js";import"./rc-input-number@9.5.0_react_c27e2cf2ad2f8c185faac2b8829e1a5a.B4Wi-W0P.js";import"./@rc-component_mini-decimal@1.1.0.YmJ1wKZk.js";import"./rc-input@1.8.0_react-dom@19.1.0_react@19.1.0__react@19.1.0.Dfwr1c0x.js";import"./rc-slider@11.1.8_react-dom@19.1.0_react@19.1.0__react@19.1.0.fBFHhp5g.js";import"./rc-drawer@7.3.0_react-dom@19.1.0_react@19.1.0__react@19.1.0.DLIhjgit.js";import"./rc-field-form@2.7.0_react-d_e940860faae641bd62a40fb82df68009.BnGJMJLA.js";import"./@rc-component_async-validator@5.0.4.DzQWEems.js";import"./rc-dialog@9.6.0_react-dom@19.1.0_react@19.1.0__react@19.1.0.CI21B7I7.js";import"./rc-textarea@1.10.1_react-do_5d36318d3ca943a1a5ff27b07b070e7c.CfmrZGUh.js";import"./rc-notification@5.6.4_react_f3167f4eaba9f35ea4ec813094c172f8.B3ApF-oO.js";import"./rc-rate@2.13.1_react-dom@19.1.0_react@19.1.0__react@19.1.0.CYFxQzuV.js";import"./rc-switch@4.1.0_react-dom@19.1.0_react@19.1.0__react@19.1.0.CLMccZZ7.js";import"./rc-table@7.51.1_react-dom@19.1.0_react@19.1.0__react@19.1.0.DMn0WZs8.js";import"./@rc-component_context@1.4.0_39a0855b668f25fd204714c5f4f2bd9c.Ch4qmDZJ.js";import"./rc-tree@5.13.1_react-dom@19.1.0_react@19.1.0__react@19.1.0.DKhiVQot.js";import"./rc-checkbox@3.5.0_react-dom_f3d72bd879aed2dfd82fb7261d53e22d.NhU4o2__.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./rc-pagination@5.1.0_react-d_0951ab27def2b3da8452695d6c73ea2b.DovIpuZS.js";import"./rc-tree-select@5.27.0_react_a59ae1b89915a17c9906c1f23f36c6bf.BWspWRCs.js";import"./rc-upload@4.9.2_react-dom@19.1.0_react@19.1.0__react@19.1.0.DIvwhoAH.js";import"./rc-progress@4.0.0_react-dom_c5009c0a0d13bc0485e86d471a08dfd2.BmKVrJTj.js";import"./cookie@1.0.2.BUTH-fPQ.js";import"./szfe-tools@0.0.0-beta.7.BFhfk_RC.js";import"./react-node-key@0.4.0_react@19.1.0.CN4RuZF0.js";import"./@wangeditor_editor@5.1.23.D7mTJwpg.js";import"./@wangeditor_editor-for-reac_986798132d23a6d450739f3eed0eaaa7.CfUQNQC4.js";function A(t){const{fatherPath:r,zhTitle:a,enTitle:s,name:c}=t,{t:j,i18n:b}=h(),{pathname:v,search:y}=g(),{setOpenKeys:x,setSelectedKeys:k}=o(e=>e),{isPhone:w,isCollapsed:$,menuList:z,permissions:B}=i(),{activeKey:E,addTabs:A,setNav:C,setActiveKey:N}=n(e=>e);e.useEffect(()=>{const e=P();d(j,e);const t=m(r);w||$||(x(t),k(r))},[]);const S=e.useCallback((e=v)=>{var t;if("/"===e||E!==v)return;const c="zh"===b.language?a:s,o=P(),i=(null==(t=p({menus:z,permissions:B,key:r}))?void 0:t.nav)||[];i.push({label:c,labelZh:a,labelEn:s});const n={label:o,labelEn:s,labelZh:a,key:v,nav:i,urlParams:y};N(n.key),C(n.nav),A(n)},[v,y]);e.useEffect(()=>{S()},[]),u.useActivate(()=>{S()});const P=()=>{let e="",t="",o="";const i=(()=>{const e=null==y?void 0:y.substring(1,y.length),t=null==e?void 0:e.split("&");for(let r=0;r<(null==t?void 0:t.length);r++){const e=t[r],a=null==e?void 0:e.split("="),s=null==a?void 0:a[0],o=null==a?void 0:a[1];if(s===c)return o}return""})(),n="zh"===b.language?a:s;if(n){const e=i?`(${i})`:"";o=`${n||_(j)}${e}`,t=`${n}${e}`}else{const e=l(z,r,b.language);o=`${n||_(j)}${e}`,t=`${f(j,i,e)}`}return e=i?t:o,e};return[]}function C(e){const{t:r}=h(),{goBack:a,handleSubmit:s,isLoading:c,children:o}=e;return t.jsxs("div",{className:"\n      w-full\n      bg\n      fixed\n      flex\n      justify-end\n      left-0\n      right-0\n      bottom-0\n      py-5px\n      px-30px\n      box-border\n      shadow\n      shadow-gray-500\n    ",children:[o,t.jsx(z,{className:"mr-10px",danger:!0,onClick:a,children:r("public.back")}),t.jsx(z,{loading:!!c,type:"primary",onClick:s,children:r("public.submit")})]})}const N={content:"<h4>初始化内容</h4>",transfer:Array.from({length:20}).map((e,t)=>({key:t.toString(),title:`content${t+1}`,description:`description of content${t+1}`})).filter(e=>Number(e.key)>10).map(e=>e.key)},S="/content/article";function P(){const{t:o}=h(),{pathname:d,search:m}=g(),p=j(m,"id"),l=e.useRef(p),_=e.useRef(null),[f,z]=e.useState(!1),[P,T]=e.useState(""),[R,F]=e.useState(N),[K,L]=B.useMessage(),{permissions:M}=i(),{dropScope:O}=u.useAliveController(),Z=n(e=>e.closeTabGoNext),q=b(e=>e.setRefreshPage);A({fatherPath:S,zhTitle:p?"编辑文章管理":"新增文章管理",enTitle:p?"Edit Article Management":"Add Article Management"});const G="/content/article",H={create:v(`${G}/create`,M),update:v(`${G}/update`,M)};e.useEffect(()=>{p?W(p):I()},[]),u.useActivate(()=>{var e;const{href:t}=window.location,r=null==(e=t.split("?")[1])?void 0:e.split("=")[1];l.current!==r&&(r?W(r):I(),l.current=r||"")}),e.useLayoutEffect(()=>{x("RichEditor",k)},[]);const I=()=>{T(""),F(N)},W=async e=>{try{T(e),z(!0);const{code:t,data:a}=await r(e);if(200!==Number(t))return;F(a)}finally{z(!1)}},D=e=>{var t;null==(t=_.current)||t.resetFields(),e&&q(!0),Z({key:d,nextPath:S,dropScope:O})};return t.jsxs(y,{isPermission:p?H.update:H.create,children:[L,t.jsx("div",{className:"!h-[calc(100vh-98px)] ",children:t.jsx(w,{children:t.jsx("div",{className:"mb-50px",children:t.jsx(E,{spinning:f,children:t.jsx($,{ref:_,list:a(o),data:R,labelCol:{span:5},handleFinish:async e=>{var t;try{z(!0);const r=()=>P?s(P,e):c(e),{code:a,message:i}=await r();if(200!==Number(a))return;K.success(i||o("public.successfulOperation")),null==(t=_.current)||t.resetFields(),D(!0)}finally{z(!1)}}})})})})}),t.jsx(C,{isLoading:f,goBack:()=>D(),handleSubmit:()=>{var e;null==(e=_.current)||e.submit()}})]})}export{P as default};
