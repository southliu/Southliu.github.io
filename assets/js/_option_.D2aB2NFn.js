import{r as e,j as t}from"./react@19.2.3.DikTGMTS.js";import{g as c,c as o,u as r,a as s}from"./article.Dyj8Ekmm.js";import{u as a,a as n,b as i,s as d,g as m,c as p,d as b,A as f,E as l,e as _,f as j}from"./index.DycFRT2z.js";import{H as u}from"./keepalive-for-react@5.0.7_r_33100828a8f90b61e9967b46b3101fcd.CBojBEsB.js";import{u as h}from"./react-i18next@16.5.1_i18nex_e0732ae603aefaca3ccb08379955d50d.BDH7beub.js";import{u as g}from"./react-router@7.11.0_react-d_9bf5140e9212b7cc8e1e4977b49a16e8.C6FPFzzv.js";import{c as x,B as v}from"./BaseContent.m6uO2aoo.js";import{B as y}from"./BaseCard.DCIFwc7r.js";import{B as k}from"./BaseForm.BvKm7on2.js";import{B as w,F as C,s as B,d as N}from"./antd@6.1.3_react-dom@19.2.3_react@19.2.3__react@19.2.3.4cbkTKMy.js";import{u as z}from"./zustand@5.0.9_@types_react@_5454f66ab05067d144a1abef0fde1e8c.BSDGg82B.js";import"./clsx@2.1.1.DMqMD_4V.js";import"./CustomizeInput.CRAfWhSy.js";import"./react-dom@19.2.3_react@19.2.3.Z7zCFVOQ.js";import"./scheduler@0.27.0.6ULW7vKx.js";import"./nprogress@0.2.0.CrEkXCuG.js";import"./i18next-http-backend@3.0.2.CrAdD4hv.js";import"./crypto-js@4.2.0.gRZQeTrA.js";import"./axios@1.13.2.DDVHPqWP.js";import"./lodash@4.17.21.CxmCRF7_.js";import"./@iconify_react@6.0.2_react@19.2.3.Cu4YUmvy.js";import"./react-draggable@4.5.0_react_38b3ec0b5b5ffe2dfcce8c9bab4916d1.ogkC2jUR.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./@ant-design_icons@6.1.0_rea_578d967b89ca52aedd84b4dfb2c6cf72.BvsHCP3s.js";import"./@ant-design_icons-svg@4.4.2.CjW3sjtx.js";import"./@ant-design_colors@8.0.0.C_9FKw7I.js";import"./@ant-design_fast-color@3.0.0.Bv-idf8E.js";import"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.4n28hD7h.js";import"./react-is@18.3.1.USR0mOhp.js";import"./is-mobile@5.0.0.D2pt-sMC.js";import"./@dnd-kit_core@6.3.1_react-d_faeaa4ec592555ff24d378ec7b025ac6.ESzEybd1.js";import"./@dnd-kit_utilities@3.2.2_react@19.2.3.Zu-YmhMD.js";import"./@dnd-kit_accessibility@3.1.1_react@19.2.3.BRj3-Usf.js";import"./@dnd-kit_sortable@10.0.0_@d_bb9a87c2c20c367037e96a5cfbc9db8c.C4Mu6ntT.js";import"./@ant-design_cssinjs@2.0.1_r_52ebc5f68c5d55a7b1a8f8a117b18eba.Cyjnjveh.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.CDtraqjp.js";import"./i18next@25.7.3_typescript@5.9.3.oPH98fpq.js";import"./i18next-browser-languagedetector@8.2.0.q5bUM8v9.js";import"./dayjs@1.11.19.DTq05uGT.js";import"./@ant-design_cssinjs-utils@2_9cdeccd52263af62f34dd9f213f921e5.Cpzm4arQ.js";import"./@babel_runtime@7.28.4.CxDHAbvQ.js";import"./@rc-component_resize-observ_a5d141e3de655ef602de0c6d9e51ffb4.BTh966e6.js";import"./@rc-component_motion@1.1.6__75bed58c5aa0279623e804b6e3100d82.CHs99PZw.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./@rc-component_pagination@1._c8c3dfc82534658d6c7c4054f0d2f69c.BVNLbJxd.js";import"./@rc-component_picker@1.9.0__52a8cb63fe1d91d00305622cb5380f6e.BU0fHHYU.js";import"./@rc-component_trigger@3.7.2_b5d51e27885fcdc381f6db89cb94580b.MgdExJH2.js";import"./@rc-component_portal@2.2.0__23d0e188c8e59a845be2370f4ba3b141.Br4DFYg2.js";import"./@rc-component_overflow@1.0._000e3b789f0a378ea10d91c90289e484.IXjUH2Cv.js";import"./@rc-component_notification@_6b5601d366b139db646993c6d2b44fe7.D4T83lZB.js";import"./@rc-component_color-picker@_b31871ba6e7583d0e0030156daa2c231.lqaII7vB.js";import"./@rc-component_collapse@1.1._228d3773bbed33f966bd3893dbe8729d.rsGAVN_9.js";import"./@rc-component_dialog@1.5.1__3a9190aeba7b200bd9ee7697ebc43c96.CmrB40uk.js";import"./@rc-component_form@1.6.0_re_b998db7a1757bdc2c2d6e65b57d3d80e.C312XoOX.js";import"./@rc-component_async-validator@5.0.4.CknKSRqr.js";import"./@rc-component_select@1.4.0__72937b420adc00cfcd381e86fe79d4ff.Bo7oqJz8.js";import"./@rc-component_virtual-list@_eab7c240f5d5dcfc3960e23bede0b5bd.Ch5seBQR.js";import"./@rc-component_tooltip@1.4.0_24ce817bfa5749bd0e3c36dde530a97c.CZLFxxmN.js";import"./@rc-component_dropdown@1.0._53032f4203d2df29a251177758ef8582.CuelaFnb.js";import"./@rc-component_menu@1.2.0_re_22c4d0f32307dedeae1bf96beb63120f.BRiKyNrJ.js";import"./@rc-component_checkbox@1.0._e8e0ff7b3fc71b270e8f41769fdc08ef.Cogk6b8G.js";import"./@rc-component_tabs@1.7.0_re_2e2b6a6e8158979ca118318443a5e725.BoyL777y.js";import"./@ant-design_react-slick@2.0_7e7eaf031d783e1bf442b33d4a0ab896.Bdn3fO8F.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./json2mq@0.2.0.5yP7-Ybv.js";import"./string-convert@0.2.1.CCzxSb8Y.js";import"./@rc-component_cascader@1.10_6ebff9b01a4e20f17bf5315b0fdf89e4.4BtdbQBm.js";import"./@rc-component_tree@1.1.0_re_16b118318364c8e3af872a05fdf7f126.CdFo8lxp.js";import"./@rc-component_segmented@1.3_21ca68187e5dbc0fdd04919b00514bb2.DRxbULEQ.js";import"./@rc-component_input-number@_8344498727e4684fb6e2c8a86fda3337.DaqMtc1u.js";import"./@rc-component_mini-decimal@1.1.0.DDB4x329.js";import"./@rc-component_input@1.1.2_r_6672dd2a1daa1d4fb8167692335bdc32.Cwueeivh.js";import"./@rc-component_slider@1.0.1__528977580e75fd5a617258a02a5eb89f.CwBoAl9W.js";import"./@rc-component_drawer@1.3.0__a3d615bbff00e7f3d4a92805dfb7be48.BW0MpQFw.js";import"./@rc-component_image@1.5.3_r_dcb3ab75ae693752d40558f143f9ffbd.BT5WuPOb.js";import"./@rc-component_textarea@1.1._509480b13cbc5aaa7fb930d30d5446b8.CeaP0cAz.js";import"./@rc-component_mentions@1.6._78da067fea4317b9a061ddd8114d8e2c.ztYiycuW.js";import"./@rc-component_progress@1.0._690d9711439beca726bc73677291eda2.CPE6Bknq.js";import"./@rc-component_qrcode@1.1.1__0f9c8c9acd773e58dc69db4d81fa0587.DmD-Q-MG.js";import"./@rc-component_rate@1.0.1_re_607aeea99259c177b103a2159d2187ff.CFylYbuO.js";import"./@rc-component_steps@1.2.2_r_676c9cf2ee63b15ecfba1a57f7fa461f.Cuke5MNo.js";import"./@rc-component_switch@1.0.3__79f884f0de666becb31c50b27a07c8e0.CRhPj_mA.js";import"./@rc-component_table@1.9.0_r_af629d240898c7fe2c8824967839d777.CKvv42pQ.js";import"./@rc-component_context@2.0.1_9fe36d481fc46b168d9be8c7e1532bb4.BURVtFDZ.js";import"./@rc-component_tour@2.2.1_re_c814a7862157707785c7770d3c2b3347.D_9RqNoV.js";import"./@rc-component_tree-select@1_ca468fe32827d69ce4681fdcb142e602.Bd-qudLC.js";import"./@rc-component_upload@1.1.0__a6e83aac22b2c573f173681e85b72b7b.UhjaoTzt.js";import"./@rc-component_mutate-observ_e6130eca8f32f9ca6ca6e4795e1097a7.DqdXpdEE.js";import"./use-sync-external-store@1.6.0_react@19.2.3.DPc7I-Qr.js";import"./helper.45V3kH5U.js";function E(t){const{fatherPath:c,zhTitle:o,enTitle:r,name:s}=t,{t:_,i18n:j}=h(),{pathname:x,search:v}=g(),{setOpenKeys:y,setSelectedKeys:k}=a(e=>e),{isPhone:w,isCollapsed:C,menuList:B,permissions:N}=n(),{addTabs:z,setNav:E,setActiveKey:P}=i(e=>e),S=e.useCallback(()=>{const e=F();d(_,e);const t=m(c);w||C||(y(t),k(c))},[]);e.useEffect(()=>{S()},[]);const A=e.useCallback((e=x)=>{var t;if("/"===e)return;const s="zh"===j.language?o:r,a=F(),n=(null==(t=p({menus:B,permissions:N,key:c}))?void 0:t.nav)||[];n.push({label:s,labelZh:o,labelEn:r});const i={label:a,labelEn:r,labelZh:o,key:x,nav:n,urlParams:v};P(i.key),E(i.nav),z(i)},[x,v]);e.useEffect(()=>{A()},[]),u(()=>{A(),S()},[]);const F=()=>{let e="",t="",a="";const n=(()=>{const e=null==v?void 0:v.substring(1,v.length),t=null==e?void 0:e.split("&");for(let c=0;c<(null==t?void 0:t.length);c++){const e=t[c],o=null==e?void 0:e.split("="),r=null==o?void 0:o[0],a=null==o?void 0:o[1];if(r===s)return a}return""})(),i="zh"===j.language?o:r;if(i){const e=n?"(".concat(n,")"):"";a="".concat(i||f(_)).concat(e),t="".concat(i).concat(e)}else{const e=b(B,c,j.language);a="".concat(i||f(_)).concat(e),t="".concat(l(_,n,e))}return e=n?t:a,e};return[]}function P(e){const{t:c}=h(),{goBack:o,handleSubmit:r,isLoading:s,children:a}=e;return t.jsxs("div",{className:"\n        w-full\n        bg\n        fixed\n        flex\n        justify-end\n        left-0\n        right-0\n        bottom-0\n        py-5px\n        px-30px\n        box-border\n        shadow\n        shadow-gray-500\n    ",children:[a,t.jsx(w,{className:"mr-10px",danger:!0,onClick:o,children:c("public.back")}),t.jsx(w,{loading:!!s,type:"primary",onClick:r,children:c("public.submit")})]})}const S={content:"<h4>初始化内容</h4>"},A="/content/article";function F(){const{t:a}=h(),{pathname:d,search:m}=g(),p=_(m,"id"),b=e.useRef(p),f=e.useRef(null),[l]=C.useForm(),[w,F]=e.useState(!1),[T,R]=e.useState(""),[q,K]=e.useState(S),[L,M]=B.useMessage(),{permissions:O}=n(),Z=j(z(e=>e.aliveRef)),G=i(e=>e.closeTabGoNext),H=j(e=>e.setRefreshPage);E({fatherPath:A,zhTitle:p?"编辑文章管理":"新增文章管理",enTitle:p?"Edit Article Management":"Add Article Management"});const I="/content/article",D={create:x("".concat(I,"/create"),O),update:x("".concat(I,"/update"),O)};e.useEffect(()=>{p?Q(p):J()},[]),u(()=>{var e;const{href:t}=window.location,c=null==(e=t.split("?")[1])?void 0:e.split("=")[1];b.current!==c&&(c?Q(c):J(),b.current=c||"")},[]);const J=()=>{R(""),K(S)},Q=async e=>{try{R(e),F(!0);const{code:t,data:o}=await c(e);if(200!==Number(t))return;K(o)}finally{F(!1)}},U=e=>{var t,c;null==(t=f.current)||t.resetFields(),e&&H(!0),G({key:d,nextPath:A,dropScope:null==(c=Z.current)?void 0:c.destroy})};return t.jsxs(v,{isPermission:p?D.update:D.create,children:[M,t.jsx("div",{className:"!h-[calc(100vh-98px)] ",children:t.jsx(y,{children:t.jsx("div",{className:"mt-20px mb-50px",children:t.jsx(N,{spinning:w,children:t.jsx(k,{form:l,ref:f,list:o(a),data:q,labelCol:{span:5},handleFinish:async e=>{var t;try{F(!0);const c=()=>T?r(T,e):s(e),{code:o,message:n}=await c();if(200!==Number(o))return;L.success(n||a("public.successfulOperation")),null==(t=f.current)||t.resetFields(),U(!0)}finally{F(!1)}}})})})})}),t.jsx(P,{isLoading:w,goBack:()=>U(),handleSubmit:()=>{var e;null==(e=f.current)||e.submit()}})]})}export{F as default};
