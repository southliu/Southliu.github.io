var e=Object.defineProperty,s=(s,n,t)=>((s,n,t)=>n in s?e(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t)(s,"symbol"!=typeof n?n+"":n,t);import{r as n,j as t}from"./react@19.2.3.DikTGMTS.js";import{a as r,u as a,K as c,g as o,L as i,j as l,M as d,N as m,f as u,b as p,c as f,O as b,P as x,Q as j,R as h,S as g,U as v,V as y,W as _,X as k,Y as w,s as N,Z as C,p as A,_ as E}from"./index.TNQj79ie.js";import{I as O}from"./@iconify_react@6.0.2_react@19.2.3.Cu4YUmvy.js";import{l as T}from"./lodash@4.17.21.CxmCRF7_.js";import{c as M,L as S}from"./keepalive-for-react@5.0.7_r_33100828a8f90b61e9967b46b3101fcd.CBojBEsB.js";import{a as X}from"./is.BeBpkxAQ.js";import{u as R}from"./zustand@5.0.9_@types_react@_5454f66ab05067d144a1abef0fde1e8c.BSDGg82B.js";import{u as I}from"./react-i18next@16.5.1_i18nex_e0732ae603aefaca3ccb08379955d50d.7gdm5IiX.js";import{n as P,T as K,M as L,I as B,F as z,A as W,D as q,s as H,o as D,p as U,B as V,q as F}from"./antd@6.1.3_react-dom@19.2.3_react@19.2.3__react@19.2.3.Ch9cb9eU.js";import{a as J,u as Q,b as Z}from"./react-router@7.11.0_react-d_9bf5140e9212b7cc8e1e4977b49a16e8.C6FPFzzv.js";import{B as Y}from"./BaseModal.D_x-l5bz.js";import{a2 as G,a3 as $,a4 as ee,a5 as se,a6 as ne,a0 as te,R as re,a7 as ae,j as ce,a8 as oe}from"./@ant-design_icons@6.1.0_rea_578d967b89ca52aedd84b4dfb2c6cf72.Dcsljnpe.js";import{c as ie,D as le,d as de,P as me}from"./@dnd-kit_core@6.3.1_react-d_faeaa4ec592555ff24d378ec7b025ac6.ESzEybd1.js";import{u as ue,a as pe,S as fe,h as be}from"./@dnd-kit_sortable@10.0.0_@d_bb9a87c2c20c367037e96a5cfbc9db8c.C_1onwqd.js";import{C as xe}from"./@dnd-kit_utilities@3.2.2_react@19.2.3.Zu-YmhMD.js";import je from"./403.BtpfvKZ7.js";import{c as he}from"./log.BO2BXTXn.js";import{m as ge}from"./framer-motion@12.34.0_react_54b4d59440336a4dac20174c0fbd7c1c.DmWxBnAd.js";import"./clsx@2.1.1.DMqMD_4V.js";import"./react-dom@19.2.3_react@19.2.3.Z7zCFVOQ.js";import"./scheduler@0.27.0.6ULW7vKx.js";import"./i18next-http-backend@3.0.2.CrAdD4hv.js";import"./nprogress@0.2.0.CrEkXCuG.js";import"./crypto-js@4.2.0.gRZQeTrA.js";import"./axios@1.13.2.DDVHPqWP.js";import"./@ant-design_cssinjs@2.0.1_r_52ebc5f68c5d55a7b1a8f8a117b18eba.Cyjnjveh.js";import"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.4n28hD7h.js";import"./react-is@18.3.1.USR0mOhp.js";import"./is-mobile@5.0.0.D2pt-sMC.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.CDtraqjp.js";import"./i18next@25.7.3_typescript@5.9.3.oPH98fpq.js";import"./i18next-browser-languagedetector@8.2.0.q5bUM8v9.js";import"./dayjs@1.11.19.DTq05uGT.js";import"./web-vitals@5.1.0.C9lpl2zp.js";import"./@sentry_react@10.38.0_react@19.2.3.BWOZVc26.js";import"./@sentry_core@10.38.0.B-bj8hQP.js";import"./@sentry_browser@10.38.0.DJM_bMq3.js";import"./@sentry-internal_browser-utils@10.38.0.Bc5JQQFT.js";import"./@sentry-internal_replay@10.38.0.4OC3EoWI.js";import"./@ant-design_cssinjs-utils@2_9cdeccd52263af62f34dd9f213f921e5.Cpzm4arQ.js";import"./@babel_runtime@7.28.4.CxDHAbvQ.js";import"./@rc-component_resize-observ_a5d141e3de655ef602de0c6d9e51ffb4.BTh966e6.js";import"./@ant-design_fast-color@3.0.0.Bv-idf8E.js";import"./@ant-design_colors@8.0.0.C_9FKw7I.js";import"./@ant-design_icons-svg@4.4.2.CjW3sjtx.js";import"./@rc-component_motion@1.1.6__75bed58c5aa0279623e804b6e3100d82.CHs99PZw.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./@rc-component_pagination@1._c8c3dfc82534658d6c7c4054f0d2f69c.BVNLbJxd.js";import"./@rc-component_picker@1.9.0__52a8cb63fe1d91d00305622cb5380f6e.BU0fHHYU.js";import"./@rc-component_trigger@3.7.2_b5d51e27885fcdc381f6db89cb94580b.MgdExJH2.js";import"./@rc-component_portal@2.2.0__23d0e188c8e59a845be2370f4ba3b141.Br4DFYg2.js";import"./@rc-component_overflow@1.0._000e3b789f0a378ea10d91c90289e484.IXjUH2Cv.js";import"./@rc-component_notification@_6b5601d366b139db646993c6d2b44fe7.D4T83lZB.js";import"./@rc-component_color-picker@_b31871ba6e7583d0e0030156daa2c231.lqaII7vB.js";import"./@rc-component_collapse@1.1._228d3773bbed33f966bd3893dbe8729d.rsGAVN_9.js";import"./@rc-component_dialog@1.5.1__3a9190aeba7b200bd9ee7697ebc43c96.CmrB40uk.js";import"./@rc-component_form@1.6.0_re_b998db7a1757bdc2c2d6e65b57d3d80e.C312XoOX.js";import"./@rc-component_async-validator@5.0.4.CknKSRqr.js";import"./@rc-component_select@1.4.0__72937b420adc00cfcd381e86fe79d4ff.Bo7oqJz8.js";import"./@rc-component_virtual-list@_eab7c240f5d5dcfc3960e23bede0b5bd.Ch5seBQR.js";import"./@rc-component_tooltip@1.4.0_24ce817bfa5749bd0e3c36dde530a97c.CZLFxxmN.js";import"./@rc-component_dropdown@1.0._53032f4203d2df29a251177758ef8582.CuelaFnb.js";import"./@rc-component_menu@1.2.0_re_22c4d0f32307dedeae1bf96beb63120f.BRiKyNrJ.js";import"./@rc-component_checkbox@1.0._e8e0ff7b3fc71b270e8f41769fdc08ef.Cogk6b8G.js";import"./@rc-component_tabs@1.7.0_re_2e2b6a6e8158979ca118318443a5e725.BoyL777y.js";import"./@ant-design_react-slick@2.0_7e7eaf031d783e1bf442b33d4a0ab896.Bdn3fO8F.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./json2mq@0.2.0.5yP7-Ybv.js";import"./string-convert@0.2.1.CCzxSb8Y.js";import"./@rc-component_cascader@1.10_6ebff9b01a4e20f17bf5315b0fdf89e4.4BtdbQBm.js";import"./@rc-component_tree@1.1.0_re_16b118318364c8e3af872a05fdf7f126.CdFo8lxp.js";import"./@rc-component_segmented@1.3_21ca68187e5dbc0fdd04919b00514bb2.DRxbULEQ.js";import"./@rc-component_input-number@_8344498727e4684fb6e2c8a86fda3337.DaqMtc1u.js";import"./@rc-component_mini-decimal@1.1.0.DDB4x329.js";import"./@rc-component_input@1.1.2_r_6672dd2a1daa1d4fb8167692335bdc32.Cwueeivh.js";import"./@rc-component_slider@1.0.1__528977580e75fd5a617258a02a5eb89f.CwBoAl9W.js";import"./@rc-component_drawer@1.3.0__a3d615bbff00e7f3d4a92805dfb7be48.BW0MpQFw.js";import"./@rc-component_image@1.5.3_r_dcb3ab75ae693752d40558f143f9ffbd.BT5WuPOb.js";import"./@rc-component_textarea@1.1._509480b13cbc5aaa7fb930d30d5446b8.CeaP0cAz.js";import"./@rc-component_mentions@1.6._78da067fea4317b9a061ddd8114d8e2c.ztYiycuW.js";import"./@rc-component_progress@1.0._690d9711439beca726bc73677291eda2.CPE6Bknq.js";import"./@rc-component_qrcode@1.1.1__0f9c8c9acd773e58dc69db4d81fa0587.DmD-Q-MG.js";import"./@rc-component_rate@1.0.1_re_607aeea99259c177b103a2159d2187ff.CFylYbuO.js";import"./@rc-component_steps@1.2.2_r_676c9cf2ee63b15ecfba1a57f7fa461f.Cuke5MNo.js";import"./@rc-component_switch@1.0.3__79f884f0de666becb31c50b27a07c8e0.CRhPj_mA.js";import"./@rc-component_table@1.9.0_r_af629d240898c7fe2c8824967839d777.CKvv42pQ.js";import"./@rc-component_context@2.0.1_9fe36d481fc46b168d9be8c7e1532bb4.BURVtFDZ.js";import"./@rc-component_tour@2.2.1_re_c814a7862157707785c7770d3c2b3347.D_9RqNoV.js";import"./@rc-component_tree-select@1_ca468fe32827d69ce4681fdcb142e602.Bd-qudLC.js";import"./@rc-component_upload@1.1.0__a6e83aac22b2c573f173681e85b72b7b.UhjaoTzt.js";import"./@rc-component_mutate-observ_e6130eca8f32f9ca6ca6e4795e1097a7.DqdXpdEE.js";import"./use-sync-external-store@1.6.0_react@19.2.3.DPc7I-Qr.js";import"./react-draggable@4.5.0_react_38b3ec0b5b5ffe2dfcce8c9bab4916d1.ogkC2jUR.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./@dnd-kit_accessibility@3.1.1_react@19.2.3.BRj3-Usf.js";import"./motion-dom@12.34.0.DGkaOpyQ.js";import"./motion-utils@12.29.2.DDt8zdnb.js";const ve={header:"_header_1q9is_1","header-close-menu":"_header-close-menu_1q9is_14","header-driver":"_header-driver_1q9is_17",menu:"_menu_1q9is_20","menu-close":"_menu-close_1q9is_28",con:"_con_1q9is_31","con-close-menu":"_con-close-menu_1q9is_38","con-maximize":"_con-maximize_1q9is_42","header-none":"_header-none_1q9is_47",none:"_none_1q9is_51","menu-none":"_menu-none_1q9is_54","layout-tabs":"_layout-tabs_1q9is_58"};const ye=n.memo(function(){const e=J(),{t:s,i18n:u}=I(),{pathname:p}=Q(),{isMaximize:f,isCollapsed:b,isPhone:x,openKeys:j,selectedKeys:h,permissions:g,menuList:v}=r(),{toggleCollapsed:y,setSelectedKeys:_}=a(R(e=>({toggleCollapsed:e.toggleCollapsed,setSelectedKeys:e.setSelectedKeys}))),[k,w]=n.useState(j||[]),[N,C]=n.useState(h?[h]:[]),A=n.useCallback(e=>(null==e?void 0:e.length)?e.map(e=>{var s;const n={...e};return(null==e?void 0:e.icon)&&(n.icon=t.jsx(O,{icon:e.icon})),(null==(s=null==e?void 0:e.children)?void 0:s.length)&&(n.children=A(e.children)),n}):[],[]),E=n.useMemo(()=>{if(0===g.length||0===v.length)return[];const e=c(v,g);return A(e)},[v,g,A,u.language]);n.useEffect(()=>{const e=o(p);w(e),C([p]),_(p)},[p,_]),n.useEffect(()=>{h&&C([h])},[h]);const T=n.useCallback(s=>{e(s)},[e]),M=n.useCallback(()=>{y(!0)},[y]),S=n.useCallback(({key:s})=>{s!==p&&(x&&M(),X(s)?window.open(s,"_blank"):(C([s]),_(s),requestAnimationFrame(()=>{e(s)})))},[p,x,M,_,e]),K=n.useCallback((e,s)=>e.every((e,n)=>e===s[n]),[]),L=n.useCallback(e=>{const s=[];if(e.length>0){const n=e[e.length-1],t=i(n);s.push(n);for(let r=e.length-2;r>=0;r--){const n=i(e[r]);K(n,t)&&s.unshift(e[r])}}w(s)},[K]),B=n.useCallback(()=>{const e=l(E,g);T(e),x&&M()},[E,g,T,x,M]),z=n.useMemo(()=>d(E),[E]),W=n.useMemo(()=>"\n      transition-all\n      overflow-auto\n      z-2\n      ".concat(ve.menu,"\n      ").concat(b?ve["menu-close"]:"","\n      ").concat(f||x&&b?ve["menu-none"]:"","\n      ").concat(x?"!z-1002":"","\n    "),[b,f,x]),q=n.useMemo(()=>"\n      text-white\n      flex\n      content-center\n      px-5\n      py-2\n      cursor-pointer\n      ".concat(b?"justify-center":"","\n    "),[b]),H=n.useMemo(()=>"\n      text-white\n      ml-3\n      text-xl\n      font-bold\n      truncate\n      ".concat(b?"hidden":"","\n    "),[b]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:W,children:[t.jsxs("div",{className:q,onClick:B,children:[t.jsx("img",{src:m,width:30,height:30,className:"object-contain",alt:"logo"}),t.jsx("span",{className:H,children:s("public.currentName")})]}),t.jsx(P,{id:"layout-menu",className:"z-1000",selectedKeys:N,openKeys:k,mode:"inline",theme:"dark",forceSubMenuRender:!0,inlineCollapsed:!x&&b,items:z,onClick:S,onOpenChange:L})]}),x&&!b&&t.jsx("div",{className:"\n            ".concat(ve.cover,"\n            fixed\n            w-full\n            h-full\n            bg-gray-500\n            bg-opacity-10\n            z-1001\n          "),onClick:M})]})});function _e(){const{t:e}=I(),[s,n]=function(){const{isFullscreen:e}=r(),s=u(e=>e.setFullscreen);return[e,()=>{var n;return!e&&(null==(n=document.documentElement)?void 0:n.requestFullscreen)?(document.documentElement.requestFullscreen(),s(!0),!0):e&&(null==document?void 0:document.exitFullscreen)?(document.exitFullscreen(),s(!1),!0):void 0}]}();return t.jsx(K,{title:e(s?"public.exitFullscreen":"public.fullScreen"),children:t.jsxs("div",{className:"flex items-center justify-center text-lg mr-3 cursor-pointer",onClick:n,children:[t.jsx(O,{icon:"gridicons-fullscreen-exit",style:{display:s?"block":"none"}}),t.jsx(O,{icon:"gridicons-fullscreen",style:{display:s?"none":"block"}})]})})}function ke(e){const{list:s,active:c,onCancel:i,changActive:l}=e,{t:d,i18n:m}=I(),{permissions:u,menuList:b}=r(),{addTabs:x,setActiveKey:j}=p(e=>e),h=a(e=>e.setOpenKeys),g=J(),v=m.language;return t.jsxs(t.Fragment,{children:[!(null==s?void 0:s.length)&&t.jsxs("div",{className:"flex flex-col items-center pt-5 text-warm-gray-400",children:[t.jsx(O,{className:"text-40px",icon:"mdi:archive-cancel-outline"}),t.jsx("span",{className:"mt-1",children:d("public.notSearchContent")})]}),(null==s?void 0:s.length)>0&&t.jsx("div",{className:"mt-5",children:null==s?void 0:s.map(e=>{var s;return t.jsxs("div",{className:"\n                h-56px\n                mt-8px\n                px-14px\n                rounded-4px\n                cursor-pointer\n                flex\n                items-center\n                justify-between\n                shadow-md\n                border\n                border-light-500\n                ".concat(c===e.key?"bg-blue-500 text-white":"","\n              "),onClick:()=>(e=>{g(e);const s=f({menus:b,permissions:u,key:e});s&&x(s),j(e);const n=o(e);h(n),i()})(e.key),onMouseEnter:()=>{return s=e.key,void l(s);var s},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(O,{className:"text-lg mr-1",icon:"gg:menu-boxed"}),e.nav&&(null==(s=e.nav)?void 0:s.length)>0&&e.nav.map((e,s)=>t.jsxs(n.Fragment,{children:[s>0&&t.jsx("span",{className:"mx-5px",children:">"}),t.jsx("span",{children:e})]},e)),!e.nav&&t.jsx("span",{children:"en"===v?e.labelEn:e.label})]}),t.jsx(O,{className:"icon text-20px p-2px mr-5px",icon:"ant-design:enter-outlined"})]},e.key)})})]})}const we="_icon_1eshe_1";function Ne(){const{t:e}=I();return t.jsxs("div",{className:"flex items-center text-dark-50",children:[t.jsxs("span",{className:"mr-14px flex items-center",children:[t.jsx(O,{className:"".concat(we," text-20px p-2px mr-5px"),icon:"ant-design:enter-outlined"}),t.jsx("span",{children:e("public.confirm")})]}),t.jsxs("span",{className:"mr-14px flex items-center",children:[t.jsx(O,{className:"".concat(we," text-20px p-2px mr-5px"),icon:"mdi-arrow-up-thin"}),t.jsx(O,{className:"".concat(we," text-20px p-2px mr-5px"),icon:"mdi-arrow-down-thin"}),t.jsx("span",{children:e("public.switch")})]}),t.jsxs("span",{className:"flex items-center",children:[t.jsx(O,{className:"".concat(we," text-20px p-2px mr-5px"),icon:"mdi:keyboard-esc"}),t.jsx("span",{children:e("public.close")})]})]})}function Ce(e){const s=J(),c=n.useRef(null),{modalRef:i}=e,{t:l}=I(),{permissions:d,menuList:m}=r(),[u,x]=n.useState(""),[j,h]=n.useState(""),[g,v]=n.useState([]),[y,_]=n.useState(!1),k=a(e=>e.setOpenKeys),{addTabs:w,setActiveKey:N}=p(e=>e);n.useImperativeHandle(i,()=>({toggle:()=>{_(!y)}})),n.useLayoutEffect(()=>(y&&setTimeout(()=>{var e;null==(e=c.current)||e.focus({cursor:"end"})},0),()=>{x(""),h(""),v([])}),[y]);const C=()=>{_(!1)},A=()=>{if(j){s(j);const e=f({menus:m,permissions:d,key:j});e&&w(e),N(j);const n=o(j);k(n),C()}},E=T.debounce(e=>{var s;const n=b({menus:m,permissions:d,value:e});(null==n?void 0:n.length)?(h((null==(s=null==n?void 0:n[0])?void 0:s.key)||""),v(n)):(h(""),v([]))},200),[M]=(S={ArrowUp:()=>{if(!g.length)return null;const e=g.findIndex(e=>e.key===j);if(0===e)return null;const s=g[e-1].key;h(s)},ArrowDown:()=>{if(!g.length)return null;const e=g.length-1,s=g.findIndex(e=>e.key===j);if(s===e)return null;const n=g[s+1].key;h(n)},Enter:A},[e=>{var s,n,t,r,a;switch(e.key){case"ArrowUp":null==(s=S.ArrowUp)||s.call(S);break;case"ArrowDown":null==(n=S.ArrowDown)||n.call(S);break;case"ArrowLeft":null==(t=S.ArrowLeft)||t.call(S);break;case"ArrowRight":null==(r=S.ArrowRight)||r.call(S);break;case"Enter":null==(a=S.Enter)||a.call(S)}}]);var S;return n.useEffect(()=>{if(g.length)return window.addEventListener("keydown",M),()=>{window.removeEventListener("keydown",M)}},[g,j,M]),t.jsxs(L,{className:"rounded-100px",open:y,closable:!1,onCancel:C,footer:t.jsx(Ne,{}),children:[t.jsx(B,{ref:c,value:u,placeholder:l("public.menuSearchPlaceholder"),allowClear:!0,prefix:t.jsx(O,{className:"text-lg text-warm-gray-400",icon:"ant-design:search-outlined"}),onChange:e=>{const{value:s}=e.target;x(s),E(s)},onPressEnter:A}),t.jsx(ke,{list:g,active:j,onCancel:C,changActive:e=>{h(e)}})]})}function Ae(){const{t:e}=I(),s=n.useRef(null);return t.jsxs(t.Fragment,{children:[t.jsx(K,{title:e("public.search"),children:t.jsx(O,{className:"flex items-center justify-center text-lg mr-3 cursor-pointer",icon:"uil-search",onClick:()=>{var e;null==(e=s.current)||e.toggle()}})}),t.jsx(Ce,{modalRef:s})]})}function Ee(){return t.jsx(K,{title:"Github",children:t.jsx("div",{onClick:()=>{window.open("https://github.com/southliu/react-admin")},children:t.jsx(O,{className:"flex items-center justify-center text-lg mr-3 cursor-pointer",icon:"mdi:github"})})})}const Oe=()=>{const[,,e]=j(),s=u(R(e=>e.aliveRef)),{closeAllTab:n,setActiveKey:t}=p(e=>e),r=x(e=>e.setPermissions),c=a(e=>e.setMenuList),o=x(e=>e.clearInfo),i=J(),l=Q();return[()=>{var a;o(),n(),t(""),c([]),r([]),e(),null==(a=s.current)||a.destroyAll(),i("/login?redirect=".concat(l.pathname).concat(l.search))}]};function Te(e){const{passwordRef:s}=e,{t:r}=I(),[a]=z.useForm(),[c]=Oe(),[o,i]=n.useState(!1),[l,d]=n.useState(!1);n.useImperativeHandle(s,()=>({open:()=>{i(!0)}}));const m=()=>{i(!1),null==a||a.resetFields()};return t.jsx(Y,{title:r("public.changePassword"),open:o,confirmLoading:l,onOk:()=>{null==a||a.submit()},onCancel:()=>m(),children:t.jsxs(z,{name:"UpdatePassword",form:a,labelWrap:!0,labelCol:{span:5},wrapperCol:{span:19},onFinish:async e=>{if(e.newPassword!==e.confirmPassword)return v.warning({content:r("login.confirmPasswordMessage"),key:"confirmPassword"});try{d(!0);const{code:s,message:n}=await y(e);200===Number(s)&&(m(),v.success(n),c())}finally{d(!1)}},autoComplete:"off",children:[t.jsx(z.Item,{label:r("login.oldPassword"),name:"oldPassword",rules:[{required:!0,message:r("public.pleaseEnter",{name:r("login.password")})},h(r)],children:t.jsx(g,{})}),t.jsx(z.Item,{label:r("login.newPassword"),name:"newPassword",rules:[{required:!0,message:r("public.pleaseEnter",{name:r("login.password")})},h(r)],children:t.jsx(g,{})}),t.jsx(z.Item,{label:r("login.confirmPassword"),name:"confirmPassword",rules:[{required:!0,message:r("public.pleaseEnter",{name:r("login.confirmPassword")})},h(r)],children:t.jsx(g,{})})]})})}function Me(e){const{className:s,list:a}=e,{i18n:c}=I(),{isPhone:o}=r(),[i,l]=n.useState([]),d=n.useCallback(e=>{const s=[];if(!(null==e?void 0:e.length))return[];const n=c.language;for(let t=0;t<(null==e?void 0:e.length);t++){const r=null==e?void 0:e[t],a="en"===n?r.labelEn:r.labelZh;s.push({title:a||""})}return s},[c.language]);return n.useEffect(()=>{l(d(a))},[d,a]),n.useMemo(()=>t.jsx(t.Fragment,{children:!o&&t.jsx("div",{className:"".concat(s," flex items-center text-truncate ellipsis break-all"),children:null==i?void 0:i.map((e,s)=>t.jsxs("span",{children:[0!==s&&t.jsx("span",{className:"px-4px color-#000073 breadcrumb-separator",children:"/"}),t.jsx("span",{className:"px-4px ".concat(s!==i.length-1?"breadcrumb-separator":""),children:e.title})]},s))})}),[i])}const Se=n.memo(function(){const[e]=Oe(),{t:s}=I(),{modal:c}=W.useApp(),{isCollapsed:o,isMaximize:i,username:l,nav:d}=r(),m=n.useRef(null),u=a(e=>e.toggleCollapsed),p=[{key:"password",label:t.jsx("span",{children:s("public.changePassword")}),icon:t.jsx(G,{className:"mr-1"})},{key:"logout",label:t.jsx("span",{children:s("public.signOut")}),icon:t.jsx($,{className:"mr-1"})}],f=e=>{var s;switch(e.key){case"password":null==(s=m.current)||s.open();break;case"logout":b()}},b=()=>{c.confirm({title:s("public.kindTips"),icon:t.jsx(ne,{}),content:s("public.signOutMessage"),onOk(){e()}})},x=()=>n.useMemo(()=>t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ee,{}),t.jsx(Ae,{}),t.jsx(_e,{}),t.jsx(_,{}),t.jsx(k,{}),t.jsx(q,{className:"min-w-50px",menu:{items:p,onClick:f},children:t.jsxs("div",{className:"ant-dropdown-link flex items-center cursor-pointer",onClick:e=>e.preventDefault(),children:[t.jsx("img",{src:"data:image/png;base64,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",width:27,height:27,alt:"Avatar",className:"rounded-1/2 overflow-hidden object-cover bg-light-500"}),t.jsx("span",{className:"ml-2 text-15px min-w-50px truncate",children:l||"south-admin"})]})})]}),[l]),j=()=>t.jsxs("div",{className:"text-lg cursor-pointer",onClick:()=>u(!o),children:[o&&t.jsx(ee,{}),!o&&t.jsx(se,{})]});return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"\n          border-bottom\n          flex\n          items-center\n          justify-between\n          px-6\n          py-6px\n          box-border\n          transition-all\n          ".concat(ve["header-driver"],"\n          ").concat(i?ve.none:"","\n        "),children:[t.jsxs("div",{className:"flex item-center",children:[t.jsx(j,{}),t.jsx(Me,{className:"ml-15px",list:d})]}),t.jsx(x,{})]}),t.jsx(Te,{passwordRef:m})]})}),Xe=({...e})=>{const{attributes:s,listeners:t,setNodeRef:r,transform:a,transition:c}=ue({id:e["data-node-key"]}),o={...e.style,transform:xe.Translate.toString(a),transition:c,cursor:"move"};return n.cloneElement(e.children,{ref:r,style:o,...s,...t})};function Re(e){const{t:s}=I(),{activeKey:n,onOpenChange:a,handleRefresh:c}=e,{pathname:o}=Q(),{tabs:i}=r(),{closeLeft:l,closeOther:d,closeRight:m,closeTabs:f}=p(e=>e),b=u(R(e=>e.aliveRef)),x=J();return[(e=n)=>{const r=i.findIndex(s=>s.key===e);return[{key:"refresh",label:s("public.reload"),disabled:e!==o,icon:t.jsx(te,{className:"mr-5px transform rotate-270"})},{key:"close_current",label:s("public.closeTab"),disabled:i.length<=1,icon:t.jsx(re,{className:"mr-5px"})},{key:"close_other",label:s("public.closeOther"),disabled:i.length<=1,icon:t.jsx(ae,{className:"mr-5px transform rotate-90"})},{key:"close_left",label:s("public.closeLeft"),disabled:0===r,icon:t.jsx(ce,{className:"mr-5px transform rotate-270"})},{key:"close_right",label:s("public.closeRight"),disabled:r===i.length-1,icon:t.jsx(ce,{className:"mr-5px transform rotate-90"})}]},(e,s=n)=>{var t,r,u,p;switch(null==a||a(!1),e){case"refresh":c(s);break;case"close_current":if(n===o){const e=i.findIndex(e=>e.key===n),s=i[e>0?e-1:0].key;s&&x(s)}f(s,null==(t=b.current)?void 0:t.destroy);break;case"close_other":d(s,null==(r=b.current)?void 0:r.destroy),x(s);break;case"close_left":l(s,null==(u=b.current)?void 0:u.destroy),x(s);break;case"close_right":m(s,null==(p=b.current)?void 0:p.destroy),x(s)}}]}function Ie(e){const{t:s}=I(),{isRefresh:n,onClick:r}=e;return t.jsx(K,{title:s("public.reload"),placement:"bottom",children:t.jsx(O,{className:"\n          change\n          flex\n          items-center\n          justify-center\n          text-lg\n          cursor-pointer\n          ".concat(n?"animate-spin pointer-events-none":"","\n        "),onClick:()=>r(),icon:"ant-design:reload-outlined"})})}function Pe(){const{isMaximize:e}=r(),s=p(e=>e.toggleMaximize),n=()=>{s(!e)};return t.jsxs("div",{className:"text-lg cursor-pointer",children:[t.jsx(O,{style:{display:e?"block":"none"},icon:"ant-design:compress-outlined",onClick:n}),t.jsx(O,{style:{display:e?"none":"block"},icon:"ant-design:expand-outlined",onClick:n})]})}function Ke(e){const{activeKey:s,handleRefresh:r}=e,[a,c]=n.useState(!1),o=e=>{c(e)},i={activeKey:s,onOpenChange:o,handleRefresh:r},[l,d]=Re(i);return t.jsx(q,{trigger:["click"],menu:{items:l(),onClick:e=>d(e.key)},onOpenChange:o,children:t.jsx(O,{className:"\n          flex\n          items-center\n          justify-center\n          text-lg\n          cursor-pointer\n          transition-all\n          transform\n          ".concat(a?"rotate-180":"rotate-0","\n        "),icon:"ant-design:down-outlined"})})}const Le=n.memo(function({aliveRef:e}){const{t:s,i18n:a}=I(),{pathname:c}=Q(),o=J(),i=ie(me,{activationConstraint:{distance:20,tolerance:10}}),[l,d]=H.useMessage(),[m,b]=n.useState(null),x=n.useRef(null),j=n.useRef(null),h=n.useRef(!1),g=u(e=>e.setRefresh),{tabs:v,isCloseTabsLock:y,activeKey:_,setActiveKey:k,addTabs:C,sortTabs:A,closeTabs:E,setNav:O,toggleCloseTabsLock:T,switchTabsLang:M}=p(R(e=>({tabs:e.tabs,isCloseTabsLock:e.isCloseTabsLock,activeKey:e.activeKey,setActiveKey:e.setActiveKey,addTabs:e.addTabs,sortTabs:e.sortTabs,closeTabs:e.closeTabs,setNav:e.setNav,toggleCloseTabsLock:e.toggleCloseTabsLock,switchTabsLang:e.switchTabsLang}))),{permissions:S,isMaximize:X,menuList:P}=r(),K=n.useMemo(()=>new Map(v.map(e=>[e.key,e.urlParams||""])),[v]),L=n.useCallback((e=c)=>{if(!S.length||"/"===e)return;const s=f({menus:P,permissions:S,key:e});(null==s?void 0:s.key)?(k(s.key),O(s.nav),C(s)):k(e)},[S,P,c,k,O,C]),B=n.useRef(!1);n.useEffect(()=>{L(),B.current=!0},[]),n.useEffect(()=>{if(_===c)return;const e=y?_:c;if(y){T(!1);const s=f({menus:P,permissions:S,key:e});(null==s?void 0:s.nav)&&O(s.nav);const n=K.get(e)||"";o("".concat(e).concat(n))}else L(e)},[c]),n.useEffect(()=>{const e=w(v,c);e&&N(s,e)},[v,c,s]),n.useEffect(()=>{M(a.language)},[a.language,M]);const z=n.useCallback(e=>{h.current=!0,k(e),requestAnimationFrame(()=>{const s=K.get(e)||"";o("".concat(e).concat(s))})},[K,o,k]),W=n.useCallback(e=>{z(e)},[z]),U=n.useCallback(s=>{var n;if(_===s){const e=v.findIndex(e=>e.key===_),s=v[e>0?e-1:0].key;s&&(L(s),o(s))}E(s,null==(n=e.current)?void 0:n.destroy)},[E,e,_]),V=n.useCallback((e,s)=>{"remove"===s&&U(e)},[U]),F=n.useCallback((n=_)=>{var t;"string"==typeof n&&(x.current||m||(g(!0),null==(t=e.current)||t.refresh(n),x.current=setTimeout(()=>{l.success({content:s("public.refreshSuccessfully"),key:"refresh"}),g(!1),x.current=null},300),m&&clearTimeout(m),b(setTimeout(()=>{b(null)},1e3))))},[_,m,l,s,g,e]),Z=n.useCallback(({active:e,over:s})=>{if(e.id===(null==s?void 0:s.id))return;const n=v.findIndex(s=>s.key===e.id),t=v.findIndex(e=>e.key===(null==s?void 0:s.id)),r=pe(v,n,t);A(r)},[v,A]),Y=n.useMemo(()=>({activeKey:_,handleRefresh:F}),[_,F]),[G,$]=Re(Y),ee=n.useMemo(()=>(e,s)=>t.jsx(le,{sensors:[i],onDragEnd:Z,collisionDetection:de,children:t.jsx(fe,{items:v.map(e=>e.key),strategy:be,children:t.jsx(s,{...e,children:e=>n.createElement(Xe,{...e.props,key:e.key},t.jsx("div",{children:t.jsx(q,{menu:{items:G(e.key),onClick:s=>$(s.key,e.key)},trigger:["contextMenu"],children:e})}))})})}),[i,v,Z,G,$]),se=n.useMemo(()=>[{element:t.jsx(Ie,{isRefresh:!!m,onClick:F})},{element:t.jsx(Ke,{activeKey:_,handleRefresh:F})},{element:t.jsx(Pe,{})}],[m,F,_]);return n.useEffect(()=>()=>{x.current&&(clearTimeout(x.current),x.current=null),m&&clearTimeout(m)},[m]),t.jsxs("div",{ref:j,className:"\n        w-[calc(100%-5px)]\n        flex\n        items-center\n        justify-between\n        mr-2\n        transition-all\n        ".concat(X?ve["con-maximize"]:"","\n      "),children:[d,t.jsx("div",{className:"w-full",children:v.length>0?t.jsx(D,{hideAdd:!0,className:"h-30px py-0 ".concat(ve["layout-tabs"]),items:v,onChange:W,activeKey:_,tabPlacement:"top",type:"editable-card",onEdit:V,renderTabBar:ee,tabBarExtraContent:t.jsx("div",{className:"flex",children:se.map((e,s)=>t.jsx("div",{className:"\n                      left-divide-tab\n                      change\n                      divide-solid\n                      w-36px\n                      h-36px\n                      hover:opacity-70\n                      flex\n                      place-content-center\n                      items-center\n                    ",children:e.element},s))})}):null})]})}),Be=({error:e})=>{const[s]=Oe(),{t:n}=I();return t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(U,{status:"error",title:n("public.pageErrorTitle"),subTitle:t.jsxs("div",{className:"flex",children:[t.jsx(K,{title:String(e),placement:"top",children:t.jsx(oe,{className:"mr-5px rotate-y-180"})}),n("public.pagepageErrorSubTitle")]}),extra:[t.jsx(V,{type:"primary",icon:t.jsx(te,{}),onClick:()=>{window.location.reload()},children:n("public.refreshPage")},"refresh"),t.jsx(V,{icon:t.jsx($,{}),onClick:s,children:n("public.signOut")},"hard-refresh")]})})};class ze extends n.Component{constructor(){super(...arguments),s(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(){return{hasError:!0,error:null}}componentDidCatch(e,s){this.setState({error:e}),this.sendErrorLog(e,s)}async sendErrorLog(e,s){try{const n=x.getState().userInfo,t={username:(null==n?void 0:n.username)||"anonymous",ip:"",method:"",url:window.location.href,params:JSON.stringify({componentStack:s.componentStack,content:JSON.stringify(s)}),userAgent:navigator.userAgent,status:"500",error:e.toString(),latency:0,type:3};await he(t)}catch(n){}}render(){return this.state.hasError?t.jsx(Be,{error:this.state.error}):this.props.children}}const We=n.memo(function(){const[e]=j(),{t:s}=I(),{pathname:c}=Q(),o=e(),i=Z(),l=M(),[d,m]=n.useState(!0),[p,f]=H.useMessage(),b=u(R(e=>e.setAliveRef)),h=u(R(e=>e.aliveRef)),{setPermissions:g,setUserInfo:v}=x(R(e=>({setPermissions:e.setPermissions,setUserInfo:e.setUserInfo}))),{menuList:y,setMenuList:_,toggleCollapsed:k,togglePhone:w}=a(R(e=>({menuList:e.menuList,setMenuList:e.setMenuList,toggleCollapsed:e.toggleCollapsed,togglePhone:e.togglePhone}))),{permissions:N,userId:X,isMaximize:P,isCollapsed:K,isPhone:L,isRefresh:B}=r(),z=n.useDeferredValue(c),W=n.useMemo(()=>z,[z]);n.useEffect(()=>{l.current&&!h.current&&b(l)},[l.current]);const q=n.useCallback(async()=>{try{m(!0);const{code:e,data:s}=await C({refresh_cache:!1});if(200!==Number(e))return;const{user:n,permissions:t}=s;v(n),g(t)}catch(e){g([])}finally{m(!1)}},[]),D=n.useCallback(async()=>{try{m(!0);const{code:e,data:s}=await A();if(200!==Number(e))return;_(s||[])}finally{m(!1)}},[]);n.useEffect(()=>{o&&!X&&(q(),D())},[q,D,o,X]),n.useEffect(()=>{E(s,p)},[c]);const U=n.useCallback(T.debounce(()=>{const e=window.innerWidth<=768;e&&k(!0),w(e)},500),[k,w]);n.useEffect(()=>(U(),window.addEventListener("resize",U),()=>{window.removeEventListener("resize",U),U.cancel()}),[U]);const V=n.useMemo(()=>"\n        border-bottom\n        transition-all\n        z-15\n        ".concat(ve.header,"\n        ").concat(K?ve["header-close-menu"]:"","\n        ").concat(P?ve["header-none"]:"","\n        ").concat(L?"!left-0 z-999":"","\n      "),[K,P,L]),J=n.useMemo(()=>"\n        overflow-auto\n        transition-all\n        ".concat(ve.con,"\n        ").concat(P?ve["con-maximize"]:"","\n        ").concat(K?ve["con-close-menu"]:"","\n        ").concat(L?"!left-0 !w-full":"","\n      "),[P,K,L]);return t.jsxs("div",{id:"layout",children:[f,t.jsx(ye,{}),t.jsxs("div",{className:ve.layout_right,children:[t.jsxs("div",{id:"header",className:V,children:[t.jsx(Se,{}),N.length>0&&y.length>0&&t.jsx(Le,{aliveRef:l})]}),t.jsxs("div",{id:"layout-content",className:J,children:[d&&0===N.length&&t.jsx(F,{active:!0,className:"p-30px",paragraph:{rows:10}}),!d&&0===N.length&&t.jsx(je,{}),B&&t.jsx("div",{className:"\n              absolute\n              left-50%\n              top-50%\n              -rotate-x-50%\n              -rotate-y-50%\n            ",children:t.jsx(O,{className:"text-40px animate-spin",icon:"ri:loader-2-fill"})}),t.jsx(S,{aliveRef:l,activeCacheKey:W,max:10,children:N.length>0&&t.jsx(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},children:t.jsx(ze,{children:t.jsx(n.Suspense,{fallback:t.jsx("div",{className:"p-30px",children:t.jsx(F,{active:!0,paragraph:{rows:10}})}),children:i})})},z)})]})]})]})});export{We as default};
