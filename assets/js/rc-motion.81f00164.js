import{n as ce,x as Me,y as xe,a as be,_ as De,c as me,e as N,f as d,b as T,q as Te,g as Ge}from"./@babel_runtime.d5939a32.js";import{c as Je}from"./classnames.e70b85e0.js";import{c as Ee,o as Ce,D as ne,q as Xe,s as Ye,M as Ze}from"./rc-util.aac9ba6f.js";import{r as u}from"./react.402eeaf7.js";var en=["children"],Oe=u.createContext({});function kn(n){var e=n.children,t=ce(n,en);return u.createElement(Oe.Provider,{value:t},e)}var nn=function(n){Me(t,n);var e=xe(t);function t(){return be(this,t),e.apply(this,arguments)}return De(t,[{key:"render",value:function(){return this.props.children}}]),t}(u.Component),I="none",X="appear",Y="enter",Z="leave",Re="none",P="prepare",$="start",W="active",pe="end",Ne="prepared";function ke(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(n)]="webkit".concat(e),t["Moz".concat(n)]="moz".concat(e),t["ms".concat(n)]="MS".concat(e),t["O".concat(n)]="o".concat(e.toLowerCase()),t}function tn(n,e){var t={animationend:ke("Animation","AnimationEnd"),transitionend:ke("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var rn=tn(Ee(),typeof window<"u"?window:{}),Ue={};if(Ee()){var an=document.createElement("div");Ue=an.style}var ee={};function Ve(n){if(ee[n])return ee[n];var e=rn[n];if(e)for(var t=Object.keys(e),r=t.length,i=0;i<r;i+=1){var s=t[i];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Ue)return ee[n]=e[s],ee[n]}return""}var we=Ve("animationend"),Fe=Ve("transitionend"),Ie=!!(we&&Fe),Le=we||"animationend",Pe=Fe||"transitionend";function _e(n,e){if(!n)return null;if(me(n)==="object"){var t=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return n[t]}return"".concat(n,"-").concat(e)}const on=function(n){var e=u.useRef(),t=u.useRef(n);t.current=n;var r=u.useCallback(function(a){t.current(a)},[]);function i(a){a&&(a.removeEventListener(Pe,r),a.removeEventListener(Le,r))}function s(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(Pe,r),a.addEventListener(Le,r),e.current=a)}return u.useEffect(function(){return function(){i(e.current)}},[]),[s,i]};var Ke=Ee()?u.useLayoutEffect:u.useEffect;const un=function(){var n=u.useRef(null);function e(){Ce.cancel(n.current)}function t(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Ce(function(){i<=1?r({isCanceled:function(){return s!==n.current}}):t(r,i-1)});n.current=s}return u.useEffect(function(){return function(){e()}},[]),[t,e]};var sn=[P,$,W,pe],cn=[P,Ne],je=!1,vn=!0;function Qe(n){return n===W||n===pe}const fn=function(n,e,t){var r=ne(Re),i=N(r,2),s=i[0],a=i[1],m=un(),p=N(m,2),o=p[0],c=p[1];function v(){a(P,!0)}var f=e?cn:sn;return Ke(function(){if(s!==Re&&s!==pe){var l=f.indexOf(s),S=f[l+1],R=t(s);R===je?a(S,!0):S&&o(function(_){function C(){_.isCanceled()||a(S,!0)}R===!0?C():Promise.resolve(R).then(C)})}},[n,s]),u.useEffect(function(){return function(){c()}},[]),[v,s]};function dn(n,e,t,r){var i=r.motionEnter,s=i===void 0?!0:i,a=r.motionAppear,m=a===void 0?!0:a,p=r.motionLeave,o=p===void 0?!0:p,c=r.motionDeadline,v=r.motionLeaveImmediately,f=r.onAppearPrepare,l=r.onEnterPrepare,S=r.onLeavePrepare,R=r.onAppearStart,_=r.onEnterStart,C=r.onLeaveStart,O=r.onAppearActive,b=r.onEnterActive,z=r.onLeaveActive,K=r.onAppearEnd,k=r.onEnterEnd,D=r.onLeaveEnd,U=r.onVisibleChanged,te=ne(),j=N(te,2),L=j[0],V=j[1],A=ne(I),w=N(A,2),E=w[0],M=w[1],B=ne(null),G=N(B,2),re=G[0],Q=G[1],ae=u.useRef(!1),ie=u.useRef(null);function J(){return t()}var Se=u.useRef(!1);function ye(){M(I,!0),Q(null,!0)}function he(g){var y=J();if(!(g&&!g.deadline&&g.target!==y)){var h=Se.current,x;E===X&&h?x=K==null?void 0:K(y,g):E===Y&&h?x=k==null?void 0:k(y,g):E===Z&&h&&(x=D==null?void 0:D(y,g)),E!==I&&h&&x!==!1&&ye()}}var $e=on(he),We=N($e,1),ze=We[0],Ae=function(y){var h,x,q;switch(y){case X:return h={},T(h,P,f),T(h,$,R),T(h,W,O),h;case Y:return x={},T(x,P,l),T(x,$,_),T(x,W,b),x;case Z:return q={},T(q,P,S),T(q,$,C),T(q,W,z),q;default:return{}}},H=u.useMemo(function(){return Ae(E)},[E]),He=fn(E,!n,function(g){if(g===P){var y=H[P];return y?y(J()):je}if(F in H){var h;Q(((h=H[F])===null||h===void 0?void 0:h.call(H,J(),null))||null)}return F===W&&(ze(J()),c>0&&(clearTimeout(ie.current),ie.current=setTimeout(function(){he({deadline:!0})},c))),F===Ne&&ye(),vn}),ge=N(He,2),qe=ge[0],F=ge[1],Be=Qe(F);Se.current=Be,Ke(function(){V(e);var g=ae.current;ae.current=!0;var y;!g&&e&&m&&(y=X),g&&e&&s&&(y=Y),(g&&!e&&o||!g&&v&&!e&&o)&&(y=Z);var h=Ae(y);y&&(n||h[P])?(M(y),qe()):M(I)},[e]),u.useEffect(function(){(E===X&&!m||E===Y&&!s||E===Z&&!o)&&M(I)},[m,s,o]),u.useEffect(function(){return function(){ae.current=!1,clearTimeout(ie.current)}},[]);var oe=u.useRef(!1);u.useEffect(function(){L&&(oe.current=!0),L!==void 0&&E===I&&((oe.current||L)&&(U==null||U(L)),oe.current=!0)},[L,E]);var ue=re;return H[P]&&F===$&&(ue=d({transition:"none"},ue)),[E,F,ue,L??e]}function ln(n){var e=n;me(n)==="object"&&(e=n.transitionSupport);function t(i,s){return!!(i.motionName&&e&&s!==!1)}var r=u.forwardRef(function(i,s){var a=i.visible,m=a===void 0?!0:a,p=i.removeOnLeave,o=p===void 0?!0:p,c=i.forceRender,v=i.children,f=i.motionName,l=i.leavedClassName,S=i.eventProps,R=u.useContext(Oe),_=R.motion,C=t(i,_),O=u.useRef(),b=u.useRef();function z(){try{return O.current instanceof HTMLElement?O.current:Ze(b.current)}catch{return null}}var K=dn(C,m,z,i),k=N(K,4),D=k[0],U=k[1],te=k[2],j=k[3],L=u.useRef(j);j&&(L.current=!0);var V=u.useCallback(function(Q){O.current=Q,Xe(s,Q)},[s]),A,w=d(d({},S),{},{visible:m});if(!v)A=null;else if(D===I)j?A=v(d({},w),V):!o&&L.current&&l?A=v(d(d({},w),{},{className:l}),V):c||!o&&!l?A=v(d(d({},w),{},{style:{display:"none"}}),V):A=null;else{var E,M;U===P?M="prepare":Qe(U)?M="active":U===$&&(M="start");var B=_e(f,"".concat(D,"-").concat(M));A=v(d(d({},w),{},{className:Je(_e(f,D),(E={},T(E,B,B&&M),T(E,f,typeof f=="string"),E)),style:te}),V)}if(u.isValidElement(A)&&Ye(A)){var G=A,re=G.ref;re||(A=u.cloneElement(A,{ref:V}))}return u.createElement(nn,{ref:b},A)});return r.displayName="CSSMotion",r}const mn=ln(Ie);var ve="add",fe="keep",de="remove",se="removed";function En(n){var e;return n&&me(n)==="object"&&"key"in n?e=n:e={key:n},d(d({},e),{},{key:String(e.key)})}function le(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(En)}function pn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],r=0,i=e.length,s=le(n),a=le(e);s.forEach(function(o){for(var c=!1,v=r;v<i;v+=1){var f=a[v];if(f.key===o.key){r<v&&(t=t.concat(a.slice(r,v).map(function(l){return d(d({},l),{},{status:ve})})),r=v),t.push(d(d({},f),{},{status:fe})),r+=1,c=!0;break}}c||t.push(d(d({},o),{},{status:de}))}),r<i&&(t=t.concat(a.slice(r).map(function(o){return d(d({},o),{},{status:ve})})));var m={};t.forEach(function(o){var c=o.key;m[c]=(m[c]||0)+1});var p=Object.keys(m).filter(function(o){return m[o]>1});return p.forEach(function(o){t=t.filter(function(c){var v=c.key,f=c.status;return v!==o||f!==de}),t.forEach(function(c){c.key===o&&(c.status=fe)})}),t}var Sn=["component","children","onVisibleChanged","onAllRemoved"],yn=["status"],hn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function An(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn,t=function(r){Me(s,r);var i=xe(s);function s(){var a;be(this,s);for(var m=arguments.length,p=new Array(m),o=0;o<m;o++)p[o]=arguments[o];return a=i.call.apply(i,[this].concat(p)),T(Te(a),"state",{keyEntities:[]}),T(Te(a),"removeKey",function(c){var v=a.state.keyEntities,f=v.map(function(l){return l.key!==c?l:d(d({},l),{},{status:se})});return a.setState({keyEntities:f}),f.filter(function(l){var S=l.status;return S!==se}).length}),a}return De(s,[{key:"render",value:function(){var m=this,p=this.state.keyEntities,o=this.props,c=o.component,v=o.children,f=o.onVisibleChanged,l=o.onAllRemoved,S=ce(o,Sn),R=c||u.Fragment,_={};return hn.forEach(function(C){_[C]=S[C],delete S[C]}),delete S.keys,u.createElement(R,S,p.map(function(C){var O=C.status,b=ce(C,yn),z=O===ve||O===fe;return u.createElement(e,Ge({},_,{key:b.key,visible:z,eventProps:b,onVisibleChanged:function(k){if(f==null||f(k,{key:b.key}),!k){var D=m.removeKey(b.key);D===0&&l&&l()}}}),v)}))}}],[{key:"getDerivedStateFromProps",value:function(m,p){var o=m.keys,c=p.keyEntities,v=le(o),f=pn(c,v);return{keyEntities:f.filter(function(l){var S=c.find(function(R){var _=R.key;return l.key===_});return!(S&&S.status===se&&l.status===de)})}}}]),s}(u.Component);return T(t,"defaultProps",{component:"div"}),t}const Ln=An(Ie);export{mn as C,kn as M,Ln as a};
