import{r as e,j as l}from"./react@19.1.0.C7ehVy-W.js";import{h as s,e as a,d as t,f as i,c as r}from"./componentMap.7vChPpQb.js";import{u as n}from"./index.BVq4Z8ol.js";import{u as o}from"./react-i18next@15.4.1_i18next@24.2.3_react-dom@19.1.0_react@19.1.0.DBjyYG-5.js";import{F as d,B as c,f as m,e as p}from"./antd@5.24.6_react-dom@19.1.0_react@19.1.0.B0SwdZ1S.js";import{l as h,m as u,n as x}from"./@ant-design_icons@6.0.0_react-dom@19.1.0_react@19.1.0.CLXzDh93.js";const f=e.forwardRef(((f,j)=>{var v;const{list:b,data:w,initialValues:y,isLoading:C,isSearch:g=!0,isReset:N=!0,isRowExpand:F=!0,type:_="default",style:E,className:I,children:R,labelCol:S,wrapperCol:k,defaultColCount:W=4,defaultRowExpand:$=2,handleFinish:P}=f,{t:V}=o(),{isPhone:B}=n(),[L]=d.useForm(),[z,M]=e.useState(!1),[O,T]=e.useState(!0),[q,A]=e.useState(F);e.useEffect((()=>{if(A(F),F){A(W*$<b.length)}}),[W,$,F,b.length]),e.useEffect((()=>{try{Object.keys(w).length&&(T(!1),L.setFieldsValue({...w}))}catch(e){}}),[w,L,O]);const D={...f};delete D.type,delete D.isSearch,delete D.isReset,delete D.isLoading,delete D.handleFinish;const G=()=>{null==L||L.submit()},H=e=>(null==e?void 0:e.labelWidth)?{style:{width:e.labelWidth}}:(null==e?void 0:e.labelCol)?e.labelCol:S||("grid"!==_||B?void 0:{span:6}),J=e=>(null==e?void 0:e.wrapperWidth)?{style:{width:e.wrapperWidth}}:(null==e?void 0:e.wrapperCol)?e.wrapperCol:k||("grid"!==_||B?void 0:{span:18}),K=l.jsxs("div",{className:"flex items-center flex-wrap",children:[!!g&&l.jsx(d.Item,{children:l.jsx(c,{type:"primary",htmlType:"submit",className:"!mb-5px "+(B?"mr-5px":""),loading:C,icon:l.jsx(h,{}),children:V("public.search")})}),!!N&&l.jsx(d.Item,{children:l.jsx(c,{className:"!mb-5px "+(B?"mr-5px":""),icon:l.jsx(u,{}),onClick:()=>{null==L||L.resetFields(),null==L||L.setFieldsValue(y?{...y}:{}),null==L||L.submit()},children:V("public.reset")})}),R&&l.jsx(d.Item,{children:l.jsx("div",{className:"!mb-5px "+(B?"mr-5px":""),children:R})}),"grid"===_&&!B&&!!q&&l.jsxs("div",{className:"text-12px cursor-pointer color-#1677ff hover:color-#69b1ff",onClick:()=>{M(!z)},children:[l.jsx(x,{rotate:z?180:0}),z?"收缩":"展开"]})]});return l.jsx("div",{id:"searches",style:E,className:I,children:l.jsxs(d,{layout:B?"horizontal":"inline",...D,ref:j,form:L,onFinish:e=>{if(P){let l=i(e,b);l=r(l),null==P||P(l)}},onFinishFailed:e=>{},autoComplete:"off",children:[("default"===_||B)&&l.jsxs(l.Fragment,{children:[null==b?void 0:b.map((l=>e.createElement(d.Item,{...a(l),key:`${l.name}`,className:`${(null==l?void 0:l.className)||""} !mb-5px`,labelCol:H(l),wrapperCol:J(l),valuePropName:s(l.component)},t(V,l,G)))),K]}),"grid"===_&&!B&&l.jsxs(m,{wrap:!0,className:"w-full",children:[null==(v=(e=>{if(!q)return e;const l=W*$;for(let s=0;s<e.length;s++){const a=e[s];s<l?a.hidden=!1:a.hidden=!z}return e})(b))?void 0:v.map((e=>l.jsx("div",{style:{width:e.hidden?0:100/W+"%"},children:l.jsx(d.Item,{...a(e),className:`${(null==e?void 0:e.className)||""} !mb-5px`,labelCol:H(e),wrapperCol:J(e),valuePropName:s(e.component),children:t(V,e,G)})},`${e.name}`))),l.jsx(p,{flex:(null==b?void 0:b.length)%W==0||q?"auto":void 0,children:l.jsx(m,{justify:"flex-end",children:K})})]})]})})}));export{f as B};
