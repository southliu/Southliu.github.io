import{j as e,r as t}from"./react@19.1.0.QBh3HWPD.js";import{l}from"./lodash@4.17.21.HHZ9h80f.js";import{D as a,T as n,r,P as s}from"./index.CjaEgyGJ.js";import{d as o}from"./dayjs@1.11.13.BdU3vb2R.js";import{i,j as u,k as c,m as p,f as d,n as f,I as v,a as m,o as h,C as g,p as y,q as S,r as j,v as b,U as x}from"./antd@5.25.4_react-dom@19.1.0_react@19.1.0.kHAmv6cZ.js";import{u as P}from"./react-i18next@15.5.2_i18next@25.2.1_react-dom@19.1.0_react@19.1.0_typescript@5.8.3.BPrJqYVj.js";function C(e,t=a){return o.isDayjs(e)?e.format(t):e}function w(e){return o.isDayjs(e)?e:o(e)}function k(e,t=a){if(e)return(null==e?void 0:e.length)>1&&o.isDayjs(null==e?void 0:e[0])&&o.isDayjs(null==e?void 0:e[1])?[e[0].format(t),e[1].format(t)]:e}function D(e){if(e)return(null==e?void 0:e.length)>1&&!o.isDayjs(null==e?void 0:e[0])&&o.isDayjs(null==e?void 0:e[1])?[o(e[0]),e[1]]:(null==e?void 0:e.length)>1&&o.isDayjs(null==e?void 0:e[0])&&!o.isDayjs(null==e?void 0:e[1])?[e[0],o(e[1])]:(null==e?void 0:e.length)>1&&!o.isDayjs(null==e?void 0:e[0])&&!o.isDayjs(null==e?void 0:e[1])?[o(e[0]),o(e[1])]:e}function T(e,t){var l;for(let n=0;n<e.length;n++)if(e[n].name===t)return(null==(l=e[n].componentProps)?void 0:l.format)||a;return a}function A(e,t){var l;for(const a in e){if(2===(null==(l=e[a])?void 0:l.length)&&o.isDayjs(e[a][0])&&o.isDayjs(e[a][1])){const l=T(t,a);e[a]=k(e[a],l)}if((null==e?void 0:e[a])&&o.isDayjs(e[a])){const l=T(t,a);e[a]=C(e[a],l)}}return e}const{RangePicker:N}=i;const{RangePicker:R}=u;function F(e){switch(e){case"Switch":return"checked";case"Upload":return"fileList";default:return"value"}}function E(e,t,l){switch(t){case"Select":case"TreeSelect":return{allowClear:!0,showSearch:!0,placeholder:e("public.inputPleaseSelect")};case"InputNumber":return{placeholder:e("public.inputPleaseEnter"),onPressEnter:l};case"Checkbox":case"CheckboxGroup":return{};case"DatePicker":return{placeholder:e("public.inputPleaseSelect"),format:a};case"RangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[a,a]};case"TimePicker":return{placeholder:e("public.inputPleaseSelect"),format:n};case"TimeRangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[n,n]};default:return{allowClear:!0,placeholder:e("public.inputPleaseEnter")}}}const K=e=>Array.isArray(e)?e:null==e?void 0:e.fileList,O=e=>{var t;const a=l.cloneDeep(e);return delete a.wrapperWidth,delete a.componentProps,delete a.render,a.hidden&&(null==(t=a.rules)?void 0:t.length)&&(a.rules=void 0),"Upload"!==a.component||(null==a?void 0:a.getValueFromEvent)||(a.getValueFromEvent=K),a},z=e=>{const t={};return Object.keys(e).forEach((l=>{var a;"string"==typeof e[l]&&(e[l]=null==(a=e[l])?void 0:a.trim()),""!==e[l]&&(t[l]=e[l])})),t};function G(e){return r.get("/authority/common/games",{params:e})}function I(){return e.jsx("div",{className:"absolute left-50% top-50% -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx(d,{spinning:!0})})}function _(l){var a;const{t:n}=P(),[r,s]=t.useState(!1),[o,i]=t.useState([]),u={...l};delete u.api,delete u.params,delete u.apiResultKey;const p=t.useCallback((async()=>{if(l.api)try{const{api:e,params:t,apiResultKey:a}=l;if(s(!0),e){const l=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await l;if(200!==Number(n))return;const s=a?null==r?void 0:r[a]:r;i(s)}}finally{s(!1)}}),[l]);t.useEffect((()=>{l.value&&0===o.length&&p()}),[l.value]);return e.jsx(c,{allowClear:!0,showSearch:!0,maxTagCount:q,placeholder:n("public.inputPleaseSelect"),optionFilterProp:(null==(a=null==u?void 0:u.fieldNames)?void 0:a.label)||"label",...u,loading:r,options:o,notFoundContent:r&&e.jsx(I,{}),onOpenChange:e=>{var t;e&&p(),null==(t=l.onOpenChange)||t.call(l,e)}})}function U(l){var a;const{t:n}=P(),[r,s]=t.useState(!1),[o,i]=t.useState([]),u={...l};delete u.api,delete u.params,delete u.apiResultKey;const c=t.useCallback((async()=>{if(l.api)try{const{api:e,params:t,apiResultKey:a}=l;if(s(!0),e){const l=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await l;if(200!==Number(n))return;const s=a?null==r?void 0:r[a]:r;i(s)}}finally{s(!1)}}),[l]);t.useEffect((()=>{l.value&&0===(null==o?void 0:o.length)&&c()}),[l.value]);return e.jsx(p,{allowClear:!0,showSearch:!0,maxTagCount:q,treeNodeFilterProp:(null==(a=null==u?void 0:u.fieldNames)?void 0:a.label)||"label",placeholder:n("public.inputPleaseSelect"),...u,loading:r,treeData:o,notFoundContent:r&&e.jsx(I,{}),onOpenChange:e=>{var t;e&&c(),null==(t=l.onOpenChange)||t.call(l,e)}})}const q="responsive";function H(t){return e.jsx(e.Fragment,{children:e.jsx(U,{...t,multiple:!0,api:G,fieldNames:{label:"name",value:"id"}})})}function L(e){return r.get("/platform/partner",{params:e})}function V(e,t){return r.get(e,{params:t})}function M(t){return e.jsx(_,{...t,api:L,mode:"multiple",fieldNames:{label:"name",value:"id"}})}const W=new Map;function B(t,l,a){const{component:n,componentProps:r}=l,s=e.jsx(v,{...E(t,"Input",a),...r});if("customize"===n){const{render:e}=l;if(!e)return s;J("customize",e)}const o=W.get(n);return o?e.jsx(e.Fragment,{children:e.jsx(o,{...E(t,n,a),...r})}):s}function J(e,t){W.set(e,t)}W.set("Input",v),W.set("TextArea",v.TextArea),W.set("InputNumber",m),W.set("InputPassword",v.Password),W.set("AutoComplete",h),W.set("Select",(function(l){var a;const{options:n}=l,{t:r}=P(),[s,o]=t.useState([]);return t.useEffect((()=>{if(n){for(let e=0;e<(null==n?void 0:n.length);e++){const t=n[e];"object"!=typeof t&&(n[e]={label:t,value:t})}o(n)}else o([])}),[n]),e.jsx(c,{allowClear:!0,showSearch:!0,maxTagCount:q,placeholder:r("public.inputPleaseSelect"),optionFilterProp:(null==(a=null==l?void 0:l.fieldNames)?void 0:a.label)||"label",...l,options:s})})),W.set("TreeSelect",(function(l){var a;const{treeData:n}=l,{t:r}=P(),[s,o]=t.useState([]);return t.useEffect((()=>{if(n){for(let e=0;e<(null==n?void 0:n.length);e++){const t=n[e];"object"!=typeof t&&(n[e]={label:t,value:t})}o(n)}else o([])}),[n]),e.jsx(p,{allowClear:!0,showSearch:!0,maxTagCount:q,treeNodeFilterProp:(null==(a=null==l?void 0:l.fieldNames)?void 0:a.label)||"label",placeholder:r("public.inputPleaseSelect"),...l,treeData:s})})),W.set("Checkbox",g),W.set("CheckboxGroup",g.Group),W.set("RadioGroup",y.Group),W.set("Switch",S),W.set("Rate",j),W.set("Slider",b),W.set("Upload",x),W.set("Transfer",(function(l){const{value:a}=l,[n,r]=t.useState(a||[]);return e.jsx(f,{...l,targetKeys:n,onChange:e=>{var t;r(e),null==(t=null==l?void 0:l.onChange)||t.call(l,e)}})})),W.set("DatePicker",(function(t){const{value:l}=t,a={...t};return l&&(a.value=w(l)),e.jsx(i,{...a})})),W.set("RangePicker",(function(t){const{value:l}=t,a={...t};return l&&(a.value=D(l)),e.jsx(N,{...a})})),W.set("TimePicker",(function(t){const{value:l}=t,a={...t};return l&&(a.value=w(l)),e.jsx(u,{...a})})),W.set("TimeRangePicker",(function(t){const{value:l}=t,a={...t};return l&&(a.value=D(l)),e.jsx(R,{...a})})),W.set("ApiSelect",_),W.set("ApiTreeSelect",U),W.set("ApiPageSelect",(function(a){var n;const{pageKey:r="page",pageSizeKey:s="pageSize",queryKey:o="query",page:i=1,pageSize:u=20}=a,{t:p}=P(),[f,v]=t.useState(!1),[m,h]=t.useState(i),[g,y]=t.useState(!0),[S,j]=t.useState([]),[b,x]=t.useState(!1),[C,w]=t.useState(""),k={...a};delete k.api,delete k.params,delete k.apiResultKey,delete k.pageKey,delete k.pageSizeKey,t.useEffect((()=>{b&&(x(!1),D())}),[b]);const D=t.useCallback((async()=>{if(a.api&&g)try{const{api:e,params:t,apiResultKey:l}=a,n={[r]:m,[s]:u,[o]:C||void 0};if(Array.isArray(t))for(let a=0;a<(null==t?void 0:t.length);a++){const e=t[a];e.constructor===Object&&(t[a]={...e,...n})}if(v(!0),e){const a=Array.isArray(t)?e(...t):e({...t,...n}),{code:r,data:s}=await a;if(200!==Number(r))return;const o=l?null==s?void 0:s[l]:s;if(null==o?void 0:o.length){const e=S.concat(o);j(e)}y(!!(null==o?void 0:o.length))}}finally{v(!1)}}),[m,C]);t.useEffect((()=>{a.value&&0===S.length&&D()}),[a.value]);const T=t.useCallback((async e=>{const{scrollTop:t,scrollHeight:l,clientHeight:a}=e.currentTarget;t+a>=l-10&&!f&&g&&(h(m+1),x(!0))}),[f,g,m]),A=l.debounce((e=>{var t;null==(t=null==a?void 0:a.onSearch)||t.call(a,e),j([]),h(i),y(!0),w(e),x(!0)}),200);return e.jsx(c,{allowClear:!0,showSearch:!0,maxTagCount:q,placeholder:p("public.inputPleaseSelect"),optionFilterProp:(null==(n=null==k?void 0:k.fieldNames)?void 0:n.label)||"label",...k,onSearch:A,onPopupScroll:T,popupRender:t=>e.jsxs(e.Fragment,{children:[t,e.jsx("div",{className:"py-3px text-center",children:f&&g&&!!(null==S?void 0:S.length)&&e.jsx(d,{size:"small",spinning:!0})})]}),loading:f,options:S,notFoundContent:f&&e.jsx(I,{}),onOpenChange:e=>{var t;e&&!(null==S?void 0:S.length)&&D(),null==(t=a.onOpenChange)||t.call(a,e)}})})),W.set("PasswordStrength",s),J("GameSelect",H),J("PartnerSelect",M);export{J as a,V as b,z as c,B as d,O as e,A as f,G as g,F as h};
