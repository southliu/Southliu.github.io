import{r as e,e as t}from"./react@19.2.3.DikTGMTS.js";import{P as n}from"./@rc-component_portal@2.2.0__23d0e188c8e59a845be2370f4ba3b141.Br4DFYg2.js";import{h as o,e as r,m as l,M as s,G as i,g as a,f as u,d as c}from"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.4n28hD7h.js";import{c as p}from"./clsx@2.1.1.DMqMD_4V.js";import{C as f}from"./@rc-component_motion@1.1.6__75bed58c5aa0279623e804b6e3100d82.CHs99PZw.js";import{R as m}from"./@rc-component_resize-observ_a5d141e3de655ef602de0c6d9e51ffb4.BTh966e6.js";function h(t){const{prefixCls:n,align:o,arrow:r,arrowPos:l}=t,{className:s,content:i,style:a}=r||{},{x:u=0,y:c=0}=l,f=e.useRef(null);if(!o||!o.points)return null;const m={position:"absolute"};if(!1!==o.autoArrow){const e=o.points[0],t=o.points[1],n=e[0],r=e[1],l=t[0],s=t[1];n!==l&&["t","b"].includes(n)?"t"===n?m.top=0:m.bottom=0:m.top=c,r!==s&&["l","r"].includes(r)?"l"===r?m.left=0:m.right=0:m.left=u}return e.createElement("div",{ref:f,className:p("".concat(n,"-arrow"),s),style:{...m,...a}},i)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d.apply(this,arguments)}function g(t){const{prefixCls:n,open:o,zIndex:r,mask:l,motion:s,mobile:i}=t;return l?e.createElement(f,d({},s,{motionAppear:!0,visible:o,removeOnLeave:!0}),({className:t})=>e.createElement("div",{style:{zIndex:r},className:p("".concat(n,"-mask"),i&&"".concat(n,"-mobile-mask"),t)})):null}const v=e.memo(({children:e})=>e,(e,t)=>t.cache);function y(e,t,n,o,r,l,s,i){var a;const u="auto",c=e?{}:{left:"-1000vw",top:"-1000vh",right:u,bottom:u};if(!e&&(t||!n)){const{points:e}=o,t=o.dynamicInset||(null==(a=o._experimental)?void 0:a.dynamicInset),n=t&&"r"===e[0][1],p=t&&"b"===e[0][0];n?(c.right=r,c.left=u):(c.left=s,c.right=u),p?(c.bottom=l,c.top=u):(c.top=i,c.bottom=u)}return c}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}const x=e.forwardRef((t,n)=>{const{popup:s,className:i,prefixCls:a,style:u,target:c,onVisibleChanged:d,open:x,keepDom:C,fresh:w,onClick:M,mask:E,arrow:P,arrowPos:R,align:S,motion:k,maskMotion:L,mobile:N,forceRender:A,getPopupContainer:O,autoDestroy:j,portal:z,children:D,zIndex:X,onMouseEnter:Y,onMouseLeave:B,onPointerEnter:H,onPointerDownCapture:W,ready:q,offsetX:F,offsetY:I,offsetR:T,offsetB:_,onAlign:V,onPrepare:G,onResize:J,stretch:U,targetWidth:$,targetHeight:K}=t,Q="function"==typeof s?s():s,Z=x||C,ee=!!N,[te,ne,oe]=e.useMemo(()=>N?[N.mask,N.maskMotion,N.motion]:[E,L,k],[N,E,L,k]),re=(null==O?void 0:O.length)>0,[le,se]=e.useState(!O||!re);o(()=>{!le&&re&&c&&se(!0)},[le,re,c]);const ie=r((e,t)=>{null==J||J(e,t),V()}),ae=y(ee,q,x,S,T,_,F,I);if(!le)return null;const ue={};return U&&(U.includes("height")&&K?ue.height=K:U.includes("minHeight")&&K&&(ue.minHeight=K),U.includes("width")&&$?ue.width=$:U.includes("minWidth")&&$&&(ue.minWidth=$)),x||(ue.pointerEvents="none"),e.createElement(z,{open:A||Z,getContainer:O&&(()=>O(c)),autoDestroy:j},e.createElement(g,{prefixCls:a,open:x,zIndex:X,mask:te,motion:ne,mobile:ee}),e.createElement(m,{onResize:ie,disabled:!x},t=>e.createElement(f,b({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:A,leavedClassName:"".concat(a,"-hidden")},oe,{onAppearPrepare:G,onEnterPrepare:G,visible:x,onVisibleChanged:e=>{var t;null==(t=null==k?void 0:k.onVisibleChanged)||t.call(k,e),d(e)}}),({className:o,style:r},s)=>{const c=p(a,o,i,{["".concat(a,"-mobile")]:ee});return e.createElement("div",{ref:l(t,n,s),className:c,style:{"--arrow-x":"".concat(R.x||0,"px"),"--arrow-y":"".concat(R.y||0,"px"),...ae,...ue,...r,boxSizing:"border-box",zIndex:X,...u},onMouseEnter:Y,onMouseLeave:B,onPointerEnter:H,onClick:M,onPointerDownCapture:W},P&&e.createElement(h,{prefixCls:a,arrow:P,arrowPos:R,align:S}),e.createElement(v,{cache:!x&&!w},Q))})),D)}),C=e.createContext(null),w=e.createContext(null);function M(e){return e?Array.isArray(e)?e:[e]:[]}function E(e=[],t=[],n){const o=(e,t)=>e[t]||"";return n?o(e,0)===o(t,0):o(e,0)===o(t,0)&&o(e,1)===o(t,1)}function P(e,t,n,o){var r;const{points:l}=n,s=Object.keys(e);for(let i=0;i<s.length;i+=1){const n=s[i];if(E(null==(r=e[n])?void 0:r.points,l,o))return"".concat(t,"-placement-").concat(n)}return""}function R(e){return e.ownerDocument.defaultView}function S(e){const t=[];let n=null==e?void 0:e.parentElement;const o=["hidden","scroll","clip","auto"];for(;n;){const{overflowX:e,overflowY:r,overflow:l}=R(n).getComputedStyle(n);[e,r,l].some(e=>o.includes(e))&&t.push(n),n=n.parentElement}return t}function k(e,t=1){return Number.isNaN(e)?t:e}function L(e){return k(parseFloat(e),0)}function N(e,t){const n={...e};return(t||[]).forEach(e=>{if(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)return;const{overflow:t,overflowClipMargin:o,borderTopWidth:r,borderBottomWidth:l,borderLeftWidth:s,borderRightWidth:i}=R(e).getComputedStyle(e),a=e.getBoundingClientRect(),{offsetHeight:u,clientHeight:c,offsetWidth:p,clientWidth:f}=e,m=L(r),h=L(l),d=L(s),g=L(i),v=k(Math.round(a.width/p*1e3)/1e3),y=k(Math.round(a.height/u*1e3)/1e3),b=(p-f-d-g)*v,x=(u-c-m-h)*y,C=m*y,w=h*y,M=d*v,E=g*v;let P=0,S=0;if("clip"===t){const e=L(o);P=e*v,S=e*y}const N=a.x+M-P,A=a.y+C-S,O=N+a.width+2*P-M-E-b,j=A+a.height+2*S-C-w-x;n.left=Math.max(n.left,N),n.top=Math.max(n.top,A),n.right=Math.min(n.right,O),n.bottom=Math.min(n.bottom,j)}),n}function A(e,t=0){const n="".concat(t),o=n.match(/^(.*)\%$/);return o?e*(parseFloat(o[1])/100):parseFloat(n)}function O(e,t){const[n,o]=t||[];return[A(e.width,n),A(e.height,o)]}function j(e=""){return[e[0],e[1]]}function z(e,t){const n=t[0],o=t[1];let r,l;return l="t"===n?e.y:"b"===n?e.y+e.height:e.y+e.height/2,r="l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,{x:r,y:l}}function D(e,t){const n=[...e];return n[t]={t:"b",b:"t",l:"r",r:"l"}[e[t]]||"c",n}function X(e){return e.join("")}function Y(t,n,l,a,u,c,p,f){const[m,h]=e.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:u[a]||{}}),d=e.useRef(0),g=e.useMemo(()=>!n||f?[]:S(n),[n]),v=e.useRef({});t||(v.current={});const y=r(()=>{var e,o,r,m,d,y;if(n&&l&&t&&!f){let t=function(e,t,n=se){const o=H.x+e,r=H.y+t,l=o+U,s=r+J,i=Math.max(o,n.left),a=Math.max(r,n.top),u=Math.min(l,n.right),c=Math.min(s,n.bottom);return Math.max(0,(u-i)*(c-a))},f=function(){He=H.y+Re,We=He+J,qe=H.x+Pe,Fe=qe+U};const b=n,x=b.ownerDocument,C=R(b),{position:w}=C.getComputedStyle(b),M=b.style.left,E=b.style.top,P=b.style.right,S=b.style.bottom,L=b.style.overflow,A={...u[a],...c},Y=x.createElement("div");let B;if(null==(e=b.parentElement)||e.appendChild(Y),Y.style.left="".concat(b.offsetLeft,"px"),Y.style.top="".concat(b.offsetTop,"px"),Y.style.position=w,Y.style.height="".concat(b.offsetHeight,"px"),Y.style.width="".concat(b.offsetWidth,"px"),b.style.left="0",b.style.top="0",b.style.right="auto",b.style.bottom="auto",b.style.overflow="hidden",Array.isArray(l))B={x:l[0],y:l[1],width:0,height:0};else{const e=l.getBoundingClientRect();e.x=null!=(o=e.x)?o:e.left,e.y=null!=(r=e.y)?r:e.top,B={x:e.x,y:e.y,width:e.width,height:e.height}}const H=b.getBoundingClientRect(),{height:W,width:q}=C.getComputedStyle(b);H.x=null!=(m=H.x)?m:H.left,H.y=null!=(d=H.y)?d:H.top;const{clientWidth:F,clientHeight:I,scrollWidth:T,scrollHeight:_,scrollTop:V,scrollLeft:G}=x.documentElement,J=H.height,U=H.width,$=B.height,K=B.width,Q={left:0,top:0,right:F,bottom:I},Z={left:-G,top:-V,right:T-G,bottom:_-V};let{htmlRegion:ee}=A;const te="visible",ne="visibleFirst";"scroll"!==ee&&ee!==ne&&(ee=te);const oe=ee===ne,re=N(Z,g),le=N(Q,g),se=ee===te?le:re,ie=oe?le:se;b.style.left="auto",b.style.top="auto",b.style.right="0",b.style.bottom="0";const ae=b.getBoundingClientRect();b.style.left=M,b.style.top=E,b.style.right=P,b.style.bottom=S,b.style.overflow=L,null==(y=b.parentElement)||y.removeChild(Y);const ue=k(Math.round(U/parseFloat(q)*1e3)/1e3),ce=k(Math.round(J/parseFloat(W)*1e3)/1e3);if(0===ue||0===ce||s(l)&&!i(l))return;const{offset:pe,targetOffset:fe}=A;let[me,he]=O(H,pe);const[de,ge]=O(B,fe);B.x-=de,B.y-=ge;const[ve,ye]=A.points||[],be=j(ye),xe=j(ve),Ce=z(B,be),we=z(H,xe),Me={...A};let Ee=[xe,be],Pe=Ce.x-we.x+me,Re=Ce.y-we.y+he;const Se=t(Pe,Re),ke=t(Pe,Re,le),Le=z(B,["t","l"]),Ne=z(H,["t","l"]),Ae=z(B,["b","r"]),Oe=z(H,["b","r"]),je=A.overflow||{},{adjustX:ze,adjustY:De,shiftX:Xe,shiftY:Ye}=je,Be=e=>"boolean"==typeof e?e:e>=0;let He,We,qe,Fe;f();const Ie=Be(De),Te=xe[0]===be[0];if(Ie&&"t"===xe[0]&&(We>ie.bottom||v.current.bt)){let e=Re;Te?e-=J-$:e=Le.y-Oe.y-he;const n=t(Pe,e),o=t(Pe,e,le);n>Se||n===Se&&(!oe||o>=ke)?(v.current.bt=!0,Re=e,he=-he,Ee=[D(Ee[0],0),D(Ee[1],0)]):v.current.bt=!1}if(Ie&&"b"===xe[0]&&(He<ie.top||v.current.tb)){let e=Re;Te?e+=J-$:e=Ae.y-Ne.y-he;const n=t(Pe,e),o=t(Pe,e,le);n>Se||n===Se&&(!oe||o>=ke)?(v.current.tb=!0,Re=e,he=-he,Ee=[D(Ee[0],0),D(Ee[1],0)]):v.current.tb=!1}const _e=Be(ze),Ve=xe[1]===be[1];if(_e&&"l"===xe[1]&&(Fe>ie.right||v.current.rl)){let e=Pe;Ve?e-=U-K:e=Le.x-Oe.x-me;const n=t(e,Re),o=t(e,Re,le);n>Se||n===Se&&(!oe||o>=ke)?(v.current.rl=!0,Pe=e,me=-me,Ee=[D(Ee[0],1),D(Ee[1],1)]):v.current.rl=!1}if(_e&&"r"===xe[1]&&(qe<ie.left||v.current.lr)){let e=Pe;Ve?e+=U-K:e=Ae.x-Ne.x-me;const n=t(e,Re),o=t(e,Re,le);n>Se||n===Se&&(!oe||o>=ke)?(v.current.lr=!0,Pe=e,me=-me,Ee=[D(Ee[0],1),D(Ee[1],1)]):v.current.lr=!1}Me.points=[X(Ee[0]),X(Ee[1])],f();const Ge=!0===Xe?0:Xe;"number"==typeof Ge&&(qe<le.left&&(Pe-=qe-le.left-me,B.x+K<le.left+Ge&&(Pe+=B.x-le.left+K-Ge)),Fe>le.right&&(Pe-=Fe-le.right-me,B.x>le.right-Ge&&(Pe+=B.x-le.right+Ge)));const Je=!0===Ye?0:Ye;"number"==typeof Je&&(He<le.top&&(Re-=He-le.top-he,B.y+$<le.top+Je&&(Re+=B.y-le.top+$-Je)),We>le.bottom&&(Re-=We-le.bottom-he,B.y>le.bottom-Je&&(Re+=B.y-le.bottom+Je)));const Ue=H.x+Pe,$e=Ue+U,Ke=H.y+Re,Qe=Ke+J,Ze=B.x,et=Ze+K,tt=B.y,nt=tt+$,ot=(Math.max(Ue,Ze)+Math.min($e,et))/2-Ue,rt=(Math.max(Ke,tt)+Math.min(Qe,nt))/2-Ke;null==p||p(n,Me);let lt=ae.right-H.x-(Pe+H.width),st=ae.bottom-H.y-(Re+H.height);1===ue&&(Pe=Math.round(Pe),lt=Math.round(lt)),1===ce&&(Re=Math.round(Re),st=Math.round(st));h({ready:!0,offsetX:Pe/ue,offsetY:Re/ce,offsetR:lt/ue,offsetB:st/ce,arrowX:ot/ue,arrowY:rt/ce,scaleX:ue,scaleY:ce,align:Me})}}),b=()=>{h(e=>({...e,ready:!1}))};return o(b,[a]),o(()=>{t||b()},[t]),[m.ready,m.offsetX,m.offsetY,m.offsetR,m.offsetB,m.arrowX,m.arrowY,m.scaleX,m.scaleY,m.align,()=>{d.current+=1;const e=d.current;Promise.resolve().then(()=>{d.current===e&&y()})}]}function B(){const t=e.useRef(null),n=()=>{t.current&&(clearTimeout(t.current),t.current=null)};return e.useEffect(()=>()=>{n()},[]),(e,o)=>{n(),0===o?e():t.current=setTimeout(()=>{e()},1e3*o)}}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H.apply(this,arguments)}const W=e=>{const{prefixCls:n,isMobile:o,ready:r,open:l,align:s,offsetR:i,offsetB:a,offsetX:u,offsetY:c,arrowPos:m,popupSize:h,motion:d,uniqueContainerClassName:g,uniqueContainerStyle:v}=e,b="".concat(n,"-unique-container"),[x,C]=t.useState(!1),w=y(o,r,l,s,i,a,u,c),M=t.useRef(w);r&&(M.current=w);const E={};return h&&(E.width=h.width,E.height=h.height),t.createElement(f,H({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,leavedClassName:"".concat(b,"-hidden")},d,{visible:l,onVisibleChanged:e=>{C(e)}}),({className:e,style:n})=>{const o=p(b,e,g,{["".concat(b,"-visible")]:x});return t.createElement("div",{className:o,style:{"--arrow-x":"".concat((null==m?void 0:m.x)||0,"px"),"--arrow-y":"".concat((null==m?void 0:m.y)||0,"px"),...M.current,...E,...n,...v}})})},q=({children:o,postTriggerProps:l})=>{const[i,a,u,c]=function(){const[e,n]=t.useState(null),[o,l]=t.useState(!1),[s,i]=t.useState(!1),a=t.useRef(null),u=r(e=>{!1===e?(a.current=null,l(!1)):s&&o?a.current=e:(l(!0),n(e),a.current=null,o||i(!0))}),c=r(e=>{e?(i(!1),a.current&&(n(a.current),a.current=null)):(i(!1),a.current=null)});return[u,o,e,c]}(),f=e.useMemo(()=>u&&l?l(u):u,[u,l]),[m,h]=e.useState(null),[d,g]=e.useState(null),v=e.useRef(null),y=r(e=>{v.current=e,s(e)&&m!==e&&h(e)}),b=e.useRef(null),M=B(),E=r((e,t)=>{b.current=t,M(()=>{i(e)},e.delay)}),R=e=>{M(()=>{var e;(null==(e=b.current)?void 0:e.call(b))||i(!1)},e)},S=r(e=>{c(e)}),[k,L,N,A,O,j,z,,,D,X]=Y(a,m,null==f?void 0:f.target,null==f?void 0:f.popupPlacement,(null==f?void 0:f.builtinPlacements)||{},null==f?void 0:f.popupAlign,void 0,!1),H=e.useMemo(()=>{var e;if(!f)return"";const t=P(f.builtinPlacements||{},f.prefixCls||"",D,!1);return p(t,null==(e=f.getPopupClassNameFromAlign)?void 0:e.call(f,D))},[D,null==f?void 0:f.getPopupClassNameFromAlign,null==f?void 0:f.builtinPlacements,null==f?void 0:f.prefixCls]),q=e.useMemo(()=>({show:E,hide:R}),[]);e.useEffect(()=>{X()},[null==f?void 0:f.target]);const F=r(()=>(X(),Promise.resolve())),I=e.useRef({}),T=e.useContext(C),_=e.useMemo(()=>({registerSubPopup:(e,t)=>{I.current[e]=t,null==T||T.registerSubPopup(e,t)}}),[T]),V=null==f?void 0:f.prefixCls;return e.createElement(w.Provider,{value:q},o,f&&e.createElement(C.Provider,{value:_},e.createElement(x,{ref:y,portal:n,prefixCls:V,popup:f.popup,className:p(f.popupClassName,H,"".concat(V,"-unique-controlled")),style:f.popupStyle,target:f.target,open:a,keepDom:!0,fresh:!0,autoDestroy:!1,onVisibleChanged:S,ready:k,offsetX:L,offsetY:N,offsetR:A,offsetB:O,onAlign:X,onPrepare:F,onResize:e=>g({width:e.offsetWidth,height:e.offsetHeight}),arrowPos:{x:j,y:z},align:D,zIndex:f.zIndex,mask:f.mask,arrow:f.arrow,motion:f.popupMotion,maskMotion:f.maskMotion,getPopupContainer:f.getPopupContainer},e.createElement(W,{prefixCls:V,isMobile:!1,ready:k,open:a,align:D,offsetR:A,offsetB:O,offsetX:L,offsetY:N,arrowPos:{x:j,y:z},popupSize:d,motion:f.popupMotion,uniqueContainerClassName:p(f.uniqueContainerClassName,H),uniqueContainerStyle:f.uniqueContainerStyle}))))};const F=function(t=n){return e.forwardRef((n,l)=>{const{prefixCls:i="rc-trigger-popup",children:f,action:h="hover",showAction:d,hideAction:g,popupVisible:v,defaultPopupVisible:y,onOpenChange:b,afterOpenChange:E,onPopupVisibleChange:k,afterPopupVisibleChange:L,mouseEnterDelay:N,mouseLeaveDelay:A=.1,focusDelay:O,blurDelay:j,mask:z,maskClosable:D=!0,getPopupContainer:X,forceRender:H,autoDestroy:W,popup:q,popupClassName:F,uniqueContainerClassName:I,uniqueContainerStyle:T,popupStyle:_,popupPlacement:V,builtinPlacements:G={},popupAlign:J,zIndex:U,stretch:$,getPopupClassNameFromAlign:K,fresh:Q,unique:Z,alignPoint:ee,onPopupClick:te,onPopupAlign:ne,arrow:oe,popupMotion:re,maskMotion:le,mobile:se,...ie}=n,ae=W||!1,ue=void 0===v,ce=!!se,pe=e.useRef({}),fe=e.useContext(C),me=e.useMemo(()=>({registerSubPopup:(e,t)=>{pe.current[e]=t,null==fe||fe.registerSubPopup(e,t)}}),[fe]),he=e.useContext(w),de=u(),[ge,ve]=e.useState(null),ye=e.useRef(null),be=r(e=>{ye.current=e,s(e)&&ge!==e&&ve(e),null==fe||fe.registerSubPopup(de,e)}),[xe,Ce]=e.useState(null),we=e.useRef(null),Me=r(e=>{s(e)&&xe!==e&&(Ce(e),we.current=e)}),Ee={},Pe=r(e=>{var t,n;const o=xe;return(null==o?void 0:o.contains(e))||(null==(t=a(o))?void 0:t.host)===e||e===o||(null==ge?void 0:ge.contains(e))||(null==(n=a(ge))?void 0:n.host)===e||e===ge||Object.values(pe.current).some(t=>(null==t?void 0:t.contains(e))||e===t)}),Re=oe?{...!0!==oe?oe:{}}:null,[Se,ke]=c(y||!1,v),Le=Se||!1,Ne=e.useMemo(()=>{const t="function"==typeof f?f({open:Le}):f;return e.Children.only(t)},[f,Le]),Ae=(null==Ne?void 0:Ne.props)||{},Oe=r(()=>Le),je=r((e=0)=>({popup:q,target:xe,delay:e,prefixCls:i,popupClassName:F,uniqueContainerClassName:I,uniqueContainerStyle:T,popupStyle:_,popupPlacement:V,builtinPlacements:G,popupAlign:J,zIndex:U,mask:z,maskClosable:D,popupMotion:re,maskMotion:le,arrow:Re,getPopupContainer:X,getPopupClassNameFromAlign:K,id:de}));o(()=>{he&&Z&&xe&&!ue&&!fe&&(Le?he.show(je(N),Oe):he.hide(A))},[Le,xe]);const ze=e.useRef(Le);ze.current=Le;const De=e.useRef([]);De.current=[];const Xe=r(e=>{var t;ke(e),(null!=(t=De.current[De.current.length-1])?t:Le)!==e&&(De.current.push(e),null==b||b(e),null==k||k(e))}),Ye=B(),Be=(e,t=0)=>{void 0===v&&he&&Z&&ue&&!fe?e?he.show(je(t),Oe):he.hide(t):Ye(()=>{Xe(e)},t)},[He,We]=e.useState(!1);o(e=>{e&&!Le||We(!0)},[Le]);const[qe,Fe]=e.useState(null),[Ie,Te]=e.useState(null),_e=e=>{Te([e.clientX,e.clientY])},[Ve,Ge,Je,Ue,$e,Ke,Qe,Ze,et,tt,nt]=Y(Le,ge,ee&&null!==Ie?Ie:xe,V,G,J,ne,ce),[ot,rt]=function(t,n,o){return e.useMemo(()=>{const e=M(null!=n?n:t),r=M(null!=o?o:t),l=new Set(e),s=new Set(r);return l.has("hover")&&!l.has("click")&&l.add("touch"),s.has("hover")&&!s.has("click")&&s.add("touch"),[l,s]},[t,n,o])}(h,d,g),lt=ot.has("click"),st=rt.has("click")||rt.has("contextMenu"),it=r(()=>{He||nt()});!function(e,t,n,r,l){o(()=>{if(e&&t&&n){let e=function(){r(),l()};const o=n,s=S(t),i=S(o),a=R(o),u=new Set([a,...s,...i]);return u.forEach(t=>{t.addEventListener("scroll",e,{passive:!0})}),a.addEventListener("resize",e,{passive:!0}),r(),()=>{u.forEach(t=>{t.removeEventListener("scroll",e),a.removeEventListener("resize",e)})}}},[e,t,n])}(Le,xe,ge,it,()=>{ze.current&&ee&&st&&Be(!1)}),o(()=>{it()},[Ie,V]),o(()=>{Le&&!(null==G?void 0:G[V])&&it()},[JSON.stringify(J)]);const at=e.useMemo(()=>{const e=P(G,i,tt,ee);return p(e,null==K?void 0:K(tt))},[tt,K,G,i,ee]);e.useImperativeHandle(l,()=>({nativeElement:we.current,popupElement:ye.current,forceAlign:it}));const[ut,ct]=e.useState(0),[pt,ft]=e.useState(0),mt=()=>{if($&&xe){const e=xe.getBoundingClientRect();ct(e.width),ft(e.height)}};function ht(e,t,n,o,r){Ee[e]=(l,...s)=>{var i;r&&r()||(null==o||o(l),Be(t,n)),null==(i=Ae[e])||i.call(Ae,l,...s)}}o(()=>{qe&&(nt(),qe(),Fe(null))},[qe]);const dt=ot.has("touch"),gt=rt.has("touch"),vt=e.useRef(!1);(dt||gt)&&(Ee.onTouchStart=(...e)=>{var t;vt.current=!0,ze.current&&gt?Be(!1):!ze.current&&dt&&Be(!0),null==(t=Ae.onTouchStart)||t.call(Ae,...e)}),(lt||st)&&(Ee.onClick=(e,...t)=>{var n;ze.current&&st?Be(!1):!ze.current&&lt&&(_e(e),Be(!0)),null==(n=Ae.onClick)||n.call(Ae,e,...t),vt.current=!1});const yt=function(t,n,o,r,l,s,i,u){const c=e.useRef(t);c.current=t;const p=e.useRef(!1);return e.useEffect(()=>{if(n&&r&&(!l||s)){const e=()=>{p.current=!1},t=e=>{var t,n;!c.current||i((null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)||p.current||u(!1)},n=R(r);n.addEventListener("pointerdown",e,!0),n.addEventListener("mousedown",t,!0),n.addEventListener("contextmenu",t,!0);const l=a(o);return l&&(l.addEventListener("mousedown",t,!0),l.addEventListener("contextmenu",t,!0)),()=>{n.removeEventListener("pointerdown",e,!0),n.removeEventListener("mousedown",t,!0),n.removeEventListener("contextmenu",t,!0),l&&(l.removeEventListener("mousedown",t,!0),l.removeEventListener("contextmenu",t,!0))}}},[n,o,r,l,s]),function(){p.current=!0}}(Le,st||gt,xe,ge,z,D,Pe,Be),bt=ot.has("hover"),xt=rt.has("hover");let Ct,wt;const Mt=()=>vt.current;if(bt){const e=e=>{_e(e)};ht("onMouseEnter",!0,N,e,Mt),ht("onPointerEnter",!0,N,e,Mt),Ct=e=>{(Le||He)&&(null==ge?void 0:ge.contains(e.target))&&Be(!0,N)},ee&&(Ee.onMouseMove=e=>{var t;null==(t=Ae.onMouseMove)||t.call(Ae,e)})}xt&&(ht("onMouseLeave",!1,A,void 0,Mt),ht("onPointerLeave",!1,A,void 0,Mt),wt=()=>{Be(!1,A)}),ot.has("focus")&&ht("onFocus",!0,O),rt.has("focus")&&ht("onBlur",!1,j),ot.has("contextMenu")&&(Ee.onContextMenu=(e,...t)=>{var n;ze.current&&rt.has("contextMenu")?Be(!1):(_e(e),Be(!0)),e.preventDefault(),null==(n=Ae.onContextMenu)||n.call(Ae,e,...t)});const Et=e.useRef(!1);Et.current||(Et.current=H||Le||He);const Pt={...Ae,...Ee},Rt={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach(e=>{ie[e]&&(Rt[e]=(...t)=>{var n;null==(n=Pt[e])||n.call(Pt,...t),ie[e](...t)})});const St={x:Ke,y:Qe},kt=e.cloneElement(Ne,{...Pt,...Rt});return e.createElement(e.Fragment,null,e.createElement(m,{disabled:!Le,ref:Me,onResize:()=>{mt(),it()}},kt),Et.current&&(!he||!Z)&&e.createElement(C.Provider,{value:me},e.createElement(x,{portal:t,ref:be,prefixCls:i,popup:q,className:p(F,!ce&&at),style:_,target:xe,onMouseEnter:Ct,onMouseLeave:wt,onPointerEnter:Ct,zIndex:U,open:Le,keepDom:He,fresh:Q,onClick:te,onPointerDownCapture:yt,mask:z,motion:re,maskMotion:le,onVisibleChanged:e=>{We(!1),nt(),null==E||E(e),null==L||L(e)},onPrepare:()=>new Promise(e=>{mt(),Fe(()=>e)}),forceRender:H,autoDestroy:ae,getPopupContainer:X,align:tt,arrow:Re,arrowPos:St,ready:Ve,offsetX:Ge,offsetY:Je,offsetR:Ue,offsetB:$e,onAlign:it,stretch:$,targetWidth:ut/Ze,targetHeight:pt/et,mobile:se})))})}(n);export{F as T,q as U};
