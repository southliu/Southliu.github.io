import{r as e,e as t}from"./react@19.2.1.BpVBN_43.js";import{P as n}from"./@rc-component_portal@2.0.1__3d144a3e75e5531d8ca8009183b58415.Bf4rG5sj.js";import{h as o,e as r,m as s,L as i,F as a,g as l,f as u,d as c}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{c as p}from"./clsx@2.1.1.BvmCeSbq.js";import{C as f}from"./@rc-component_motion@1.1.6__0afcbe001b0ce065bd610efbbf939bf0.BsUikez1.js";import{R as m}from"./@rc-component_resize-observ_eaaccb47489da2719f35257c4ad9d3c9.BynXlAVv.js";function h(t){const{prefixCls:n,align:o,arrow:r,arrowPos:s}=t,{className:i,content:a,style:l}=r||{},{x:u=0,y:c=0}=s,f=e.useRef(null);if(!o||!o.points)return null;const m={position:"absolute"};if(!1!==o.autoArrow){const e=o.points[0],t=o.points[1],n=e[0],r=e[1],s=t[0],i=t[1];n!==s&&["t","b"].includes(n)?"t"===n?m.top=0:m.bottom=0:m.top=c,r!==i&&["l","r"].includes(r)?"l"===r?m.left=0:m.right=0:m.left=u}return e.createElement("div",{ref:f,className:p(`${n}-arrow`,i),style:{...m,...l}},a)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d.apply(this,arguments)}function g(t){const{prefixCls:n,open:o,zIndex:r,mask:s,motion:i,mobile:a}=t;return s?e.createElement(f,d({},i,{motionAppear:!0,visible:o,removeOnLeave:!0}),({className:t})=>e.createElement("div",{style:{zIndex:r},className:p(`${n}-mask`,a&&`${n}-mobile-mask`,t)})):null}const y=e.memo(({children:e})=>e,(e,t)=>t.cache);function b(e,t,n,o,r,s,i,a){const l="auto",u=e?{}:{left:"-1000vw",top:"-1000vh",right:l,bottom:l};if(!e&&(t||!n)){const{points:e}=o,t=o.dynamicInset||o._experimental?.dynamicInset,n=t&&"r"===e[0][1],c=t&&"b"===e[0][0];n?(u.right=r,u.left=l):(u.left=i,u.right=l),c?(u.bottom=s,u.top=l):(u.top=a,u.bottom=l)}return u}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v.apply(this,arguments)}const x=e.forwardRef((t,n)=>{const{popup:i,className:a,prefixCls:l,style:u,target:c,onVisibleChanged:d,open:x,keepDom:C,fresh:w,onClick:M,mask:E,arrow:P,arrowPos:R,align:S,motion:k,maskMotion:L,mobile:N,forceRender:A,getPopupContainer:O,autoDestroy:$,portal:j,children:z,zIndex:D,onMouseEnter:X,onMouseLeave:Y,onPointerEnter:B,onPointerDownCapture:F,ready:H,offsetX:W,offsetY:q,offsetR:I,offsetB:T,onAlign:_,onPrepare:V,onResize:J,stretch:U,targetWidth:G,targetHeight:K}=t,Q="function"==typeof i?i():i,Z=x||C,ee=!!N,[te,ne,oe]=e.useMemo(()=>N?[N.mask,N.maskMotion,N.motion]:[E,L,k],[N,E,L,k]),re=O?.length>0,[se,ie]=e.useState(!O||!re);o(()=>{!se&&re&&c&&ie(!0)},[se,re,c]);const ae=r((e,t)=>{J?.(e,t),_()}),le=b(ee,H,x,S,I,T,W,q);if(!se)return null;const ue={};return U&&(U.includes("height")&&K?ue.height=K:U.includes("minHeight")&&K&&(ue.minHeight=K),U.includes("width")&&G?ue.width=G:U.includes("minWidth")&&G&&(ue.minWidth=G)),x||(ue.pointerEvents="none"),e.createElement(j,{open:A||Z,getContainer:O&&(()=>O(c)),autoDestroy:$},e.createElement(g,{prefixCls:l,open:x,zIndex:D,mask:te,motion:ne,mobile:ee}),e.createElement(m,{onResize:ae,disabled:!x},t=>e.createElement(f,v({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:A,leavedClassName:`${l}-hidden`},oe,{onAppearPrepare:V,onEnterPrepare:V,visible:x,onVisibleChanged:e=>{k?.onVisibleChanged?.(e),d(e)}}),({className:o,style:r},i)=>{const c=p(l,o,a,{[`${l}-mobile`]:ee});return e.createElement("div",{ref:s(t,n,i),className:c,style:{"--arrow-x":`${R.x||0}px`,"--arrow-y":`${R.y||0}px`,...le,...ue,...r,boxSizing:"border-box",zIndex:D,...u},onMouseEnter:X,onMouseLeave:Y,onPointerEnter:B,onClick:M,onPointerDownCapture:F},P&&e.createElement(h,{prefixCls:l,arrow:P,arrowPos:R,align:S}),e.createElement(y,{cache:!x&&!w},Q))})),z)}),C=e.createContext(null),w=e.createContext(null);function M(e){return e?Array.isArray(e)?e:[e]:[]}function E(e=[],t=[],n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function P(e,t,n,o){const{points:r}=n,s=Object.keys(e);for(let i=0;i<s.length;i+=1){const n=s[i];if(E(e[n]?.points,r,o))return`${t}-placement-${n}`}return""}function R(e){return e.ownerDocument.defaultView}function S(e){const t=[];let n=e?.parentElement;const o=["hidden","scroll","clip","auto"];for(;n;){const{overflowX:e,overflowY:r,overflow:s}=R(n).getComputedStyle(n);[e,r,s].some(e=>o.includes(e))&&t.push(n),n=n.parentElement}return t}function k(e,t=1){return Number.isNaN(e)?t:e}function L(e){return k(parseFloat(e),0)}function N(e,t){const n={...e};return(t||[]).forEach(e=>{if(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)return;const{overflow:t,overflowClipMargin:o,borderTopWidth:r,borderBottomWidth:s,borderLeftWidth:i,borderRightWidth:a}=R(e).getComputedStyle(e),l=e.getBoundingClientRect(),{offsetHeight:u,clientHeight:c,offsetWidth:p,clientWidth:f}=e,m=L(r),h=L(s),d=L(i),g=L(a),y=k(Math.round(l.width/p*1e3)/1e3),b=k(Math.round(l.height/u*1e3)/1e3),v=(p-f-d-g)*y,x=(u-c-m-h)*b,C=m*b,w=h*b,M=d*y,E=g*y;let P=0,S=0;if("clip"===t){const e=L(o);P=e*y,S=e*b}const N=l.x+M-P,A=l.y+C-S,O=N+l.width+2*P-M-E-v,$=A+l.height+2*S-C-w-x;n.left=Math.max(n.left,N),n.top=Math.max(n.top,A),n.right=Math.min(n.right,O),n.bottom=Math.min(n.bottom,$)}),n}function A(e,t=0){const n=`${t}`,o=n.match(/^(.*)\%$/);return o?e*(parseFloat(o[1])/100):parseFloat(n)}function O(e,t){const[n,o]=t||[];return[A(e.width,n),A(e.height,o)]}function $(e=""){return[e[0],e[1]]}function j(e,t){const n=t[0],o=t[1];let r,s;return s="t"===n?e.y:"b"===n?e.y+e.height:e.y+e.height/2,r="l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,{x:r,y:s}}function z(e,t){const n={t:"b",b:"t",l:"r",r:"l"};return e.map((e,o)=>o===t?n[e]||"c":e).join("")}function D(t,n,s,l,u,c,p,f){const[m,h]=e.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:u[l]||{}}),d=e.useRef(0),g=e.useMemo(()=>!n||f?[]:S(n),[n]),y=e.useRef({});t||(y.current={});const b=r(()=>{if(n&&s&&t&&!f){let e=function(e,t,n=Z){const o=P.x+e,r=P.y+t,s=o+W,i=r+H,a=Math.max(o,n.left),l=Math.max(r,n.top),u=Math.min(s,n.right),c=Math.min(i,n.bottom);return Math.max(0,(u-a)*(c-l))},t=function(){Ae=P.y+be,Oe=Ae+H,$e=P.x+ye,je=$e+W};const o=n,r=o.ownerDocument,f=R(o),{position:m}=f.getComputedStyle(o),d=o.style.left,b=o.style.top,v=o.style.right,x=o.style.bottom,C=o.style.overflow,w={...u[l],...c},M=r.createElement("div");let E;if(o.parentElement?.appendChild(M),M.style.left=`${o.offsetLeft}px`,M.style.top=`${o.offsetTop}px`,M.style.position=m,M.style.height=`${o.offsetHeight}px`,M.style.width=`${o.offsetWidth}px`,o.style.left="0",o.style.top="0",o.style.right="auto",o.style.bottom="auto",o.style.overflow="hidden",Array.isArray(s))E={x:s[0],y:s[1],width:0,height:0};else{const e=s.getBoundingClientRect();e.x=e.x??e.left,e.y=e.y??e.top,E={x:e.x,y:e.y,width:e.width,height:e.height}}const P=o.getBoundingClientRect(),{height:S,width:L}=f.getComputedStyle(o);P.x=P.x??P.left,P.y=P.y??P.top;const{clientWidth:A,clientHeight:D,scrollWidth:X,scrollHeight:Y,scrollTop:B,scrollLeft:F}=r.documentElement,H=P.height,W=P.width,q=E.height,I=E.width,T={left:0,top:0,right:A,bottom:D},_={left:-F,top:-B,right:X-F,bottom:Y-B};let{htmlRegion:V}=w;const J="visible",U="visibleFirst";"scroll"!==V&&V!==U&&(V=J);const G=V===U,K=N(_,g),Q=N(T,g),Z=V===J?Q:K,ee=G?Q:Z;o.style.left="auto",o.style.top="auto",o.style.right="0",o.style.bottom="0";const te=o.getBoundingClientRect();o.style.left=d,o.style.top=b,o.style.right=v,o.style.bottom=x,o.style.overflow=C,o.parentElement?.removeChild(M);const ne=k(Math.round(W/parseFloat(L)*1e3)/1e3),oe=k(Math.round(H/parseFloat(S)*1e3)/1e3);if(0===ne||0===oe||i(s)&&!a(s))return;const{offset:re,targetOffset:se}=w;let[ie,ae]=O(P,re);const[le,ue]=O(E,se);E.x-=le,E.y-=ue;const[ce,pe]=w.points||[],fe=$(pe),me=$(ce),he=j(E,fe),de=j(P,me),ge={...w};let ye=he.x-de.x+ie,be=he.y-de.y+ae;const ve=e(ye,be),xe=e(ye,be,Q),Ce=j(E,["t","l"]),we=j(P,["t","l"]),Me=j(E,["b","r"]),Ee=j(P,["b","r"]),Pe=w.overflow||{},{adjustX:Re,adjustY:Se,shiftX:ke,shiftY:Le}=Pe,Ne=e=>"boolean"==typeof e?e:e>=0;let Ae,Oe,$e,je;t();const ze=Ne(Se),De=me[0]===fe[0];if(ze&&"t"===me[0]&&(Oe>ee.bottom||y.current.bt)){let t=be;De?t-=H-q:t=Ce.y-Ee.y-ae;const n=e(ye,t),o=e(ye,t,Q);n>ve||n===ve&&(!G||o>=xe)?(y.current.bt=!0,be=t,ae=-ae,ge.points=[z(me,0),z(fe,0)]):y.current.bt=!1}if(ze&&"b"===me[0]&&(Ae<ee.top||y.current.tb)){let t=be;De?t+=H-q:t=Me.y-we.y-ae;const n=e(ye,t),o=e(ye,t,Q);n>ve||n===ve&&(!G||o>=xe)?(y.current.tb=!0,be=t,ae=-ae,ge.points=[z(me,0),z(fe,0)]):y.current.tb=!1}const Xe=Ne(Re),Ye=me[1]===fe[1];if(Xe&&"l"===me[1]&&(je>ee.right||y.current.rl)){let t=ye;Ye?t-=W-I:t=Ce.x-Ee.x-ie;const n=e(t,be),o=e(t,be,Q);n>ve||n===ve&&(!G||o>=xe)?(y.current.rl=!0,ye=t,ie=-ie,ge.points=[z(me,1),z(fe,1)]):y.current.rl=!1}if(Xe&&"r"===me[1]&&($e<ee.left||y.current.lr)){let t=ye;Ye?t+=W-I:t=Me.x-we.x-ie;const n=e(t,be),o=e(t,be,Q);n>ve||n===ve&&(!G||o>=xe)?(y.current.lr=!0,ye=t,ie=-ie,ge.points=[z(me,1),z(fe,1)]):y.current.lr=!1}t();const Be=!0===ke?0:ke;"number"==typeof Be&&($e<Q.left&&(ye-=$e-Q.left-ie,E.x+I<Q.left+Be&&(ye+=E.x-Q.left+I-Be)),je>Q.right&&(ye-=je-Q.right-ie,E.x>Q.right-Be&&(ye+=E.x-Q.right+Be)));const Fe=!0===Le?0:Le;"number"==typeof Fe&&(Ae<Q.top&&(be-=Ae-Q.top-ae,E.y+q<Q.top+Fe&&(be+=E.y-Q.top+q-Fe)),Oe>Q.bottom&&(be-=Oe-Q.bottom-ae,E.y>Q.bottom-Fe&&(be+=E.y-Q.bottom+Fe)));const He=P.x+ye,We=He+W,qe=P.y+be,Ie=qe+H,Te=E.x,_e=Te+I,Ve=E.y,Je=Ve+q,Ue=(Math.max(He,Te)+Math.min(We,_e))/2-He,Ge=(Math.max(qe,Ve)+Math.min(Ie,Je))/2-qe;p?.(n,ge);let Ke=te.right-P.x-(ye+P.width),Qe=te.bottom-P.y-(be+P.height);1===ne&&(ye=Math.round(ye),Ke=Math.round(Ke)),1===oe&&(be=Math.round(be),Qe=Math.round(Qe));h({ready:!0,offsetX:ye/ne,offsetY:be/oe,offsetR:Ke/ne,offsetB:Qe/oe,arrowX:Ue/ne,arrowY:Ge/oe,scaleX:ne,scaleY:oe,align:ge})}}),v=()=>{h(e=>({...e,ready:!1}))};return o(v,[l]),o(()=>{t||v()},[t]),[m.ready,m.offsetX,m.offsetY,m.offsetR,m.offsetB,m.arrowX,m.arrowY,m.scaleX,m.scaleY,m.align,()=>{d.current+=1;const e=d.current;Promise.resolve().then(()=>{d.current===e&&b()})}]}function X(){const t=e.useRef(null),n=()=>{t.current&&(clearTimeout(t.current),t.current=null)};return e.useEffect(()=>()=>{n()},[]),(e,o)=>{n(),0===o?e():t.current=setTimeout(()=>{e()},1e3*o)}}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Y.apply(this,arguments)}const B=e=>{const{prefixCls:n,isMobile:o,ready:r,open:s,align:i,offsetR:a,offsetB:l,offsetX:u,offsetY:c,arrowPos:m,popupSize:h,motion:d,uniqueContainerClassName:g,uniqueContainerStyle:y}=e,v=`${n}-unique-container`,[x,C]=t.useState(!1),w=b(o,r,s,i,a,l,u,c),M=t.useRef(w);r&&(M.current=w);const E={};return h&&(E.width=h.width,E.height=h.height),t.createElement(f,Y({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,leavedClassName:`${v}-hidden`},d,{visible:s,onVisibleChanged:e=>{C(e)}}),({className:e,style:n})=>{const o=p(v,e,g,{[`${v}-visible`]:x});return t.createElement("div",{className:o,style:{"--arrow-x":`${m?.x||0}px`,"--arrow-y":`${m?.y||0}px`,...M.current,...E,...n,...y}})})},F=({children:o,postTriggerProps:s})=>{const[a,l,u,c]=function(){const[e,n]=t.useState(null),[o,s]=t.useState(!1),[i,a]=t.useState(!1),l=t.useRef(null),u=r(e=>{!1===e?(l.current=null,s(!1)):i&&o?l.current=e:(s(!0),n(e),l.current=null,o||a(!0))}),c=r(e=>{e?(a(!1),l.current&&(n(l.current),l.current=null)):(a(!1),l.current=null)});return[u,o,e,c]}(),f=e.useMemo(()=>u&&s?s(u):u,[u,s]),[m,h]=e.useState(null),[d,g]=e.useState(null),y=e.useRef(null),b=r(e=>{y.current=e,i(e)&&m!==e&&h(e)}),v=e.useRef(null),M=X(),E=r((e,t)=>{v.current=t,M(()=>{a(e)},e.delay)}),R=e=>{M(()=>{v.current?.()||a(!1)},e)},S=r(e=>{c(e)}),[k,L,N,A,O,$,j,,,z,Y]=D(l,m,f?.target,f?.popupPlacement,f?.builtinPlacements||{},f?.popupAlign,void 0,!1),F=e.useMemo(()=>{if(!f)return"";const e=P(f.builtinPlacements||{},f.prefixCls||"",z,!1);return p(e,f.getPopupClassNameFromAlign?.(z))},[z,f?.getPopupClassNameFromAlign,f?.builtinPlacements,f?.prefixCls]),H=e.useMemo(()=>({show:E,hide:R}),[]);e.useEffect(()=>{Y()},[f?.target]);const W=r(()=>(Y(),Promise.resolve())),q=e.useRef({}),I=e.useContext(C),T=e.useMemo(()=>({registerSubPopup:(e,t)=>{q.current[e]=t,I?.registerSubPopup(e,t)}}),[I]),_=f?.prefixCls;return e.createElement(w.Provider,{value:H},o,f&&e.createElement(C.Provider,{value:T},e.createElement(x,{ref:b,portal:n,prefixCls:_,popup:f.popup,className:p(f.popupClassName,F,`${_}-unique-controlled`),style:f.popupStyle,target:f.target,open:l,keepDom:!0,fresh:!0,autoDestroy:!1,onVisibleChanged:S,ready:k,offsetX:L,offsetY:N,offsetR:A,offsetB:O,onAlign:Y,onPrepare:W,onResize:e=>g({width:e.offsetWidth,height:e.offsetHeight}),arrowPos:{x:$,y:j},align:z,zIndex:f.zIndex,mask:f.mask,arrow:f.arrow,motion:f.popupMotion,maskMotion:f.maskMotion,getPopupContainer:f.getPopupContainer},e.createElement(B,{prefixCls:_,isMobile:!1,ready:k,open:l,align:z,offsetR:A,offsetB:O,offsetX:L,offsetY:N,arrowPos:{x:$,y:j},popupSize:d,motion:f.popupMotion,uniqueContainerClassName:p(f.uniqueContainerClassName,F),uniqueContainerStyle:f.uniqueContainerStyle}))))};const H=function(t=n){return e.forwardRef((n,s)=>{const{prefixCls:a="rc-trigger-popup",children:f,action:h="hover",showAction:d,hideAction:g,popupVisible:y,defaultPopupVisible:b,onOpenChange:v,afterOpenChange:E,onPopupVisibleChange:k,afterPopupVisibleChange:L,mouseEnterDelay:N,mouseLeaveDelay:A=.1,focusDelay:O,blurDelay:$,mask:j,maskClosable:z=!0,getPopupContainer:Y,forceRender:B,autoDestroy:F,popup:H,popupClassName:W,uniqueContainerClassName:q,uniqueContainerStyle:I,popupStyle:T,popupPlacement:_,builtinPlacements:V={},popupAlign:J,zIndex:U,stretch:G,getPopupClassNameFromAlign:K,fresh:Q,unique:Z,alignPoint:ee,onPopupClick:te,onPopupAlign:ne,arrow:oe,popupMotion:re,maskMotion:se,mobile:ie,...ae}=n,le=F||!1,ue=void 0===y,ce=!!ie,pe=e.useRef({}),fe=e.useContext(C),me=e.useMemo(()=>({registerSubPopup:(e,t)=>{pe.current[e]=t,fe?.registerSubPopup(e,t)}}),[fe]),he=e.useContext(w),de=u(),[ge,ye]=e.useState(null),be=e.useRef(null),ve=r(e=>{be.current=e,i(e)&&ge!==e&&ye(e),fe?.registerSubPopup(de,e)}),[xe,Ce]=e.useState(null),we=e.useRef(null),Me=r(e=>{i(e)&&xe!==e&&(Ce(e),we.current=e)}),Ee={},Pe=r(e=>{const t=xe;return t?.contains(e)||l(t)?.host===e||e===t||ge?.contains(e)||l(ge)?.host===e||e===ge||Object.values(pe.current).some(t=>t?.contains(e)||e===t)}),Re=oe?{...!0!==oe?oe:{}}:null,[Se,ke]=c(b||!1,y),Le=Se||!1,Ne=e.useMemo(()=>{const t="function"==typeof f?f({open:Le}):f;return e.Children.only(t)},[f,Le]),Ae=Ne?.props||{},Oe=r(()=>Le),$e=r((e=0)=>({popup:H,target:xe,delay:e,prefixCls:a,popupClassName:W,uniqueContainerClassName:q,uniqueContainerStyle:I,popupStyle:T,popupPlacement:_,builtinPlacements:V,popupAlign:J,zIndex:U,mask:j,maskClosable:z,popupMotion:re,maskMotion:se,arrow:Re,getPopupContainer:Y,getPopupClassNameFromAlign:K,id:de}));o(()=>{he&&Z&&xe&&!ue&&!fe&&(Le?he.show($e(N),Oe):he.hide(A))},[Le,xe]);const je=e.useRef(Le);je.current=Le;const ze=e.useRef([]);ze.current=[];const De=r(e=>{ke(e),(ze.current[ze.current.length-1]??Le)!==e&&(ze.current.push(e),v?.(e),k?.(e))}),Xe=X(),Ye=(e,t=0)=>{void 0===y&&he&&Z&&ue&&!fe?e?he.show($e(t),Oe):he.hide(t):Xe(()=>{De(e)},t)},[Be,Fe]=e.useState(!1);o(e=>{e&&!Le||Fe(!0)},[Le]);const[He,We]=e.useState(null),[qe,Ie]=e.useState(null),Te=e=>{Ie([e.clientX,e.clientY])},[_e,Ve,Je,Ue,Ge,Ke,Qe,Ze,et,tt,nt]=D(Le,ge,ee&&null!==qe?qe:xe,_,V,J,ne,ce),[ot,rt]=function(t,n,o){return e.useMemo(()=>{const e=M(n??t),r=M(o??t),s=new Set(e),i=new Set(r);return s.has("hover")&&!s.has("click")&&s.add("touch"),i.has("hover")&&!i.has("click")&&i.add("touch"),[s,i]},[t,n,o])}(h,d,g),st=ot.has("click"),it=rt.has("click")||rt.has("contextMenu"),at=r(()=>{Be||nt()});!function(e,t,n,r,s){o(()=>{if(e&&t&&n){let e=function(){r(),s()};const o=n,i=S(t),a=S(o),l=R(o),u=new Set([l,...i,...a]);return u.forEach(t=>{t.addEventListener("scroll",e,{passive:!0})}),l.addEventListener("resize",e,{passive:!0}),r(),()=>{u.forEach(t=>{t.removeEventListener("scroll",e),l.removeEventListener("resize",e)})}}},[e,t,n])}(Le,xe,ge,at,()=>{je.current&&ee&&it&&Ye(!1)}),o(()=>{at()},[qe,_]),o(()=>{Le&&!V?.[_]&&at()},[JSON.stringify(J)]);const lt=e.useMemo(()=>{const e=P(V,a,tt,ee);return p(e,K?.(tt))},[tt,K,V,a,ee]);e.useImperativeHandle(s,()=>({nativeElement:we.current,popupElement:be.current,forceAlign:at}));const[ut,ct]=e.useState(0),[pt,ft]=e.useState(0),mt=()=>{if(G&&xe){const e=xe.getBoundingClientRect();ct(e.width),ft(e.height)}};function ht(e,t,n,o,r){Ee[e]=(s,...i)=>{r&&r()||(o?.(s),Ye(t,n)),Ae[e]?.(s,...i)}}o(()=>{He&&(nt(),He(),We(null))},[He]);const dt=ot.has("touch"),gt=rt.has("touch"),yt=e.useRef(!1);(dt||gt)&&(Ee.onTouchStart=(...e)=>{yt.current=!0,je.current&&gt?Ye(!1):!je.current&&dt&&Ye(!0),Ae.onTouchStart?.(...e)}),(st||it)&&(Ee.onClick=(e,...t)=>{je.current&&it?Ye(!1):!je.current&&st&&(Te(e),Ye(!0)),Ae.onClick?.(e,...t),yt.current=!1});const bt=function(t,n,o,r,s,i,a,u){const c=e.useRef(t);c.current=t;const p=e.useRef(!1);return e.useEffect(()=>{if(n&&r&&(!s||i)){const e=()=>{p.current=!1},t=e=>{!c.current||a(e.composedPath?.()?.[0]||e.target)||p.current||u(!1)},n=R(r);n.addEventListener("pointerdown",e,!0),n.addEventListener("mousedown",t,!0),n.addEventListener("contextmenu",t,!0);const s=l(o);return s&&(s.addEventListener("mousedown",t,!0),s.addEventListener("contextmenu",t,!0)),()=>{n.removeEventListener("pointerdown",e,!0),n.removeEventListener("mousedown",t,!0),n.removeEventListener("contextmenu",t,!0),s&&(s.removeEventListener("mousedown",t,!0),s.removeEventListener("contextmenu",t,!0))}}},[n,o,r,s,i]),function(){p.current=!0}}(Le,it||gt,xe,ge,j,z,Pe,Ye),vt=ot.has("hover"),xt=rt.has("hover");let Ct,wt;const Mt=()=>yt.current;if(vt){const e=e=>{Te(e)};ht("onMouseEnter",!0,N,e,Mt),ht("onPointerEnter",!0,N,e,Mt),Ct=e=>{(Le||Be)&&ge?.contains(e.target)&&Ye(!0,N)},ee&&(Ee.onMouseMove=e=>{Ae.onMouseMove?.(e)})}xt&&(ht("onMouseLeave",!1,A,void 0,Mt),ht("onPointerLeave",!1,A,void 0,Mt),wt=()=>{Ye(!1,A)}),ot.has("focus")&&ht("onFocus",!0,O),rt.has("focus")&&ht("onBlur",!1,$),ot.has("contextMenu")&&(Ee.onContextMenu=(e,...t)=>{je.current&&rt.has("contextMenu")?Ye(!1):(Te(e),Ye(!0)),e.preventDefault(),Ae.onContextMenu?.(e,...t)});const Et=e.useRef(!1);Et.current||(Et.current=B||Le||Be);const Pt={...Ae,...Ee},Rt={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach(e=>{ae[e]&&(Rt[e]=(...t)=>{Pt[e]?.(...t),ae[e](...t)})});const St={x:Ke,y:Qe},kt=e.cloneElement(Ne,{...Pt,...Rt});return e.createElement(e.Fragment,null,e.createElement(m,{disabled:!Le,ref:Me,onResize:()=>{mt(),at()}},kt),Et.current&&(!he||!Z)&&e.createElement(C.Provider,{value:me},e.createElement(x,{portal:t,ref:ve,prefixCls:a,popup:H,className:p(W,!ce&&lt),style:T,target:xe,onMouseEnter:Ct,onMouseLeave:wt,onPointerEnter:Ct,zIndex:U,open:Le,keepDom:Be,fresh:Q,onClick:te,onPointerDownCapture:bt,mask:j,motion:re,maskMotion:se,onVisibleChanged:e=>{Fe(!1),nt(),E?.(e),L?.(e)},onPrepare:()=>new Promise(e=>{mt(),We(()=>e)}),forceRender:B,autoDestroy:le,getPopupContainer:Y,align:tt,arrow:Re,arrowPos:St,ready:_e,offsetX:Ve,offsetY:Je,offsetR:Ue,offsetB:Ge,onAlign:at,stretch:G,targetWidth:ut/Ze,targetHeight:pt/et,mobile:ie})))})}(n);export{H as T,F as U};
