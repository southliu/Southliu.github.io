import{g as e,d as t,k as r,h as n,f as o,_ as i,a as u,i as a}from"./@babel_runtime@7.27.6.R8rA2vPb.js";import{c}from"./classnames@2.5.1.6O6XshCl.js";import{R as l}from"./rc-resize-observer@1.4.3_react-dom@19.1.0_react@19.1.0.FPNjRaMA.js";import{t as s,a as f,e as v}from"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0.ZpIlvg4e.js";import{r as d}from"./react@19.1.0.QBh3HWPD.js";import{r as h}from"./react-dom@19.1.0_react@19.1.0.o1WqAU0f.js";var m=d.forwardRef((function(n,o){var i=n.height,u=n.offsetY,a=n.offsetX,s=n.children,f=n.prefixCls,v=n.onInnerResize,h=n.innerProps,m=n.rtl,g=n.extra,p={},w={display:"flex",flexDirection:"column"};return void 0!==u&&(p={height:i,position:"relative",overflow:"hidden"},w=e(e({},w),{},t(t(t(t(t({transform:"translateY(".concat(u,"px)")},m?"marginRight":"marginLeft",-a),"position","absolute"),"left",0),"right",0),"top",0))),d.createElement("div",{style:p},d.createElement(l,{onResize:function(e){e.offsetHeight&&v&&v()}},d.createElement("div",r({style:w,className:c(t({},"".concat(f,"-holder-inner"),f)),ref:o},h),s,g)))}));function g(e){var t=e.children,r=e.setRef,n=d.useCallback((function(e){r(e)}),[]);return d.cloneElement(t,{ref:n})}function p(e,t,r){var o=d.useState(e),i=n(o,2),u=i[0],a=i[1],c=d.useState(null),l=n(c,2),s=l[0],f=l[1];return d.useEffect((function(){var r=function(e,t,r){var n,o,i=e.length,u=t.length;if(0===i&&0===u)return null;i<u?(n=e,o=t):(n=t,o=e);var a={__EMPTY_ITEM__:!0};function c(e){return void 0!==e?r(e):a}for(var l=null,s=1!==Math.abs(i-u),f=0;f<o.length;f+=1){var v=c(n[f]);if(v!==c(o[f])){l=f,s=s||v!==c(o[f+1]);break}}return null===l?null:{index:l,multiple:s}}(u||[],e||[],t);void 0!==(null==r?void 0:r.index)&&f(e[r.index]),a(e)}),[e]),[s]}m.displayName="Filler";var w="object"===("undefined"==typeof navigator?"undefined":o(navigator))&&/Firefox/i.test(navigator.userAgent);const R=function(e,t,r,n){var o=d.useRef(!1),i=d.useRef(null);var u=d.useRef({top:e,bottom:t,left:r,right:n});return u.current.top=e,u.current.bottom=t,u.current.left=r,u.current.right=n,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e?t<0&&u.current.left||t>0&&u.current.right:t<0&&u.current.top||t>0&&u.current.bottom;return r&&n?(clearTimeout(i.current),o.current=!1):n&&!o.current||(clearTimeout(i.current),o.current=!0,i.current=setTimeout((function(){o.current=!1}),50)),!o.current&&n}};function E(e,t,r,n,o,i,u){var a=d.useRef(0),c=d.useRef(null),l=d.useRef(null),f=d.useRef(!1),v=R(t,r,n,o);var h=d.useRef(null),m=d.useRef(null);return[function(t){if(e){s.cancel(m.current),m.current=s((function(){h.current=null}),2);var r=t.deltaX,n=t.deltaY,o=t.shiftKey,d=r,g=n;("sx"===h.current||!h.current&&o&&n&&!r)&&(d=n,g=0,h.current="sx");var p=Math.abs(d),R=Math.abs(g);null===h.current&&(h.current=i&&p>R?"x":"y"),"y"===h.current?function(e,t){if(s.cancel(c.current),!v(!1,t)){var r=e;r._virtualHandled||(r._virtualHandled=!0,a.current+=t,l.current=t,w||r.preventDefault(),c.current=s((function(){var e=f.current?10:1;u(a.current*e,!1),a.current=0})))}}(t,g):function(e,t){u(t,!0),w||e.preventDefault()}(t,d)}},function(t){e&&(f.current=t.detail===l.current)}]}var M=function(){function e(){u(this,e),t(this,"maps",void 0),t(this,"id",0),t(this,"diffRecords",new Map),this.maps=Object.create(null)}return i(e,[{key:"set",value:function(e,t){this.diffRecords.set(e,this.maps[e]),this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}]),e}();function S(e){var t=parseFloat(e);return isNaN(t)?0:t}var b=14/15;function y(e){return Math.floor(Math.pow(e,.5))}function x(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]-window[t?"scrollX":"scrollY"]}var L=d.forwardRef((function(r,o){var i=r.prefixCls,u=r.rtl,a=r.scrollOffset,l=r.scrollRange,f=r.onStartMove,v=r.onStopMove,h=r.onScroll,m=r.horizontal,g=r.spinSize,p=r.containerSize,w=r.style,R=r.thumbStyle,E=r.showScrollBar,M=d.useState(!1),S=n(M,2),b=S[0],y=S[1],L=d.useState(null),H=n(L,2),T=H[0],z=H[1],_=d.useState(null),k=n(_,2),D=k[0],N=k[1],Y=!u,C=d.useRef(),B=d.useRef(),j=d.useState(E),I=n(j,2),P=I[0],X=I[1],A=d.useRef(),O=function(){!0!==E&&!1!==E&&(clearTimeout(A.current),X(!0),A.current=setTimeout((function(){X(!1)}),3e3))},K=l-p||0,V=p-g||0,W=d.useMemo((function(){return 0===a||0===K?0:a/K*V}),[a,K,V]),F=d.useRef({top:W,dragging:b,pageY:T,startTop:D});F.current={top:W,dragging:b,pageY:T,startTop:D};var q=function(e){y(!0),z(x(e,m)),N(F.current.top),f(),e.stopPropagation(),e.preventDefault()};d.useEffect((function(){var e=function(e){e.preventDefault()},t=C.current,r=B.current;return t.addEventListener("touchstart",e,{passive:!1}),r.addEventListener("touchstart",q,{passive:!1}),function(){t.removeEventListener("touchstart",e),r.removeEventListener("touchstart",q)}}),[]);var G=d.useRef();G.current=K;var J=d.useRef();J.current=V,d.useEffect((function(){if(b){var e,t=function(t){var r=F.current,n=r.dragging,o=r.pageY,i=r.startTop;s.cancel(e);var u=C.current.getBoundingClientRect(),a=p/(m?u.width:u.height);if(n){var c=(x(t,m)-o)*a,l=i;!Y&&m?l-=c:l+=c;var f=G.current,v=J.current,d=v?l/v:0,g=Math.ceil(d*f);g=Math.max(g,0),g=Math.min(g,f),e=s((function(){h(g,m)}))}},r=function(){y(!1),v()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",r,{passive:!0}),window.addEventListener("touchend",r,{passive:!0}),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r),s.cancel(e)}}}),[b]),d.useEffect((function(){return O(),function(){clearTimeout(A.current)}}),[a]),d.useImperativeHandle(o,(function(){return{delayHidden:O}}));var Q="".concat(i,"-scrollbar"),U={position:"absolute",visibility:P?null:"hidden"},Z={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return m?(U.height=8,U.left=0,U.right=0,U.bottom=0,Z.height="100%",Z.width=g,Y?Z.left=W:Z.right=W):(U.width=8,U.top=0,U.bottom=0,Y?U.right=0:U.left=0,Z.width="100%",Z.height=g,Z.top=W),d.createElement("div",{ref:C,className:c(Q,t(t(t({},"".concat(Q,"-horizontal"),m),"".concat(Q,"-vertical"),!m),"".concat(Q,"-visible"),P)),style:e(e({},U),w),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:O},d.createElement("div",{ref:B,className:c("".concat(Q,"-thumb"),t({},"".concat(Q,"-thumb-moving"),b)),style:e(e({},Z),R),onMouseDown:q}))}));function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,20),Math.floor(t)}var T=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],z=[],_={overflowY:"auto",overflowAnchor:"none"};function k(i,u){var w=i.prefixCls,k=void 0===w?"rc-virtual-list":w,D=i.className,N=i.height,Y=i.itemHeight,C=i.fullHeight,B=void 0===C||C,j=i.style,I=i.data,P=i.children,X=i.itemKey,A=i.virtual,O=i.direction,K=i.scrollWidth,V=i.component,W=void 0===V?"div":V,F=i.onScroll,q=i.onVirtualScroll,G=i.onVisibleChange,J=i.innerProps,Q=i.extraRender,U=i.styles,Z=i.showScrollBar,$=void 0===Z?"optional":Z,ee=a(i,T),te=d.useCallback((function(e){return"function"==typeof X?X(e):null==e?void 0:e[X]}),[X]),re=function(e){var t=d.useState(0),r=n(t,2),o=r[0],i=r[1],u=d.useRef(new Map),a=d.useRef(new M),c=d.useRef(0);function l(){c.current+=1}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l();var t=function(){var e=!1;u.current.forEach((function(t,r){if(t&&t.offsetParent){var n=t.offsetHeight,o=getComputedStyle(t),i=o.marginTop,u=o.marginBottom,c=n+S(i)+S(u);a.current.get(r)!==c&&(a.current.set(r,c),e=!0)}})),e&&i((function(e){return e+1}))};if(e)t();else{c.current+=1;var r=c.current;Promise.resolve().then((function(){r===c.current&&t()}))}}return d.useEffect((function(){return l}),[]),[function(t,r){var n=e(t);u.current.get(n),r?(u.current.set(n,r),s()):u.current.delete(n)},s,a.current,o]}(te),ne=n(re,4),oe=ne[0],ie=ne[1],ue=ne[2],ae=ne[3],ce=!(!1===A||!N||!Y),le=d.useMemo((function(){return Object.values(ue.maps).reduce((function(e,t){return e+t}),0)}),[ue.id,ue.maps]),se=ce&&I&&(Math.max(Y*I.length,le)>N||!!K),fe="rtl"===O,ve=c(k,t({},"".concat(k,"-rtl"),fe),D),de=I||z,he=d.useRef(),me=d.useRef(),ge=d.useRef(),pe=d.useState(0),we=n(pe,2),Re=we[0],Ee=we[1],Me=d.useState(0),Se=n(Me,2),be=Se[0],ye=Se[1],xe=d.useState(!1),Le=n(xe,2),He=Le[0],Te=Le[1],ze=function(){Te(!0)},_e=function(){Te(!1)},ke={getKey:te};function De(e){Ee((function(t){var r=function(e){var t=e;Number.isNaN(Ue.current)||(t=Math.min(t,Ue.current));return t=Math.max(t,0),t}("function"==typeof e?e(t):e);return he.current.scrollTop=r,r}))}var Ne=d.useRef({start:0,end:de.length}),Ye=d.useRef(),Ce=p(de,te),Be=n(Ce,1)[0];Ye.current=Be;var je=d.useMemo((function(){if(!ce)return{scrollHeight:void 0,start:0,end:de.length-1,offset:void 0};var e;if(!se)return{scrollHeight:(null===(e=me.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:de.length-1,offset:void 0};for(var t,r,n,o=0,i=de.length,u=0;u<i;u+=1){var a=de[u],c=te(a),l=ue.get(c),s=o+(void 0===l?Y:l);s>=Re&&void 0===t&&(t=u,r=o),s>Re+N&&void 0===n&&(n=u),o=s}return void 0===t&&(t=0,r=0,n=Math.ceil(N/Y)),void 0===n&&(n=de.length-1),{scrollHeight:o,start:t,end:n=Math.min(n+1,de.length-1),offset:r}}),[se,ce,Re,de,ae,N]),Ie=je.scrollHeight,Pe=je.start,Xe=je.end,Ae=je.offset;Ne.current.start=Pe,Ne.current.end=Xe,d.useLayoutEffect((function(){var e=ue.getRecord();if(1===e.size){var t=Array.from(e.keys())[0],r=e.get(t),n=de[Pe];if(n&&void 0===r)if(te(n)===t){var o=ue.get(t)-Y;De((function(e){return e+o}))}}ue.resetRecord()}),[Ie]);var Oe=d.useState({width:0,height:N}),Ke=n(Oe,2),Ve=Ke[0],We=Ke[1],Fe=d.useRef(),qe=d.useRef(),Ge=d.useMemo((function(){return H(Ve.width,K)}),[Ve.width,K]),Je=d.useMemo((function(){return H(Ve.height,Ie)}),[Ve.height,Ie]),Qe=Ie-N,Ue=d.useRef(Qe);Ue.current=Qe;var Ze=Re<=0,$e=Re>=Qe,et=be<=0,tt=be>=K,rt=R(Ze,$e,et,tt),nt=function(){return{x:fe?-be:be,y:Re}},ot=d.useRef(nt()),it=v((function(t){if(q){var r=e(e({},nt()),t);ot.current.x===r.x&&ot.current.y===r.y||(q(r),ot.current=r)}}));function ut(e,t){var r=e;t?(h.flushSync((function(){ye(r)})),it()):De(r)}var at=function(e){var t=e,r=K?K-Ve.width:0;return t=Math.max(t,0),t=Math.min(t,r)},ct=v((function(e,t){t?(h.flushSync((function(){ye((function(t){return at(t+(fe?-e:e))}))})),it()):De((function(t){return t+e}))})),lt=E(ce,Ze,$e,et,tt,!!K,ct),st=n(lt,2),ft=st[0],vt=st[1];!function(e,t,r){var n,o=d.useRef(!1),i=d.useRef(0),u=d.useRef(0),a=d.useRef(null),c=d.useRef(null),l=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageX),n=Math.ceil(e.touches[0].pageY),a=i.current-t,l=u.current-n,s=Math.abs(a)>Math.abs(l);s?i.current=t:u.current=n;var f=r(s,s?a:l,!1,e);f&&e.preventDefault(),clearInterval(c.current),f&&(c.current=setInterval((function(){s?a*=b:l*=b;var e=Math.floor(s?a:l);(!r(s,e,!0)||Math.abs(e)<=.1)&&clearInterval(c.current)}),16))}},s=function(){o.current=!1,n()},v=function(e){n(),1!==e.touches.length||o.current||(o.current=!0,i.current=Math.ceil(e.touches[0].pageX),u.current=Math.ceil(e.touches[0].pageY),a.current=e.target,a.current.addEventListener("touchmove",l,{passive:!1}),a.current.addEventListener("touchend",s,{passive:!0}))};n=function(){a.current&&(a.current.removeEventListener("touchmove",l),a.current.removeEventListener("touchend",s))},f((function(){return e&&t.current.addEventListener("touchstart",v,{passive:!0}),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",v),n(),clearInterval(c.current)}}),[e])}(ce,he,(function(e,t,r,n){var o=n;return!rt(e,t,r)&&((!o||!o._virtualHandled)&&(o&&(o._virtualHandled=!0),ft({preventDefault:function(){},deltaX:e?t:0,deltaY:e?0:t}),!0))})),function(e,t,r){d.useEffect((function(){var n=t.current;if(e&&n){var o,i,u=!1,a=function(){s.cancel(o)},c=function e(){a(),o=s((function(){r(i),e()}))},l=function(e){if(!e.target.draggable&&0===e.button){var t=e;t._virtualHandled||(t._virtualHandled=!0,u=!0)}},f=function(){u=!1,a()},v=function(e){if(u){var t=x(e,!1),r=n.getBoundingClientRect(),o=r.top,l=r.bottom;t<=o?(i=-y(o-t),c()):t>=l?(i=y(t-l),c()):a()}};return n.addEventListener("mousedown",l),n.ownerDocument.addEventListener("mouseup",f),n.ownerDocument.addEventListener("mousemove",v),function(){n.removeEventListener("mousedown",l),n.ownerDocument.removeEventListener("mouseup",f),n.ownerDocument.removeEventListener("mousemove",v),a()}}}),[e])}(se,he,(function(e){De((function(t){return t+e}))})),f((function(){function e(e){var t=Ze&&e.detail<0,r=$e&&e.detail>0;!ce||t||r||e.preventDefault()}var t=he.current;return t.addEventListener("wheel",ft,{passive:!1}),t.addEventListener("DOMMouseScroll",vt,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),function(){t.removeEventListener("wheel",ft),t.removeEventListener("DOMMouseScroll",vt),t.removeEventListener("MozMousePixelScroll",e)}}),[ce,Ze,$e]),f((function(){if(K){var e=at(be);ye(e),it({x:e})}}),[Ve.width,K]);var dt=function(){var e,t;null===(e=Fe.current)||void 0===e||e.delayHidden(),null===(t=qe.current)||void 0===t||t.delayHidden()},ht=function(t,r,i,u,a,c,l,v){var h=d.useRef(),m=d.useState(null),g=n(m,2),p=g[0],w=g[1];return f((function(){if(p&&p.times<10){if(!t.current)return void w((function(t){return e({},t)}));c();var n=p.targetAlign,o=p.originAlign,s=p.index,f=p.offset,v=t.current.clientHeight,d=!1,h=n,m=null;if(v){for(var g=n||o,R=0,E=0,M=0,S=Math.min(r.length-1,s),b=0;b<=S;b+=1){var y=a(r[b]);E=R;var x=i.get(y);R=M=E+(void 0===x?u:x)}for(var L="top"===g?f:v-f,H=S;H>=0;H-=1){var T=a(r[H]),z=i.get(T);if(void 0===z){d=!0;break}if((L-=z)<=0)break}switch(g){case"top":m=E-f;break;case"bottom":m=M-v+f;break;default:var _=t.current.scrollTop;E<_?h="top":M>_+v&&(h="bottom")}null!==m&&l(m),m!==p.lastTop&&(d=!0)}d&&w(e(e({},p),{},{times:p.times+1,targetAlign:h,lastTop:m}))}}),[p,t.current]),function(e){if(null!=e){if(s.cancel(h.current),"number"==typeof e)l(e);else if(e&&"object"===o(e)){var t,n=e.align;t="index"in e?e.index:r.findIndex((function(t){return a(t)===e.key}));var i=e.offset;w({times:0,index:t,offset:void 0===i?0:i,originAlign:n})}}else v()}}(he,de,ue,Y,te,(function(){return ie(!0)}),De,dt);d.useImperativeHandle(u,(function(){return{nativeElement:ge.current,getScrollInfo:nt,scrollTo:function(e){var t;(t=e)&&"object"===o(t)&&("left"in t||"top"in t)?(void 0!==e.left&&ye(at(e.left)),ht(e.top)):ht(e)}}})),f((function(){if(G){var e=de.slice(Pe,Xe+1);G(e,de)}}),[Pe,Xe,de]);var mt=function(e,t,r,o){var i=d.useMemo((function(){return[new Map,[]]}),[e,r.id,o]),u=n(i,2),a=u[0],c=u[1];return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,u=a.get(n),l=a.get(i);if(void 0===u||void 0===l)for(var s=e.length,f=c.length;f<s;f+=1){var v,d=e[f],h=t(d);a.set(h,f);var m=null!==(v=r.get(h))&&void 0!==v?v:o;if(c[f]=(c[f-1]||0)+m,h===n&&(u=f),h===i&&(l=f),void 0!==u&&void 0!==l)break}return{top:c[u-1]||0,bottom:c[l]}}}(de,te,ue,Y),gt=null==Q?void 0:Q({start:Pe,end:Xe,virtual:se,offsetX:be,offsetY:Ae,rtl:fe,getSize:mt}),pt=function(e,t,r,n,o,i,u,a){var c=a.getKey;return e.slice(t,r+1).map((function(e,r){var a=u(e,t+r,{style:{width:n},offsetX:o}),l=c(e);return d.createElement(g,{key:l,setRef:function(t){return i(e,t)}},a)}))}(de,Pe,Xe,K,be,oe,P,ke),wt=null;N&&(wt=e(t({},B?"height":"maxHeight",N),_),ce&&(wt.overflowY="hidden",K&&(wt.overflowX="hidden"),He&&(wt.pointerEvents="none")));var Rt={};return fe&&(Rt.dir="rtl"),d.createElement("div",r({ref:ge,style:e(e({},j),{},{position:"relative"}),className:ve},Rt,ee),d.createElement(l,{onResize:function(e){We({width:e.offsetWidth,height:e.offsetHeight})}},d.createElement(W,{className:"".concat(k,"-holder"),style:wt,ref:he,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==Re&&De(t),null==F||F(e),it()},onMouseEnter:dt},d.createElement(m,{prefixCls:k,height:Ie,offsetX:be,offsetY:Ae,scrollWidth:K,onInnerResize:ie,ref:me,innerProps:J,rtl:fe,extra:gt},pt))),se&&Ie>N&&d.createElement(L,{ref:Fe,prefixCls:k,scrollOffset:Re,scrollRange:Ie,rtl:fe,onScroll:ut,onStartMove:ze,onStopMove:_e,spinSize:Je,containerSize:Ve.height,style:null==U?void 0:U.verticalScrollBar,thumbStyle:null==U?void 0:U.verticalScrollBarThumb,showScrollBar:$}),se&&K>Ve.width&&d.createElement(L,{ref:qe,prefixCls:k,scrollOffset:be,scrollRange:K,rtl:fe,onScroll:ut,onStartMove:ze,onStopMove:_e,spinSize:Ge,containerSize:Ve.width,horizontal:!0,style:null==U?void 0:U.horizontalScrollBar,thumbStyle:null==U?void 0:U.horizontalScrollBarThumb,showScrollBar:$}))}var D=d.forwardRef(k);D.displayName="List";export{D as L};
