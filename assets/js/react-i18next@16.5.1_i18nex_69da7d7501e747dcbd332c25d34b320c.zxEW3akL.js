import{r as e}from"./react@18.3.1.zoCbf7Ot.js";import"./i18next@25.7.3_typescript@5.9.3.oPH98fpq.js";import{s as n}from"./use-sync-external-store@1.6.0_react@18.3.1.BnuPlee_.js";const t={},r=(e,n,r,a)=>{i(r)&&t[r]||(i(r)&&(t[r]=new Date),((e,n,t,r)=>{var a,s,o,l;const u=[t,{code:n,...r||{}}];if(null==(s=null==(a=null==e?void 0:e.services)?void 0:a.logger)?void 0:s.forward)return e.services.logger.forward(u,"warn","react-i18next::",!0);i(u[0])&&(u[0]="react-i18next:: ".concat(u[0])),(null==(l=null==(o=null==e?void 0:e.services)?void 0:o.logger)?void 0:l.warn)?e.services.logger.warn(...u):null==console||console.warn})(e,n,r,a))},a=(e,n)=>()=>{if(e.isInitialized)n();else{const t=()=>{setTimeout(()=>{e.off("initialized",t)},0),n()};e.on("initialized",t)}},s=(e,n,t)=>{e.loadNamespaces(n,a(e,t))},o=(e,n,t,r)=>{if(i(t)&&(t=[t]),e.options.preload&&e.options.preload.indexOf(n)>-1)return s(e,t,r);t.forEach(n=>{e.options.ns.indexOf(n)<0&&e.options.ns.push(n)}),e.loadLanguages(n,a(e,r))},i=e=>"string"==typeof e,l=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,u={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},c=e=>u[e];let g={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(l,c),transDefaultProps:void 0};let d;const p={type:"3rdParty",init(e){((e={})=>{g={...g,...e}})(e.options.react),(e=>{d=e})(e)}},f=e.createContext();class y{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const m={t:(e,n)=>{return i(n)?n:"object"==typeof(t=n)&&null!==t&&i(n.defaultValue)?n.defaultValue:Array.isArray(e)?e[e.length-1]:e;var t},ready:!1},v=()=>()=>{},b=(t,a={})=>{var l,u,c;const{i18n:p}=a,{i18n:b,defaultNS:N}=e.useContext(f)||{},h=p||b||d;h&&!h.reportNamespaces&&(h.reportNamespaces=new y),h||r(h,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const x=e.useMemo(()=>{var e;return{...g,...null==(e=null==h?void 0:h.options)?void 0:e.react,...a}},[h,a]),{useSuspense:w,keyPrefix:O}=x,_=N||(null==(l=null==h?void 0:h.options)?void 0:l.defaultNS),S=i(_)?[_]:_||["translation"],I=e.useMemo(()=>S,S);null==(c=null==(u=null==h?void 0:h.reportNamespaces)?void 0:u.addUsedNamespaces)||c.call(u,I);const j=e.useRef(0),k=e.useCallback(e=>{if(!h)return v;const{bindI18n:n,bindI18nStore:t}=x,r=()=>{j.current+=1,e()};return n&&h.on(n,r),t&&h.store.on(t,r),()=>{n&&n.split(" ").forEach(e=>h.off(e,r)),t&&t.split(" ").forEach(e=>h.store.off(e,r))}},[h,x]),C=e.useRef(),E=e.useCallback(()=>{if(!h)return m;const e=!(!h.isInitialized&&!h.initializedStoreOnce)&&I.every(e=>((e,n,t={})=>n.languages&&n.languages.length?n.hasLoadedNamespace(e,{lng:t.lng,precheck:(n,r)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!r(n.isLanguageChangingTo,e))return!1}}):(r(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0))(e,h,x)),n=a.lng||h.language,t=j.current,s=C.current;if(s&&s.ready===e&&s.lng===n&&s.keyPrefix===O&&s.revision===t)return s;const o={t:h.getFixedT(n,"fallback"===x.nsMode?I:I[0],O),ready:e,lng:n,keyPrefix:O,revision:t};return C.current=o,o},[h,I,O,x,a.lng]),[P,T]=e.useState(0),{t:L,ready:z}=n.useSyncExternalStore(k,E,E);e.useEffect(()=>{if(h&&!z&&!w){const e=()=>T(e=>e+1);a.lng?o(h,a.lng,I,e):s(h,I,e)}},[h,a.lng,I,z,w,P]);const A=h||{},R=e.useRef(null),F=e.useRef(),M=e=>{const n=Object.getOwnPropertyDescriptors(e);n.__original&&delete n.__original;const t=Object.create(Object.getPrototypeOf(e),n);if(!Object.prototype.hasOwnProperty.call(t,"__original"))try{Object.defineProperty(t,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(r){}return t},U=e.useMemo(()=>{const e=A,n=null==e?void 0:e.language;let t=e;e&&(R.current&&R.current.__original===e?F.current!==n?(t=M(e),R.current=t,F.current=n):t=R.current:(t=M(e),R.current=t,F.current=n));const r=[L,t,z];return r.t=L,r.i18n=t,r.ready=z,r},[L,A,z,A.resolvedLanguage,A.language,A.languages]);if(h&&w&&!z)throw new Promise(e=>{const n=()=>e();a.lng?o(h,a.lng,I,n):s(h,I,n)});return U};export{p as i,b as u};
