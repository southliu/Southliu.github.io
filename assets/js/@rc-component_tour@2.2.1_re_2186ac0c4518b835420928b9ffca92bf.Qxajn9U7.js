import{r as e,e as t}from"./react@19.2.1.BpVBN_43.js";import{T as n}from"./@rc-component_trigger@3.7.1_9234358db6ac4d4b221fe18208ab417c.KUVSKQ8O.js";import{c as o}from"./clsx@2.1.1.BvmCeSbq.js";import{h as r,e as s,f as l,p as a,d as i}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{P as c}from"./@rc-component_portal@2.0.1__3d144a3e75e5531d8ca8009183b58415.Bf4rG5sj.js";function f(e){return null!==e&&"object"==typeof e}function p(e,t,n){if(!1===e||!1===t&&(!f(e)||!e.closeIcon))return null;const o="boolean"!=typeof t?t:void 0;return f(e)?{...e,closeIcon:e.closeIcon??o}:n||e||t?{closeIcon:o}:"empty"}function m(t,n,o,l,a,i){const[c,f]=e.useState(void 0);r(()=>{const e="function"==typeof t?t():t;f(e||null)});const[p,m]=e.useState(null),u=s(()=>{if(c){a||function(e){const t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:o,right:r,bottom:s,left:l}=e.getBoundingClientRect();return o>=0&&l>=0&&r<=t&&s<=n}(c)||!n||c.scrollIntoView(l);const{left:e,top:t,width:o,height:r}=c.getBoundingClientRect(),s={left:e,top:t,width:o,height:r,radius:0};if(a){const e=i.current?.parentElement?.getBoundingClientRect();e&&(s.left-=e.left,s.top-=e.top)}m(e=>JSON.stringify(e)!==JSON.stringify(s)?s:e)}else m(null)}),d=e=>(Array.isArray(o?.offset)?o?.offset[e]:o?.offset)??6;r(()=>(u(),window.addEventListener("resize",u),window.addEventListener("scroll",u),()=>{window.removeEventListener("resize",u),window.removeEventListener("scroll",u)}),[c,n,u]);return[e.useMemo(()=>{if(!p)return p;const e=d(0),t=d(1),n=(r=o?.radius,"number"!=typeof r||Number.isNaN(r)?2:o?.radius);var r;return{left:p.left-e,top:p.top-t,width:p.width+2*e,height:p.height+2*t,radius:n}},[p,o]),c]}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(this,arguments)}const d={fill:"transparent",pointerEvents:"auto"},h=e=>{const{prefixCls:n,rootClassName:r,pos:s,showMask:a,style:i={},fill:f="rgba(0,0,0,0.5)",open:p,animated:m,zIndex:h,disabledInteraction:b,styles:g,classNames:y,getPopupContainer:E}=e,w=`${n}-mask-${l()}`,v="object"==typeof m?m?.placeholder:m,N="undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?{width:"100%",height:"100%"}:{width:"100vw",height:"100vh"},C=!1===E;return t.createElement(c,{open:p,autoLock:!C,getContainer:E},t.createElement("div",{className:o(`${n}-mask`,r,y?.mask),style:{position:C?"absolute":"fixed",left:0,right:0,top:0,bottom:0,zIndex:h,pointerEvents:s&&!b?"none":"auto",...i,...g?.mask}},a?t.createElement("svg",{style:{width:"100%",height:"100%"}},t.createElement("defs",null,t.createElement("mask",{id:w},t.createElement("rect",u({x:"0",y:"0"},N,{fill:"white"})),s&&t.createElement("rect",{x:s.left,y:s.top,rx:s.radius,width:s.width,height:s.height,fill:"black",className:v?`${n}-placeholder-animated`:""}))),t.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:f,mask:`url(#${w})`}),s&&t.createElement(t.Fragment,null,t.createElement("rect",u({},d,{x:"0",y:"0",width:"100%",height:Math.max(s.top,0)})),t.createElement("rect",u({},d,{x:"0",y:"0",width:Math.max(s.left,0),height:"100%"})),t.createElement("rect",u({},d,{x:"0",y:s.top+s.height,width:"100%",height:`calc(100% - ${s.top+s.height}px)`})),t.createElement("rect",u({},d,{x:s.left+s.width,y:"0",width:`calc(100% - ${s.left+s.width}px)`,height:"100%"})))):null))},b=[0,0],g={left:{points:["cr","cl"],offset:[-8,0]},right:{points:["cl","cr"],offset:[8,0]},top:{points:["bc","tc"],offset:[0,-8]},bottom:{points:["tc","bc"],offset:[0,8]},topLeft:{points:["bl","tl"],offset:[0,-8]},leftTop:{points:["tr","tl"],offset:[-8,0]},topRight:{points:["br","tr"],offset:[0,-8]},rightTop:{points:["tl","tr"],offset:[8,0]},bottomRight:{points:["tr","br"],offset:[0,8]},rightBottom:{points:["bl","br"],offset:[8,0]},bottomLeft:{points:["tl","bl"],offset:[0,8]},leftBottom:{points:["br","bl"],offset:[-8,0]}};function y(e=!1){const t={};return Object.keys(g).forEach(n=>{t[n]={...g[n],autoArrow:e,targetOffset:b}}),t}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},E.apply(this,arguments)}function w(t){const{prefixCls:n,current:r,total:s,title:l,description:i,onClose:c,onPrev:f,onNext:p,onFinish:m,className:u,closable:d,classNames:h,styles:b}=t,g=a(d||{},!0),y=d?.closeIcon??e.createElement("span",{className:`${n}-close-x`},"Ã—"),w=!!d;return e.createElement("div",{className:o(`${n}-panel`,u)},e.createElement("div",{className:o(`${n}-section`,h?.section),style:b?.section},w&&e.createElement("button",E({type:"button",onClick:c,"aria-label":"Close"},g,{className:`${n}-close`}),y),e.createElement("div",{className:o(`${n}-header`,h?.header),style:b?.header},e.createElement("div",{className:o(`${n}-title`,h?.title),style:b?.title},l)),e.createElement("div",{className:o(`${n}-description`,h?.description),style:b?.description},i),e.createElement("div",{className:o(`${n}-footer`,h?.footer),style:b?.footer},e.createElement("div",{className:`${n}-sliders`},s>1?[...Array.from({length:s}).keys()].map((t,n)=>e.createElement("span",{key:t,className:n===r?"active":""})):null),e.createElement("div",{className:o(`${n}-actions`,h?.actions),style:b?.actions},0!==r?e.createElement("button",{className:`${n}-prev-btn`,onClick:f},"Prev"):null,r===s-1?e.createElement("button",{className:`${n}-finish-btn`,onClick:m},"Finish"):e.createElement("button",{className:`${n}-next-btn`,onClick:p},"Next")))))}y();const v=t=>{const{current:n,renderPanel:o}=t;return e.createElement(e.Fragment,null,"function"==typeof o?o(t,n):e.createElement(w,t))},N=e.forwardRef((t,n)=>{const{open:o,autoLock:r,getContainer:s,domRef:l,className:a,style:i,fallbackDOM:f}=t;return e.useImperativeHandle(n,()=>l.current||f()),e.createElement(c,{open:o,autoLock:r,getContainer:s},e.createElement("div",{ref:l,className:a,style:i}))});function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}const x={left:"50%",top:"50%",width:1,height:1},k={block:"center",inline:"center"},O=t=>{const{prefixCls:s="rc-tour",steps:l=[],defaultCurrent:a,current:c,onChange:f,onClose:u,onFinish:d,open:b,defaultOpen:g,mask:E=!0,arrow:w=!0,rootClassName:O,placement:$,renderPanel:I,gap:j,animated:P,scrollIntoViewOptions:R=k,zIndex:L=1001,closeIcon:M,closable:A,builtinPlacements:F,disabledInteraction:_,styles:z,classNames:S,className:B,style:T,getPopupContainer:V,...D}=t,H=e.useRef(),[J,W]=i(a||0,c),[q,G]=i(g,b),K=!(J<0||J>=l.length)&&(q??!0),[Q,U]=e.useState(K),X=e.useRef(K);r(()=>{K&&(X.current||W(0),U(!0)),X.current=K},[K]);const{target:Y,placement:Z,style:ee,arrow:te,className:ne,mask:oe,scrollIntoViewOptions:re=k,closeIcon:se,closable:le}=l[J]||{},ae=function(t,n,o,r){return e.useMemo(()=>{const e=p(t,n,!1),s=p(o,r,!0);return"empty"!==e?e:s},[o,r,t,n])}(le,se,A,M),ie=K&&(oe??E),ce=re??R,fe=e.useRef(null),pe=!1===V,[me,ue]=m(Y,b,j,ce,pe,fe),de=function(e,t,n){return n??t??(null===e?"center":"bottom")}(ue,$,Z),he=!!ue&&(void 0===te?w:te),be="object"==typeof he&&he.pointAtCenter;r(()=>{H.current?.forceAlign()},[be,J]);const ge=e=>{W(e),f?.(e)},ye=e.useMemo(()=>F?"function"==typeof F?F({arrowPointAtCenter:be}):F:y(be),[F,be]);if(void 0===ue||!Q)return null;const Ee=()=>{G(!1),u?.(J)},we="boolean"==typeof ie?ie:!!ie,ve="boolean"==typeof ie?void 0:ie;return e.createElement(e.Fragment,null,e.createElement(h,{getPopupContainer:V,styles:z,classNames:S,zIndex:L,prefixCls:s,pos:me,showMask:we,style:ve?.style,fill:ve?.color,open:K,animated:P,rootClassName:O,disabledInteraction:_}),e.createElement(n,C({},D,{getPopupContainer:V,builtinPlacements:ye,ref:H,popupStyle:ee,popupPlacement:de,popupVisible:K,popupClassName:o(O,ne),prefixCls:s,popup:()=>e.createElement(v,C({styles:z,classNames:S,arrow:he,key:"content",prefixCls:s,total:l.length,renderPanel:I,onPrev:()=>{ge(J-1)},onNext:()=>{ge(J+1)},onClose:Ee,current:J,onFinish:()=>{Ee(),d?.()}},l[J],{closable:ae})),forceRender:!1,autoDestroy:!0,zIndex:L,arrow:!!he}),e.createElement(N,{open:K,autoLock:!pe,getContainer:V,domRef:fe,fallbackDOM:()=>ue||document.body,className:o(B,O,`${s}-target-placeholder`),style:{...me||x,position:pe?"absolute":"fixed",pointerEvents:"none",...T}})))};export{O as T};
