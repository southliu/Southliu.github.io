import{r as e}from"./react@19.2.3.D3o_8b5j.js";import{e as t,b as n,d as o,h as l,m as r,p as a,K as s,F as c,B as u,u as i,t as p,f as d}from"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.OytLLzRX.js";import"./react-dom@19.2.3_react@19.2.3.CIkYuaQ_.js";import"./@rc-component_resize-observ_a5d141e3de655ef602de0c6d9e51ffb4.DTkZgLwN.js";import"./@rc-component_motion@1.1.6__75bed58c5aa0279623e804b6e3100d82.Dp7kHckh.js";import{F as f}from"./@rc-component_overflow@1.0._000e3b789f0a378ea10d91c90289e484.BRgGt9x2.js";import{c as m}from"./clsx@2.1.1.BvmCeSbq.js";import{T as v}from"./@rc-component_trigger@3.7.2_b5d51e27885fcdc381f6db89cb94580b.7SPRIdKI.js";import{L as h}from"./@rc-component_virtual-list@_eab7c240f5d5dcfc3960e23bede0b5bd.BMbuch9V.js";const b=e.createContext(null);function g(){return e.useContext(b)}function y(e,t){return e.filter(e=>e).some(e=>e.contains(t)||e===t)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},w.apply(this,arguments)}const E=(t,n)=>{const{prefixCls:o,disabled:l,visible:r,children:a,popupElement:s,animation:c,transitionName:u,popupStyle:i,popupClassName:p,direction:d="ltr",placement:f,builtinPlacements:h,popupMatchSelectWidth:b,popupRender:g,popupAlign:y,getPopupContainer:E,empty:S,onPopupVisibleChange:C,onPopupMouseEnter:x,onPopupMouseDown:O,onPopupBlur:N,...P}=t,M="".concat(o,"-dropdown");let R=s;g&&(R=g(s));const I=e.useMemo(()=>h||(e=>{const t=!0===e?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:t,adjustY:1},htmlRegion:"scroll"}}})(b),[h,b]),V=c?"".concat(M,"-").concat(c):u,D="number"==typeof b,j=e.useMemo(()=>D?null:!1===b?"minWidth":"width",[b,D]);let _=i;D&&(_={...i,width:b});const k=e.useRef(null);return e.useImperativeHandle(n,()=>({getPopupElement:()=>{var e;return null==(e=k.current)?void 0:e.popupElement}})),e.createElement(v,w({},P,{showAction:C?["click"]:[],hideAction:C?["click"]:[],popupPlacement:f||("rtl"===d?"bottomRight":"bottomLeft"),builtinPlacements:I,prefixCls:M,popupMotion:{motionName:V},popup:e.createElement("div",{onMouseEnter:x,onMouseDown:O,onBlur:N},R),ref:k,stretch:j,popupAlign:y,popupVisible:r,getPopupContainer:E,popupClassName:m(p,{["".concat(M,"-empty")]:S}),popupStyle:_,onPopupVisibleChange:C}),a)},S=e.forwardRef(E);function C(e,t){const{key:n}=e;let o;return"value"in e&&({value:o}=e),null!=n?n:void 0!==o?o:"rc-index-key-".concat(t)}function x(e){return void 0!==e&&!Number.isNaN(e)}function O(e,t){const{label:n,value:o,options:l,groupLabel:r}=e||{},a=n||(t?"children":"label");return{label:a,value:o||"value",options:l||"options",groupLabel:r||a}}function N(e){const t={...e};return"props"in t||Object.defineProperty(t,"props",{get:()=>(n(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t)}),t}function P(t){const{visible:n,values:o}=t;if(!n)return null;return e.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,50).map(({label:e,value:t})=>["number","string"].includes(typeof e)?e:t).join(", ")),o.length>50?", ...":null)}const M=(e,t=1)=>{t<=0?e():(e=>{const t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(null)})(()=>{M(e,t-1)})};function R(t){const{children:n,...o}=t;return n?e.createElement("div",o,n):null}const I=e.createContext(null);function V(){return e.useContext(I)}const D=e.forwardRef((t,n)=>{const{onChange:o,onKeyDown:a,onBlur:s,style:c,syncWidth:u,value:i,className:p,autoComplete:d,...f}=t,{prefixCls:v,mode:h,onSearch:b,onSearchSubmit:y,onInputBlur:w,autoFocus:E,tokenWithEnter:S,placeholder:C,components:{input:x="input"}}=V(),{id:O,classNames:N,styles:P,open:M,activeDescendantId:R,role:I,disabled:D}=g()||{},j=m("".concat(v,"-input"),null==N?void 0:N.input,p),_=e.useRef(!1),k=e.useRef(null),T=e.useRef(null);e.useImperativeHandle(n,()=>T.current);const[A,F]=e.useState(void 0);l(()=>{const e=T.current;if(u&&e){e.style.width="0px";const t=e.scrollWidth;F(t),e.style.width=""}},[u,i]);const L={id:O,type:"combobox"===h?"text":"search",...f,ref:T,style:{...null==P?void 0:P.input,...c,"--select-input-width":A},autoFocus:E,autoComplete:d||"off",className:j,disabled:D,value:i||"",onChange:e=>{let{value:t}=e.target;if(S&&k.current&&/[\r\n]/.test(k.current)){const e=k.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");t=t.replace(e,k.current)}k.current=null,b&&b(t,!0,_.current),null==o||o(e)},onKeyDown:e=>{const{key:t}=e,{value:n}=e.currentTarget;"Enter"===t&&"tags"===h&&!_.current&&y&&y(n),null==a||a(e)},onBlur:e=>{null==w||w(),null==s||s(e)},onPaste:e=>{const{clipboardData:t}=e,n=null==t?void 0:t.getData("text");k.current=n||""},onCompositionStart:()=>{_.current=!0},onCompositionEnd:e=>{if(_.current=!1,"combobox"!==h){const{value:t}=e.currentTarget;null==b||b(t,!0,!1)}},role:I||"combobox","aria-expanded":M||!1,"aria-haspopup":"listbox","aria-owns":M?"".concat(O,"_list"):void 0,"aria-autocomplete":"list","aria-controls":M?"".concat(O,"_list"):void 0,"aria-activedescendant":M?R:void 0};if(e.isValidElement(x)){const n=x.props||{},o={placeholder:t.placeholder||C,...L,...n};return Object.keys(n).forEach(e=>{const t=n[e];"function"==typeof t&&(o[e]=(...n)=>{var o;t(...n),null==(o=L[e])||o.call(L,...n)})}),o.ref=r(x.ref,L.ref),e.cloneElement(x,o)}const K=x;return e.createElement(K,L)});function j(t){const{prefixCls:n,placeholder:o,displayValues:l}=V(),{classNames:r,styles:a}=g(),{show:s=!0}=t;return l.length?null:e.createElement("div",{className:m("".concat(n,"-placeholder"),null==r?void 0:r.placeholder),style:{visibility:s?"visible":"hidden",...null==a?void 0:a.placeholder}},o)}const _=e.createContext(null);function k(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function T(e){return["string","number"].includes(typeof e)}function A(e){let t;return e&&(T(e.title)?t=e.title.toString():T(e.label)&&(t=e.label.toString())),t}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},F.apply(this,arguments)}const L=e.forwardRef(({inputProps:t},n)=>{const{prefixCls:o,searchValue:l,activeValue:r,displayValues:a,maxLength:s,mode:c}=V(),{triggerOpen:u,title:i,showSearch:p,classNames:d,styles:f}=g(),v=e.useContext(_),[h,b]=e.useState(!1),y="combobox"===c,w=a[0],E=e.useMemo(()=>y&&r&&!h&&u?r:p?l:"",[y,r,h,u,l,p]),S=e.useMemo(()=>{const e={className:"".concat(o,"-content-value"),style:{visibility:E?"hidden":"visible"}};if(w&&(null==v?void 0:v.flattenOptions)){const t=v.flattenOptions.find(e=>e.value===w.value);if(null==t?void 0:t.data){const{className:n,style:o}=t.data;Object.assign(e,{title:A(t.data),className:m(e.className,n),style:{...e.style,...o}})}}return w&&!e.title&&(e.title=A(w)),void 0!==i&&(e.title=i),e},[w,null==v?void 0:v.flattenOptions,o,E,i]);return e.useEffect(()=>{y&&b(!1)},[y,r]),e.createElement("div",{className:m("".concat(o,"-content"),null==d?void 0:d.content),style:null==f?void 0:f.content},w?e.createElement("div",S,w.label):e.createElement(j,{show:!E}),e.createElement(D,F({ref:n},t,{value:E,maxLength:"combobox"===c?s:void 0,onChange:e=>{var n;b(!0),null==(n=t.onChange)||n.call(t,e)}})))}),K=t=>{const{className:n,style:o,customizeIcon:l,customizeIconProps:r,children:a,onMouseDown:s,onClick:c}=t,u="function"==typeof l?l(r):l;return e.createElement("span",{className:n,onMouseDown:e=>{e.preventDefault(),null==s||s(e)},style:{userSelect:"none",WebkitUserSelect:"none",...o},unselectable:"on",onClick:c,"aria-hidden":!0},void 0!==u?u:e.createElement("span",{className:m(n.split(/\s+/).map(e=>"".concat(e,"-icon")))},a))};function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},B.apply(this,arguments)}function W(e){var t;return null!=(t=e.key)?t:e.value}const H=e=>{e.preventDefault(),e.stopPropagation()},z=e.forwardRef(function({inputProps:t},n){const{prefixCls:o,displayValues:l,searchValue:r,mode:a,onSelectorRemove:s,removeIcon:c}=V(),{disabled:u,showSearch:i,triggerOpen:p,toggleOpen:d,autoClearSearchValue:v,tagRender:h,maxTagPlaceholder:b,maxTagTextLength:y,maxTagCount:w,classNames:E,styles:S}=g(),C="".concat(o,"-selection-item");let x=r;p||"multiple"!==a||!1===v||(x="");const O=i&&x||"",N=i&&!u,P=null!=c?c:"×",M=null!=b?b:e=>"+ ".concat(e.length," ..."),R=h,I=(t,n,o,l,r)=>e.createElement("span",{title:A(t),className:m(C,{["".concat(C,"-disabled")]:o},null==E?void 0:E.item),style:null==S?void 0:S.item},e.createElement("span",{className:m("".concat(C,"-content"),null==E?void 0:E.itemContent),style:null==S?void 0:S.itemContent},n),l&&e.createElement(K,{className:m("".concat(C,"-remove"),null==E?void 0:E.itemRemove),style:null==S?void 0:S.itemRemove,onMouseDown:H,onClick:r,customizeIcon:P},"×")),_=(t,n,o,l,r,a,s)=>e.createElement("span",{onMouseDown:e=>{H(e),d(!p)}},R({label:n,value:t,index:null==s?void 0:s.index,disabled:o,closable:l,onClose:r,isMaxTag:!!a}));return e.createElement(f,{prefixCls:"".concat(o,"-content"),className:null==E?void 0:E.content,style:null==S?void 0:S.content,prefix:l.length||r&&p?null:e.createElement(j,null),data:l,renderItem:(e,t)=>{const{disabled:n,label:o,value:l}=e,r=!u&&!n;let a=o;if("number"==typeof y&&("string"==typeof o||"number"==typeof o)){const e=String(a);e.length>y&&(a="".concat(e.slice(0,y),"..."))}const c=t=>{t&&t.stopPropagation(),(e=>{null==s||s(e)})(e)};return"function"==typeof R?_(l,a,n,r,c,void 0,t):I(e,a,n,r,c)},renderRest:e=>{if(!l.length)return null;const t="function"==typeof M?M(e):M;return"function"==typeof R?_(void 0,t,!1,!1,void 0,!0):I({title:t},t,!1)},suffix:e.createElement(D,B({ref:n,disabled:u,readOnly:!N},t,{value:O||"",syncWidth:!0})),itemKey:W,maxCount:w})}),U=e.forwardRef(function(t,n){const{multiple:o,onInputKeyDown:l,tabIndex:r}=V(),s=g(),{showSearch:c}=s,u={...a(s,{aria:!0}),onKeyDown:l,readOnly:!c,tabIndex:r};return o?e.createElement(z,{ref:n,inputProps:u}):e.createElement(L,{ref:n,inputProps:u})});function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},G.apply(this,arguments)}const Y=["value","onChange","removeIcon","placeholder","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex","activeValue","onSelectorRemove","focused"],X=e.forwardRef(function(n,o){const{prefixCls:l,className:a,style:i,prefix:p,suffix:d,clearIcon:f,children:v,multiple:h,displayValues:b,placeholder:y,mode:w,searchValue:E,onSearch:S,onSearchSubmit:C,onInputBlur:x,maxLength:O,autoFocus:N,onMouseDown:P,onClearMouseDown:M,onInputKeyDown:V,onSelectorRemove:D,tokenWithEnter:j,components:_,...k}=n,{triggerOpen:T,toggleOpen:A,showSearch:F,disabled:L,loading:K,classNames:B,styles:W}=g(),H=e.useRef(null),z=e.useRef(null),X=t(e=>{const{which:t}=e,n=z.current instanceof HTMLTextAreaElement;var o;(n||!T||t!==s.UP&&t!==s.DOWN||e.preventDefault(),V&&V(e),n&&!T&&~[s.UP,s.DOWN,s.LEFT,s.RIGHT].indexOf(t))||(o=t)&&![s.ESC,s.SHIFT,s.BACKSPACE,s.TAB,s.WIN_KEY,s.ALT,s.META,s.WIN_KEY_RIGHT,s.CTRL,s.SEMICOLON,s.EQUALS,s.CAPS_LOCK,s.CONTEXT_MENU,s.UP,s.LEFT,s.RIGHT,s.F1,s.F2,s.F3,s.F4,s.F5,s.F6,s.F7,s.F8,s.F9,s.F10,s.F11,s.F12].includes(o)&&A(!0)});e.useImperativeHandle(o,()=>({focus:e=>{var t,n;null==(n=(t=z.current||H.current).focus)||n.call(t,e)},blur:()=>{var e,t;null==(t=(e=z.current||H.current).blur)||t.call(e)},nativeElement:H.current}));const J=t(e=>{var t;if(!L){const n=c(z.current);e.nativeEvent._ori_target=n,n&&e.target!==n&&!n.contains(e.target)&&e.preventDefault();const o=T&&!h&&("combobox"===w||F);e.nativeEvent._select_lazy?T&&A(!1):(null==(t=z.current)||t.focus(),o||A())}null==P||P(e)}),{root:Q}=_,$=u(k,Y),q={...n,onInputKeyDown:X};return Q?e.isValidElement(Q)?e.cloneElement(Q,{...$,ref:r(Q.ref,H)}):e.createElement(Q,G({},$,{ref:H})):e.createElement(I.Provider,{value:q},e.createElement("div",G({},$,{ref:H,className:a,style:i,onMouseDown:J}),e.createElement(R,{className:m("".concat(l,"-prefix"),null==B?void 0:B.prefix),style:null==W?void 0:W.prefix},p),e.createElement(U,{ref:z}),e.createElement(R,{className:m("".concat(l,"-suffix"),{["".concat(l,"-suffix-loading")]:K},null==B?void 0:B.suffix),style:null==W?void 0:W.suffix},d),f&&e.createElement(R,{className:m("".concat(l,"-clear"),null==B?void 0:B.clear),style:null==W?void 0:W.clear,onMouseDown:e=>{e.nativeEvent._select_lazy=!0,null==M||M(e)}},f),v))});function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},J.apply(this,arguments)}const Q=e=>"tags"===e||"multiple"===e,$=e.forwardRef((n,l)=>{const{id:r,prefixCls:a,className:s,styles:u,classNames:i,showSearch:p,tagRender:d,showScrollBar:f="optional",direction:v,omitDomProps:h,displayValues:g,onDisplayValuesChange:w,emptyOptions:E,notFoundContent:C="Not Found",onClear:O,maxCount:N,placeholder:R,mode:I,disabled:V,loading:D,getInputElement:j,getRawInputElement:_,open:k,defaultOpen:T,onPopupVisibleChange:A,activeValue:F,onActiveValueChange:L,activeDescendantId:K,searchValue:B,autoClearSearchValue:W,onSearch:H,onSearchSplit:z,tokenSeparators:U,allowClear:G,prefix:Y,suffix:$,suffixIcon:q,clearIcon:Z,OptionList:ee,animation:te,transitionName:ne,popupStyle:oe,popupClassName:le,popupMatchSelectWidth:re,popupRender:ae,popupAlign:se,placement:ce,builtinPlacements:ue,getPopupContainer:ie,showAction:pe=[],onFocus:de,onBlur:fe,onKeyUp:me,onKeyDown:ve,onMouseDown:he,components:be,...ge}=n,ye=Q(I),we=e.useRef(null),Ee=e.useRef(null),Se=e.useRef(null),[Ce,xe]=e.useState(!1);e.useImperativeHandle(l,()=>{var e,t;return{focus:null==(e=we.current)?void 0:e.focus,blur:null==(t=we.current)?void 0:t.blur,scrollTo:e=>{var t;return null==(t=Se.current)?void 0:t.scrollTo(e)},nativeElement:c(we.current)}});const Oe=function(t,n,o){return e.useMemo(()=>{let{root:e,input:l}=t||{};return o&&(e=o()),n&&(l=n()),{root:e,input:l}},[t,n,o])}(be,j,_),Ne=e.useMemo(()=>{var e;if("combobox"!==I)return B;const t=null==(e=g[0])?void 0:e.value;return"string"==typeof t||"number"==typeof t?String(t):""},[B,I,g]),Pe="combobox"===I&&"function"==typeof j&&j()||null,Me=!C&&E,[Re,Ie]=function(n,l,r,a){const[s,c]=e.useState(!1);e.useEffect(()=>{c(!0)},[]);const[u,i]=o(n,l),p=a(!!s&&u),d=e.useRef(0),f=t(e=>{r&&p!==e&&r(e),i(e)}),m=t((e,t={})=>{const{cancelFun:n}=t;d.current+=1;const o=d.current,l="boolean"==typeof e?e:!p;function r(){o!==d.current||(null==n?void 0:n())||f(l)}l?r():M(()=>{r()})});return[p,m]}(T||!1,k,A,e=>!V&&!Me&&e),Ve=e.useMemo(()=>(U||[]).some(e=>["\n","\r\n"].includes(e)),[U]),De=(e,t,n)=>{if(ye&&x(N)&&g.length>=N)return;let o=!0,l=e;null==L||L(null);const r=((e,t,n)=>{if(!t||!t.length)return null;let o=!1;const l=(e,[t,...n])=>{if(!t)return[e];const r=e.split(t);return o=o||r.length>1,r.reduce((e,t)=>[...e,...l(t,n)],[]).filter(Boolean)},r=l(e,t);return o?void 0!==n?r.slice(0,n):r:null})(e,U,x(N)?N-g.length:void 0),a=n?null:r;return"combobox"!==I&&a&&(l="",null==z||z(a),Ie(!1),o=!1),H&&Ne!==l&&H(l,{source:t?"typing":"effect"}),e&&t&&o&&Ie(!0),o};e.useEffect(()=>{Re||ye||"combobox"===I||De("",!1,!1)},[Re]),e.useEffect(()=>{V&&(Ie(!1),xe(!1))},[V,Re]);const[je,_e]=function(t=250){const n=e.useRef(null),o=e.useRef(null);return e.useEffect(()=>()=>{window.clearTimeout(o.current)},[]),[()=>n.current,function(e){(e||null===n.current)&&(n.current=e),window.clearTimeout(o.current),o.current=window.setTimeout(()=>{n.current=null},t)}]}(),ke=e.useRef(!1),Te=t(e=>{const t=g.filter(t=>t!==e);w(t,{type:"remove",values:[e]})}),Ae=()=>{var e;return[c(we.current),null==(e=Ee.current)?void 0:e.getPopupElement()]};!function(n,o,l,r){const a=t(e=>{if(r)return;let t=e.target;t.shadowRoot&&e.composed&&(t=e.composedPath()[0]||t),e._ori_target&&(t=e._ori_target),o&&!y(n(),t)&&l(!1)});e.useEffect(()=>(window.addEventListener("mousedown",a),()=>window.removeEventListener("mousedown",a)),[a])}(Ae,Re,Ie,!!Oe.root);const Fe=e.useRef(!1),Le=()=>{Re&&!Fe.current&&Ie(!1,{cancelFun:()=>y(Ae(),document.activeElement)})},Ke=(e,...t)=>{var n;const{target:o}=e,l=null==(n=Ee.current)?void 0:n.getPopupElement();(null==l?void 0:l.contains(o))&&Ie&&Ie(!0),null==he||he(e,...t),Fe.current=!0,M(()=>{Fe.current=!1})},[,Be]=e.useState({});let We;Oe.root&&(We=e=>{Ie(e)});const He=e.useMemo(()=>({...n,notFoundContent:C,open:Re,triggerOpen:Re,id:r,showSearch:p,multiple:ye,toggleOpen:Ie,showScrollBar:f,styles:u,classNames:i}),[n,C,Ie,r,p,ye,Re,f,u,i]),ze=e.useMemo(()=>{const e=null!=$?$:q;return"function"==typeof e?e({searchValue:Ne,open:Re,focused:Ce,showSearch:p,loading:D}):e},[$,q,Ne,Re,Ce,p,D]),{allowClear:Ue,clearIcon:Ge}=((t,n,o,l,r=!1,a,s)=>{const c=e.useMemo(()=>"boolean"==typeof o?{allowClear:o}:o&&"object"==typeof o?o:{allowClear:!1},[o]);return e.useMemo(()=>{const e=!r&&!1!==c.allowClear&&(n.length||a)&&!("combobox"===s&&""===a);return{allowClear:e,clearIcon:e?c.clearIcon||l||"×":null}},[c,l,r,n.length,a,s])})(0,g,G,Z,V,Ne,I),Ye=e.createElement(ee,{ref:Se}),Xe=m(a,s,{["".concat(a,"-focused")]:Ce,["".concat(a,"-multiple")]:ye,["".concat(a,"-single")]:!ye,["".concat(a,"-allow-clear")]:Ue,["".concat(a,"-show-arrow")]:null!=ze,["".concat(a,"-disabled")]:V,["".concat(a,"-loading")]:D,["".concat(a,"-open")]:Re,["".concat(a,"-customize-input")]:Pe,["".concat(a,"-show-search")]:p});let Je=e.createElement(X,J({},ge,{ref:we,prefixCls:a,className:Xe,focused:Ce,prefix:Y,suffix:ze,clearIcon:Ge,multiple:ye,mode:I,displayValues:g,placeholder:R,searchValue:Ne,activeValue:F,onSearch:De,onSearchSubmit:e=>{e&&e.trim()&&H(e,{source:"submit"})},onInputBlur:()=>{ke.current=!1},onFocus:e=>{xe(!0),V||(pe.includes("focus")&&Ie(!0),null==de||de(e))},onBlur:e=>{xe(!1),Ne&&("tags"===I?H(Ne,{source:"submit"}):"multiple"===I&&H("",{source:"blur"})),Le(),V||null==fe||fe(e)},onClearMouseDown:()=>{var e;null==O||O(),null==(e=we.current)||e.focus(),w([],{type:"clear",values:g}),De("",!1,!1)},onKeyDown:e=>{var t;const n=je(),{key:o}=e,l="Enter"===o;if(l&&("combobox"!==I&&e.preventDefault(),Re||Ie(!0)),_e(!!Ne),"Backspace"===o&&!n&&ye&&!Ne&&g.length){const e=[...g];let t=null;for(let n=e.length-1;n>=0;n-=1){const o=e[n];if(!o.disabled){e.splice(n,1),t=o;break}}t&&w(e,{type:"remove",values:[t]})}!Re||l&&ke.current||(l&&(ke.current=!0),null==(t=Se.current)||t.onKeyDown(e)),null==ve||ve(e)},onKeyUp:(e,...t)=>{var n;Re&&(null==(n=Se.current)||n.onKeyUp(e,...t)),"Enter"===e.key&&(ke.current=!1),null==me||me(e,...t)},onSelectorRemove:Te,tokenWithEnter:Ve,onMouseDown:Ke,components:Oe}));return Je=e.createElement(S,{ref:Ee,disabled:V,prefixCls:a,visible:Re,popupElement:Ye,animation:te,transitionName:ne,popupStyle:oe,popupClassName:le,direction:v,popupMatchSelectWidth:re,popupRender:ae,popupAlign:se,placement:ce,builtinPlacements:ue,getPopupContainer:ie,empty:E,onPopupVisibleChange:We,onPopupMouseEnter:function(){Be({})},onPopupMouseDown:Ke,onPopupBlur:Le},Je),e.createElement(b.Provider,{value:He},e.createElement(P,{visible:Ce&&!Re,values:g}),Je)}),q=()=>null;q.isSelectOptGroup=!0;const Z=()=>null;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ee.apply(this,arguments)}function te(e){return"string"==typeof e||"number"==typeof e}Z.isSelectOption=!0;const ne=(t,n)=>{var o,l;const{prefixCls:r,id:c,open:p,multiple:d,mode:f,searchValue:v,toggleOpen:b,notFoundContent:y,onPopupScroll:w,showScrollBar:E}=g(),{maxCount:S,flattenOptions:C,onActiveValue:O,defaultActiveFirstOption:N,onSelect:P,menuItemSelectedIcon:M,rawValues:R,fieldNames:I,virtual:V,direction:D,listHeight:j,listItemHeight:k,optionRender:T,classNames:A,styles:F}=e.useContext(_),L="".concat(r,"-item"),B=i(()=>C,[p,C],(e,t)=>t[0]&&e[1]!==t[1]),W=e.useRef(null),H=e.useMemo(()=>d&&x(S)&&(null==R?void 0:R.size)>=S,[d,S,null==R?void 0:R.size]),z=e=>{e.preventDefault()},U=e=>{var t;null==(t=W.current)||t.scrollTo("number"==typeof e?{index:e}:e)},G=e.useCallback(e=>"combobox"!==f&&R.has(e),[f,[...R].toString(),R.size]),Y=(e,t=1)=>{const n=B.length;for(let o=0;o<n;o+=1){const l=(e+o*t+n)%n,{group:r,data:a}=B[l]||{};if(!r&&!(null==a?void 0:a.disabled)&&(G(a.value)||!H))return l}return-1},[X,J]=e.useState(()=>Y(0)),Q=(e,t=!1)=>{J(e);const n={source:t?"keyboard":"mouse"},o=B[e];o?O(o.value,e,n):O(null,-1,n)};e.useEffect(()=>{Q(!1!==N?Y(0):-1)},[B.length,v]);const $=e.useCallback(e=>"combobox"===f?String(e).toLowerCase()===v.toLowerCase():R.has(e),[f,v,[...R].toString(),R.size]);e.useEffect(()=>{var e;let t;if(!d&&p&&1===R.size){const e=Array.from(R)[0],n=B.findIndex(({data:t})=>v?String(t.value).startsWith(v):t.value===e);-1!==n&&(Q(n),t=setTimeout(()=>{U(n)}))}return p&&(null==(e=W.current)||e.scrollTo(void 0)),()=>clearTimeout(t)},[p,v]);const q=e=>{void 0!==e&&P(e,{selected:!R.has(e)}),d||b(!1)};if(e.useImperativeHandle(n,()=>({onKeyDown:e=>{const{which:t,ctrlKey:n}=e;switch(t){case s.N:case s.P:case s.UP:case s.DOWN:{let e=0;if(t===s.UP?e=-1:t===s.DOWN?e=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&n&&(t===s.N?e=1:t===s.P&&(e=-1)),0!==e){const t=Y(X+e,e);U(t),Q(t,!0)}break}case s.TAB:case s.ENTER:{const t=B[X];if(!t||t.data.disabled)return q(void 0);!H||R.has(t.value)?q(t.value):q(void 0),p&&e.preventDefault();break}case s.ESC:b(!1),p&&e.stopPropagation()}},onKeyUp:()=>{},scrollTo:e=>{U(e)}})),0===B.length)return e.createElement("div",{role:"listbox",id:"".concat(c,"_list"),className:"".concat(L,"-empty"),onMouseDown:z},y);const Z=Object.keys(I).map(e=>I[e]),ne=e=>e.label;function oe(e,t){const{group:n}=e;return{role:n?"presentation":"option",id:"".concat(c,"_list_").concat(t)}}const le=t=>{const n=B[t];if(!n)return null;const o=n.data||{},{value:l}=o,{group:r}=n,s=a(o,!0),c=ne(n);return n?e.createElement("div",ee({"aria-label":"string"!=typeof c||r?null:c},s,{key:t},oe(n,t),{"aria-selected":$(l)}),l):null},re={role:"listbox",id:"".concat(c,"_list")};return e.createElement(e.Fragment,null,V&&e.createElement("div",ee({},re,{style:{height:0,width:0,overflow:"hidden"}}),le(X-1),le(X),le(X+1)),e.createElement(h,{itemKey:"key",ref:W,data:B,height:j,itemHeight:k,fullHeight:!1,onMouseDown:z,onScroll:w,virtual:V,direction:D,innerProps:V?null:re,showScrollBar:E,className:null==(o=null==A?void 0:A.popup)?void 0:o.list,style:null==(l=null==F?void 0:F.popup)?void 0:l.list},(t,n)=>{var o,l,r;const{group:s,groupOption:c,data:i,label:p,value:d}=t,{key:f}=i;if(s){const t=null!=(o=i.title)?o:te(p)?p.toString():void 0;return e.createElement("div",{className:m(L,"".concat(L,"-group"),i.className),title:t},void 0!==p?p:f)}const{disabled:v,title:h,children:b,style:g,className:y,...w}=i,E=u(w,Z),S=G(d),C=v||!S&&H,x="".concat(L,"-option"),O=m(L,x,y,null==(l=null==A?void 0:A.popup)?void 0:l.listItem,{["".concat(x,"-grouped")]:c,["".concat(x,"-active")]:X===n&&!C,["".concat(x,"-disabled")]:C,["".concat(x,"-selected")]:S}),N=ne(t),P=!M||"function"==typeof M||S,R="number"==typeof N?N:N||d;let I=te(R)?R.toString():void 0;return void 0!==h&&(I=h),e.createElement("div",ee({},a(E),V?{}:oe(t,n),{"aria-selected":V?void 0:$(d),className:O,title:I,onMouseMove:()=>{X===n||C||Q(n)},onClick:()=>{C||q(d)},style:{...null==(r=null==F?void 0:F.popup)?void 0:r.listItem,...g}}),e.createElement("div",{className:"".concat(x,"-content")},"function"==typeof T?T(t,{index:n}):R),e.isValidElement(M)||S,P&&e.createElement(K,{className:"".concat(L,"-option-state"),customizeIcon:M,customizeIconProps:{value:d,disabled:C,isSelected:S}},S?"✓":null))}))},oe=e.forwardRef(ne);function le(e,t){return k(e).join("").toUpperCase().includes(t)}function re(t,n=!1){return p(t).map((t,o)=>{if(!e.isValidElement(t)||!t.type)return null;const{type:{isSelectOptGroup:l},key:r,props:{children:a,...s}}=t;return n||!l?function(e){const{key:t,props:{children:n,value:o,...l}}=e;return{key:t,value:void 0!==o?o:t,children:n,...l}}(t):{key:"__RC_SELECT_GRP__".concat(null===r?o:r,"__"),label:r,...s,options:re(a)}}).filter(e=>e)}const ae=(t,n,o,l,r)=>e.useMemo(()=>{let e=t;!t&&(e=re(n));const a=new Map,s=new Map,c=(e,t,n)=>{n&&"string"==typeof n&&e.set(t[n],t)},u=(e,t=!1)=>{for(let n=0;n<e.length;n+=1){const i=e[n];!i[o.options]||t?(a.set(i[o.value],i),c(s,i,o.label),l.forEach(e=>{c(s,i,e)}),c(s,i,r)):u(i[o.options],!0)}};return u(e),{options:e,valueOptions:a,labelOptions:s}},[t,n,o,l,r]);function se(t){const n=e.useRef();n.current=t;return e.useCallback((...e)=>n.current(...e),[])}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ce.apply(this,arguments)}const ue=["inputValue"];const ie=e.forwardRef((t,n)=>{const{id:l,mode:r,prefixCls:a="rc-select",backfill:s,fieldNames:c,showSearch:u,searchValue:i,onSearch:p,autoClearSearchValue:f,filterOption:m,optionFilterProp:v,filterSort:h,onSelect:b,onDeselect:g,onActive:y,popupMatchSelectWidth:w=!0,optionLabelProp:E,options:S,optionRender:x,children:P,defaultActiveFirstOption:M,menuItemSelectedIcon:R,virtual:I,direction:V,listHeight:D=200,listItemHeight:j=20,labelRender:T,value:A,defaultValue:F,labelInValue:L,onChange:K,maxCount:B,classNames:W,styles:H,...z}=t,U={searchValue:i,onSearch:p,autoClearSearchValue:f,filterOption:m,optionFilterProp:v,filterSort:h},[G,Y]=function(t,n,o){const{filterOption:l,searchValue:r,optionFilterProp:a,filterSort:s,onSearch:c,autoClearSearchValue:u}=n;return e.useMemo(()=>{const e="object"==typeof t,n={filterOption:l,searchValue:r,optionFilterProp:a,filterSort:s,onSearch:c,autoClearSearchValue:u,...e?t:{}};return[!!(e||"combobox"===o||"tags"===o||"multiple"===o&&void 0===t)||t,n]},[o,t,l,r,a,s,c,u])}(u,U,r),{filterOption:X,searchValue:J,optionFilterProp:q,filterSort:Z,onSearch:ee,autoClearSearchValue:te=!0}=Y,ne=e.useMemo(()=>q?Array.isArray(q)?q:[q]:[],[q]),re=d(l),ie=Q(r),pe=!(S||!P),de=e.useMemo(()=>(void 0!==X||"combobox"!==r)&&X,[X,r]),fe=e.useMemo(()=>O(c,pe),[JSON.stringify(c),pe]),[me,ve]=o("",J),he=me||"",be=ae(S,P,fe,ne,E),{valueOptions:ge,labelOptions:ye,options:we}=be,Ee=e.useCallback(e=>k(e).map(e=>{let t,n,o,l;!function(e){return!e||"object"!=typeof e}(e)?(n=e.label,t=e.value):t=e;const r=ge.get(t);return r&&(void 0===n&&(n=null==r?void 0:r[E||fe.label]),o=null==r?void 0:r.disabled,l=null==r?void 0:r.title),{label:n,value:t,key:t,disabled:o,title:l}}),[fe,E,ge]),[Se,Ce]=o(F,A),xe=e.useMemo(()=>{var e;const t=Ee(ie&&null===Se?[]:Se);return"combobox"===r&&function(e){return!e&&0!==e}(null==(e=t[0])?void 0:e.value)?[]:t},[Se,Ee,r,ie]),[Oe,Ne]=((t,n)=>{const o=e.useRef({values:new Map,options:new Map});return[e.useMemo(()=>{const{values:e,options:l}=o.current,r=t.map(t=>{var n;return void 0===t.label?{...t,label:null==(n=e.get(t.value))?void 0:n.label}:t}),a=new Map,s=new Map;return r.forEach(e=>{a.set(e.value,e),s.set(e.value,n.get(e.value)||l.get(e.value))}),o.current.values=a,o.current.options=s,r},[t,n]),e.useCallback(e=>n.get(e)||o.current.options.get(e),[n])]})(xe,ge),Pe=e.useMemo(()=>{if(!r&&1===Oe.length){const e=Oe[0];if(null===e.value&&(null===e.label||void 0===e.label))return[]}return Oe.map(e=>{var t;return{...e,label:null!=(t="function"==typeof T?T(e):e.label)?t:e.value}})},[r,Oe,T]),Me=e.useMemo(()=>new Set(Oe.map(e=>e.value)),[Oe]);e.useEffect(()=>{var e;if("combobox"===r){const t=null==(e=Oe[0])?void 0:e.value;ve(function(e){return null!=e}(t)?String(t):"")}},[Oe]);const Re=se((e,t)=>{const n=null!=t?t:e;return{[fe.value]:e,[fe.label]:n}}),Ie=((t,n,o,l,r)=>e.useMemo(()=>{if(!o||!1===l)return t;const{options:e,label:a,value:s}=n,c=[],u="function"==typeof l,i=o.toUpperCase(),p=u?l:(t,n)=>r&&r.length?r.some(e=>le(n[e],i)):n[e]?le(n["children"!==a?a:"label"],i):le(n[s],i),d=u?e=>N(e):e=>e;return t.forEach(t=>{if(t[e])if(p(o,d(t)))c.push(t);else{const n=t[e].filter(e=>p(o,d(e)));n.length&&c.push({...t,[e]:n})}else p(o,d(t))&&c.push(t)}),c},[t,l,r,o,n]))(e.useMemo(()=>{if("tags"!==r)return we;const e=[...we];return[...Oe].sort((e,t)=>e.value<t.value?-1:1).forEach(t=>{const n=t.value;(e=>ge.has(e))(n)||e.push(Re(n,t.label))}),e},[Re,we,ge,Oe,r]),fe,he,de,ne),Ve=e.useMemo(()=>"tags"!==r||!he||Ie.some(e=>(e=>ne.length?ne.some(t=>(null==e?void 0:e[t])===he):(null==e?void 0:e.value)===he)(e))||Ie.some(e=>e[fe.value]===he)?Ie:[Re(he),...Ie],[Re,ne,r,Ie,he,fe]),De=e=>[...e].sort((e,t)=>Z(e,t,{searchValue:he})).map(e=>Array.isArray(e.options)?{...e,options:e.options.length>0?De(e.options):e.options}:e),je=e.useMemo(()=>Z?De(Ve):Ve,[Ve,Z,he]),_e=e.useMemo(()=>function(e,{fieldNames:t,childrenAsData:n}={}){const o=[],{label:l,value:r,options:a,groupLabel:s}=O(t,!1);return function e(t,c){Array.isArray(t)&&t.forEach(t=>{if(c||!(a in t)){const e=t[r];o.push({key:C(t,o.length),groupOption:c,data:t,label:t[l],value:e})}else{let l=t[s];void 0===l&&n&&(l=t.label),o.push({key:C(t,o.length),group:!0,data:t,label:l}),e(t[a],!0)}})}(e,!1),o}(je,{fieldNames:fe,childrenAsData:pe}),[je,fe,pe]),ke=e=>{const t=Ee(e);if(Ce(t),K&&(t.length!==Oe.length||t.some((e,t)=>{var n;return(null==(n=Oe[t])?void 0:n.value)!==(null==e?void 0:e.value)}))){const e=L?t.map(({label:e,value:t})=>({label:e,value:t})):t.map(e=>e.value),n=t.map(e=>N(Ne(e.value)));K(ie?e:e[0],ie?n:n[0])}},[Te,Ae]=e.useState(null),[Fe,Le]=e.useState(0),Ke=void 0!==M?M:"combobox"!==r,Be=e.useRef(),We=e.useCallback((e,t,{source:n="keyboard"}={})=>{Le(t),s&&"combobox"===r&&null!==e&&"keyboard"===n&&Ae(String(e));const o=Promise.resolve().then(()=>{Be.current===o&&(null==y||y(e))});Be.current=o},[s,r,y]),He=(e,t,n)=>{const o=()=>{const t=Ne(e);return[L?{label:null==t?void 0:t[fe.label],value:e}:e,N(t)]};if(t&&b){const[e,t]=o();b(e,t)}else if(!t&&g&&"clear"!==n){const[e,t]=o();g(e,t)}},ze=se((e,t)=>{let n;const o=!ie||t.selected;n=o?ie?[...Oe,e]:[e]:Oe.filter(t=>t.value!==e),ke(n),He(e,o),"combobox"===r?Ae(""):Q&&!te||(ve(""),Ae(""))}),Ue=e.useMemo(()=>{const e=!1!==I&&!1!==w;return{...be,flattenOptions:_e,onActiveValue:We,defaultActiveFirstOption:Ke,onSelect:ze,menuItemSelectedIcon:R,rawValues:Me,fieldNames:fe,virtual:e,direction:V,listHeight:D,listItemHeight:j,childrenAsData:pe,maxCount:B,optionRender:x,classNames:W,styles:H}},[B,be,_e,We,Ke,ze,R,Me,fe,I,w,V,D,j,pe,x,W,H]);return e.createElement(_.Provider,{value:Ue},e.createElement($,ce({},z,{id:re,prefixCls:a,ref:n,omitDomProps:ue,mode:r,classNames:W,styles:H,displayValues:Pe,onDisplayValuesChange:(e,t)=>{ke(e);const{type:n,values:o}=t;"remove"!==n&&"clear"!==n||o.forEach(e=>{He(e.value,!1,n)})},maxCount:B,direction:V,showSearch:G,searchValue:he,onSearch:(e,t)=>{if(ve(e),Ae(null),"submit"===t.source){const t=(e||"").trim();if(t){const e=Array.from(new Set([...Me,t]));ke(e),He(t,!0),ve("")}return}"blur"!==t.source&&("combobox"===r&&ke(e),null==ee||ee(e))},autoClearSearchValue:te,onSearchSplit:e=>{let t=e;"tags"!==r&&(t=e.map(e=>{const t=ye.get(e);return null==t?void 0:t.value}).filter(e=>void 0!==e));const n=Array.from(new Set([...Me,...t]));ke(n),n.forEach(e=>{He(e,!0)})},popupMatchSelectWidth:w,OptionList:oe,emptyOptions:!_e.length,activeValue:Te,activeDescendantId:"".concat(re,"_list_").concat(Fe)})))});ie.Option=Z,ie.OptGroup=q;export{$ as B,Z as O,ie as T,q as a,g as u};
