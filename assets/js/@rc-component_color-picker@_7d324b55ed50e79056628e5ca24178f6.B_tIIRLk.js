import{e,r as t}from"./react@19.2.1.BpVBN_43.js";import{F as n}from"./@ant-design_fast-color@3.0.0.ii8f2EEn.js";import{c as r}from"./clsx@2.1.1.BvmCeSbq.js";import{e as o,d as a}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";const c=e=>Math.round(Number(e||0));class s extends n{constructor(e){super((e=>{if(e instanceof n)return e;if(e&&"object"==typeof e&&"h"in e&&"b"in e){const{b:t,...n}=e;return{...n,v:t}}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e})(e))}toHsbString(){const e=this.toHsb(),t=c(100*e.s),n=c(100*e.b),r=c(e.h),o=e.a,a=`hsb(${r}, ${t}%, ${n}%)`,s=`hsba(${r}, ${t}%, ${n}%, ${o.toFixed(0===o?0:2)})`;return 1===o?a:s}toHsb(){const{v:e,...t}=this.toHsv();return{...t,b:e,a:this.a}}}const l="rc-color-picker",u=e=>e instanceof s?e:new s(e),i=u("#1677ff"),m=e=>{const{offset:t,targetRef:n,containerRef:r,color:o,type:a}=e,{width:c,height:s}=r.current.getBoundingClientRect(),{width:l,height:i}=n.current.getBoundingClientRect(),m=l/2,d=i/2,f=(t.x+m)/c,p=1-(t.y+d)/s,g=o.toHsb(),h=f,b=(t.x+m)/c*360;if(a)switch(a){case"hue":return u({...g,h:b<=0?0:b});case"alpha":return u({...g,a:h<=0?0:h})}return u({h:g.h,s:f<=0?0:f,b:p>=1?1:p,a:g.a})},d=(e,t)=>{const n=e.toHsb();switch(t){case"hue":return{x:n.h/360*100,y:50};case"alpha":return{x:100*e.a,y:50};default:return{x:100*n.s,y:100*(1-n.b)}}},f=({color:t,prefixCls:n,className:o,style:a,onClick:c})=>{const s=`${n}-color-block`;return e.createElement("div",{className:r(s,o),style:a,onClick:c},e.createElement("div",{className:`${s}-inner`,style:{background:t}}))};function p(e){const{targetRef:n,containerRef:r,direction:o,onDragChange:a,onDragChangeComplete:c,calculate:s,color:l,disabledDrag:u}=e,[i,m]=t.useState({x:0,y:0}),d=t.useRef(null),f=t.useRef(null);t.useEffect(()=>{m(s())},[l]),t.useEffect(()=>()=>{document.removeEventListener("mousemove",d.current),document.removeEventListener("mouseup",f.current),document.removeEventListener("touchmove",d.current),document.removeEventListener("touchend",f.current),d.current=null,f.current=null},[]);const p=e=>{const{pageX:t,pageY:c}=function(e){const t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}(e),{x:s,y:l,width:u,height:m}=r.current.getBoundingClientRect(),{width:d,height:f}=n.current.getBoundingClientRect(),p=d/2,g=f/2,h=Math.max(0,Math.min(t-s,u))-p,b=Math.max(0,Math.min(c-l,m))-g,v={x:h,y:"x"===o?i.y:b};if(0===d&&0===f||d!==f)return!1;a?.(v)},g=e=>{e.preventDefault(),p(e)},h=e=>{e.preventDefault(),document.removeEventListener("mousemove",d.current),document.removeEventListener("mouseup",f.current),document.removeEventListener("touchmove",d.current),document.removeEventListener("touchend",f.current),d.current=null,f.current=null,c?.()};return[i,e=>{document.removeEventListener("mousemove",d.current),document.removeEventListener("mouseup",f.current),u||(p(e),document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),document.addEventListener("touchmove",g),document.addEventListener("touchend",h),d.current=g,f.current=h)}]}const g=({size:t="default",color:n,prefixCls:o})=>e.createElement("div",{className:r(`${o}-handler`,{[`${o}-handler-sm`]:"small"===t}),style:{backgroundColor:n}}),h=({children:t,style:n,prefixCls:r})=>e.createElement("div",{className:`${r}-palette`,style:{position:"relative",...n}},t),b=t.forwardRef((t,n)=>{const{children:r,x:o,y:a}=t;return e.createElement("div",{ref:n,style:{position:"absolute",left:`${o}%`,top:`${a}%`,zIndex:1,transform:"translate(-50%, -50%)"}},r)}),v=({color:n,onChange:r,prefixCls:a,onChangeComplete:c,disabled:s})=>{const l=t.useRef(),u=t.useRef(),i=t.useRef(n),f=o(e=>{const t=m({offset:e,targetRef:u,containerRef:l,color:n});i.current=t,r(t)}),[v,C]=p({color:n,containerRef:l,targetRef:u,calculate:()=>d(n),onDragChange:f,onDragChangeComplete:()=>c?.(i.current),disabledDrag:s});return e.createElement("div",{ref:l,className:`${a}-select`,onMouseDown:C,onTouchStart:C},e.createElement(h,{prefixCls:a},e.createElement(b,{x:v.x,y:v.y,ref:u},e.createElement(g,{color:n.toRgbString(),prefixCls:a})),e.createElement("div",{className:`${a}-saturation`,style:{backgroundColor:`hsl(${n.toHsb().h},100%, 50%)`,backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},C=({colors:n,children:r,direction:o="to right",type:a,prefixCls:c})=>{const l=t.useMemo(()=>n.map((e,t)=>{let r=u(e);return"alpha"===a&&t===n.length-1&&(r=new s(r.setA(1))),r.toRgbString()}).join(","),[n,a]);return e.createElement("div",{className:`${c}-gradient`,style:{position:"absolute",inset:0,background:`linear-gradient(${o}, ${l})`}},r)},E=n=>{const{prefixCls:a,colors:c,disabled:l,onChange:u,onChangeComplete:i,color:f,type:v}=n,E=t.useRef(null),y=t.useRef(null),x=t.useRef(f),R=e=>"hue"===v?e.getHue():100*e.a,$=o(e=>{const t=m({offset:e,targetRef:y,containerRef:E,color:f,type:v});x.current=t,u(R(t))}),[w,L]=p({color:f,targetRef:y,containerRef:E,calculate:()=>d(f,v),onDragChange:$,onDragChangeComplete(){i(R(x.current))},direction:"x",disabledDrag:l}),N=e.useMemo(()=>{if("hue"===v){const e=f.toHsb();e.s=1,e.b=1,e.a=1;return new s(e)}return f},[f,v]),D=e.useMemo(()=>c.map(e=>`${e.color} ${e.percent}%`),[c]);return e.createElement("div",{ref:E,className:r(`${a}-slider`,`${a}-slider-${v}`),onMouseDown:L,onTouchStart:L},e.createElement(h,{prefixCls:a},e.createElement(b,{x:w.x,y:w.y,ref:y},e.createElement(g,{size:"small",color:N.toHexString(),prefixCls:a})),e.createElement(C,{colors:D,type:v,prefixCls:a})))};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const x=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],R=t.forwardRef((n,o)=>{const{value:c,defaultValue:m,prefixCls:d=l,onChange:p,onChangeComplete:g,className:h,style:b,panelRender:C,disabledAlpha:R=!1,disabled:$=!1,components:w}=n,[L]=function(e){return t.useMemo(()=>{const{slider:t}=e||{};return[t||E]},[e])}(w),[N,D]=((e,n)=>{const[r,o]=a(e,n);return[t.useMemo(()=>u(r),[r]),o]})(m||i,c),M=t.useMemo(()=>N.setA(1).toRgbString(),[N]),H=(e,t)=>{c||D(e),p?.(e,t)},j=e=>new s(N.setHue(e)),k=e=>new s(N.setA(e/100)),S=r(`${d}-panel`,h,{[`${d}-panel-disabled`]:$}),O={prefixCls:d,disabled:$,color:N},A=e.createElement(e.Fragment,null,e.createElement(v,y({onChange:H},O,{onChangeComplete:g})),e.createElement("div",{className:`${d}-slider-container`},e.createElement("div",{className:r(`${d}-slider-group`,{[`${d}-slider-group-disabled-alpha`]:R})},e.createElement(L,y({},O,{type:"hue",colors:x,min:0,max:359,value:N.getHue(),onChange:e=>{H(j(e),{type:"hue",value:e})},onChangeComplete:e=>{g&&g(j(e))}})),!R&&e.createElement(L,y({},O,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:M}],min:0,max:100,value:100*N.a,onChange:e=>{H(k(e),{type:"alpha",value:e})},onChangeComplete:e=>{g&&g(k(e))}}))),e.createElement(f,{color:N.toRgbString(),prefixCls:d})));return e.createElement("div",{className:S,style:b,ref:o},"function"==typeof C?C(A):A)});export{s as C,f as a,R as b};
