const t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,e=globalThis,n="10.38.0";function r(){return s(e),e}function s(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||n,e[n]=e[n]||{}}function o(t,r,s=e){const o=s.__SENTRY__=s.__SENTRY__||{},i=o[n]=o[n]||{};return i[t]||(i[t]=r())}const i=["debug","info","warn","error","log","assert","trace"],a={};function c(t){if(!("console"in e))return t();const n=e.console,r={},s=Object.keys(a);s.forEach(t=>{const e=a[t];r[t]=n[t],n[t]=e});try{return t()}finally{s.forEach(t=>{n[t]=r[t]})}}function u(){return p().enabled}function l(n,...r){t&&u()&&c(()=>{e.console[n]("".concat("Sentry Logger ","[").concat(n,"]:"),...r)})}function p(){return t?o("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const d={enable:function(){p().enabled=!0},disable:function(){p().enabled=!1},isEnabled:u,log:function(...t){l("log",...t)},warn:function(...t){l("warn",...t)},error:function(...t){l("error",...t)}},f="?",h=/\(error: (.*)\)/,m=/captureMessage|captureException/;function g(...t){const e=t.sort((t,e)=>t[0]-e[0]).map(t=>t[1]);return(t,n=0,r=0)=>{const s=[],o=t.split("\n");for(let i=n;i<o.length;i++){let t=o[i];t.length>1024&&(t=t.slice(0,1024));const n=h.test(t)?t.replace(h,"$1"):t;if(!n.match(/\S*Error: /)){for(const t of e){const e=t(n);if(e){s.push(e);break}}if(s.length>=50+r)break}}return function(t){if(!t.length)return[];const e=Array.from(t);/sentryWrapped/.test(v(e).function||"")&&e.pop();e.reverse(),m.test(v(e).function||"")&&(e.pop(),m.test(v(e).function||"")&&e.pop());return e.slice(0,50).map(t=>({...t,filename:t.filename||v(e).filename,function:t.function||"?"}))}(s.slice(r))}}function _(t){return Array.isArray(t)?g(...t):t}function v(t){return t[t.length-1]||{}}const y="<anonymous>";function b(t){try{return t&&"function"==typeof t&&t.name||y}catch(e){return y}}function S(t){const e=t.exception;if(e){const t=[];try{return e.values.forEach(e=>{e.stacktrace.frames&&t.push(...e.stacktrace.frames)}),t}catch(n){return}}}function E(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const x={},w={};function k(t,e){x[t]=x[t]||[],x[t].push(e)}function I(e,n){if(!w[e]){w[e]=!0;try{n()}catch(r){t&&d.error("Error while instrumenting ".concat(e),r)}}}function T(e,n){const r=e&&x[e];if(r)for(const o of r)try{o(n)}catch(s){t&&d.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(b(o),"\nError:"),s)}}let C=null;function O(t){const e="error";k(e,t),I(e,D)}function D(){C=e.onerror,e.onerror=function(t,e,n,r,s){return T("error",{column:r,error:s,line:n,msg:t,url:e}),!!C&&C.apply(this,arguments)},e.onerror.__SENTRY_INSTRUMENTED__=!0}let A=null;function P(t){const e="unhandledrejection";k(e,t),I(e,N)}function N(){A=e.onunhandledrejection,e.onunhandledrejection=function(t){return T("unhandledrejection",t),!A||A.apply(this,arguments)},e.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const j=Object.prototype.toString;function R(t){switch(j.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Y(t,Error)}}function M(t,e){return j.call(t)==="[object ".concat(e,"]")}function L(t){return M(t,"ErrorEvent")}function U(t){return M(t,"DOMError")}function F(t){return M(t,"DOMException")}function B(t){return M(t,"String")}function W(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function z(t){return null===t||W(t)||"object"!=typeof t&&"function"!=typeof t}function J(t){return M(t,"Object")}function H(t){return"undefined"!=typeof Event&&Y(t,Event)}function $(t){return Boolean((null==t?void 0:t.then)&&"function"==typeof t.then)}function Y(t,e){try{return t instanceof e}catch(n){return!1}}function q(t){return!("object"!=typeof t||null===t||!(t.__isVue||t._isVue||t.__v_isVNode))}function G(t){return"undefined"!=typeof Request&&Y(t,Request)}const V=e;function K(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&o++<r&&(u=Z(n,l),!("html"===u||o>1&&i+s.length*c+u.length>=p));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(a)}catch(n){return"<unknown>"}}function Z(t,e){const n=t,r=[];if(!(null==n?void 0:n.tagName))return"";if(V.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=(null==e?void 0:e.length)?e.filter(t=>n.getAttribute(t)).map(t=>[t,n.getAttribute(t)]):null;if(null==s?void 0:s.length)s.forEach(t=>{r.push("[".concat(t[0],'="').concat(t[1],'"]'))});else{n.id&&r.push("#".concat(n.id));const t=n.className;if(t&&B(t)){const e=t.split(/\s+/);for(const t of e)r.push(".".concat(t))}}const o=["aria-label","type","name","title","alt"];for(const i of o){const t=n.getAttribute(i);t&&r.push("[".concat(i,'="').concat(t,'"]'))}return r.join("")}function Q(){try{return V.document.location.href}catch(t){return""}}function X(t){if(!V.HTMLElement)return null;let e=t;for(let n=0;n<5;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function tt(e,n,r){if(!(n in e))return;const s=e[n];if("function"!=typeof s)return;const o=r(s);"function"==typeof o&&nt(o,s);try{e[n]=o}catch(i){t&&d.log('Failed to replace method "'.concat(n,'" in object'),e)}}function et(e,n,r){try{Object.defineProperty(e,n,{value:r,writable:!0,configurable:!0})}catch(s){t&&d.log('Failed to add non-enumerable property "'.concat(n,'" to object'),e)}}function nt(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,et(t,"__sentry_original__",e)}catch(n){}}function rt(t){return t.__sentry_original__}function st(t){if(R(t))return{message:t.message,name:t.name,stack:t.stack,...it(t)};if(H(t)){const e={type:t.type,target:ot(t.target),currentTarget:ot(t.currentTarget),...it(t)};return"undefined"!=typeof CustomEvent&&Y(t,CustomEvent)&&(e.detail=t.detail),e}return t}function ot(t){try{return e=t,"undefined"!=typeof Element&&Y(e,Element)?K(t):Object.prototype.toString.call(t)}catch(n){return"<unknown>"}var e}function it(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function at(t){const e=Object.keys(st(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}let ct,ut;function lt(t){if(void 0!==ct)return ct?ct(t):t();const n=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),r=e;return n in r&&"function"==typeof r[n]?(ct=r[n],ct(t)):(ct=null,t())}function pt(){return lt(()=>Math.random())}function dt(){return lt(()=>Date.now())}function ft(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:"".concat(t.slice(0,e),"...")}function ht(t,e){if(!Array.isArray(t))return"";const n=[];for(let s=0;s<t.length;s++){const e=t[s];try{q(e)?n.push(E(e)):n.push(String(e))}catch(r){n.push("[value cannot be serialized]")}}return n.join(e)}function mt(t,e,n=!1){return!!B(t)&&(M(e,"RegExp")?e.test(t):!!B(e)&&(n?t===e:t.includes(e)))}function gt(t,e=[],n=!1){return e.some(e=>mt(t,e,n))}function _t(t=function(){const t=e;return t.crypto||t.msCrypto}()){try{if(null==t?void 0:t.randomUUID)return lt(()=>t.randomUUID()).replace(/-/g,"")}catch(n){}return ut||(ut="10000000100040008000100000000000"),ut.replace(/[018]/g,t=>(t^(16*pt()&15)>>t/4).toString(16))}function vt(t){var e,n;return null==(n=null==(e=t.exception)?void 0:e.values)?void 0:n[0]}function yt(t){const{message:e,event_id:n}=t;if(e)return e;const r=vt(t);return r?r.type&&r.value?"".concat(r.type,": ").concat(r.value):r.type||r.value||n||"<unknown>":n||"<unknown>"}function bt(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=e||""),o.type||(o.type="Error")}function St(t,e){const n=vt(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const t={...null==r?void 0:r.data,...e.data};n.mechanism.data=t}}function Et(t){if(function(t){try{return t.__sentry_captured__}catch(e){}}(t))return!0;try{et(t,"__sentry_captured__",!0)}catch(e){}return!1}function xt(){return dt()/1e3}let wt;function kt(){return(null!=wt?wt:wt=function(){const{performance:t}=e;if(!(null==t?void 0:t.now)||!t.timeOrigin)return xt;const n=t.timeOrigin;return()=>(n+lt(()=>t.now()))/1e3}())()}let It=null;function Tt(){return null===It&&(It=function(){var t;const{performance:n}=e;if(!(null==n?void 0:n.now))return;const r=3e5,s=lt(()=>n.now()),o=dt(),i=n.timeOrigin;if("number"==typeof i&&Math.abs(i+s-o)<r)return i;const a=null==(t=n.timing)?void 0:t.navigationStart;if("number"==typeof a&&Math.abs(a+s-o)<r)return a;return o-s}()),It}function Ct(t){const e=kt(),n={sid:_t(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return{sid:"".concat(t.sid),init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?"".concat(t.did):void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}(n)};return t&&Ot(n,t),n}function Ot(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||kt(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:_t()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did="".concat(e.did)),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Dt(t,e,n=2){if(!e||"object"!=typeof e||n<=0)return e;if(t&&0===Object.keys(e).length)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Dt(r[s],e[s],n-1));return r}function At(){return _t()}function Pt(){return _t().substring(16)}const Nt="_sentrySpan";function jt(t,e){e?et(t,Nt,e):delete t[Nt]}function Rt(t){return t[Nt]}class Mt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:At(),sampleRand:pt()}}clone(){const t=new Mt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,t._conversationId=this._conversationId,jt(t,Rt(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Ot(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(t){return this._conversationId=t||void 0,this._notifyScopeListeners(),this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this.setTags({[t]:e})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,e){return this.setAttributes({[t]:e})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e="function"==typeof t?t(this):t,n=e instanceof Mt?e.getScopeData():J(e)?t:void 0,{tags:r,attributes:s,extra:o,user:i,contexts:a,level:c,fingerprint:u=[],propagationContext:l,conversationId:p}=n||{};return this._tags={...this._tags,...r},this._attributes={...this._attributes,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),p&&(this._conversationId=p),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,jt(this,void 0),this._attachments=[],this.setPropagationContext({traceId:At(),sampleRand:pt()}),this._notifyScopeListeners(),this}addBreadcrumb(t,e){var n;const r="number"==typeof e?e:100;if(r<=0)return this;const s={timestamp:xt(),...t,message:t.message?ft(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),null==(n=this._client)||n.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Rt(this),conversationId:this._conversationId}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Dt(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(null==n?void 0:n.event_id)||_t();if(!this._client)return t&&d.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){var s;const o=(null==r?void 0:r.event_id)||_t();if(!this._client)return t&&d.warn("No client configured on scope - will not capture message!"),o;const i=null!=(s=null==r?void 0:r.syntheticException)?s:new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:o},this),o}captureEvent(e,n){const r=(null==n?void 0:n.event_id)||_t();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(t&&d.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}class Lt{constructor(t,e){let n,r;n=t||new Mt,r=e||new Mt,this._stack=[{scope:n}],this._isolationScope=r}withScope(t){const e=this._pushScope();let n;try{n=t(e)}catch(r){throw this._popScope(),r}return $(n)?n.then(t=>(this._popScope(),t),t=>{throw this._popScope(),t}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Ut(){const t=s(r());return t.stack=t.stack||new Lt(o("defaultCurrentScope",()=>new Mt),o("defaultIsolationScope",()=>new Mt))}function Ft(t){return Ut().withScope(t)}function Bt(t,e){const n=Ut();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Wt(t){return Ut().withScope(()=>t(Ut().getIsolationScope()))}function zt(t){const e=s(t);return e.acs?e.acs:{withIsolationScope:Wt,withScope:Ft,withSetScope:Bt,withSetIsolationScope:(t,e)=>Wt(e),getCurrentScope:()=>Ut().getScope(),getIsolationScope:()=>Ut().getIsolationScope()}}function Jt(){return zt(r()).getCurrentScope()}function Ht(){return zt(r()).getIsolationScope()}function $t(...t){const e=zt(r());if(2===t.length){const[n,r]=t;return n?e.withSetScope(n,r):e.withScope(r)}return e.withScope(t[0])}function Yt(){return Jt().getClient()}function qt(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,o={trace_id:n,span_id:s||Pt()};return r&&(o.parent_span_id=r),o}const Gt="sentry.source",Vt="sentry.sample_rate",Kt="sentry.previous_trace_sample_rate",Zt="sentry.op",Qt="sentry.origin",Xt="sentry.idle_span_finish_reason",te="sentry.measurement_unit",ee="sentry.measurement_value",ne="sentry.custom_span_name",re="sentry.profile_id",se="sentry.exclusive_time",oe="sentry.link.type",ie=2;function ae(t,e){t.setAttribute("http.response.status_code",e);const n=function(t){if(t<400&&t>=100)return{code:1};if(t>=400&&t<500)switch(t){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"internal_error"}}(e);"unknown_error"!==n.message&&t.setStatus(n)}const ce="_sentryScope",ue="_sentryIsolationScope";function le(t){if(t){if("object"==typeof t&&"deref"in t&&"function"==typeof t.deref)try{return t.deref()}catch(e){return}return t}}function pe(t,n,r){t&&(et(t,ue,function(t){try{const n=e.WeakRef;if("function"==typeof n)return new n(t)}catch(n){}return t}(r)),et(t,ce,n))}function de(t){const e=t;return{scope:e[ce],isolationScope:le(e[ue])}}const fe="sentry-",he=/^sentry-/;function me(t){const e=function(t){if(!t||!B(t)&&!Array.isArray(t))return;if(Array.isArray(t))return t.reduce((t,e)=>{const n=_e(e);return Object.entries(n).forEach(([e,n])=>{t[e]=n}),t},{});return _e(t)}(t);if(!e)return;const n=Object.entries(e).reduce((t,[e,n])=>{if(e.match(he)){t[e.slice(7)]=n}return t},{});return Object.keys(n).length>0?n:void 0}function ge(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce((e,[n,r],s)=>{const o="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r)),i=0===s?o:"".concat(e,",").concat(o);return i.length>8192?(t&&d.warn("Not adding key: ".concat(n," with val: ").concat(r," to baggage header due to exceeding baggage size limits.")),e):i},"")}(Object.entries(e).reduce((t,[e,n])=>(n&&(t["".concat(fe).concat(e)]=n),t),{}))}function _e(t){return t.split(",").map(t=>{const e=t.indexOf("=");if(-1===e)return[];return[t.slice(0,e),t.slice(e+1)].map(t=>{try{return decodeURIComponent(t.trim())}catch(e){return}})}).reduce((t,[e,n])=>(e&&n&&(t[e]=n),t),{})}const ve=/^o(\d+)\./,ye=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function be(t,e=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=t;return"".concat(a,"://").concat(c).concat(e&&s?":".concat(s):"")+"@".concat(n).concat(o?":".concat(o):"","/").concat(r?"".concat(r,"/"):r).concat(i)}function Se(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Ee(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=function(t){const e=t.match(ve);return null==e?void 0:e[1]}(n)),r}function xe(e){const n="string"==typeof e?function(t){const e=ye.exec(t);if(!e)return void c(()=>{});const[n,r,s="",o="",i="",a=""]=e.slice(1);let u="",l=a;const p=l.split("/");if(p.length>1&&(u=p.slice(0,-1).join("/"),l=p.pop()),l){const t=l.match(/^\d+/);t&&(l=t[0])}return Se({host:o,pass:s,path:u,projectId:l,port:i,protocol:n,publicKey:r})}(e):Se(e);if(n&&function(e){if(!t)return!0;const{port:n,projectId:r,protocol:s}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(d.error("Invalid Sentry Dsn: ".concat(t," missing")),!0))||(r.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(s)?n&&isNaN(parseInt(n,10))&&(d.error("Invalid Sentry Dsn: Invalid port ".concat(n)),1):(d.error("Invalid Sentry Dsn: Invalid protocol ".concat(s)),1):(d.error("Invalid Sentry Dsn: Invalid projectId ".concat(r)),1)))}(n))return n}function we(t){if("boolean"==typeof t)return Number(t);const e="string"==typeof t?parseFloat(t):t;return"number"!=typeof e||isNaN(e)||e<0||e>1?void 0:e}const ke=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Ie(t,e){const n=function(t){if(!t)return;const e=t.match(ke);if(!e)return;let n;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}(t),r=me(e);if(!(null==n?void 0:n.traceId))return{traceId:At(),sampleRand:pt()};const s=function(t,e){const n=we(null==e?void 0:e.sample_rand);if(void 0!==n)return n;const r=we(null==e?void 0:e.sample_rate);return r&&void 0!==(null==t?void 0:t.parentSampled)?t.parentSampled?pt()*r:r+pt()*(1-r):pt()}(n,r);r&&(r.sample_rand=s.toString());const{traceId:o,parentSpanId:i,parentSampled:a}=n;return{traceId:o,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:s}}function Te(t=At(),e=Pt(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),"".concat(t,"-").concat(e).concat(r)}function Ce(t=At(),e=Pt(),n){return"00-".concat(t,"-").concat(e,"-").concat(n?"01":"00")}let Oe=!1;function De(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:o,status:i,origin:a,links:c}=Re(t);return{parent_span_id:o,span_id:e,trace_id:n,data:r,op:s,status:i,origin:a,links:c}}function Ae(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:Re(t).parent_span_id,o=de(t).scope;return{parent_span_id:s,span_id:r?(null==o?void 0:o.getPropagationContext().propagationSpanId)||Pt():e,trace_id:n}}function Pe(t){return t&&t.length>0?t.map(({context:{spanId:t,traceId:e,traceFlags:n,...r},attributes:s})=>({span_id:t,trace_id:e,sampled:1===n,attributes:s,...r})):void 0}function Ne(t){return"number"==typeof t?je(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?je(t.getTime()):kt()}function je(t){return t>9999999999?t/1e3:t}function Re(t){var e;if(function(t){return"function"==typeof t.getSpanJSON}(t))return t.getSpanJSON();const{spanId:n,traceId:r}=t.spanContext();if(function(t){const e=t;return!!(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status)}(t)){const{attributes:s,startTime:o,name:i,endTime:a,status:c,links:u}=t;return{span_id:n,trace_id:r,data:s,description:i,parent_span_id:"parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?null==(e=t.parentSpanContext)?void 0:e.spanId:void 0,start_timestamp:Ne(o),timestamp:Ne(a)||void 0,status:Le(c),op:s[Zt],origin:s[Qt],links:Pe(u)}}return{span_id:n,trace_id:r,start_timestamp:0,data:{}}}function Me(t){const{traceFlags:e}=t.spanContext();return 1===e}function Le(t){if(t&&0!==t.code)return 1===t.code?"ok":t.message||"internal_error"}const Ue="_sentryChildSpans",Fe="_sentryRootSpan";function Be(t,e){const n=t[Fe]||t;et(e,Fe,n),t[Ue]?t[Ue].add(e):et(t,Ue,new Set([e]))}function We(t){const e=new Set;return function t(n){if(!e.has(n)&&Me(n)){e.add(n);const r=n[Ue]?Array.from(n[Ue]):[];for(const e of r)t(e)}}(t),Array.from(e)}function ze(t){return t[Fe]||t}function Je(){const t=zt(r());return t.getActiveSpan?t.getActiveSpan():Rt(Jt())}function He(){Oe||(c(()=>{}),Oe=!0)}let $e=!1;function Ye(){function e(){const e=Je(),n=e&&ze(e);if(n){const e="internal_error";t&&d.log("[Tracing] Root span: ".concat(e," -> Global error occurred")),n.setStatus({code:2,message:e})}}$e||(e.tag="sentry_tracingErrorCallback",$e=!0,O(e),P(e))}function qe(t){var e;if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const n=t||(null==(e=Yt())?void 0:e.getOptions());return!(!n||null==n.tracesSampleRate&&!n.tracesSampler)}function Ge(t){d.log("Ignoring span ".concat(t.op," - ").concat(t.description," because it matches `ignoreSpans`."))}function Ve(e,n){if(!(null==n?void 0:n.length)||!e.description)return!1;for(const r of n){if(Ze(r)){if(mt(e.description,r))return t&&Ge(e),!0;continue}if(!r.name&&!r.op)continue;const n=!r.name||mt(e.description,r.name),s=!r.op||e.op&&mt(e.op,r.op);if(n&&s)return t&&Ge(e),!0}return!1}function Ke(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const s of t)s.parent_span_id===r&&(s.parent_span_id=n)}function Ze(t){return"string"==typeof t||t instanceof RegExp}const Qe="production",Xe="_frozenDsc";function tn(t,e){et(t,Xe,e)}function en(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||Qe,release:n.release,public_key:r,trace_id:t,org_id:Ee(e)};return e.emit("createDsc",s),s}function nn(t,e){const n=e.getPropagationContext();return n.dsc||en(n.traceId,t)}function rn(t){var e,n,r,s;const o=Yt();if(!o)return{};const i=ze(t),a=Re(i),c=a.data,u=i.spanContext().traceState,l=null!=(n=null!=(e=null==u?void 0:u.get("sentry.sample_rate"))?e:c[Vt])?n:c[Kt];function p(t){return"number"!=typeof l&&"string"!=typeof l||(t.sample_rate="".concat(l)),t}const d=i[Xe];if(d)return p(d);const f=null==u?void 0:u.get("sentry.dsc"),h=f&&me(f);if(h)return p(h);const m=en(t.spanContext().traceId,o),g=c[Gt],_=a.description;return"url"!==g&&_&&(m.transaction=_),qe()&&(m.sampled=String(Me(i)),m.sample_rand=null!=(s=null==u?void 0:u.get("sentry.sample_rand"))?s:null==(r=de(i).scope)?void 0:r.getPropagationContext().sampleRand.toString()),p(m),o.emit("createDsc",m,i),m}class sn{constructor(t={}){this._traceId=t.traceId||At(),this._spanId=t.spanId||Pt()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(t){}setAttribute(t,e){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,e,n){return this}addLink(t){return this}addLinks(t){return this}recordException(t,e){}}function on(t,e=100,n=1/0){try{return cn("",t,e,n)}catch(r){return{ERROR:"**non-serializable** (".concat(r,")")}}}function an(t,e=3,n=102400){const r=on(t,e);return s=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(s))>n?an(t,e-1,n):r;var s}function cn(t,e,n=1/0,r=1/0,s=function(){const t=new WeakSet;function e(e){return!!t.has(e)||(t.add(e),!1)}function n(e){t.delete(e)}return[e,n]}()){const[o,i]=s;if(null==e||["boolean","string"].includes(typeof e)||"number"==typeof e&&Number.isFinite(e))return e;const a=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if("undefined"!=typeof global&&e===global)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if(q(e))return E(e);if(J(n=e)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof e&&!Number.isFinite(e))return"[".concat(e,"]");if("function"==typeof e)return"[Function: ".concat(b(e),"]");if("symbol"==typeof e)return"[".concat(String(e),"]");if("bigint"==typeof e)return"[BigInt: ".concat(String(e),"]");const r=function(t){const e=Object.getPrototypeOf(t);return(null==e?void 0:e.constructor)?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(r)?"[HTMLElement: ".concat(r,"]"):"[object ".concat(r,"]")}catch(r){return"**non-serializable** (".concat(r,")")}var n}(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(o(e))return"[Circular ~]";const u=e;if(u&&"function"==typeof u.toJSON)try{return cn("",u.toJSON(),c-1,r,s)}catch(f){}const l=Array.isArray(e)?[]:{};let p=0;const d=st(e);for(const h in d){if(!Object.prototype.hasOwnProperty.call(d,h))continue;if(p>=r){l[h]="[MaxProperties ~]";break}const t=d[h];l[h]=cn(h,t,c-1,r,s),p++}return i(e),l}function un(t,e=[]){return[t,e]}function ln(t,e){const[n,r]=t;return[n,[...r,e]]}function pn(t,e){const n=t[1];for(const r of n){if(e(r,r[0].type))return!0}return!1}function dn(t){const n=s(e);return n.encodePolyfill?n.encodePolyfill(t):(new TextEncoder).encode(t)}function fn(t){const[e,n]=t;let r=JSON.stringify(e);function s(t){"string"==typeof r?r="string"==typeof t?r+t:[dn(r),t]:r.push("string"==typeof t?dn(t):t)}for(const i of n){const[t,e]=i;if(s("\n".concat(JSON.stringify(t),"\n")),"string"==typeof e||e instanceof Uint8Array)s(e);else{let t;try{t=JSON.stringify(e)}catch(o){t=JSON.stringify(on(e))}s(t)}}return"string"==typeof r?r:function(t){const e=t.reduce((t,e)=>t+e.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}(r)}function hn(t){return[{type:"span"},t]}function mn(t){const e="string"==typeof t.data?dn(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const gn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function _n(t){return gn[t]}function vn(t){if(!(null==t?void 0:t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function yn(t,e,n,r){var s;const o=null==(s=t.sdkProcessingMetadata)?void 0:s.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:be(r)},...o&&{trace:o}}}function bn(e,n,r,s=Je()){const o=s&&ze(s);o&&(t&&d.log("[Measurement] Setting measurement on root span: ".concat(e," = ").concat(n," ").concat(r)),o.addEvent(e,{[ee]:n,[te]:r}))}function Sn(t){if(!t||0===t.length)return;const e={};return t.forEach(t=>{const n=t.attributes||{},r=n[te],s=n[ee];"string"==typeof r&&"number"==typeof s&&(e[t.name]={value:s,unit:r})}),e}class En{constructor(t={}){this._traceId=t.traceId||At(),this._spanId=t.spanId||Pt(),this._startTime=t.startTimestamp||kt(),this._links=t.links,this._attributes={},this.setAttributes({[Qt]:"manual",[Zt]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,e){}spanContext(){const{_spanId:t,_traceId:e,_sampled:n}=this;return{spanId:t,traceId:e,traceFlags:n?1:0}}setAttribute(t,e){return void 0===e?delete this._attributes[t]:this._attributes[t]=e,this}setAttributes(t){return Object.keys(t).forEach(e=>this.setAttribute(e,t[e])),this}updateStartTime(t){this._startTime=Ne(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Gt,"custom"),this}end(e){this._endTime||(this._endTime=Ne(e),function(e){if(!t)return;const{description:n="< unknown name >",op:r="< unknown op >"}=Re(e),{spanId:s}=e.spanContext(),o=ze(e)===e,i='[Tracing] Finishing "'.concat(r,'" ').concat(o?"root ":"",'span "').concat(n,'" with ID ').concat(s);d.log(i)}(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Zt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Le(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Qt],profile_id:this._attributes[re],exclusive_time:this._attributes[se],measurements:Sn(this._events),is_segment:this._isStandaloneSpan&&ze(this)===this||void 0,segment_id:this._isStandaloneSpan?ze(this).spanContext().spanId:void 0,links:Pe(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){t&&d.log("[Tracing] Adding an event to span:",e);const s=xn(n)?n:r||kt(),o=xn(n)?{}:n||{},i={name:e,time:Ne(s),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=Yt();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===ze(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(t){const e=Yt();if(!e)return;const n=t[1];if(!n||0===n.length)return void e.recordDroppedEvent("before_send","span");e.sendEnvelope(t)}(function(t,e){const n=rn(t[0]),r=null==e?void 0:e.getDsn(),s=null==e?void 0:e.getOptions().tunnel,o={sent_at:(new Date).toISOString(),...(i=n,!!i.trace_id&&!!i.public_key&&{trace:n}),...!!s&&r&&{dsn:be(r)}};var i;const{beforeSendSpan:a,ignoreSpans:c}=(null==e?void 0:e.getOptions())||{},u=(null==c?void 0:c.length)?t.filter(t=>!Ve(Re(t),c)):t,l=t.length-u.length;l&&(null==e||e.recordDroppedEvent("before_send","span",l));const p=a?t=>{const e=Re(t);return a(e)||(He(),e)}:Re,d=[];for(const f of u){const t=p(f);t&&d.push(hn(t))}return un(o,d)}([this],e)):(t&&d.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const n=this._convertSpanToTransaction();if(n){(de(this).scope||Jt()).captureEvent(n)}}_convertSpanToTransaction(){var e;if(!wn(Re(this)))return;this._name||(t&&d.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:n,isolationScope:r}=de(this),s=null==(e=null==n?void 0:n.getScopeData().sdkProcessingMetadata)?void 0:e.normalizedRequest;if(!0!==this._sampled)return;const o=We(this).filter(t=>t!==this&&!function(t){return t instanceof En&&t.isStandaloneSpan()}(t)).map(t=>Re(t)).filter(wn),i=this._attributes[Gt];delete this._attributes[ne],o.forEach(t=>{delete t.data[ne]});const a={contexts:{trace:De(this)},spans:o.length>1e3?o.sort((t,e)=>t.start_timestamp-e.start_timestamp).slice(0,1e3):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:n,capturedSpanIsolationScope:r,dynamicSamplingContext:rn(this)},request:s,...i&&{transaction_info:{source:i}}},c=Sn(this._events);return c&&Object.keys(c).length&&(t&&d.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function xn(t){return t&&"number"==typeof t||t instanceof Date||Array.isArray(t)}function wn(t){return!!(t.start_timestamp&&t.timestamp&&t.span_id&&t.trace_id)}function kn(t,e,n=()=>{},r=()=>{}){let s;try{s=t()}catch(o){throw e(o),n(),o}return function(t,e,n,r){if($(t))return t.then(t=>(n(),r(t),t),t=>{throw e(t),n(),t});return n(),r(t),t}(s,e,n,r)}const In="__SENTRY_SUPPRESS_TRACING__";function Tn(t,e){const n=Pn();if(n.startSpan)return n.startSpan(t,e);const r=An(t),{forceTransaction:s,parentSpan:o,scope:i}=t;return $t(null==i?void 0:i.clone(),()=>{const n=void 0!==(i=o)?t=>On(i,t):t=>t();var i;return n(()=>{const n=Jt(),i=jn(n,o),a=t.onlyIfParent&&!i?new sn:Dn({parentSpan:i,spanArguments:r,forceTransaction:s,scope:n});return jt(n,a),kn(()=>e(a),()=>{const{status:t}=Re(a);!a.isRecording()||t&&"ok"!==t||a.setStatus({code:2,message:"internal_error"})},()=>{a.end()})})})}function Cn(t){const e=Pn();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=An(t),{forceTransaction:r,parentSpan:s}=t;return(t.scope?e=>$t(t.scope,e):void 0!==s?t=>On(s,t):t=>t())(()=>{const e=Jt(),o=jn(e,s);return t.onlyIfParent&&!o?new sn:Dn({parentSpan:o,spanArguments:n,forceTransaction:r,scope:e})})}function On(t,e){const n=Pn();return n.withActiveSpan?n.withActiveSpan(t,e):$t(n=>(jt(n,t||void 0),e(n)))}function Dn({parentSpan:e,spanArguments:n,forceTransaction:r,scope:s}){if(!qe()){const t=new sn;if(r||!e){tn(t,{sampled:"false",sample_rate:"0",transaction:n.name,...rn(t)})}return t}const o=Ht();let i;if(e&&!r)i=function(t,e,n){const{spanId:r,traceId:s}=t.spanContext(),o=!e.getScopeData().sdkProcessingMetadata[In]&&Me(t),i=o?new En({...n,parentSpanId:r,traceId:s,sampled:o}):new sn({traceId:s});Be(t,i);const a=Yt();a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i));return i}(e,s,n),Be(e,i);else if(e){const t=rn(e),{traceId:r,spanId:o}=e.spanContext(),a=Me(e);i=Nn({traceId:r,parentSpanId:o,...n},s,a),tn(i,t)}else{const{traceId:t,dsc:e,parentSpanId:r,sampled:a}={...o.getPropagationContext(),...s.getPropagationContext()};i=Nn({traceId:t,parentSpanId:r,...n},s,a),e&&tn(i,e)}return function(e){if(!t)return;const{description:n="< unknown name >",op:r="< unknown op >",parent_span_id:s}=Re(e),{spanId:o}=e.spanContext(),i=Me(e),a=ze(e),c=a===e,u="[Tracing] Starting ".concat(i?"sampled":"unsampled"," ").concat(c?"root ":"","span"),l=["op: ".concat(r),"name: ".concat(n),"ID: ".concat(o)];if(s&&l.push("parent ID: ".concat(s)),!c){const{op:t,description:e}=Re(a);l.push("root ID: ".concat(a.spanContext().spanId)),t&&l.push("root op: ".concat(t)),e&&l.push("root description: ".concat(e))}d.log("".concat(u,"\n  ").concat(l.join("\n  ")))}(i),pe(i,s,o),i}function An(t){const e={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const n={...e};return n.startTimestamp=Ne(t.startTime),delete n.startTime,n}return e}function Pn(){return zt(r())}function Nn(e,n,r){var s,o;const i=Yt(),a=(null==i?void 0:i.getOptions())||{},{name:c=""}=e,u={spanAttributes:{...e.attributes},spanName:c,parentSampled:r};null==i||i.emit("beforeSampling",u,{decision:!1});const l=null!=(s=u.parentSampled)?s:r,p=u.spanAttributes,f=n.getPropagationContext(),[h,m,g]=n.getScopeData().sdkProcessingMetadata[In]?[!1]:function(e,n,r){if(!qe(e))return[!1];let s,o;"function"==typeof e.tracesSampler?(o=e.tracesSampler({...n,inheritOrSampleWith:t=>"number"==typeof n.parentSampleRate?n.parentSampleRate:"boolean"==typeof n.parentSampled?Number(n.parentSampled):t}),s=!0):void 0!==n.parentSampled?o=n.parentSampled:void 0!==e.tracesSampleRate&&(o=e.tracesSampleRate,s=!0);const i=we(o);if(void 0===i)return t&&d.warn("[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(o)," of type ").concat(JSON.stringify(typeof o),".")),[!1];if(!i)return t&&d.log("[Tracing] Discarding transaction because ".concat("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,i,s];const a=r<i;return a||t&&d.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(o),")")),[a,i,s]}(a,{name:c,parentSampled:l,attributes:p,parentSampleRate:we(null==(o=f.dsc)?void 0:o.sample_rate)},f.sampleRand),_=new En({...e,attributes:{[Gt]:"custom",[Vt]:void 0!==m&&g?m:void 0,...p},sampled:h});return!h&&i&&(t&&d.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),i.recordDroppedEvent("sample_rate","transaction")),i&&i.emit("spanStart",_),_}function jn(t,e){if(e)return e;if(null===e)return;const n=Rt(t);if(!n)return;const r=Yt();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?ze(n):n}const Rn={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function Mn(e,n={}){const r=new Map;let s,o=!1,i="externalFinish",a=!n.disableAutoFinish;const c=[],{idleTimeout:u=Rn.idleTimeout,finalTimeout:l=Rn.finalTimeout,childSpanTimeout:p=Rn.childSpanTimeout,beforeSpanEnd:f,trimIdleSpanEndTimestamp:h=!0}=n,m=Yt();if(!m||!qe()){const t=new sn;return tn(t,{sample_rate:"0",sampled:"false",...rn(t)}),t}const g=Jt(),_=Je(),v=function(e){const n=Cn(e);return jt(Jt(),n),t&&d.log("[Tracing] Started span is an idle span"),n}(e);function y(){s&&(clearTimeout(s),s=void 0)}function b(t){y(),s=setTimeout(()=>{!o&&0===r.size&&a&&(i="idleTimeout",v.end(t))},u)}function S(t){s=setTimeout(()=>{!o&&a&&(i="heartbeatFailed",v.end(t))},p)}function E(e){o=!0,r.clear(),c.forEach(t=>t()),jt(g,_);const n=Re(v),{start_timestamp:s}=n;if(!s)return;n.data[Xt]||v.setAttribute(Xt,i);const a=n.status;a&&"unknown"!==a||v.setStatus({code:1}),d.log('[Tracing] Idle span "'.concat(n.op,'" finished'));const p=We(v).filter(t=>t!==v);let f=0;p.forEach(n=>{n.isRecording()&&(n.setStatus({code:2,message:"cancelled"}),n.end(e),t&&d.log("[Tracing] Cancelling span since span ended early",JSON.stringify(n,void 0,2)));const r=Re(n),{timestamp:s=0,start_timestamp:o=0}=r,i=o<=e,a=s-o<=(l+u)/1e3;if(t){const t=JSON.stringify(n,void 0,2);i?a||d.log("[Tracing] Discarding span since it finished after idle span final timeout",t):d.log("[Tracing] Discarding span since it happened after idle span was finished",t)}a&&i||(!function(t,e){t[Ue]&&t[Ue].delete(e)}(v,n),f++)}),f>0&&v.setAttribute("sentry.idle_span_discarded_spans",f)}return v.end=new Proxy(v.end,{apply(t,e,n){if(f&&f(v),e instanceof sn)return;const[r,...s]=n,o=Ne(r||kt()),i=We(v).filter(t=>t!==v),a=Re(v);if(!i.length||!h)return E(o),Reflect.apply(t,e,[o,...s]);const c=m.getOptions().ignoreSpans,u=null==i?void 0:i.reduce((t,e)=>{const n=Re(e);return n.timestamp?c&&Ve(n,c)?t:t?Math.max(t,n.timestamp):n.timestamp:t},void 0),p=a.start_timestamp,d=Math.min(p?p+l/1e3:1/0,Math.max(p||-1/0,Math.min(o,u||1/0)));return E(d),Reflect.apply(t,e,[d,...s])}}),c.push(m.on("spanStart",t=>{if(o||t===v||Re(t).timestamp||t instanceof En&&t.isStandaloneSpan())return;var e;We(v).includes(t)&&(e=t.spanContext().spanId,y(),r.set(e,!0),S(kt()+p/1e3))})),c.push(m.on("spanEnd",t=>{var e;o||(e=t.spanContext().spanId,r.has(e)&&r.delete(e),0===r.size&&b(kt()+u/1e3))})),c.push(m.on("idleSpanEnableAutoFinish",t=>{t===v&&(a=!0,b(),r.size&&S())})),n.disableAutoFinish||b(),setTimeout(()=>{o||(v.setStatus({code:2,message:"deadline_exceeded"}),i="finalTimeout",v.end())},l),v}function Ln(t){return new Fn(e=>{e(t)})}function Un(t){return new Fn((e,n)=>{n(t)})}class Fn{constructor(t){this._state=0,this._handlers=[],this._runExecutor(t)}then(t,e){return new Fn((n,r)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(s){r(s)}else n(e)},t=>{if(e)try{n(e(t))}catch(s){r(s)}else r(t)}]),this._executeHandlers()})}catch(t){return this.then(t=>t,t)}finally(t){return new Fn((e,n)=>{let r,s;return this.then(e=>{s=!1,r=e,t&&t()},e=>{s=!0,r=e,t&&t()}).then(()=>{s?n(r):e(r)})})}_executeHandlers(){if(0===this._state)return;const t=this._handlers.slice();this._handlers=[],t.forEach(t=>{t[0]||(1===this._state&&t[1](this._value),2===this._state&&t[2](this._value),t[0]=!0)})}_runExecutor(t){const e=(t,e)=>{0===this._state&&($(e)?e.then(n,r):(this._state=t,this._value=e,this._executeHandlers()))},n=t=>{e(1,t)},r=t=>{e(2,t)};try{t(n,r)}catch(s){r(s)}}}function Bn(t,e,n,r=0){try{const s=Wn(e,n,t,r);return $(s)?s:Ln(s)}catch(s){return Un(s)}}function Wn(e,n,r,s){const o=r[s];if(!e||!o)return e;const i=o({...e},n);return t&&null===i&&d.log('Event processor "'.concat(o.id||"?",'" dropped event')),$(i)?i.then(t=>Wn(t,n,r,s+1)):Wn(i,n,r,s+1)}let zn,Jn,Hn,$n;function Yn(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=e;!function(t,e){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra});Object.keys(r).length&&(t.tags={...r,...t.tags});Object.keys(s).length&&(t.user={...s,...t.user});Object.keys(o).length&&(t.contexts={...o,...t.contexts});i&&(t.level=i);a&&"transaction"!==t.type&&(t.transaction=a)}(t,e),r&&function(t,e){t.contexts={trace:Ae(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:rn(e),...t.sdkProcessingMetadata};const n=ze(e),r=Re(n).description;r&&!t.transaction&&"transaction"===t.type&&(t.transaction=r)}(t,r),function(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e));t.fingerprint.length||delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,s),function(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}(t,o)}function qn(t,e){const{extra:n,tags:r,attributes:s,user:o,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:l,eventProcessors:p,attachments:d,propagationContext:f,transactionName:h,span:m}=e;Gn(t,"extra",n),Gn(t,"tags",r),Gn(t,"attributes",s),Gn(t,"user",o),Gn(t,"contexts",i),t.sdkProcessingMetadata=Dt(t.sdkProcessingMetadata,c,2),a&&(t.level=a),h&&(t.transactionName=h),m&&(t.span=m),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),p.length&&(t.eventProcessors=[...t.eventProcessors,...p]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...f}}function Gn(t,e,n){t[e]=Dt(t[e],n,1)}function Vn(t,e){const n=o("globalScope",()=>new Mt).getScopeData();return t&&qn(n,t.getScopeData()),e&&qn(n,e.getScopeData()),n}function Kn(t,n,r,s,o,i){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=t,u={...n,event_id:n.event_id||r.event_id||_t(),timestamp:n.timestamp||xt()},l=r.integrations||t.integrations.map(t=>t.name);!function(t,e){var n,r;const{environment:s,release:o,dist:i,maxValueLength:a}=e;t.environment=t.environment||s||Qe,!t.release&&o&&(t.release=o);!t.dist&&i&&(t.dist=i);const c=t.request;(null==c?void 0:c.url)&&a&&(c.url=ft(c.url,a));a&&(null==(r=null==(n=t.exception)?void 0:n.values)||r.forEach(t=>{t.value&&(t.value=ft(t.value,a))}))}(u,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(u,l),o&&o.emit("applyFrameMetadata",n),void 0===n.type&&function(t,n){var r,s;const o=function(t){const n=e._sentryDebugIds,r=e._debugIds;if(!n&&!r)return{};const s=n?Object.keys(n):[],o=r?Object.keys(r):[];if($n&&s.length===Jn&&o.length===Hn)return $n;Jn=s.length,Hn=o.length,$n={},zn||(zn={});const i=(e,n)=>{for(const r of e){const e=n[r],s=null==zn?void 0:zn[r];if(s&&$n&&e)$n[s[0]]=e,zn&&(zn[r]=[s[0],e]);else if(e){const n=t(r);for(let t=n.length-1;t>=0;t--){const s=n[t],o=null==s?void 0:s.filename;if(o&&$n&&zn){$n[o]=e,zn[r]=[o,e];break}}}}};return n&&i(s,n),r&&i(o,r),$n}(n);null==(s=null==(r=t.exception)?void 0:r.values)||s.forEach(t=>{var e,n;null==(n=null==(e=t.stacktrace)?void 0:e.frames)||n.forEach(t=>{t.filename&&(t.debug_id=o[t.filename])})})}(u,t.stackParser);const p=function(t,e){if(!e)return t;const n=t?t.clone():new Mt;return n.update(e),n}(s,r.captureContext);r.mechanism&&St(u,r.mechanism);const d=o?o.getEventProcessors():[],f=Vn(i,p),h=[...r.attachments||[],...f.attachments];h.length&&(r.attachments=h),Yn(u,f);return Bn([...d,...f.eventProcessors],u,r).then(t=>(t&&function(t){var e,n;const r={};if(null==(n=null==(e=t.exception)?void 0:e.values)||n.forEach(t=>{var e,n;null==(n=null==(e=t.stacktrace)?void 0:e.frames)||n.forEach(t=>{t.debug_id&&(t.abs_path?r[t.abs_path]=t.debug_id:t.filename&&(r[t.filename]=t.debug_id),delete t.debug_id)})}),0===Object.keys(r).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const s=t.debug_meta.images;Object.entries(r).forEach(([t,e])=>{s.push({type:"sourcemap",code_file:t,debug_id:e})})}(t),"number"==typeof a&&a>0?function(t,e,n){var r,s;if(!t)return null;const o={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(t=>({...t,...t.data&&{data:on(t.data,e,n)}}))},...t.user&&{user:on(t.user,e,n)},...t.contexts&&{contexts:on(t.contexts,e,n)},...t.extra&&{extra:on(t.extra,e,n)}};(null==(r=t.contexts)?void 0:r.trace)&&o.contexts&&(o.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(o.contexts.trace.data=on(t.contexts.trace.data,e,n)));t.spans&&(o.spans=t.spans.map(t=>({...t,...t.data&&{data:on(t.data,e,n)}})));(null==(s=t.contexts)?void 0:s.flags)&&o.contexts&&(o.contexts.flags=on(t.contexts.flags,3,n));return o}(t,a,c):t))}function Zn(t){if(t)return function(t){return t instanceof Mt||"function"==typeof t}(t)||function(t){return Object.keys(t).some(t=>Qn.includes(t))}(t)?{captureContext:t}:t}const Qn=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Xn(t,e){return Jt().captureException(t,Zn(e))}function tr(t,e){return Jt().captureEvent(t,e)}function er(t,e){Ht().setContext(t,e)}function nr(t){Ht().addEventProcessor(t)}function rr(t){const n=Ht(),r=Jt(),{userAgent:s}=e.navigator||{},o=Ct({user:r.getUser()||n.getUser(),...s&&{userAgent:s},...t}),i=n.getSession();return"ok"===(null==i?void 0:i.status)&&Ot(i,{status:"exited"}),sr(),n.setSession(o),o}function sr(){const t=Ht(),e=Jt().getSession()||t.getSession();e&&function(t){let e={};"ok"===t.status&&(e={status:"exited"}),Ot(t,e)}(e),or(),t.setSession()}function or(){const t=Ht(),e=Yt(),n=t.getSession();n&&e&&e.captureSession(n)}function ir(t=!1){t?sr():or()}function ar(t,e,n){return e||"".concat(function(t){return"".concat(function(t){const e=t.protocol?"".concat(t.protocol,":"):"",n=t.port?":".concat(t.port):"";return"".concat(e,"//").concat(t.host).concat(n).concat(t.path?"/".concat(t.path):"","/api/")}(t)).concat(t.projectId,"/envelope/")}(t),"?").concat(function(t,e){const n={sentry_version:"7"};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client="".concat(e.name,"/").concat(e.version)),new URLSearchParams(n).toString()}(t,n))}const cr=[];function ur(t){const e=t.defaultIntegrations||[],n=t.integrations;let r;if(e.forEach(t=>{t.isDefaultInstance=!0}),Array.isArray(n))r=[...e,...n];else if("function"==typeof n){const t=n(e);r=Array.isArray(t)?t:[t]}else r=e;return function(t){const e={};return t.forEach(t=>{const{name:n}=t,r=e[n];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)}),Object.values(e)}(r)}function lr(t,e){for(const n of e)(null==n?void 0:n.afterAllSetup)&&n.afterAllSetup(t)}function pr(e,n,r){if(r[n.name])t&&d.log("Integration skipped because it was already installed: ".concat(n.name));else{if(r[n.name]=n,cr.includes(n.name)||"function"!=typeof n.setupOnce||(n.setupOnce(),cr.push(n.name)),n.setup&&"function"==typeof n.setup&&n.setup(e),"function"==typeof n.preprocessEvent){const t=n.preprocessEvent.bind(n);e.on("preprocessEvent",(n,r)=>t(n,r,e))}if("function"==typeof n.processEvent){const t=n.processEvent.bind(n),r=Object.assign((n,r)=>t(n,r,e),{id:n.name});e.addEventProcessor(r)}t&&d.log("Integration installed: ".concat(n.name))}}function dr(t){return t}function fr(t,e){var n;const r=null!=(n=null!=e?e:function(t){return hr().get(t)}(t))?n:[];if(0===r.length)return;const s=t.getOptions(),o=function(t,e,n,r){const s={};return(null==e?void 0:e.sdk)&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=be(r)),un(s,[(o=t,[{type:"log",item_count:o.length,content_type:"application/vnd.sentry.items.log+json"},{items:o}])]);var o}(r,s._metadata,s.tunnel,t.getDsn());hr().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(o)}function hr(){return o("clientToLogBufferMap",()=>new WeakMap)}function mr(t,e){var n;const r=null!=(n=null!=e?e:function(t){return gr().get(t)}(t))?n:[];if(0===r.length)return;const s=t.getOptions(),o=function(t,e,n,r){const s={};return(null==e?void 0:e.sdk)&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=be(r)),un(s,[(o=t,[{type:"trace_metric",item_count:o.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:o}])]);var o}(r,s._metadata,s.tunnel,t.getDsn());gr().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(o)}function gr(){return o("clientToMetricBufferMap",()=>new WeakMap)}const _r=Symbol.for("SentryBufferFullError");function vr(t=100){const e=new Set;function n(t){e.delete(t)}return{get $(){return Array.from(e)},add:function(r){if(!(e.size<t))return Un(_r);const s=r();return e.add(s),s.then(()=>n(s),()=>n(s)),s},drain:function(t){if(!e.size)return Ln(!0);const n=Promise.allSettled(Array.from(e)).then(()=>!0);if(!t)return n;const r=[n,new Promise(e=>setTimeout(()=>e(!1),t))];return Promise.race(r)}}}function yr(t,e,n=dt()){return function(t,e){return t[e]||t.all||0}(t,e)>n}function br(t,{statusCode:e,headers:n},r=dt()){const s={...t},o=null==n?void 0:n["x-sentry-rate-limits"],i=null==n?void 0:n["retry-after"];if(o)for(const a of o.trim().split(",")){const[t,e,,,n]=a.split(":",5),o=parseInt(t,10),i=1e3*(isNaN(o)?60:o);if(e)for(const a of e.split(";"))"metric_bucket"===a&&n&&!n.split(";").includes("custom")||(s[a]=r+i);else s.all=r+i}else i?s.all=r+function(t,e=dt()){const n=parseInt("".concat(t),10);if(!isNaN(n))return 1e3*n;const r=Date.parse("".concat(t));return isNaN(r)?6e4:r-e}(i,r):429===e&&(s.all=r+6e4);return s}function Sr(e,n,r=vr(e.bufferSize||64)){let s={};return{send:function(o){const i=[];if(pn(o,(t,n)=>{const r=_n(n);yr(s,r)?e.recordDroppedEvent("ratelimit_backoff",r):i.push(t)}),0===i.length)return Promise.resolve({});const a=un(o[0],i),c=n=>{!function(t,e){return pn(t,(t,n)=>e.includes(n))}(a,["client_report"])?pn(a,(t,r)=>{e.recordDroppedEvent(n,_n(r))}):t&&d.warn("Dropping client report. Will not send outcomes (reason: ".concat(n,")."))};return r.add(()=>n({body:fn(a)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&t&&d.warn("Sentry responded with status code ".concat(e.statusCode," to sent event.")),s=br(s,e),e),e=>{throw c("network_error"),t&&d.error("Encountered error running transport request:",e),e})).then(t=>t,e=>{if(e===_r)return t&&d.error("Skipped sending event because buffer is full."),c("queue_overflow"),Promise.resolve({});throw e})},flush:t=>r.drain(t)}}function Er(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];(null==n?void 0:n.value)&&(e.push(n.value),n.type&&e.push("".concat(n.type,": ").concat(n.value)))}catch(n){}return e}const xr="Not capturing exception because it's already been captured.",wr="Discarded session because of missing or non-string release",kr=Symbol.for("SentryInternalError"),Ir=Symbol.for("SentryDoNotSendEventError");function Tr(t){return{message:t,[kr]:!0}}function Cr(t){return{message:t,[Ir]:!0}}function Or(t){return!!t&&"object"==typeof t&&kr in t}function Dr(t){return!!t&&"object"==typeof t&&Ir in t}function Ar(t,e,n,r,s){let o,i=0,a=!1;t.on(n,()=>{i=0,clearTimeout(o),a=!1}),t.on(e,e=>{i+=r(e),i>=8e5?s(t):a||(a=!0,o=setTimeout(()=>{s(t)},5e3))}),t.on("flush",()=>{s(t)})}class Pr{constructor(e){var n,r,s,o,i,a,c;if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=vr(null!=(r=null==(n=e.transportOptions)?void 0:n.bufferSize)?r:64),e.dsn?this._dsn=xe(e.dsn):t&&d.warn("No DSN provided, client will not send events."),this._dsn){const t=ar(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}this._options.enableLogs=null!=(o=this._options.enableLogs)?o:null==(s=this._options._experiments)?void 0:s.enableLogs,this._options.enableLogs&&Ar(this,"afterCaptureLog","flushLogs",Lr,fr);(null==(c=null!=(a=this._options.enableMetrics)?a:null==(i=this._options._experiments)?void 0:i.enableMetrics)||c)&&Ar(this,"afterCaptureMetric","flushMetrics",Mr,mr)}captureException(e,n,r){const s=_t();if(Et(e))return t&&d.log(xr),s;const o={event_id:s,...n};return this._process(()=>this.eventFromException(e,o).then(t=>this._captureEvent(t,o,r)).then(t=>t),"error"),o.event_id}captureMessage(t,e,n,r){const s={event_id:_t(),...n},o=W(t)?t:String(t),i=z(t),a=i?this.eventFromMessage(o,e,s):this.eventFromException(t,s);return this._process(()=>a.then(t=>this._captureEvent(t,s,r)),i?"unknown":"error"),s.event_id}captureEvent(e,n,r){const s=_t();if((null==n?void 0:n.originalException)&&Et(n.originalException))return t&&d.log(xr),s;const o={event_id:s,...n},i=e.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope,u=Nr(e.type);return this._process(()=>this._captureEvent(e,o,a||r,c),u),o.event_id}captureSession(t){this.sendSession(t),Ot(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const e=this._transport;if(!e)return!0;this.emit("flush");const n=await this._isClientDoneProcessing(t),r=await e.flush(t);return n&&r}async close(t){const e=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),e}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const e=this._integrations[t.name];pr(this,t,this._integrations),e||lr(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=function(t,e,n,r){const s=vn(n),o=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){var n,r,s,o;if(!e)return t;const i=t.sdk||{};t.sdk={...i,name:i.name||e.name,version:i.version||e.version,integrations:[...(null==(n=t.sdk)?void 0:n.integrations)||[],...e.integrations||[]],packages:[...(null==(r=t.sdk)?void 0:r.packages)||[],...e.packages||[]],settings:(null==(s=t.sdk)?void 0:s.settings)||e.settings?{...null==(o=t.sdk)?void 0:o.settings,...e.settings}:void 0}}(t,null==n?void 0:n.sdk);const i=yn(t,s,r,e);return delete t.sdkProcessingMetadata,un(i,[[{type:o},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);for(const r of e.attachments||[])n=ln(n,mn(r));this.sendEnvelope(n).then(e=>this.emit("afterSendEvent",t,e))}sendSession(e){const{release:n,environment:r=Qe}=this._options;if("aggregates"in e){const s=e.attrs||{};if(!s.release&&!n)return void(t&&d.warn(wr));s.release=s.release||n,s.environment=s.environment||r,e.attrs=s}else{if(!e.release&&!n)return void(t&&d.warn(wr));e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const s=function(t,e,n,r){const s=vn(n);return un({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:be(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const s="".concat(e,":").concat(n);t&&d.log('Recording outcome: "'.concat(s,'"').concat(r>1?" (".concat(r," times)"):"")),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,e){const n=this._hooks[t]=this._hooks[t]||new Set,r=(...t)=>e(...t);return n.add(r),()=>{n.delete(r)}}emit(t,...e){const n=this._hooks[t];n&&n.forEach(t=>t(...e))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return t&&d.error("Error while sending envelope:",n),{}}return t&&d.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach(e=>{e&&pr(t,e,n)}),n}(this,t),lr(this,t)}_updateSessionFromEvent(t,e){var n,r;let s="fatal"===e.level,o=!1;const i=null==(n=e.exception)?void 0:n.values;if(i){o=!0,s=!1;for(const t of i)if(!1===(null==(r=t.mechanism)?void 0:r.handled)){s=!0;break}}const a="ok"===t.status;(a&&0===t.errors||a&&s)&&(Ot(t,{...s&&{status:"crashed"},errors:t.errors||Number(o||s)}),this.captureSession(t))}async _isClientDoneProcessing(t){let e=0;for(;!t||e<t;){if(await new Promise(t=>setTimeout(t,1)),!this._numProcessing)return!0;e++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!e.integrations&&(null==o?void 0:o.length)&&(e.integrations=o),this.emit("preprocessEvent",t,e),t.type||r.setLastEventId(t.event_id||e.event_id),Kn(s,t,e,n,this,r).then(t=>{if(null===t)return t;this.emit("postprocessEvent",t,e),t.contexts={trace:qt(n),...t.contexts};const r=nn(this,n);return t.sdkProcessingMetadata={dynamicSamplingContext:r,...t.sdkProcessingMetadata},t})}_captureEvent(e,n={},r=Jt(),s=Ht()){return t&&jr(e)&&d.log("Captured error event `".concat(Er(e)[0]||"<unknown>","`")),this._processEvent(e,n,r,s).then(t=>t.event_id,e=>{t&&(Dr(e)?d.log(e.message):Or(e)?d.warn(e.message):d.warn(e))})}_processEvent(t,e,n,r){const s=this.getOptions(),{sampleRate:o}=s,i=Rr(t),a=jr(t),c=t.type||"error",u="before send for type `".concat(c,"`"),l=void 0===o?void 0:we(o);if(a&&"number"==typeof l&&pt()>l)return this.recordDroppedEvent("sample_rate","error"),Un(Cr("Discarding event because it's not included in the random sample (sampling rate = ".concat(o,")")));const p=Nr(t.type);return this._prepareEvent(t,e,n,r).then(t=>{if(null===t)throw this.recordDroppedEvent("event_processor",p),Cr("An event processor returned `null`, will not send event.");if(e.data&&!0===e.data.__sentry__)return t;const n=function(t,e,n,r){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:i,ignoreSpans:a}=e;let c=n;if(jr(c)&&s)return s(c,r);if(Rr(c)){if(i||a){const e=function(t){var e,n,r;const{trace_id:s,parent_span_id:o,span_id:i,status:a,origin:c,data:u,op:l}=null!=(n=null==(e=t.contexts)?void 0:e.trace)?n:{};return{data:null!=u?u:{},description:t.transaction,op:l,parent_span_id:o,span_id:null!=i?i:"",start_timestamp:null!=(r=t.start_timestamp)?r:0,status:a,timestamp:t.timestamp,trace_id:null!=s?s:"",origin:c,profile_id:null==u?void 0:u[re],exclusive_time:null==u?void 0:u[se],measurements:t.measurements,is_segment:!0}}(c);if((null==a?void 0:a.length)&&Ve(e,a))return null;if(i){const t=i(e);t?c=Dt(n,{type:"transaction",timestamp:(u=t).timestamp,start_timestamp:u.start_timestamp,transaction:u.description,contexts:{trace:{trace_id:u.trace_id,span_id:u.span_id,parent_span_id:u.parent_span_id,op:u.op,status:u.status,origin:u.origin,data:{...u.data,...u.profile_id&&{[re]:u.profile_id},...u.exclusive_time&&{[se]:u.exclusive_time}}}},measurements:u.measurements}):He()}if(c.spans){const e=[],n=c.spans;for(const t of n)if((null==a?void 0:a.length)&&Ve(t,a))Ke(n,t);else if(i){const n=i(t);n?e.push(n):(He(),e.push(t))}else e.push(t);const r=c.spans.length-e.length;r&&t.recordDroppedEvent("before_send","span",r),c.spans=e}}if(o){if(c.spans){const t=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:t}}return o(c,r)}}var u;return c}(this,s,t,e);return function(t,e){const n="".concat(e," must return `null` or a valid event.");if($(t))return t.then(t=>{if(!J(t)&&null!==t)throw Tr(n);return t},t=>{throw Tr("".concat(e," rejected with ").concat(t))});if(!J(t)&&null!==t)throw Tr(n);return t}(n,u)}).then(s=>{var o;if(null===s){if(this.recordDroppedEvent("before_send",p),i){const e=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",e)}throw Cr("".concat(u," returned `null`, will not send event."))}const c=n.getSession()||r.getSession();if(a&&c&&this._updateSessionFromEvent(c,s),i){const t=((null==(o=s.sdkProcessingMetadata)?void 0:o.spanCountBeforeProcessing)||0)-(s.spans?s.spans.length:0);t>0&&this.recordDroppedEvent("before_send","span",t)}const l=s.transaction_info;if(i&&l&&s.transaction!==t.transaction){const t="custom";s.transaction_info={...l,source:t}}return this.sendEvent(s,e),s}).then(null,t=>{if(Dr(t)||Or(t))throw t;throw this.captureException(t,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:t}),Tr("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(t))})}_process(t,e){this._numProcessing++,this._promiseBuffer.add(t).then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t===_r&&this.recordDroppedEvent("queue_overflow",e),t))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([t,e])=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e}})}_flushOutcomes(){t&&d.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(t&&d.log("No outcomes to send"));if(!this._dsn)return void(t&&d.log("No dsn provided, will not send outcomes"));t&&d.log("Sending outcomes:",e);const n=(r=e,un((s=this._options.tunnel&&be(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:xt(),discarded_events:r}]]));var r,s;this.sendEnvelope(n)}}function Nr(t){return"replay_event"===t?"replay":t||"error"}function jr(t){return void 0===t.type}function Rr(t){return"transaction"===t.type}function Mr(t){let e=0;return t.name&&(e+=2*t.name.length),e+=8,e+Ur(t.attributes)}function Lr(t){let e=0;return t.message&&(e+=2*t.message.length),e+Ur(t.attributes)}function Ur(t){if(!t)return 0;let e=0;return Object.values(t).forEach(t=>{Array.isArray(t)?e+=t.length*Fr(t[0]):z(t)?e+=Fr(t):e+=100}),e}function Fr(t){return"string"==typeof t?2*t.length:"number"==typeof t?8:"boolean"==typeof t?4:0}function Br(t){return function(t){return R(t)&&"__sentry_fetch_url_host__"in t&&"string"==typeof t.__sentry_fetch_url_host__}(t)?"".concat(t.message," (").concat(t.__sentry_fetch_url_host__,")"):t.message}function Wr(e,n){!0===n.debug&&(t?d.enable():c(()=>{}));Jt().update(n.initialScope);const r=new e(n);return function(t){Jt().setClient(t)}(r),r.init(),r}function zr(t){return"isRelative"in t}function Jr(t,e){const n=t.indexOf("://")<=0&&0!==t.indexOf("//"),r=n?"thismessage:/":void 0;try{if("canParse"in URL&&!URL.canParse(t,r))return;const e=new URL(t,r);return n?{isRelative:n,pathname:e.pathname,search:e.search,hash:e.hash}:e}catch(s){}}function Hr(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function $r(t){return t.split(/[?#]/,1)[0]}function Yr(t,e=!0){if(t.startsWith("data:")){const n=t.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",s=t.includes(";base64,"),o=t.indexOf(",");let i="";if(e&&-1!==o){const e=t.slice(o+1);i=e.length>10?"".concat(e.slice(0,10),"... [truncated]"):e}return"data:".concat(r).concat(s?",base64":"").concat(i?",".concat(i):"")}return t}function qr(t,e){const n=null==e?void 0:e.getDsn(),r=null==e?void 0:e.getOptions().tunnel;return function(t,e){const n=Jr(t);if(!n||zr(n))return!1;return!!e&&(n.host.includes(e.host)&&/(^|&|\?)sentry_key=/.test(n.search))}(t,n)||function(t,e){if(!e)return!1;return Gr(t)===Gr(e)}(t,r)}function Gr(t){return"/"===t[t.length-1]?t.slice(0,-1):t}function Vr(t){var e;"aggregates"in t?void 0===(null==(e=t.attrs)?void 0:e.ip_address)&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):void 0===t.ipAddress&&(t.ipAddress="{{auto}}")}function Kr(t,e,r=[e],s="npm"){const o=t._metadata||{};o.sdk||(o.sdk={name:"sentry.javascript.".concat(e),packages:r.map(t=>({name:"".concat(s,":@sentry/").concat(t),version:n})),version:n}),t._metadata=o}function Zr(t={}){const e=t.client||Yt();if(!function(){const t=Yt();return!1!==(null==t?void 0:t.getOptions().enabled)&&!!(null==t?void 0:t.getTransport())}()||!e)return{};const n=zt(r());if(n.getTraceData)return n.getTraceData(t);const s=t.scope||Jt(),o=t.span||Je(),i=o?function(t){const{traceId:e,spanId:n}=t.spanContext();return Te(e,n,Me(t))}(o):function(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return Te(e,r,n)}(s),a=ge(o?rn(o):nn(e,s));if(!ke.test(i))return d.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const c={"sentry-trace":i,baggage:a};return t.propagateTraceparent&&(c.traceparent=o?function(t){const{traceId:e,spanId:n}=t.spanContext();return Ce(e,n,Me(t))}(o):function(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return Ce(e,r,n)}(s)),c}function Qr(t,e,n){let r,s,o;const i=(null==n?void 0:n.maxWait)?Math.max(n.maxWait,e):0,a=(null==n?void 0:n.setTimeoutImpl)||setTimeout;function c(){return u(),r=t(),r}function u(){void 0!==s&&clearTimeout(s),void 0!==o&&clearTimeout(o),s=o=void 0}function l(){return s&&clearTimeout(s),s=a(c,e),i&&void 0===o&&(o=a(c,i)),r}return l.cancel=u,l.flush=function(){return void 0!==s||void 0!==o?c():r},l}const Xr=100;function ts(t,e){const n=Yt(),r=Ht();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Xr}=n.getOptions();if(o<=0)return;const i={timestamp:xt(),...t},a=s?c(()=>s(i,e)):i;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,e),r.addBreadcrumb(a,o))}let es;const ns=new WeakMap,rs=()=>({name:"FunctionToString",setupOnce(){es=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=rt(this),n=ns.has(Yt())&&void 0!==e?e:this;return es.apply(n,t)}}catch(t){}},setup(t){ns.set(t,!0)}}),ss=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],os=(e={})=>{let n;return{name:"EventFilters",setup(t){const r=t.getOptions();n=as(e,r)},processEvent(r,s,o){if(!n){const t=o.getOptions();n=as(e,t)}return function(e,n){if(e.type){if("transaction"===e.type&&function(t,e){if(!(null==e?void 0:e.length))return!1;const n=t.transaction;return!!n&&gt(n,e)}(e,n.ignoreTransactions))return t&&d.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(yt(e))),!0}else{if(function(t,e){if(!(null==e?void 0:e.length))return!1;return Er(t).some(t=>gt(t,e))}(e,n.ignoreErrors))return t&&d.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(yt(e))),!0;if(function(t){var e,n;if(!(null==(n=null==(e=t.exception)?void 0:e.values)?void 0:n.length))return!1;return!t.message&&!t.exception.values.some(t=>t.stacktrace||t.type&&"Error"!==t.type||t.value)}(e))return t&&d.warn("Event dropped due to not having an error message, error type or stacktrace.\nEvent: ".concat(yt(e))),!0;if(function(t,e){if(!(null==e?void 0:e.length))return!1;const n=cs(t);return!!n&&gt(n,e)}(e,n.denyUrls))return t&&d.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(yt(e),".\nUrl: ").concat(cs(e))),!0;if(!function(t,e){if(!(null==e?void 0:e.length))return!0;const n=cs(t);return!n||gt(n,e)}(e,n.allowUrls))return t&&d.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(yt(e),".\nUrl: ").concat(cs(e))),!0}return!1}(r,n)?null:r}}},is=(t={})=>({...os(t),name:"InboundFilters"});function as(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:ss],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function cs(e){var n,r,s;try{const t=[...null!=(r=null==(n=e.exception)?void 0:n.values)?r:[]].reverse().find(t=>{var e,n,r;return void 0===(null==(e=t.mechanism)?void 0:e.parent_id)&&(null==(r=null==(n=t.stacktrace)?void 0:n.frames)?void 0:r.length)}),o=null==(s=null==t?void 0:t.stacktrace)?void 0:s.frames;return o?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(o):null}catch(o){return t&&d.error("Cannot extract url for event ".concat(yt(e))),null}}function us(t,e,n,r,s,o){var i;if(!(null==(i=s.exception)?void 0:i.values)||!o||!Y(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=ls(t,e,r,o.originalException,n,s.exception.values,a,0))}function ls(t,e,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(Y(r[s],Error)){ds(i,a,r);const o=t(e,r[s]),u=c.length;fs(o,s,u,a),c=ls(t,e,n,r[s],s,[o,...c],o,u)}return ps(r)&&r.errors.forEach((o,u)=>{if(Y(o,Error)){ds(i,a,r);const l=t(e,o),p=c.length;fs(l,"errors[".concat(u,"]"),p,a),c=ls(t,e,n,o,s,[l,...c],l,p)}}),c}function ps(t){return Array.isArray(t.errors)}function ds(t,e,n){t.mechanism={handled:!0,type:"auto.core.linked_errors",...ps(n)&&{is_exception_group:!0},...t.mechanism,exception_id:e}}function fs(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function hs(t){const e="console";k(e,t),I(e,ms)}function ms(){"console"in e&&i.forEach(function(t){t in e.console&&tt(e.console,t,function(n){return a[t]=n,function(...n){T("console",{args:n,level:t});const r=a[t];null==r||r.apply(e.console,n)}})})}function gs(t){return"warn"===t?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const _s=()=>{let e;return{name:"Dedupe",processEvent(n){if(n.type)return n;try{if(function(t,e){if(!e)return!1;if(function(t,e){const n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!ys(t,e))return!1;if(!vs(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const n=bs(e),r=bs(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!ys(t,e))return!1;if(!vs(t,e))return!1;return!0}(t,e))return!0;return!1}(n,e))return t&&d.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(r){}return e=n}}};function vs(t,e){let n=S(t),r=S(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++){const t=r[s],e=n[s];if(t.filename!==e.filename||t.lineno!==e.lineno||t.colno!==e.colno||t.function!==e.function)return!1}return!0}function ys(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(s){return!1}}function bs(t){var e,n;return null==(n=null==(e=t.exception)?void 0:e.values)?void 0:n[0]}const Ss=()=>({name:"ConversationId",setup(t){t.on("spanStart",t=>{const e=Jt().getScopeData(),n=Ht().getScopeData(),r=e.conversationId||n.conversationId;r&&t.setAttribute("gen_ai.conversation.id",r)})}});function Es(t,e,n,r,s){if(!t.fetchData)return;const{method:o,url:i}=t.fetchData,a=qe()&&e(i);if(t.endTimestamp&&a){const e=t.fetchData.__span;if(!e)return;const n=r[e];return void(n&&(!function(t,e){var n,r;if(e.response){ae(t,e.response.status);const s=null==(r=null==(n=e.response)?void 0:n.headers)?void 0:r.get("content-length");if(s){const e=parseInt(s);e>0&&t.setAttribute("http.response_content_length",e)}}else e.error&&t.setStatus({code:2,message:"internal_error"});t.end()}(n,t),function(t,e,n){var r;const s="object"==typeof n&&null!==n?n.onRequestSpanEnd:void 0;null==s||s(t,{headers:null==(r=e.response)?void 0:r.headers,error:e.error})}(n,t,s),delete r[e]))}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}="object"==typeof s?s:{spanOrigin:s},l=!!Je(),p=a&&l?Cn(function(t,e,n){if(t.startsWith("data:")){const r=Yr(t);return{name:"".concat(e," ").concat(r),attributes:ws(t,void 0,e,n)}}const r=Jr(t),s=r?function(t){if(zr(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}(r):t;return{name:"".concat(e," ").concat(s),attributes:ws(t,r,e,n)}}(i,o,c)):new sn;if(t.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p,n(t.fetchData.url)){const e=t.args[0],n={...t.args[1]||{}},r=function(t,e,n,r){const s=Zr({span:n,propagateTraceparent:r}),o=s["sentry-trace"],i=s.baggage,a=s.traceparent;if(!o)return;const c=e.headers||(G(t)?t.headers:void 0);if(c){if(function(t){return"undefined"!=typeof Headers&&Y(t,Headers)}(c)){const t=new Headers(c);if(t.get("sentry-trace")||t.set("sentry-trace",o),r&&a&&!t.get("traceparent")&&t.set("traceparent",a),i){const e=t.get("baggage");e?xs(e)||t.set("baggage","".concat(e,",").concat(i)):t.set("baggage",i)}return t}if(Array.isArray(c)){const t=[...c];c.find(t=>"sentry-trace"===t[0])||t.push(["sentry-trace",o]),r&&a&&!c.find(t=>"traceparent"===t[0])&&t.push(["traceparent",a]);const e=c.find(t=>"baggage"===t[0]&&xs(t[1]));return i&&!e&&t.push(["baggage",i]),t}{const t="sentry-trace"in c?c["sentry-trace"]:void 0,e="traceparent"in c?c.traceparent:void 0,n="baggage"in c?c.baggage:void 0,s=n?Array.isArray(n)?[...n]:[n]:[],u=n&&(Array.isArray(n)?n.find(t=>xs(t)):xs(n));i&&!u&&s.push(i);const l={...c,"sentry-trace":null!=t?t:o,baggage:s.length>0?s.join(","):void 0};return r&&a&&!e&&(l.traceparent=a),l}}return{...s}}(e,n,qe()&&l?p:void 0,u);r&&(t.args[1]=n,n.headers=r)}const d=Yt();if(d){const e={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};d.emit("beforeOutgoingRequestSpan",p,e)}return p}function xs(t){return t.split(",").some(t=>t.trim().startsWith(fe))}function ws(t,e,n,r){const s={url:Yr(t),type:"fetch","http.method":n,[Qt]:r,[Zt]:"http.client"};return e&&(zr(e)||(s["http.url"]=Yr(e.href),s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function ks(t){return void 0===t?void 0:t>=400&&t<500?"warning":t>=500?"error":void 0}const Is=e;function Ts(){return"history"in Is&&!!Is.history}function Cs(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Os(){var e;if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in Is))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch(t){return!1}}())return!1;if(Cs(Is.fetch))return!0;let n=!1;const r=Is.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t),(null==(e=t.contentWindow)?void 0:e.fetch)&&(n=Cs(t.contentWindow.fetch)),r.head.removeChild(t)}catch(s){t&&d.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return n}function Ds(t,e){const n="fetch";k(n,t),I(n,()=>Ps(void 0,e))}function As(t){const e="fetch-body-resolved";k(e,t),I(e,()=>Ps(Ns))}function Ps(t,n=!1){n&&!Os()||tt(e,"fetch",function(n){return function(...r){const s=new Error,{method:o,url:i}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,n]=t;return{url:Rs(e),method:js(n,"method")?String(n.method).toUpperCase():G(e)&&js(e,"method")?String(e.method).toUpperCase():"GET"}}const e=t[0];return{url:Rs(e),method:js(e,"method")?String(e.method).toUpperCase():"GET"}}(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:1e3*kt(),virtualError:s,headers:Ms(r)};return t||T("fetch",{...a}),n.apply(e,r).then(async e=>(t?t(e):T("fetch",{...a,endTimestamp:1e3*kt(),response:e}),e),t=>{var e;T("fetch",{...a,endTimestamp:1e3*kt(),error:t}),R(t)&&void 0===t.stack&&(t.stack=s.stack,et(t,"framesToPop",1));const n=Yt(),r=null!=(e=null==n?void 0:n.getOptions().enhanceFetchErrorMessages)?e:"always";if(!1!==r&&t instanceof TypeError&&("Failed to fetch"===t.message||"Load failed"===t.message||"NetworkError when attempting to fetch resource."===t.message))try{const e=new URL(a.fetchData.url).host;"always"===r?t.message="".concat(t.message," (").concat(e,")"):et(t,"__sentry_fetch_url_host__",e)}catch(o){}throw t})}})}function Ns(t){let e;try{e=t.clone()}catch(n){return}!async function(t,e){if(null==t?void 0:t.body){const r=t.body,s=r.getReader(),o=setTimeout(()=>{r.cancel().then(null,()=>{})},9e4);let i=!0;for(;i;){let t;try{t=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:n}=await s.read();clearTimeout(t),n&&(e(),i=!1)}catch(n){i=!1}finally{clearTimeout(t)}}clearTimeout(o),s.releaseLock(),r.cancel().then(null,()=>{})}}(e,()=>{T("fetch-body-resolved",{endTimestamp:1e3*kt(),response:t})})}function js(t,e){return!!t&&"object"==typeof t&&!!t[e]}function Rs(t){return"string"==typeof t?t:t?js(t,"url")?t.url:t.toString?t.toString():"":""}function Ms(t){const[e,n]=t;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(G(e))return new Headers(e.headers)}catch(r){}}function Ls(){return"npm"}function Us(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Fs(){return"undefined"!=typeof window&&(!Us()||function(){const t=e.process;return"renderer"===(null==t?void 0:t.type)}())}export{us as $,g as A,dr as B,Pr as C,hs as D,Ds as E,d as F,e as G,K as H,X as I,ts as J,ks as K,Hr as L,yt as M,ht as N,gs as O,tt as P,b as Q,rr as R,ir as S,O as T,f as U,tr as V,P as W,z as X,B as Y,Yr as Z,Br as _,rt as a,un as a$,c as a0,ur as a1,_ as a2,Wr as a3,is as a4,rs as a5,Ss as a6,_s as a7,As as a8,Es as a9,xt as aA,Mn as aB,Xt as aC,rn as aD,Me as aE,Jr as aF,er as aG,On as aH,ee as aI,te as aJ,se as aK,bn as aL,Tn as aM,k as aN,I as aO,T as aP,_t as aQ,Ts as aR,Cs as aS,Fs as aT,we as aU,Qr as aV,nr as aW,on as aX,br as aY,yr as aZ,Kn as a_,Re as aa,qe as ab,ae as ac,$r as ad,Je as ae,Cn as af,Zt as ag,Qt as ah,sn as ai,Zr as aj,gt as ak,ze as al,ie as am,Jt as an,Kt as ao,oe as ap,Vt as aq,Rn as ar,Tt as as,Ye as at,Ht as au,Pt as av,At as aw,Ie as ax,kt as ay,Gt as az,et as b,yn as b0,vn as b1,qr as b2,bt as c,St as d,Xn as e,U as f,Q as g,F as h,L as i,R as j,J as k,H as l,nt as m,W as n,Yt as o,an as p,at as q,Ln as r,Kr as s,Ls as t,fr as u,mr as v,$t as w,Vr as x,Sr as y,vr as z};
