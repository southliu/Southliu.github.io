import{j as e,r as t}from"./react@19.1.0.Bf1nU3Xp.js";import{l as a}from"./lodash@4.17.21.B1rlCWCX.js";import{T as l,D as n,r,P as o}from"./index.HdLn7H_s.js";import{d as s}from"./dayjs@1.11.13.AZtgMeec.js";import{j as i,k as u,f as c,m as p,n as d,o as f,I as m,a as v,p as h,C as g,q as y,r as j,v as b,w as S,U as x}from"./antd@5.26.6_react-dom@19.1.0_react@19.1.0__react@19.1.0.H8PSownG.js";import{u as P}from"./react-i18next@15.6.1_i18nex_8494df3c5789a08eaaa9660264635b87.GGzZsTB5.js";function C(e){switch(e){case"Switch":return"checked";case"Upload":return"fileList";default:return"value"}}function w(e,t){switch(t){case"Select":case"TreeSelect":return{allowClear:!0,showSearch:!0,placeholder:e("public.inputPleaseSelect")};case"InputNumber":return{placeholder:e("public.inputPleaseEnter")};case"Checkbox":case"CheckboxGroup":return{};case"DatePicker":return{placeholder:e("public.inputPleaseSelect"),format:n};case"RangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[n,n]};case"TimePicker":return{placeholder:e("public.inputPleaseSelect"),format:l};case"TimeRangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[l,l]};default:return{allowClear:!0,placeholder:e("public.inputPleaseEnter")}}}const k=e=>Array.isArray(e)?e:null==e?void 0:e.fileList,D=e=>{var t;const l=a.cloneDeep(e);return delete l.wrapperWidth,delete l.componentProps,delete l.render,l.hidden&&(null==(t=l.rules)?void 0:t.length)&&(l.rules=void 0),"Upload"!==l.component||(null==l?void 0:l.getValueFromEvent)||(l.getValueFromEvent=k),l},T=e=>{const t={};return Object.keys(e).forEach(a=>{var l;"string"==typeof e[a]&&(e[a]=null==(l=e[a])?void 0:l.trim()),""!==e[a]&&(t[a]=e[a])}),t};function A(e){return r.get("/authority/common/games",{params:e})}function N(){return e.jsx("div",{className:"absolute left-50% top-50% -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx(c,{spinning:!0})})}function R(a){var l;const{t:n}=P(),[r,o]=t.useState(!1),[s,u]=t.useState([]),c={...a};delete c.api,delete c.params,delete c.apiResultKey;const p=t.useCallback(async()=>{if(a.api)try{const{api:e,params:t,apiResultKey:l}=a;if(o(!0),e){const a=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await a;if(200!==Number(n))return;const o=l?null==r?void 0:r[l]:r;u(o)}}finally{o(!1)}},[a]);t.useEffect(()=>{a.value&&0===s.length&&p()},[a.value]);return e.jsx(i,{allowClear:!0,showSearch:!0,maxTagCount:F,placeholder:n("public.inputPleaseSelect"),optionFilterProp:(null==(l=null==c?void 0:c.fieldNames)?void 0:l.label)||"label",...c,loading:r,options:s,notFoundContent:r&&e.jsx(N,{}),onOpenChange:e=>{var t;e&&p(),null==(t=a.onOpenChange)||t.call(a,e)}})}const F="responsive";function K(t){return e.jsx(e.Fragment,{children:e.jsx(R,{...t,mode:"multiple",api:A,fieldNames:{label:"name",value:"id"}})})}function E(e){return r.get("/platform/partner",{params:e})}function z(e,t){return r.get(e,{params:t})}function O(t){return e.jsx(R,{...t,api:E,mode:"multiple",fieldNames:{label:"name",value:"id"}})}function G(e,t=n){return s.isDayjs(e)?e.format(t):e}function I(e){return s.isDayjs(e)?e:s(e)}function _(e,t=n){if(e)return(null==e?void 0:e.length)>1&&s.isDayjs(null==e?void 0:e[0])&&s.isDayjs(null==e?void 0:e[1])?[e[0].format(t),e[1].format(t)]:e}function U(e){if(e)return(null==e?void 0:e.length)>1&&!s.isDayjs(null==e?void 0:e[0])&&s.isDayjs(null==e?void 0:e[1])?[s(e[0]),e[1]]:(null==e?void 0:e.length)>1&&s.isDayjs(null==e?void 0:e[0])&&!s.isDayjs(null==e?void 0:e[1])?[e[0],s(e[1])]:(null==e?void 0:e.length)>1&&!s.isDayjs(null==e?void 0:e[0])&&!s.isDayjs(null==e?void 0:e[1])?[s(e[0]),s(e[1])]:e}function q(e,t){var a;for(let l=0;l<e.length;l++)if(e[l].name===t)return(null==(a=e[l].componentProps)?void 0:a.format)||n;return n}function H(e,t){var a;const l=t.filter(e=>"customize"===e.component).map(e=>e.name);for(const n in e)if(!(null==l?void 0:l.includes(n))){if(2===(null==(a=e[n])?void 0:a.length)&&s.isDayjs(e[n][0])&&s.isDayjs(e[n][1])){const a=q(t,n);e[n]=_(e[n],a)}if((null==e?void 0:e[n])&&s.isDayjs(e[n])){const a=q(t,n);e[n]=G(e[n],a)}}return e}const{RangePicker:L}=p;const{RangePicker:V}=d;const M=new Map;function W(t,a){const{component:l,componentProps:n}=a,r=e.jsx(m,{...w(t,"Input"),...n});if("customize"===l){const{render:e}=a;if(!e)return r;B("customize",e)}const o=M.get(l);return o?e.jsx(e.Fragment,{children:e.jsx(o,{...w(t,l),...n})}):r}function B(e,t){M.set(e,t)}M.set("Input",m),M.set("TextArea",m.TextArea),M.set("InputNumber",v),M.set("InputPassword",m.Password),M.set("AutoComplete",h),M.set("Select",function(t){var a;const{options:l}=t,{t:n}=P(),r=(null==l?void 0:l.map(e=>"object"!=typeof e?{label:e,value:e}:e))||[];return e.jsx(i,{allowClear:!0,showSearch:!0,maxTagCount:F,placeholder:n("public.inputPleaseSelect"),optionFilterProp:(null==(a=null==t?void 0:t.fieldNames)?void 0:a.label)||"label",...t,options:r})}),M.set("TreeSelect",function(t){var a;const{treeData:l}=t,{t:n}=P(),r=(null==l?void 0:l.map(e=>"object"!=typeof e?{label:e,value:e}:e))||[];return e.jsx(u,{allowClear:!0,showSearch:!0,maxTagCount:F,treeNodeFilterProp:(null==(a=null==t?void 0:t.fieldNames)?void 0:a.label)||"label",placeholder:n("public.inputPleaseSelect"),...t,treeData:r})}),M.set("Checkbox",g),M.set("CheckboxGroup",g.Group),M.set("RadioGroup",y.Group),M.set("Switch",j),M.set("Rate",b),M.set("Slider",S),M.set("Upload",x),M.set("Transfer",function(a){const{value:l}=a,[n,r]=t.useState(l||[]);return e.jsx(f,{...a,targetKeys:n,onChange:e=>{var t;r(e),null==(t=null==a?void 0:a.onChange)||t.call(a,e)}})}),M.set("DatePicker",function(t){const{value:a}=t,l={...t};return a&&(l.value=I(a)),e.jsx(p,{...l})}),M.set("RangePicker",function(t){const{value:a}=t,l={...t};return a&&(l.value=U(a)),e.jsx(L,{...l})}),M.set("TimePicker",function(t){const{value:a}=t,l={...t};return a&&(l.value=I(a)),e.jsx(d,{...l})}),M.set("TimeRangePicker",function(t){const{value:a}=t,l={...t};return a&&(l.value=U(a)),e.jsx(V,{...l})}),M.set("ApiSelect",R),M.set("ApiTreeSelect",function(a){var l;const{t:n}=P(),[r,o]=t.useState(!1),[s,i]=t.useState([]),c={...a};delete c.api,delete c.params,delete c.apiResultKey;const p=t.useCallback(async()=>{if(a.api)try{const{api:e,params:t,apiResultKey:l}=a;if(o(!0),e){const a=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await a;if(200!==Number(n))return;const o=l?null==r?void 0:r[l]:r;i(o)}}finally{o(!1)}},[a]);return t.useEffect(()=>{a.value&&0===(null==s?void 0:s.length)&&p()},[a.value]),e.jsx(u,{allowClear:!0,showSearch:!0,maxTagCount:F,treeNodeFilterProp:(null==(l=null==c?void 0:c.fieldNames)?void 0:l.label)||"label",placeholder:n("public.inputPleaseSelect"),...c,loading:r,treeData:s,notFoundContent:r&&e.jsx(N,{}),onOpenChange:e=>{var t;e&&p(),null==(t=a.onOpenChange)||t.call(a,e)}})}),M.set("ApiPageSelect",function(l){var n;const{pageKey:r="page",pageSizeKey:o="pageSize",queryKey:s="query",page:u=1,pageSize:p=20}=l,{t:d}=P(),[f,m]=t.useState(!1),[v,h]=t.useState(u),[g,y]=t.useState(!0),[j,b]=t.useState([]),[S,x]=t.useState(!1),[C,w]=t.useState(""),k={...l};delete k.api,delete k.params,delete k.apiResultKey,delete k.pageKey,delete k.pageSizeKey,t.useEffect(()=>{S&&(x(!1),D())},[S]);const D=t.useCallback(async()=>{if(l.api&&g)try{const{api:e,params:t,apiResultKey:a}=l,n={[r]:v,[o]:p,[s]:C||void 0};if(Array.isArray(t))for(let l=0;l<(null==t?void 0:t.length);l++){const e=t[l];e.constructor===Object&&(t[l]={...e,...n})}if(m(!0),e){const l=Array.isArray(t)?e(...t):e({...t,...n}),{code:r,data:o}=await l;if(200!==Number(r))return;const s=a?null==o?void 0:o[a]:o;if(null==s?void 0:s.length){const e=j.concat(s);b(e)}y(!!(null==s?void 0:s.length))}}finally{m(!1)}},[v,C]);t.useEffect(()=>{l.value&&0===j.length&&D()},[l.value]);const T=t.useCallback(async e=>{const{scrollTop:t,scrollHeight:a,clientHeight:l}=e.currentTarget;t+l>=a-10&&!f&&g&&(h(v+1),x(!0))},[f,g,v]),A=a.debounce(e=>{var t;null==(t=null==l?void 0:l.onSearch)||t.call(l,e),b([]),h(u),y(!0),w(e),x(!0)},200);return e.jsx(i,{allowClear:!0,showSearch:!0,maxTagCount:F,placeholder:d("public.inputPleaseSelect"),optionFilterProp:(null==(n=null==k?void 0:k.fieldNames)?void 0:n.label)||"label",...k,onSearch:A,onPopupScroll:T,popupRender:t=>e.jsxs(e.Fragment,{children:[t,e.jsx("div",{className:"py-3px text-center",children:f&&g&&!!(null==j?void 0:j.length)&&e.jsx(c,{size:"small",spinning:!0})})]}),loading:f,options:j,notFoundContent:f&&e.jsx(N,{}),onOpenChange:e=>{var t;e&&!(null==j?void 0:j.length)&&D(),null==(t=l.onOpenChange)||t.call(l,e)}})}),M.set("PasswordStrength",o),B("GameSelect",K),B("PartnerSelect",O);export{B as a,T as b,W as c,D as d,H as f,z as g,C as h};
