import{T as e}from"./@rc-component_trigger@3.7.1_9234358db6ac4d4b221fe18208ab417c.KUVSKQ8O.js";import{l as t,K as o,m as r,n,s}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{c as a}from"./clsx@2.1.1.BvmCeSbq.js";import{r as i,e as c}from"./react@19.2.1.BpVBN_43.js";const{ESC:l,TAB:f}=o;const p=i.forwardRef((e,t)=>{const{overlay:o,arrow:a,prefixCls:l}=e,f=i.useMemo(()=>{let e;return e="function"==typeof o?o():o,e},[o]),p=r(t,n(f));return c.createElement(c.Fragment,null,a&&c.createElement("div",{className:`${l}-arrow`}),c.cloneElement(f,{ref:s(f)?p:void 0}))}),u={adjustX:1,adjustY:1},m=[0,0],g={topLeft:{points:["bl","tl"],overflow:u,offset:[0,-4],targetOffset:m},top:{points:["bc","tc"],overflow:u,offset:[0,-4],targetOffset:m},topRight:{points:["br","tr"],overflow:u,offset:[0,-4],targetOffset:m},bottomLeft:{points:["tl","bl"],overflow:u,offset:[0,4],targetOffset:m},bottom:{points:["tc","bc"],overflow:u,offset:[0,4],targetOffset:m},bottomRight:{points:["tr","br"],overflow:u,offset:[0,4],targetOffset:m}};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},v.apply(this,arguments)}const b=c.forwardRef((o,u)=>{const{arrow:m=!1,prefixCls:b="rc-dropdown",transitionName:d,animation:w,align:h,placement:y="bottomLeft",placements:C=g,getPopupContainer:O,showAction:R,hideAction:E,overlayClassName:j,overlayStyle:k,visible:x,trigger:N=["hover"],autoFocus:P,overlay:A,children:L,onVisibleChange:M,...$}=o,[_,F]=c.useState(),S="visible"in o?x:_,T=w?`${b}-${w}`:d,V=c.useRef(null),W=c.useRef(null),D=c.useRef(null);c.useImperativeHandle(u,()=>V.current);const I=e=>{F(e),M?.(e)};!function({visible:e,triggerRef:o,onVisibleChange:r,autoFocus:n,overlayRef:s}){const a=i.useRef(!1),c=()=>{e&&(o.current?.focus?.(),r?.(!1))},p=()=>!!s.current?.focus&&(s.current.focus(),a.current=!0,!0),u=e=>{switch(e.keyCode){case l:c();break;case f:{let t=!1;a.current||(t=p()),t?e.preventDefault():c();break}}};i.useEffect(()=>e?(window.addEventListener("keydown",u),n&&t(p,3),()=>{window.removeEventListener("keydown",u),a.current=!1}):()=>{a.current=!1},[e])}({visible:S,triggerRef:D,onVisibleChange:I,autoFocus:P,overlayRef:W});const B=()=>c.createElement(p,{ref:W,overlay:A,prefixCls:b,arrow:m}),H=c.cloneElement(L,{className:a(L.props?.className,S&&(()=>{const{openClassName:e}=o;return void 0!==e?e:`${b}-open`})()),ref:s(L)?r(D,n(L)):void 0});let K=E;return K||-1===N.indexOf("contextMenu")||(K=["click"]),c.createElement(e,v({builtinPlacements:C},$,{prefixCls:b,ref:V,popupClassName:a(j,{[`${b}-show-arrow`]:m}),popupStyle:k,action:N,showAction:R,hideAction:K,popupPlacement:y,popupAlign:h,popupMotion:{motionName:T},popupVisible:S,stretch:(()=>{const{minOverlayWidthMatchTrigger:e,alignPoint:t}=o;return"minOverlayWidthMatchTrigger"in o?e:!t})()?"minWidth":"",popup:"function"==typeof A?B:B(),onOpenChange:I,onPopupClick:e=>{const{onOverlayClick:t}=o;F(!1),t&&t(e)},getPopupContainer:O}),H)});export{b as D};
