var e=Object.defineProperty,s=(s,n,t)=>((s,n,t)=>n in s?e(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t)(s,"symbol"!=typeof n?n+"":n,t);import{r as n,j as t}from"./react@19.2.3.D3o_8b5j.js";import{b as r,a,u as c,K as o,g as i,c as l,L as d,s as m,M as u,j as p,N as f,O as b,f as x,P as h,Q as j,R as v,S as g,U as y,V as _,W as k,X as w,Y as N,Z as C,p as A,_ as E}from"./index.BTHqHx39.js";import{l as O}from"./lodash@4.17.21.BUwJ2jlQ.js";import{c as S,L as M}from"./keepalive-for-react@5.0.7_r_33100828a8f90b61e9967b46b3101fcd.Cc1K-x6F.js";import{n as T}from"./nprogress@0.2.0.CMcGCMLp.js";import{a as K}from"./is.BeBpkxAQ.js";import{I as X}from"./@iconify_react@6.0.2_react@19.2.3.DNJK3b9P.js";import{u as I}from"./zustand@5.0.9_@types_react@_5454f66ab05067d144a1abef0fde1e8c.DQpm8-Mc.js";import{u as P}from"./react-i18next@16.5.1_i18nex_e0732ae603aefaca3ccb08379955d50d.CFoO-yg_.js";import{o as R,T as B,M as L,I as z,F as W,A as F,D as H,s as D,p as U,q,B as V,r as J}from"./antd@6.1.3_react-dom@19.2.3_react@19.2.3__react@19.2.3.B59SJbiP.js";import{a as Q,u as Z,b as Y}from"./react-router@7.11.0_react-d_9bf5140e9212b7cc8e1e4977b49a16e8.Dqvwovqb.js";import{B as G}from"./BaseModal.6-mAQpl3.js";import{a2 as $,a3 as ee,a4 as se,a5 as ne,a6 as te,a0 as re,R as ae,a7 as ce,j as oe,a8 as ie}from"./@ant-design_icons@6.1.0_rea_578d967b89ca52aedd84b4dfb2c6cf72.CojizEej.js";import{c as le,D as de,d as me,P as ue}from"./@dnd-kit_core@6.3.1_react-d_faeaa4ec592555ff24d378ec7b025ac6.DiSRDP3z.js";import{u as pe,a as fe,S as be,h as xe}from"./@dnd-kit_sortable@10.0.0_@d_bb9a87c2c20c367037e96a5cfbc9db8c.ClQorwyP.js";import{C as he}from"./@dnd-kit_utilities@3.2.2_react@19.2.3.BZP7gbL7.js";import je from"./403.CRK0PhRI.js";import{c as ve}from"./log.Gu7eq1QR.js";import{m as ge}from"./framer-motion@12.34.0_react_54b4d59440336a4dac20174c0fbd7c1c.Det9rJX9.js";import"./@babel_runtime@7.28.4.Ck1afGla.js";import"./react-dom@19.2.3_react@19.2.3.CIkYuaQ_.js";import"./scheduler@0.27.0.6ULW7vKx.js";import"./i18next-http-backend@3.0.2.BBsYoZ-e.js";import"./crypto-js@4.2.0.DDQhaveQ.js";import"./axios@1.13.2.DDVHPqWP.js";import"./@ant-design_cssinjs@2.0.1_r_52ebc5f68c5d55a7b1a8f8a117b18eba.Dgwj0KgC.js";import"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.OytLLzRX.js";import"./react-is@18.3.1.USR0mOhp.js";import"./is-mobile@5.0.0.CY4BSRfs.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.CDtraqjp.js";import"./i18next@25.7.3_typescript@5.9.3.oPH98fpq.js";import"./i18next-browser-languagedetector@8.2.0.q5bUM8v9.js";import"./dayjs@1.11.19.makcgq1Y.js";import"./web-vitals@5.1.0.C9lpl2zp.js";import"./@sentry_react@10.38.0_react@19.2.3.pAyv9avm.js";import"./@sentry_core@10.38.0.B-bj8hQP.js";import"./@sentry_browser@10.38.0.DJM_bMq3.js";import"./@sentry-internal_browser-utils@10.38.0.Bc5JQQFT.js";import"./@sentry-internal_replay@10.38.0.4OC3EoWI.js";import"./@ant-design_cssinjs-utils@2_9cdeccd52263af62f34dd9f213f921e5.C3Lt3TZs.js";import"./@rc-component_resize-observ_a5d141e3de655ef602de0c6d9e51ffb4.DTkZgLwN.js";import"./clsx@2.1.1.BvmCeSbq.js";import"./@ant-design_fast-color@3.0.0.Bv-idf8E.js";import"./@ant-design_colors@8.0.0.C_9FKw7I.js";import"./@ant-design_icons-svg@4.4.2.CjW3sjtx.js";import"./@rc-component_motion@1.1.6__75bed58c5aa0279623e804b6e3100d82.Dp7kHckh.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./@rc-component_pagination@1._c8c3dfc82534658d6c7c4054f0d2f69c.QfqcjsW9.js";import"./@rc-component_picker@1.9.0__52a8cb63fe1d91d00305622cb5380f6e.vl6gWHvl.js";import"./@rc-component_trigger@3.7.2_b5d51e27885fcdc381f6db89cb94580b.7SPRIdKI.js";import"./@rc-component_portal@2.2.0__23d0e188c8e59a845be2370f4ba3b141.DMGK87O5.js";import"./@rc-component_overflow@1.0._000e3b789f0a378ea10d91c90289e484.BRgGt9x2.js";import"./@rc-component_notification@_6b5601d366b139db646993c6d2b44fe7.C7nN-HsR.js";import"./@rc-component_color-picker@_b31871ba6e7583d0e0030156daa2c231.QY1FkQwD.js";import"./@rc-component_collapse@1.1._228d3773bbed33f966bd3893dbe8729d.DosGPEFu.js";import"./@rc-component_dialog@1.5.1__3a9190aeba7b200bd9ee7697ebc43c96.l5-BrUq2.js";import"./@rc-component_form@1.6.0_re_b998db7a1757bdc2c2d6e65b57d3d80e.CWwDr9vK.js";import"./@rc-component_async-validator@5.0.4.BVisLF_3.js";import"./@rc-component_select@1.4.0__72937b420adc00cfcd381e86fe79d4ff.6I8X_RNY.js";import"./@rc-component_virtual-list@_eab7c240f5d5dcfc3960e23bede0b5bd.BMbuch9V.js";import"./@rc-component_tooltip@1.4.0_24ce817bfa5749bd0e3c36dde530a97c._z6uvGl3.js";import"./@rc-component_dropdown@1.0._53032f4203d2df29a251177758ef8582.B3FO_i_C.js";import"./@rc-component_menu@1.2.0_re_22c4d0f32307dedeae1bf96beb63120f.BDHAA7SK.js";import"./@rc-component_checkbox@1.0._e8e0ff7b3fc71b270e8f41769fdc08ef.Cmiu7vdT.js";import"./@rc-component_tabs@1.7.0_re_2e2b6a6e8158979ca118318443a5e725.CLUJuviN.js";import"./@ant-design_react-slick@2.0_7e7eaf031d783e1bf442b33d4a0ab896.D3OZPMUD.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./json2mq@0.2.0.GZzr-Vnx.js";import"./string-convert@0.2.1.CCzxSb8Y.js";import"./@rc-component_cascader@1.10_6ebff9b01a4e20f17bf5315b0fdf89e4.Cv_wPsB6.js";import"./@rc-component_tree@1.1.0_re_16b118318364c8e3af872a05fdf7f126.Bhs1Ff4Q.js";import"./@rc-component_segmented@1.3_21ca68187e5dbc0fdd04919b00514bb2.L2ciIQTn.js";import"./@rc-component_input-number@_8344498727e4684fb6e2c8a86fda3337.NAEoLZ75.js";import"./@rc-component_mini-decimal@1.1.0.BqhSKEoY.js";import"./@rc-component_input@1.1.2_r_6672dd2a1daa1d4fb8167692335bdc32.CKElcDuT.js";import"./@rc-component_slider@1.0.1__528977580e75fd5a617258a02a5eb89f.DjUV2ucq.js";import"./@rc-component_drawer@1.3.0__a3d615bbff00e7f3d4a92805dfb7be48.Cv2tZrDL.js";import"./@rc-component_image@1.5.3_r_dcb3ab75ae693752d40558f143f9ffbd.B9bahJpA.js";import"./@rc-component_textarea@1.1._509480b13cbc5aaa7fb930d30d5446b8.BoMpu7IK.js";import"./@rc-component_mentions@1.6._78da067fea4317b9a061ddd8114d8e2c.BAM0LhZ5.js";import"./@rc-component_progress@1.0._690d9711439beca726bc73677291eda2.BNi-Wz6j.js";import"./@rc-component_qrcode@1.1.1__0f9c8c9acd773e58dc69db4d81fa0587.CH883Cbj.js";import"./@rc-component_rate@1.0.1_re_607aeea99259c177b103a2159d2187ff.soQhfRl0.js";import"./@rc-component_steps@1.2.2_r_676c9cf2ee63b15ecfba1a57f7fa461f.B_2Z_9jR.js";import"./@rc-component_switch@1.0.3__79f884f0de666becb31c50b27a07c8e0.Bw1xoSKH.js";import"./@rc-component_table@1.9.0_r_af629d240898c7fe2c8824967839d777.BaOL_bFk.js";import"./@rc-component_context@2.0.1_9fe36d481fc46b168d9be8c7e1532bb4.7OSEexam.js";import"./@rc-component_tour@2.2.1_re_c814a7862157707785c7770d3c2b3347.BR9_y0mu.js";import"./@rc-component_tree-select@1_ca468fe32827d69ce4681fdcb142e602.DeUxcAbA.js";import"./@rc-component_upload@1.1.0__a6e83aac22b2c573f173681e85b72b7b.Bx4CpChZ.js";import"./@rc-component_mutate-observ_e6130eca8f32f9ca6ca6e4795e1097a7.D8T_g6R9.js";import"./use-sync-external-store@1.6.0_react@19.2.3.DaiN_xOC.js";import"./react-draggable@4.5.0_react_38b3ec0b5b5ffe2dfcce8c9bab4916d1.Dud5E6Od.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./@dnd-kit_accessibility@3.1.1_react@19.2.3.CGuEI72d.js";import"./motion-dom@12.34.0.DGkaOpyQ.js";import"./motion-utils@12.29.2.DDt8zdnb.js";const ye={header:"_header_118sl_1","header-close-menu":"_header-close-menu_118sl_14","header-driver":"_header-driver_118sl_17",menu:"_menu_118sl_20","menu-close":"_menu-close_118sl_28",con:"_con_118sl_31","con-close-menu":"_con-close-menu_118sl_38","con-maximize":"_con-maximize_118sl_42","header-none":"_header-none_118sl_47",none:"_none_118sl_51","menu-none":"_menu-none_118sl_54","layout-tabs":"_layout-tabs_118sl_58"};const _e=n.memo(function(){const e=Q(),{t:s,i18n:x}=P(),{pathname:h}=Z(),{tabs:j,setActiveKey:v,addTabs:g,setNav:y}=r(I(e=>({tabs:e.tabs,setActiveKey:e.setActiveKey,addTabs:e.addTabs,setNav:e.setNav}))),{isMaximize:_,isCollapsed:k,isPhone:w,openKeys:N,selectedKeys:C,permissions:A,menuList:E}=a(),{toggleCollapsed:O,setSelectedKeys:S}=c(I(e=>({toggleCollapsed:e.toggleCollapsed,setSelectedKeys:e.setSelectedKeys}))),[M,T]=n.useState(N||[]),[B,L]=n.useState(C?[C]:[]),z=n.useCallback(e=>(null==e?void 0:e.length)?e.map(e=>{var s;const n={...e};return(null==e?void 0:e.icon)&&(n.icon=t.jsx(X,{icon:e.icon})),(null==(s=null==e?void 0:e.children)?void 0:s.length)&&(n.children=z(e.children)),n}):[],[]),W=n.useMemo(()=>{if(0===A.length||0===E.length)return[];const e=o(E,A);return z(e)},[E,A,z,x.language]);n.useEffect(()=>{const e=i(h);requestAnimationFrame(()=>{T(e),L([h]),S(h)})},[]),n.useEffect(()=>{C&&L([C])},[C]),n.useEffect(()=>{(null==N?void 0:N.length)&&T(N)},[N]);const F=n.useCallback(s=>{e(s)},[e]),H=n.useCallback(()=>{O(!0)},[O]),D=n.useCallback(({key:n})=>{n!==h&&(w&&H(),K(n)?window.open(n,"_blank"):(L([n]),S(n),requestAnimationFrame(()=>{v(n);const t=l({menus:E,permissions:A,key:n});(null==t?void 0:t.key)?(v(t.key),y(t.nav),g(t)):v(n);const r=d(j,n);r&&m(s,r),requestAnimationFrame(()=>{e(n)})})))},[h,w,H,S,e]),U=n.useCallback((e,s)=>e.every((e,n)=>e===s[n]),[]),q=n.useCallback(e=>{const s=[];if(e.length>0){const n=e[e.length-1],t=u(n);s.push(n);for(let r=e.length-2;r>=0;r--){const n=u(e[r]);U(n,t)&&s.unshift(e[r])}}T(s)},[U]),V=n.useCallback(()=>{const e=p(W,A);F(e),w&&H()},[W,A,F,w,H]),J=n.useMemo(()=>f(W),[W]),Y=n.useMemo(()=>"\n      transition-all\n      overflow-auto\n      z-2\n      ".concat(ye.menu,"\n      ").concat(k?ye["menu-close"]:"","\n      ").concat(_||w&&k?ye["menu-none"]:"","\n      ").concat(w?"!z-1002":"","\n    "),[k,_,w]),G=n.useMemo(()=>"\n      text-white\n      flex\n      content-center\n      px-5\n      py-2\n      cursor-pointer\n      ".concat(k?"justify-center":"","\n    "),[k]),$=n.useMemo(()=>"\n      text-white\n      ml-3\n      text-xl\n      font-bold\n      truncate\n      ".concat(k?"hidden":"","\n    "),[k]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:Y,children:[t.jsxs("div",{className:G,onClick:V,children:[t.jsx("img",{src:b,width:30,height:30,className:"object-contain",alt:"logo"}),t.jsx("span",{className:$,children:s("public.currentName")})]}),t.jsx(R,{id:"layout-menu",className:"z-1000",selectedKeys:B,openKeys:M,mode:"inline",theme:"dark",forceSubMenuRender:!0,inlineCollapsed:!w&&k,items:J,onClick:D,onOpenChange:q})]}),w&&!k&&t.jsx("div",{className:"\n            ".concat(ye.cover,"\n            fixed\n            w-full\n            h-full\n            bg-gray-500\n            bg-opacity-10\n            z-1001\n          "),onClick:H})]})});function ke(){const{t:e}=P(),[s,n]=function(){const{isFullscreen:e}=a(),s=x(e=>e.setFullscreen);return[e,()=>{var n;return!e&&(null==(n=document.documentElement)?void 0:n.requestFullscreen)?(document.documentElement.requestFullscreen(),s(!0),!0):e&&(null==document?void 0:document.exitFullscreen)?(document.exitFullscreen(),s(!1),!0):void 0}]}();return t.jsx(B,{title:e(s?"public.exitFullscreen":"public.fullScreen"),children:t.jsxs("div",{className:"flex items-center justify-center text-lg mr-3 cursor-pointer",onClick:n,children:[t.jsx(X,{icon:"gridicons-fullscreen-exit",style:{display:s?"block":"none"}}),t.jsx(X,{icon:"gridicons-fullscreen",style:{display:s?"none":"block"}})]})})}function we(e){const{list:s,active:o,onCancel:d,changActive:m}=e,{t:u,i18n:p}=P(),{permissions:f,menuList:b}=a(),{addTabs:x,setActiveKey:h}=r(e=>e),j=c(e=>e.setOpenKeys),v=Q(),g=p.language;return t.jsxs(t.Fragment,{children:[!(null==s?void 0:s.length)&&t.jsxs("div",{className:"flex flex-col items-center pt-5 text-warm-gray-400",children:[t.jsx(X,{className:"text-40px",icon:"mdi:archive-cancel-outline"}),t.jsx("span",{className:"mt-1",children:u("public.notSearchContent")})]}),(null==s?void 0:s.length)>0&&t.jsx("div",{className:"mt-5",children:null==s?void 0:s.map(e=>{var s;return t.jsxs("div",{className:"\n                h-56px\n                mt-8px\n                px-14px\n                rounded-4px\n                cursor-pointer\n                flex\n                items-center\n                justify-between\n                shadow-md\n                border\n                border-light-500\n                ".concat(o===e.key?"bg-blue-500 text-white":"","\n              "),onClick:()=>(e=>{v(e);const s=l({menus:b,permissions:f,key:e});s&&x(s),h(e);const n=i(e);j(n),d()})(e.key),onMouseEnter:()=>{return s=e.key,void m(s);var s},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(X,{className:"text-lg mr-1",icon:"gg:menu-boxed"}),e.nav&&(null==(s=e.nav)?void 0:s.length)>0&&e.nav.map((e,s)=>t.jsxs(n.Fragment,{children:[s>0&&t.jsx("span",{className:"mx-5px",children:">"}),t.jsx("span",{children:e})]},e)),!e.nav&&t.jsx("span",{children:"en"===g?e.labelEn:e.label})]}),t.jsx(X,{className:"icon text-20px p-2px mr-5px",icon:"ant-design:enter-outlined"})]},e.key)})})]})}const Ne="_icon_1eshe_1";function Ce(){const{t:e}=P();return t.jsxs("div",{className:"flex items-center text-dark-50",children:[t.jsxs("span",{className:"mr-14px flex items-center",children:[t.jsx(X,{className:"".concat(Ne," text-20px p-2px mr-5px"),icon:"ant-design:enter-outlined"}),t.jsx("span",{children:e("public.confirm")})]}),t.jsxs("span",{className:"mr-14px flex items-center",children:[t.jsx(X,{className:"".concat(Ne," text-20px p-2px mr-5px"),icon:"mdi-arrow-up-thin"}),t.jsx(X,{className:"".concat(Ne," text-20px p-2px mr-5px"),icon:"mdi-arrow-down-thin"}),t.jsx("span",{children:e("public.switch")})]}),t.jsxs("span",{className:"flex items-center",children:[t.jsx(X,{className:"".concat(Ne," text-20px p-2px mr-5px"),icon:"mdi:keyboard-esc"}),t.jsx("span",{children:e("public.close")})]})]})}function Ae(e){const s=Q(),o=n.useRef(null),{modalRef:d}=e,{t:m}=P(),{permissions:u,menuList:p}=a(),[f,b]=n.useState(""),[x,j]=n.useState(""),[v,g]=n.useState([]),[y,_]=n.useState(!1),k=c(e=>e.setOpenKeys),{addTabs:w,setActiveKey:N}=r(e=>e);n.useImperativeHandle(d,()=>({toggle:()=>{_(!y)}})),n.useLayoutEffect(()=>(y&&requestAnimationFrame(()=>{var e;null==(e=o.current)||e.focus({cursor:"end"})}),()=>{b(""),j(""),g([])}),[y]);const C=()=>{_(!1)},A=()=>{if(x){s(x);const e=l({menus:p,permissions:u,key:x});e&&w(e),N(x);const n=i(x);k(n),C()}},E=O.debounce(e=>{var s;const n=h({menus:p,permissions:u,value:e});(null==n?void 0:n.length)?(j((null==(s=null==n?void 0:n[0])?void 0:s.key)||""),g(n)):(j(""),g([]))},200),[S]=(M={ArrowUp:()=>{if(!v.length)return null;const e=v.findIndex(e=>e.key===x);if(0===e)return null;const s=v[e-1].key;j(s)},ArrowDown:()=>{if(!v.length)return null;const e=v.length-1,s=v.findIndex(e=>e.key===x);if(s===e)return null;const n=v[s+1].key;j(n)},Enter:A},[e=>{var s,n,t,r,a;switch(e.key){case"ArrowUp":null==(s=M.ArrowUp)||s.call(M);break;case"ArrowDown":null==(n=M.ArrowDown)||n.call(M);break;case"ArrowLeft":null==(t=M.ArrowLeft)||t.call(M);break;case"ArrowRight":null==(r=M.ArrowRight)||r.call(M);break;case"Enter":null==(a=M.Enter)||a.call(M)}}]);var M;return n.useEffect(()=>{if(v.length)return window.addEventListener("keydown",S),()=>{window.removeEventListener("keydown",S)}},[v,x,S]),t.jsxs(L,{className:"rounded-100px",open:y,closable:!1,onCancel:C,footer:t.jsx(Ce,{}),children:[t.jsx(z,{ref:o,value:f,placeholder:m("public.menuSearchPlaceholder"),allowClear:!0,prefix:t.jsx(X,{className:"text-lg text-warm-gray-400",icon:"ant-design:search-outlined"}),onChange:e=>{const{value:s}=e.target;b(s),E(s)},onPressEnter:A}),t.jsx(we,{list:v,active:x,onCancel:C,changActive:e=>{j(e)}})]})}function Ee(){const{t:e}=P(),s=n.useRef(null);return t.jsxs(t.Fragment,{children:[t.jsx(B,{title:e("public.search"),children:t.jsx(X,{className:"flex items-center justify-center text-lg mr-3 cursor-pointer",icon:"uil-search",onClick:()=>{var e;null==(e=s.current)||e.toggle()}})}),t.jsx(Ae,{modalRef:s})]})}function Oe(){return t.jsx(B,{title:"Github",children:t.jsx("div",{onClick:()=>{window.open("https://github.com/southliu/react-admin")},children:t.jsx(X,{className:"flex items-center justify-center text-lg mr-3 cursor-pointer",icon:"mdi:github"})})})}const Se=()=>{const[,,e]=v(),s=x(I(e=>e.aliveRef)),{closeAllTab:n,setActiveKey:t}=r(e=>e),a=j(e=>e.setPermissions),o=c(e=>e.setMenuList),i=j(e=>e.clearInfo),l=Q(),d=Z();return[()=>{var r;i(),n(),t(""),o([]),a([]),e(),null==(r=s.current)||r.destroyAll(),l("/login?redirect=".concat(d.pathname).concat(d.search))}]};function Me(e){const{passwordRef:s}=e,{t:r}=P(),[a]=W.useForm(),[c]=Se(),[o,i]=n.useState(!1),[l,d]=n.useState(!1);n.useImperativeHandle(s,()=>({open:()=>{i(!0)}}));const m=()=>{i(!1),null==a||a.resetFields()};return t.jsx(G,{title:r("public.changePassword"),open:o,confirmLoading:l,onOk:()=>{null==a||a.submit()},onCancel:()=>m(),children:t.jsxs(W,{name:"UpdatePassword",form:a,labelWrap:!0,labelCol:{span:5},wrapperCol:{span:19},onFinish:async e=>{if(e.newPassword!==e.confirmPassword)return _.warning({content:r("login.confirmPasswordMessage"),key:"confirmPassword"});try{d(!0);const{code:s,message:n}=await k(e);200===Number(s)&&(m(),_.success(n),c())}finally{d(!1)}},autoComplete:"off",children:[t.jsx(W.Item,{label:r("login.oldPassword"),name:"oldPassword",rules:[{required:!0,message:r("public.pleaseEnter",{name:r("login.password")})},g(r)],children:t.jsx(y,{})}),t.jsx(W.Item,{label:r("login.newPassword"),name:"newPassword",rules:[{required:!0,message:r("public.pleaseEnter",{name:r("login.password")})},g(r)],children:t.jsx(y,{})}),t.jsx(W.Item,{label:r("login.confirmPassword"),name:"confirmPassword",rules:[{required:!0,message:r("public.pleaseEnter",{name:r("login.confirmPassword")})},g(r)],children:t.jsx(y,{})})]})})}function Te(e){const{className:s,list:r}=e,{i18n:c}=P(),{isPhone:o}=a(),[i,l]=n.useState([]),d=n.useCallback(e=>{const s=[];if(!(null==e?void 0:e.length))return[];const n=c.language;for(let t=0;t<(null==e?void 0:e.length);t++){const r=null==e?void 0:e[t],a="en"===n?r.labelEn:r.labelZh;s.push({title:a||""})}return s},[c.language]);return n.useEffect(()=>{l(d(r))},[d,r]),n.useMemo(()=>t.jsx(t.Fragment,{children:!o&&t.jsx("div",{className:"".concat(s," flex items-center text-truncate ellipsis break-all"),children:null==i?void 0:i.map((e,s)=>t.jsxs("span",{children:[0!==s&&t.jsx("span",{className:"px-4px color-#000073 breadcrumb-separator",children:"/"}),t.jsx("span",{className:"px-4px ".concat(s!==i.length-1?"breadcrumb-separator":""),children:e.title})]},s))})}),[i])}const Ke=n.memo(function(){const[e]=Se(),{t:s}=P(),{modal:r}=F.useApp(),{isCollapsed:o,isMaximize:i,username:l,nav:d}=a(),m=n.useRef(null),u=c(e=>e.toggleCollapsed),p=[{key:"password",label:t.jsx("span",{children:s("public.changePassword")}),icon:t.jsx($,{className:"mr-1"})},{key:"logout",label:t.jsx("span",{children:s("public.signOut")}),icon:t.jsx(ee,{className:"mr-1"})}],f=e=>{var s;switch(e.key){case"password":null==(s=m.current)||s.open();break;case"logout":b()}},b=()=>{r.confirm({title:s("public.kindTips"),icon:t.jsx(te,{}),content:s("public.signOutMessage"),onOk(){e()}})},x=()=>n.useMemo(()=>t.jsxs("div",{className:"flex items-center",children:[t.jsx(Oe,{}),t.jsx(Ee,{}),t.jsx(ke,{}),t.jsx(w,{}),t.jsx(N,{}),t.jsx(H,{className:"min-w-50px",menu:{items:p,onClick:f},children:t.jsxs("div",{className:"ant-dropdown-link flex items-center cursor-pointer",onClick:e=>e.preventDefault(),children:[t.jsx("img",{src:"data:image/png;base64,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",width:27,height:27,alt:"Avatar",className:"rounded-1/2 overflow-hidden object-cover bg-light-500"}),t.jsx("span",{className:"ml-2 text-15px min-w-50px truncate",children:l||"south-admin"})]})})]}),[l]),h=()=>t.jsxs("div",{className:"text-lg cursor-pointer",onClick:()=>u(!o),children:[o&&t.jsx(se,{}),!o&&t.jsx(ne,{})]});return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"\n          border-bottom\n          flex\n          items-center\n          justify-between\n          px-6\n          py-6px\n          box-border\n          transition-all\n          ".concat(ye["header-driver"],"\n          ").concat(i?ye.none:"","\n        "),children:[t.jsxs("div",{className:"flex item-center",children:[t.jsx(h,{}),t.jsx(Te,{className:"ml-15px",list:d})]}),t.jsx(x,{})]}),t.jsx(Me,{passwordRef:m})]})}),Xe=({...e})=>{const{attributes:s,listeners:t,setNodeRef:r,transform:a,transition:c}=pe({id:e["data-node-key"]}),o={...e.style,transform:he.Translate.toString(a),transition:c,cursor:"move"};return n.cloneElement(e.children,{ref:r,style:o,...s,...t})};function Ie(e){const{t:s}=P(),{activeKey:n,onOpenChange:c,handleRefresh:o}=e,{pathname:i}=Z(),{tabs:l}=a(),{closeLeft:d,closeOther:m,closeRight:u,closeTabs:p}=r(e=>e),f=x(I(e=>e.aliveRef)),b=Q();return[(e=n)=>{const r=l.findIndex(s=>s.key===e);return[{key:"refresh",label:s("public.reload"),disabled:e!==i,icon:t.jsx(re,{className:"mr-5px transform rotate-270"})},{key:"close_current",label:s("public.closeTab"),disabled:l.length<=1,icon:t.jsx(ae,{className:"mr-5px"})},{key:"close_other",label:s("public.closeOther"),disabled:l.length<=1,icon:t.jsx(ce,{className:"mr-5px transform rotate-90"})},{key:"close_left",label:s("public.closeLeft"),disabled:0===r,icon:t.jsx(oe,{className:"mr-5px transform rotate-270"})},{key:"close_right",label:s("public.closeRight"),disabled:r===l.length-1,icon:t.jsx(oe,{className:"mr-5px transform rotate-90"})}]},(e,s=n)=>{var t,r,a,x;switch(null==c||c(!1),e){case"refresh":o(s);break;case"close_current":if(n===i){const e=l.findIndex(e=>e.key===n),s=l[e>0?e-1:0].key;s&&b(s)}p(s,null==(t=f.current)?void 0:t.destroy);break;case"close_other":m(s,null==(r=f.current)?void 0:r.destroy),b(s);break;case"close_left":d(s,null==(a=f.current)?void 0:a.destroy),b(s);break;case"close_right":u(s,null==(x=f.current)?void 0:x.destroy),b(s)}}]}function Pe(e){const{t:s}=P(),{isRefresh:n,onClick:r}=e;return t.jsx(B,{title:s("public.reload"),placement:"bottom",children:t.jsx(X,{className:"\n          change\n          flex\n          items-center\n          justify-center\n          text-lg\n          cursor-pointer\n          ".concat(n?"animate-spin pointer-events-none":"","\n        "),onClick:()=>r(),icon:"ant-design:reload-outlined"})})}function Re(){const{isMaximize:e}=a(),s=r(e=>e.toggleMaximize),n=()=>{s(!e)};return t.jsxs("div",{className:"text-lg cursor-pointer",children:[t.jsx(X,{style:{display:e?"block":"none"},icon:"ant-design:compress-outlined",onClick:n}),t.jsx(X,{style:{display:e?"none":"block"},icon:"ant-design:expand-outlined",onClick:n})]})}function Be(e){const{activeKey:s,handleRefresh:r}=e,[a,c]=n.useState(!1),o=e=>{c(e)},i={activeKey:s,onOpenChange:o,handleRefresh:r},[l,d]=Ie(i);return t.jsx(H,{trigger:["click"],menu:{items:l(),onClick:e=>d(e.key)},onOpenChange:o,children:t.jsx(X,{className:"\n          flex\n          items-center\n          justify-center\n          text-lg\n          cursor-pointer\n          transition-all\n          transform\n          ".concat(a?"rotate-180":"rotate-0","\n        "),icon:"ant-design:down-outlined"})})}const Le=n.memo(function({aliveRef:e}){const{t:s,i18n:o}=P(),{pathname:u}=Z(),p=Q(),f=le(ue,{activationConstraint:{distance:20,tolerance:10}}),[b,h]=D.useMessage(),[j,v]=n.useState(null),g=n.useRef(null),y=n.useRef(null),_=x(e=>e.setRefresh),{setOpenKeys:k,setSelectedKeys:w}=c(I(e=>({setOpenKeys:e.setOpenKeys,setSelectedKeys:e.setSelectedKeys}))),{tabs:N,activeKey:C,setActiveKey:A,addTabs:E,sortTabs:O,closeTabs:S,setNav:M,switchTabsLang:T}=r(I(e=>({tabs:e.tabs,activeKey:e.activeKey,setActiveKey:e.setActiveKey,addTabs:e.addTabs,sortTabs:e.sortTabs,closeTabs:e.closeTabs,setNav:e.setNav,switchTabsLang:e.switchTabsLang}))),{permissions:K,isMaximize:X,menuList:R}=a(),B=n.useMemo(()=>new Map(N.map(e=>[e.key,e.urlParams||""])),[N]),L=n.useCallback((e=u)=>{if(!K.length||"/"===e)return;const s=l({menus:R,permissions:K,key:e});(null==s?void 0:s.key)?(A(s.key),M(s.nav),E(s)):A(e)},[K,R,u,A,M,E]);n.useEffect(()=>{L()},[]),n.useEffect(()=>{T(o.language)},[o.language,T]);const z=n.useCallback(e=>{A(e),requestAnimationFrame(()=>{const n=B.get(e)||"";p("".concat(e).concat(n));const t=d(N,e);t&&m(s,t)})},[B,p,A]),W=n.useCallback(e=>{const s=i(e);k(s),w(e),requestAnimationFrame(()=>{z(e)})},[z]),F=n.useCallback(s=>{var n;if(C===s){const e=N.findIndex(e=>e.key===C),s=N[e>0?e-1:0].key;s&&(L(s),p(s))}S(s,null==(n=e.current)?void 0:n.destroy)},[S,e,C]),q=n.useCallback((e,s)=>{"remove"===s&&F(e)},[F]),V=n.useCallback((n=C)=>{var t;"string"==typeof n&&(g.current||j||(_(!0),null==(t=e.current)||t.refresh(n),g.current=setTimeout(()=>{b.success({content:s("public.refreshSuccessfully"),key:"refresh"}),_(!1),g.current=null},300),j&&clearTimeout(j),v(setTimeout(()=>{v(null)},1e3))))},[C,j,b,s,_,e]),J=n.useCallback(({active:e,over:s})=>{if(e.id===(null==s?void 0:s.id))return;const n=N.findIndex(s=>s.key===e.id),t=N.findIndex(e=>e.key===(null==s?void 0:s.id)),r=fe(N,n,t);O(r)},[N,O]),Y=n.useMemo(()=>({activeKey:C,handleRefresh:V}),[C,V]),[G,$]=Ie(Y),ee=n.useMemo(()=>(e,s)=>t.jsx(de,{sensors:[f],onDragEnd:J,collisionDetection:me,children:t.jsx(be,{items:N.map(e=>e.key),strategy:xe,children:t.jsx(s,{...e,children:e=>n.createElement(Xe,{...e.props,key:e.key},t.jsx("div",{children:t.jsx(H,{menu:{items:G(e.key),onClick:s=>$(s.key,e.key)},trigger:["contextMenu"],children:e})}))})})}),[f,N,J,G,$]),se=n.useMemo(()=>[{element:t.jsx(Pe,{isRefresh:!!j,onClick:V})},{element:t.jsx(Be,{activeKey:C,handleRefresh:V})},{element:t.jsx(Re,{})}],[j,V,C]);return n.useEffect(()=>()=>{g.current&&(clearTimeout(g.current),g.current=null),j&&clearTimeout(j)},[j]),t.jsxs("div",{ref:y,className:"\n        w-[calc(100%-5px)]\n        flex\n        items-center\n        justify-between\n        mr-2\n        transition-all\n        ".concat(X?ye["con-maximize"]:"","\n      "),children:[h,t.jsx("div",{className:"w-full",children:N.length>0?t.jsx(U,{hideAdd:!0,className:"h-30px py-0 ".concat(ye["layout-tabs"]),items:N,onChange:W,activeKey:C,tabPlacement:"top",type:"editable-card",onEdit:q,renderTabBar:ee,tabBarExtraContent:t.jsx("div",{className:"flex",children:se.map((e,s)=>t.jsx("div",{className:"\n                      left-divide-tab\n                      change\n                      divide-solid\n                      w-36px\n                      h-36px\n                      hover:opacity-70\n                      flex\n                      place-content-center\n                      items-center\n                    ",children:e.element},s))})}):null})]})}),ze=({error:e})=>{const[s]=Se(),{t:n}=P();return t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(q,{status:"error",title:n("public.pageErrorTitle"),subTitle:t.jsxs("div",{className:"flex",children:[t.jsx(B,{title:String(e),placement:"top",children:t.jsx(ie,{className:"mr-5px rotate-y-180"})}),n("public.pagepageErrorSubTitle")]}),extra:[t.jsx(V,{type:"primary",icon:t.jsx(re,{}),onClick:()=>{window.location.reload()},children:n("public.refreshPage")},"refresh"),t.jsx(V,{icon:t.jsx(ee,{}),onClick:s,children:n("public.signOut")},"hard-refresh")]})})};class We extends n.Component{constructor(){super(...arguments),s(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(){return{hasError:!0,error:null}}componentDidCatch(e,s){this.setState({error:e}),this.sendErrorLog(e,s)}async sendErrorLog(e,s){try{const n=j.getState().userInfo,t={username:(null==n?void 0:n.username)||"anonymous",ip:"",method:"",url:window.location.href,params:JSON.stringify({componentStack:s.componentStack,content:JSON.stringify(s)}),userAgent:navigator.userAgent,status:"500",error:e.toString(),latency:0,type:3};await ve(t)}catch(n){}}render(){return this.state.hasError?t.jsx(ze,{error:this.state.error}):this.props.children}}const Fe=n.memo(function(){const[e]=v(),{t:s}=P(),{pathname:r}=Z(),o=e(),i=Y(),l=S(),[d,m]=n.useState(!0),[u,p]=D.useMessage(),f=x(I(e=>e.setAliveRef)),b=x(I(e=>e.aliveRef)),{setPermissions:h,setUserInfo:g}=j(I(e=>({setPermissions:e.setPermissions,setUserInfo:e.setUserInfo}))),{menuList:y,setMenuList:_,toggleCollapsed:k,togglePhone:w}=c(I(e=>({menuList:e.menuList,setMenuList:e.setMenuList,toggleCollapsed:e.toggleCollapsed,togglePhone:e.togglePhone}))),{permissions:N,userId:K,isMaximize:X,isCollapsed:R,isPhone:B}=a(),L=n.useDeferredValue(r),z=n.useMemo(()=>L,[L]);n.useEffect(()=>{l.current&&!b.current&&f(l)},[l.current]);const W=n.useCallback(async()=>{try{m(!0);const{code:e,data:s}=await C({refresh_cache:!1});if(200!==Number(e))return;const{user:n,permissions:t}=s;g(n),h(t)}catch(e){h([])}finally{m(!1)}},[]),F=n.useCallback(async()=>{try{m(!0);const{code:e,data:s}=await A();if(200!==Number(e))return;_(s||[])}finally{m(!1)}},[]);n.useEffect(()=>{o&&!K&&(W(),F())},[]),n.useEffect(()=>{var e,n;return null==(n=null==(e=T)?void 0:e.done)||n.call(e),requestAnimationFrame(()=>{E(s,u)}),()=>{var e,s;null==(s=null==(e=T)?void 0:e.start)||s.call(e)}},[r]);const H=n.useCallback(O.debounce(()=>{const e=window.innerWidth<=768;e&&k(!0),w(e)},500),[k,w]);n.useEffect(()=>(H(),window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H),H.cancel()}),[H]);const U=n.useMemo(()=>"\n        border-bottom\n        transition-all\n        z-15\n        ".concat(ye.header,"\n        ").concat(R?ye["header-close-menu"]:"","\n        ").concat(X?ye["header-none"]:"","\n        ").concat(B?"!left-0 z-999":"","\n      "),[R,X,B]),q=n.useMemo(()=>"\n        overflow-auto\n        transition-all\n        ".concat(ye.con,"\n        ").concat(X?ye["con-maximize"]:"","\n        ").concat(R?ye["con-close-menu"]:"","\n        ").concat(B?"!left-0 !w-full":"","\n      "),[X,R,B]);return t.jsxs("div",{id:"layout",children:[p,N.length>0&&y.length>0&&t.jsx(_e,{}),t.jsxs("div",{className:ye.layout_right,children:[t.jsxs("div",{id:"header",className:U,children:[t.jsx(Ke,{}),N.length>0&&y.length>0&&t.jsx(Le,{aliveRef:l})]}),t.jsxs("div",{id:"layout-content",className:q,children:[d&&0===N.length&&t.jsx(J,{active:!0,className:"p-30px",paragraph:{rows:10}}),!d&&0===N.length&&t.jsx(je,{}),t.jsx(M,{aliveRef:l,activeCacheKey:z,max:10,children:N.length>0&&t.jsx(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,ease:"easeOut"},children:t.jsx(We,{children:t.jsx(n.Suspense,{fallback:t.jsx("div",{className:"p-30px",children:t.jsx(J,{active:!0,paragraph:{rows:10}})}),children:i})})},L)})]})]})]})});export{Fe as default};
