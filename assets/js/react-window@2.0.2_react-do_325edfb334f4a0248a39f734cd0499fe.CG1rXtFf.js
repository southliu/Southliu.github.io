import{r as e,j as t}from"./react@19.1.1.DAMsdXqD.js";const n=typeof window<"u"?e.useLayoutEffect:e.useEffect;function i(e){if(void 0!==e)switch(typeof e){case"number":return e;case"string":if(e.endsWith("px"))return parseFloat(e)}}function o({containerElement:e,direction:t,isRtl:n,scrollOffset:i}){return i}function s(e,t="Assertion error"){if(!e)throw Error(t)}function r({cachedBounds:e,itemCount:t,itemSize:n}){if(0===t)return 0;if("number"==typeof n)return t*n;{const n=e.get(0===e.size?0:e.size-1);s(void 0!==n,"Unexpected bounds cache miss");return t*((n.scrollOffset+n.size)/e.size)}}function c({cachedBounds:e,containerScrollOffset:t,containerSize:n,itemCount:i,overscanCount:o}){const s=i-1;let r=0,c=-1,l=0;for(;l<s;){const n=e.get(l);if(n.scrollOffset+n.size>t)break;l++}for(r=l,r=Math.max(0,r-o);l<s;){const i=e.get(l);if(i.scrollOffset+i.size>=t+n)break;l++}return c=Math.min(s,l),c=Math.min(i-1,c+o),r<0?[0,-1]:[r,c]}function l({itemCount:t,itemProps:n,itemSize:i}){return e.useMemo(()=>function({itemCount:e,itemProps:t,itemSize:n}){const i=new Map;return{get(o){for(s(o<e,`Invalid index ${o}`);i.size-1<o;){const e=i.size;let r;switch(typeof n){case"function":r=n(e,t);break;case"number":r=n}if(0===e)i.set(e,{size:r,scrollOffset:0});else{const t=i.get(e-1);s(void 0!==t,`Unexpected bounds cache miss for index ${o}`),i.set(e,{scrollOffset:t.scrollOffset+t.size,size:r})}}const r=i.get(o);return s(void 0!==r,`Unexpected bounds cache miss for index ${o}`),r},set(e,t){i.set(e,t)},get size(){return i.size}}}({itemCount:t,itemProps:n,itemSize:i}),[t,n,i])}function a({containerElement:t,containerStyle:a,defaultContainerSize:u=0,direction:f,isRtl:d=!1,itemCount:h,itemProps:m,itemSize:g,onResize:z,overscanCount:p}){const[v,w]=e.useState([0,-1]),[S,x]=[Math.min(h-1,v[0]),Math.min(h-1,v[1])],{height:C=u,width:b=u}=function({box:t,defaultHeight:o,defaultWidth:s,disabled:r,element:c,mode:l,style:a}){const{styleHeight:u,styleWidth:f}=e.useMemo(()=>({styleHeight:i(a?.height),styleWidth:i(a?.width)}),[a?.height,a?.width]),[d,h]=e.useState({height:o,width:s}),m=r||void 0!==u||"only-width"===l||void 0!==u&&void 0!==f;return n(()=>{if(null===c||m)return;const e=new ResizeObserver(e=>{for(const t of e){const{contentRect:e,target:n}=t;c===n&&h(t=>t.height===e.height&&t.width===e.width?t:{height:e.height,width:e.width})}});return e.observe(c,{box:t}),()=>{e?.unobserve(c)}},[t,m,c,u,f]),e.useMemo(()=>({height:u??d.height,width:f??d.width}),[d,u,f])}({defaultHeight:u,defaultWidth:void 0,element:t,mode:"only-height",style:a}),y=e.useRef({height:0,width:0}),O=C,E=function({containerSize:e,itemSize:t}){let n;"string"==typeof t?(s(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),s(void 0!==e,"Container size must be defined if a percentage item size is specified"),n=e*parseInt(t)/100):n=t;return n}({containerSize:O,itemSize:g});e.useLayoutEffect(()=>{if("function"==typeof z){const e=y.current;(e.height!==C||e.width!==b)&&(z({height:C,width:b},{...e}),e.height=C,e.width=b)}},[C,z,b]);const R=l({itemCount:h,itemProps:m,itemSize:E}),M=e.useCallback(e=>R.get(e),[R]),I=e.useCallback(()=>r({cachedBounds:R,itemCount:h,itemSize:E}),[R,h,E]),k=e.useCallback(e=>{const n=o({containerElement:t,direction:f,isRtl:d,scrollOffset:e});return c({cachedBounds:R,containerScrollOffset:n,containerSize:O,itemCount:h,overscanCount:p})},[R,t,O,f,d,h,p]);n(()=>{w(k(t?.scrollTop??0))},[t,f,k]),n(()=>{if(!t)return;const e=()=>{w(e=>{const{scrollLeft:n,scrollTop:i}=t,s=o({containerElement:t,direction:f,isRtl:d,scrollOffset:i}),r=c({cachedBounds:R,containerScrollOffset:s,containerSize:O,itemCount:h,overscanCount:p});return r[0]===e[0]&&r[1]===e[1]?e:r})};return t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e)}},[R,t,O,f,h,p]);const B=function(t){const i=e.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return n(()=>{i.current=t},[t]),e.useCallback(e=>i.current?.(e),[i])}(({align:e="auto",containerScrollOffset:n,index:i})=>{let s=function({align:e,cachedBounds:t,index:n,itemCount:i,itemSize:o,containerScrollOffset:s,containerSize:c}){const l=r({cachedBounds:t,itemCount:i,itemSize:o}),a=t.get(n),u=Math.max(0,Math.min(l-c,a.scrollOffset)),f=Math.max(0,a.scrollOffset-c+a.size);switch("smart"===e&&(e=s>=f&&s<=u?"auto":"center"),e){case"start":return u;case"end":return f;case"center":return a.scrollOffset<=c/2?0:a.scrollOffset+a.size/2>=l-c/2?l-c:a.scrollOffset+a.size/2-c/2;default:return s>=f&&s<=u?s:s<f?f:u}}({align:e,cachedBounds:R,containerScrollOffset:n,containerSize:O,index:i,itemCount:h,itemSize:E});if(t){if(s=o({containerElement:t,direction:f,isRtl:d,scrollOffset:s}),"function"!=typeof t.scrollTo){const e=k(s);(e[0]!==S||e[1]!==x)&&w(e)}return s}});return{getCellBounds:M,getEstimatedSize:I,scrollToIndex:B,startIndex:S,stopIndex:x}}function u(e,t){if(e===t)return!0;if(!!e!=!!t||(s(void 0!==e),s(void 0!==t),Object.keys(e).length!==Object.keys(t).length))return!1;for(const n in e)if(!Object.is(t[n],e[n]))return!1;return!0}function f(e,t){const{style:n,...i}=e,{style:o,...s}=t;return u(n,o)&&u(i,s)}function d({className:n,defaultHeight:i=0,listRef:o,onResize:s,onRowsRendered:r,overscanCount:c=3,rowComponent:l,rowCount:u,rowHeight:d,rowProps:h,style:m,...g}){const z=function(t){return e.useMemo(()=>t,Object.values(t))}(h),p=e.useMemo(()=>e.memo(l,f),[l]),[v,w]=e.useState(null),{getCellBounds:S,getEstimatedSize:x,scrollToIndex:C,startIndex:b,stopIndex:y}=a({containerElement:v,defaultContainerSize:i,direction:"vertical",itemCount:u,itemProps:z,itemSize:d,onResize:s,overscanCount:c});e.useImperativeHandle(o,()=>({get element(){return v},scrollToRow({align:e="auto",behavior:t="auto",index:n}){const i=C({align:e,containerScrollOffset:v?.scrollTop??0,index:n});"function"==typeof v?.scrollTo&&v.scrollTo({behavior:t,top:i})}}),[v,C]),e.useEffect(()=>{b>=0&&y>=0&&r&&r({startIndex:b,stopIndex:y})},[r,b,y]);const O=e.useMemo(()=>{const t=[];if(u>0)for(let n=b;n<=y;n++){const i=S(n);t.push(e.createElement(p,{...z,key:n,index:n,style:{position:"absolute",left:0,transform:`translateY(${i.scrollOffset}px)`,height:i.size,width:"100%"}}))}return t},[p,S,u,z,b,y]);return t.jsx("div",{...g,className:n,ref:w,style:{...m,maxHeight:"100%",flexGrow:1,overflowY:"auto"},children:t.jsx("div",{className:n,style:{height:x(),position:"relative",width:"100%"},children:O})})}export{d as b};
