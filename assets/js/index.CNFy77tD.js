import{r as e,j as t}from"./react@19.2.1.BpVBN_43.js";import{tableColumns as s,searchList as c,createList as r}from"./model.F-Jy5erJ.js";import{b as a,A as o,I as i,a as n,h as m,B as p,E as d,v as f,w as _,x as b,y as j,z as l}from"./index.8JWnWKgp.js";import u from"./PermissionDrawer.BDGAmq5m.js";import{e as g,u as y}from"./react-router@7.10.1_react-d_28d80246859cf33d8fbe053d884cb773.DP07zDcN.js";import{c as h,B as x}from"./BaseContent.CNpIt4M1.js";import{U as S,D as w,B as v}from"./BasePagination.DHWt2dD1.js";import{B}from"./BaseCard.BFOTiB0d.js";import{B as k}from"./BaseSearch.B5-jqzXc.js";import{B as C}from"./BaseTable.BnP2NwP-.js";import{B as z}from"./BaseForm.msrxqJdq.js";import{u as D}from"./react-i18next@16.3.5_i18nex_6a04c68a8718b5368fbd4a4a7e2f7a39.6o9hkwuZ.js";import{s as N,F as P,B as $}from"./antd@6.0.1_react-dom@19.2.1_react@19.2.1__react@19.2.1.DBoZh3Bz.js";import"./@babel_runtime@7.28.4.CP2Urufz.js";import"./constants.5OLMXA36.js";import"./role.xhGcryhW.js";import"./react-dom@19.2.1_react@19.2.1.BLi5rGn2.js";import"./scheduler@0.27.0.6ULW7vKx.js";import"./nprogress@0.2.0.Bp8DQhmx.js";import"./i18next-http-backend@3.0.2.DCFvlnJK.js";import"./@loadable_component@5.16.7_react@19.2.1.D6iZK20Y.js";import"./hoist-non-react-statics@3.3.2.DE2tws5l.js";import"./react-is@16.13.1.yJGO6Amu.js";import"./crypto-js@4.2.0.CGlJtoA-.js";import"./axios@1.13.2.Dos3PyFQ.js";import"./lodash@4.17.21.3v0SSdHj.js";import"./zustand@5.0.9_@types_react@_5a4645d65a797ccff52e2dcdffe57df1.-IXQ0wfi.js";import"./@iconify_react@6.0.2_react@19.2.1.c6uJSfFo.js";import"./react-activation@0.13.4_react@19.2.1.CGk5Ru9b.js";import"./szfe-tools@0.0.0-beta.7.CrNqjiTu.js";import"./react-node-key@0.4.0_react@19.2.1.BJw59f7_.js";import"./react-draggable@4.5.0_react_2b3e967d4472c3148197a97057d4a6f3.B1eN-RL4.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./clsx@2.1.1.BvmCeSbq.js";import"./@ant-design_icons@6.1.0_rea_8404c2c1425faef9f07b31b9cbb69cb5.DQsWeA2i.js";import"./@ant-design_icons-svg@4.4.2.CjW3sjtx.js";import"./@ant-design_colors@8.0.0.BwY8fxoK.js";import"./@ant-design_fast-color@3.0.0.ii8f2EEn.js";import"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import"./react-is@18.3.1.USR0mOhp.js";import"./is-mobile@5.0.0.Unph70TZ.js";import"./@dnd-kit_core@6.3.1_react-d_4aa55f773ec51751575225d6fce068db.CdbN8ddW.js";import"./@dnd-kit_utilities@3.2.2_react@19.2.1.D0W-j97z.js";import"./@dnd-kit_accessibility@3.1.1_react@19.2.1.2upbYoCo.js";import"./@dnd-kit_sortable@10.0.0_@d_3f5c0d7c14b28ec4620c9987407d5443.pT65WIHY.js";import"./dayjs@1.11.19.D35XPvIL.js";import"./@ant-design_cssinjs@2.0.1_r_e9b0abb2c23d4932c712aab42225cc59.LsKC9-t0.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.CDtraqjp.js";import"./i18next@25.7.1_typescript@5.9.3.BLyt2ERz.js";import"./i18next-browser-languagedetector@8.2.0.F0gxWJsw.js";import"./@ant-design_cssinjs-utils@2_9a9f29e316813f035630853fe53c9c4d.Cb0O6jGv.js";import"./@rc-component_resize-observ_eaaccb47489da2719f35257c4ad9d3c9.BynXlAVv.js";import"./@rc-component_motion@1.1.6__0afcbe001b0ce065bd610efbbf939bf0.BsUikez1.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./@rc-component_pagination@1._da548adbdec24c1ceb8860889bb10291.BBFHyFZI.js";import"./@rc-component_picker@1.7.1__0e9cf6a38738c47d17e1f6335fbd76f2.BiLX_6EX.js";import"./@rc-component_trigger@3.7.1_9234358db6ac4d4b221fe18208ab417c.KUVSKQ8O.js";import"./@rc-component_portal@2.0.1__3d144a3e75e5531d8ca8009183b58415.Bf4rG5sj.js";import"./rc-overflow@1.5.0_react-dom_ed71e382df4fb2eccbb1a2ad50316608.CUEIhwYs.js";import"./classnames@2.5.1.BUu94-of.js";import"./rc-resize-observer@1.4.3_re_c0cf11ef3da119c6ddb3f7bd78b08bbc.DMlIDS1j.js";import"./rc-util@5.44.4_react-dom@19.2.1_react@19.2.1__react@19.2.1.BW05PQVc.js";import"./resize-observer-polyfill@1.5.1.C7U_o75s.js";import"./@rc-component_notification@_904c51f0b6cfd6ac25e0ccf33e3fb716.B6Lv-UE-.js";import"./@rc-component_color-picker@_7d324b55ed50e79056628e5ca24178f6.B_tIIRLk.js";import"./@rc-component_collapse@1.1._fd83d03b57404069744ac401ccc4fdc1.Bbuztd7K.js";import"./@rc-component_dialog@1.5.1__3d57f72e6ecc187f802362c45a3feefb.D8gIazNv.js";import"./@rc-component_form@1.4.0_re_d5dc945cdb9f7cf4a69397e2e6217bca.BawIMMVq.js";import"./@rc-component_async-validator@5.0.4.Cfriz9qX.js";import"./@rc-component_select@1.2.7__74ed97d747dedabe4414d1f4ea394a59.wDk9W6qW.js";import"./rc-virtual-list@3.19.2_reac_96eb09879a1adfd43f893d656df94dba.D76jc0i_.js";import"./@rc-component_tooltip@1.3.4_18e8c015626c10aeeb8a13fadcb8965f.CHhst0qZ.js";import"./@rc-component_dropdown@1.0._dfb11d5513a3ff65f1ee79a1c3b8ef68.ClZ4PFXF.js";import"./@rc-component_menu@1.1.5_re_da6e9a4264264ff4447421a5fe5a070f.YCn4PgqI.js";import"./@rc-component_checkbox@1.0._9fc217456cf28f0ef832c411b360adfb.DF6AtJgH.js";import"./@rc-component_tabs@1.6.0_re_3e3066af1803020447a44be28ec1c5cf.BQ8_Fzc2.js";import"./@ant-design_react-slick@1.1.2_react@19.2.1.BkiyYRpn.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./json2mq@0.2.0.BNZ7557K.js";import"./string-convert@0.2.1.CCzxSb8Y.js";import"./@rc-component_cascader@1.8._89dcab64a74c5d17e69013abeec7cbd3.Dm0S5tMI.js";import"./@rc-component_tree@1.0.2_re_2bf9ae000d6effb62cf123da5373636b.B8saYfiW.js";import"./@rc-component_segmented@1.2_9135a1b1cab33f1d5c12264e541222c5.DxNM52Dd.js";import"./@rc-component_input-number@_deeb078a8e029a577d0e5a366431aef5.CJgpAFWa.js";import"./@rc-component_mini-decimal@1.1.0.D-IRkHTN.js";import"./@rc-component_input@1.1.2_r_1c03f691cf199869e40e9ad757b3122a.B576X-cK.js";import"./@rc-component_slider@1.0.1__585966cea9b45ea492d828ae51c5f103.Bw2Ry10Z.js";import"./@rc-component_drawer@1.2.0__116b6c750b766cd1da4b4412b1bcdde1.C47p2oiZ.js";import"./@rc-component_image@1.5.2_r_26960469be23d275a32b0a015d6e38d9.Dv51JK7j.js";import"./@rc-component_textarea@1.1._a474e38c852e3eae75fb9bb75f036798.Cny0KHsH.js";import"./@rc-component_mentions@1.5._eb234a758a4368afc8c4cac8b20591c6.CIczR-BF.js";import"./@rc-component_progress@1.0._bbcdeb61fae12c163140dbc1b62b7f3b.C1_gIh7E.js";import"./@rc-component_qrcode@1.1.1__593c67c937fcd291c823810f5c20edfe.eDJ-VKXO.js";import"./@rc-component_rate@1.0.1_re_d3bdd48114b25c9810ebc615f9835b1c.v2XC5zmN.js";import"./@rc-component_steps@1.2.2_r_38b08c68d545d1165c3402cca9043916.Chm741k_.js";import"./@rc-component_switch@1.0.3__5d7ede7719d1a50fe09cad1333bf1c7a.CBSZbsFB.js";import"./@rc-component_table@1.8.2_r_d924365f5e19588ccab1d2d171a7f4bd.klH9zPOm.js";import"./@rc-component_context@2.0.1_8204475ea6497a320048a1e433f25db5.CV531UhE.js";import"./@rc-component_tour@2.2.1_re_2186ac0c4518b835420928b9ffca92bf.Qxajn9U7.js";import"./@rc-component_tree-select@1_1fa34fa858d955377eaae458f0dd9ff7.9Wpww8Yq.js";import"./@rc-component_upload@1.1.0__f24328fbe7273f316f83d574b26db294.TX6xMY7Q.js";import"./@rc-component_mutate-observ_badcee967ad82938f7d166bf4dc045ea.BMPLWAev.js";import"./use-sync-external-store@1.6.0_react@19.2.1.CQn-Ihhp.js";import"./MenuAuthorize.BTpEGYjD.js";import"./helper.C_zKYIgi.js";import"./BaseTimeRangePicker.BZI--ryT.js";import"./react-resizable@3.0.5_react_4d5eebc528be946ebf671fb913f92086.-x7xEgkT.js";const E={status:1};function F(){const{t:F}=D(),L=e.useRef(null),[O]=(()=>{const[,e]=g(),{pathname:t}=y(),{setTabs:s}=a(e=>e);return[c=>{const r=Object.fromEntries(Object.entries(c).filter(([,e])=>void 0!==e));let a=new URLSearchParams(r).toString();a?.length&&(a=`?${a}`),e(r),s(t,a)}]})(),R=s(F,function(e,s){return t.jsxs("div",{className:"flex flex-wrap gap-5px",children:[!0===ye.permission&&t.jsx($,{className:"small-btn",onClick:()=>xe(s.id),children:F("system.permissions")}),!0===ye.update&&t.jsx(S,{onClick:()=>Se(s.id)}),!0===ye.delete&&t.jsx(w,{name:s.username,handleDelete:()=>we(s.id)})]})}),[T,q]=N.useMessage(),[A,I]=e.useState(!1),[K,M]=e.useState(!1),[U,G]=e.useState(!1),[W,H]=e.useState(!1),[J,Q]=e.useState(o(F)),[V,X]=e.useState(""),[Y,Z]=e.useState(E),[ee,te]=e.useState({}),[se,ce]=e.useState(i.page),[re,ae]=e.useState(i.pageSize),[oe,ie]=e.useState(0),[ne,me]=e.useState([]),[pe,de]=e.useState(""),[fe,_e]=e.useState(!1),[be,je]=e.useState([]),[le]=P.useForm(),{permissions:ue}=n(),ge="/authority/user",ye={page:h(`${ge}/index`,ue),create:h(`${ge}/create`,ue),update:h(`${ge}/update`,ue),delete:h(`${ge}/delete`,ue),permission:h(`${ge}/authority`,ue)},he=e.useCallback(async()=>{const e={...ee,page:se,pageSize:re};try{M(!0);const{code:t,data:s}=await m(e);if(200!==Number(t))return;const{items:c,total:r}=s;ie(r||0),me(c||[])}finally{I(!1),M(!1)}},[se,re,ee]);e.useEffect(()=>{A&&he()},[he,A]);e.useEffect(()=>{ye.page&&he()},[ye.page]);const xe=async e=>{de(e),_e(!0)},Se=async e=>{try{H(!0),Q(d(F,e)),X(e),G(!0);const{code:t,data:s}=await f(e);if(200!==Number(t))return;Z(s)}finally{G(!1)}},we=async e=>{try{M(!0);const{code:t,message:s}=await _(e);200===Number(t)&&(T.success(s||F("public.successfullyDeleted")),he())}finally{M(!1)}},ve={selectedRowKeys:be,onChange:e=>{je(e)}};const Be=t.jsx(w,{isIcon:!0,isLoading:K,btnType:"batchDelete",handleDelete:async()=>{try{if(!be.length)return T.warning({content:F("public.tableSelectWarning"),key:"pleaseSelect"});M(!0);const e={ids:be},{code:t,message:s}=await l(e);200===Number(t)&&(T.success(s||F("public.successfullyDeleted")),he())}finally{M(!1)}}});return t.jsxs(x,{isPermission:ye.page,children:[q,t.jsx(B,{children:t.jsx(k,{list:c(F),data:ee,type:"grid",isLoading:K,handleFinish:e=>{ce(1),te(e),O(e),I(!0)}})}),t.jsxs(B,{className:"mt-10px",children:[t.jsx(C,{isLoading:K,isCreate:ye.create,columns:R,dataSource:ne,rowSelection:ve,leftContent:Be,rightContent:t.jsx("div",{children:"（搜索将参数放入url）"}),getPage:he,onCreate:()=>{H(!0),Q(o(F)),X(""),Z(E)}}),t.jsx(v,{disabled:K,current:se,pageSize:re,total:oe,onChange:(e,t)=>{ce(e),ae(t),I(!0)}})]}),t.jsx(p,{title:J,open:W,confirmLoading:U,onOk:()=>{L.current?.submit()},onCancel:()=>{H(!1)},children:t.jsx(z,{form:le,ref:L,list:r(F,!V),labelCol:{span:4},data:Y,handleFinish:async e=>{try{G(!0);const t=()=>V?b(V,e):j(e),{code:s,message:c}=await t();if(200!==Number(s))return;T.success(c||F("public.successfulOperation")),H(!1),he()}finally{G(!1)}}})}),t.jsx(u,{isOpen:fe,id:pe,onClose:()=>{_e(!1)}})]})}export{F as default};
