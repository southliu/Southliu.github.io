import{g as e,f as t,k as n,h as o}from"./@babel_runtime@7.28.3.ESkOsrAB.js";import{P as a}from"./@rc-component_portal@1.1.2__12f016ef3dd10f3f947eb4a97a9aa58d.RMRqf7sY.js";import{r,e as l}from"./react@19.1.1.osUeTYwR.js";import{c as s}from"./classnames@2.5.1.C0tKfs1P.js";import{h as c,B as i,p as u,H as m,K as d}from"./rc-util@5.44.4_react-dom@19.1.1_react@19.1.1__react@19.1.1.BCDSZbSC.js";import{C as f}from"./rc-motion@2.9.5_react-dom@19.1.1_react@19.1.1__react@19.1.1.ClrEiIOp.js";var v=r.createContext({});function p(e,t,n){var o=t;return!o&&n&&(o="".concat(e,"-").concat(n)),o}function y(e,t){var n=e["page".concat(t?"Y":"X","Offset")],o="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var a=e.document;"number"!=typeof(n=a.documentElement[o])&&(n=a.body[o])}return n}const b=r.memo(function(e){return e.children},function(e,t){return!t.shouldUpdate});var C={width:0,height:0,overflow:"hidden",outline:"none"},N={outline:"none"},E=l.forwardRef(function(o,a){var u=o.prefixCls,m=o.className,d=o.style,f=o.title,p=o.ariaId,y=o.footer,E=o.closable,h=o.closeIcon,g=o.onClose,k=o.children,x=o.bodyStyle,w=o.bodyProps,R=o.modalRender,I=o.onMouseDown,P=o.onMouseUp,_=o.holderRef,S=o.visible,j=o.forceRender,D=o.width,M=o.height,O=o.classNames,T=o.styles,A=l.useContext(v).panel,U=c(_,A),B=r.useRef(),V=r.useRef();l.useImperativeHandle(a,function(){return{focus:function(){var e;null===(e=B.current)||void 0===e||e.focus({preventScroll:!0})},changeActive:function(e){var t=document.activeElement;e&&t===V.current?B.current.focus({preventScroll:!0}):e||t!==B.current||V.current.focus({preventScroll:!0})}}});var z={};void 0!==D&&(z.width=D),void 0!==M&&(z.height=M);var K=y?l.createElement("div",{className:s("".concat(u,"-footer"),null==O?void 0:O.footer),style:e({},null==T?void 0:T.footer)},y):null,L=f?l.createElement("div",{className:s("".concat(u,"-header"),null==O?void 0:O.header),style:e({},null==T?void 0:T.header)},l.createElement("div",{className:"".concat(u,"-title"),id:p},f)):null,H=r.useMemo(function(){return"object"===t(E)&&null!==E?E:E?{closeIcon:null!=h?h:l.createElement("span",{className:"".concat(u,"-close-x")})}:{}},[E,h,u]),F=i(H,!0),W="object"===t(E)&&E.disabled,X=E?l.createElement("button",n({type:"button",onClick:g,"aria-label":"Close"},F,{className:"".concat(u,"-close"),disabled:W}),H.closeIcon):null,Y=l.createElement("div",{className:s("".concat(u,"-content"),null==O?void 0:O.content),style:null==T?void 0:T.content},X,L,l.createElement("div",n({className:s("".concat(u,"-body"),null==O?void 0:O.body),style:e(e({},x),null==T?void 0:T.body)},w),k),K);return l.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":f?p:null,"aria-modal":"true",ref:U,style:e(e({},d),z),className:s(u,m),onMouseDown:I,onMouseUp:P},l.createElement("div",{ref:B,tabIndex:0,style:N},l.createElement(b,{shouldUpdate:S||j},R?R(Y):Y)),l.createElement("div",{tabIndex:0,ref:V,style:C}))}),h=r.forwardRef(function(t,a){var l=t.prefixCls,c=t.title,i=t.style,u=t.className,m=t.visible,d=t.forceRender,v=t.destroyOnClose,p=t.motionName,b=t.ariaId,C=t.onVisibleChanged,N=t.mousePosition,h=r.useRef(),g=r.useState(),k=o(g,2),x=k[0],w=k[1],R={};function I(){var e,t,n,o,a,r=(e=h.current,t=e.getBoundingClientRect(),n={left:t.left,top:t.top},o=e.ownerDocument,a=o.defaultView||o.parentWindow,n.left+=y(a),n.top+=y(a,!0),n);w(N&&(N.x||N.y)?"".concat(N.x-r.left,"px ").concat(N.y-r.top,"px"):"")}return x&&(R.transformOrigin=x),r.createElement(f,{visible:m,onVisibleChanged:C,onAppearPrepare:I,onEnterPrepare:I,forceRender:d,motionName:p,removeOnLeave:v,ref:h},function(o,m){var d=o.className,f=o.style;return r.createElement(E,n({},t,{ref:a,title:c,ariaId:b,prefixCls:l,holderRef:m,style:e(e(e({},f),i),R),className:s(u,d)}))})});h.displayName="Content";var g=function(t){var o=t.prefixCls,a=t.style,l=t.visible,c=t.maskProps,i=t.motionName,u=t.className;return r.createElement(f,{key:"mask",visible:l,motionName:i,leavedClassName:"".concat(o,"-mask-hidden")},function(t,l){var i=t.className,m=t.style;return r.createElement("div",n({ref:l,style:e(e({},m),a),className:s("".concat(o,"-mask"),i,u)},c))})},k=function(t){var a=t.prefixCls,l=void 0===a?"rc-dialog":a,c=t.zIndex,f=t.visible,v=void 0!==f&&f,y=t.keyboard,b=void 0===y||y,C=t.focusTriggerAfterClose,N=void 0===C||C,E=t.wrapStyle,k=t.wrapClassName,x=t.wrapProps,w=t.onClose,R=t.afterOpenChange,I=t.afterClose,P=t.transitionName,_=t.animation,S=t.closable,j=void 0===S||S,D=t.mask,M=void 0===D||D,O=t.maskTransitionName,T=t.maskAnimation,A=t.maskClosable,U=void 0===A||A,B=t.maskStyle,V=t.maskProps,z=t.rootClassName,K=t.classNames,L=t.styles,H=r.useRef(),F=r.useRef(),W=r.useRef(),X=r.useState(v),Y=o(X,2),q=Y[0],G=Y[1],J=u();function Q(e){null==w||w(e)}var Z=r.useRef(!1),$=r.useRef(),ee=null;U&&(ee=function(e){Z.current?Z.current=!1:F.current===e.target&&Q(e)}),r.useEffect(function(){v&&(G(!0),m(F.current,document.activeElement)||(H.current=document.activeElement))},[v]),r.useEffect(function(){return function(){clearTimeout($.current)}},[]);var te=e(e(e({zIndex:c},E),null==L?void 0:L.wrapper),{},{display:q?null:"none"});return r.createElement("div",n({className:s("".concat(l,"-root"),z)},i(t,{data:!0})),r.createElement(g,{prefixCls:l,visible:M&&v,motionName:p(l,O,T),style:e(e({zIndex:c},B),null==L?void 0:L.mask),maskProps:V,className:null==K?void 0:K.mask}),r.createElement("div",n({tabIndex:-1,onKeyDown:function(e){if(b&&e.keyCode===d.ESC)return e.stopPropagation(),void Q(e);v&&e.keyCode===d.TAB&&W.current.changeActive(!e.shiftKey)},className:s("".concat(l,"-wrap"),k,null==K?void 0:K.wrapper),ref:F,onClick:ee,style:te},x),r.createElement(h,n({},t,{onMouseDown:function(){clearTimeout($.current),Z.current=!0},onMouseUp:function(){$.current=setTimeout(function(){Z.current=!1})},ref:W,closable:j,ariaId:J,prefixCls:l,visible:v&&q,onClose:Q,onVisibleChanged:function(e){if(e)m(F.current,document.activeElement)||null===(t=W.current)||void 0===t||t.focus();else{if(G(!1),M&&H.current&&N){try{H.current.focus({preventScroll:!0})}catch(n){}H.current=null}q&&(null==I||I())}var t;null==R||R(e)},motionName:p(l,P,_)}))))},x=function(e){var t=e.visible,l=e.getContainer,s=e.forceRender,c=e.destroyOnClose,i=void 0!==c&&c,u=e.afterClose,m=e.panelRef,d=r.useState(t),f=o(d,2),p=f[0],y=f[1],b=r.useMemo(function(){return{panel:m}},[m]);return r.useEffect(function(){t&&y(!0)},[t]),s||!i||p?r.createElement(v.Provider,{value:b},r.createElement(a,{open:t||s||p,autoDestroy:!1,getContainer:l,autoLock:t||p},r.createElement(k,n({},e,{destroyOnClose:i,afterClose:function(){null==u||u(),y(!1)}})))):null};x.displayName="Dialog";export{x as D,E as P};
