import{i as e,h as t,k as o,d as n}from"./@babel_runtime@7.28.3.ESkOsrAB.js";import{T as r}from"./@rc-component_trigger@2.3.0_98a5ef371ed9a77c6843246644ee9b58.CfSqy54s.js";import{c as i}from"./classnames@2.5.1.C0tKfs1P.js";import{t as a,K as s,j as l,l as c,s as f}from"./rc-util@5.44.4_react-dom@19.1.1_react@19.1.1__react@19.1.1.BCDSZbSC.js";import{r as u,e as p}from"./react@19.1.1.osUeTYwR.js";var v=s.ESC,m=s.TAB;var d=u.forwardRef(function(e,t){var o=e.overlay,n=e.arrow,r=e.prefixCls,i=u.useMemo(function(){return"function"==typeof o?o():o},[o]),a=l(t,c(i));return p.createElement(p.Fragment,null,n&&p.createElement("div",{className:"".concat(r,"-arrow")}),p.cloneElement(i,{ref:f(i)?a:void 0}))}),g={adjustX:1,adjustY:1},b=[0,0],w={topLeft:{points:["bl","tl"],overflow:g,offset:[0,-4],targetOffset:b},top:{points:["bc","tc"],overflow:g,offset:[0,-4],targetOffset:b},topRight:{points:["br","tr"],overflow:g,offset:[0,-4],targetOffset:b},bottomLeft:{points:["tl","bl"],overflow:g,offset:[0,4],targetOffset:b},bottom:{points:["tc","bc"],overflow:g,offset:[0,4],targetOffset:b},bottomRight:{points:["tr","br"],overflow:g,offset:[0,4],targetOffset:b}},h=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function y(s,g){var b,y=s.arrow,C=void 0!==y&&y,R=s.prefixCls,E=void 0===R?"rc-dropdown":R,N=s.transitionName,O=s.animation,A=s.align,j=s.placement,k=void 0===j?"bottomLeft":j,x=s.placements,P=void 0===x?w:x,_=s.getPopupContainer,V=s.showAction,F=s.hideAction,L=s.overlayClassName,S=s.overlayStyle,T=s.visible,M=s.trigger,W=void 0===M?["hover"]:M,D=s.autoFocus,B=s.overlay,G=s.children,H=s.onVisibleChange,I=e(s,h),K=p.useState(),X=t(K,2),Y=X[0],q=X[1],z="visible"in s?T:Y,J=p.useRef(null),Q=p.useRef(null),U=p.useRef(null);p.useImperativeHandle(g,function(){return J.current});var Z=function(e){q(e),null==H||H(e)};!function(e){var t=e.visible,o=e.triggerRef,n=e.onVisibleChange,r=e.autoFocus,i=e.overlayRef,s=u.useRef(!1),l=function(){var e,r;t&&(null===(e=o.current)||void 0===e||null===(r=e.focus)||void 0===r||r.call(e),null==n||n(!1))},c=function(){var e;return!(null===(e=i.current)||void 0===e||!e.focus||(i.current.focus(),s.current=!0,0))},f=function(e){switch(e.keyCode){case v:l();break;case m:var t=!1;s.current||(t=c()),t?e.preventDefault():l()}};u.useEffect(function(){return t?(window.addEventListener("keydown",f),r&&a(c,3),function(){window.removeEventListener("keydown",f),s.current=!1}):function(){s.current=!1}},[t])}({visible:z,triggerRef:U,onVisibleChange:Z,autoFocus:D,overlayRef:Q});var $,ee,te,oe=function(){return p.createElement(d,{ref:Q,overlay:B,prefixCls:E,arrow:C})},ne=p.cloneElement(G,{className:i(null===(b=G.props)||void 0===b?void 0:b.className,z&&($=s.openClassName,void 0!==$?$:"".concat(E,"-open"))),ref:f(G)?l(U,c(G)):void 0}),re=F;return re||-1===W.indexOf("contextMenu")||(re=["click"]),p.createElement(r,o({builtinPlacements:P},I,{prefixCls:E,ref:J,popupClassName:i(L,n({},"".concat(E,"-show-arrow"),C)),popupStyle:S,action:W,showAction:V,hideAction:re,popupPlacement:k,popupAlign:A,popupTransitionName:N,popupAnimation:O,popupVisible:z,stretch:(ee=s.minOverlayWidthMatchTrigger,te=s.alignPoint,("minOverlayWidthMatchTrigger"in s?ee:!te)?"minWidth":""),popup:"function"==typeof B?oe:oe(),onPopupVisibleChange:Z,onPopupClick:function(e){var t=s.onOverlayClick;q(!1),t&&t(e)},getPopupContainer:_}),ne)}const C=p.forwardRef(y);export{C as D};
