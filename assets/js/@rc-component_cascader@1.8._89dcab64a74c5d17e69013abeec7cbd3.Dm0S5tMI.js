import{p as e,K as t,d as n,e as o,f as a}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{u as l,B as r}from"./@rc-component_select@1.2.7__74ed97d747dedabe4414d1f4ea394a59.wDk9W6qW.js";import{r as s}from"./react@19.2.1.BpVBN_43.js";import{c,a as i}from"./@rc-component_tree@1.0.2_re_2bf9ae000d6effb62cf123da5373636b.B8saYfiW.js";import"./react-dom@19.2.1_react@19.2.1.BLi5rGn2.js";import"./@rc-component_resize-observ_eaaccb47489da2719f35257c4ad9d3c9.BynXlAVv.js";import"./@rc-component_motion@1.1.6__0afcbe001b0ce065bd610efbbf939bf0.BsUikez1.js";import"./rc-overflow@1.5.0_react-dom_ed71e382df4fb2eccbb1a2ad50316608.CUEIhwYs.js";import{c as u}from"./clsx@2.1.1.BvmCeSbq.js";const p=s.createContext({}),d="__rc_cascader_search_mark__",f=(e,t,{label:n=""})=>t.some(t=>String(t[n]).toLowerCase().includes(e.toLowerCase())),h=(e,t,n,o)=>t.map(e=>e[o.label]).join(" / "),m="__RC_CASCADER_SPLIT__",b="SHOW_PARENT",g="SHOW_CHILD";function y(e){return e.join(m)}function v(e){return e.map(y)}function C(e){const{label:t,value:n,children:o}=e||{},a=n||"value";return{label:t||"label",value:a,key:a,children:o||"children"}}function k(e,t){return e.isLeaf??!e[t.children]?.length}function S(e){const t=e.parentElement;if(!t)return;const n=e.offsetTop-t.offsetTop;n-t.scrollTop<0?t.scrollTo({top:n}):n+e.offsetHeight-t.scrollTop>t.offsetHeight&&t.scrollTo({top:n+e.offsetHeight-t.offsetHeight})}function x(e,t){return e.map(e=>e[d]?.map(e=>e[t.value]))}function _(e){return e?function(e){return Array.isArray(e)&&Array.isArray(e[0])}(e)?e:(0===e.length?[]:[e]).map(e=>Array.isArray(e)?e:[e]):[]}function E(e,t,n){const o=new Set(e),a=t();return e.filter(e=>{const t=a[e],l=t?t.parent:null,r=t?t.children:null;return!(!t||!t.node.disabled)||(n===g?!(r&&r.some(e=>e.key&&o.has(e.key))):!(l&&!l.node.disabled&&o.has(l.key)))})}function O(e,t,n,o=!1){let a=t;const l=[];for(let r=0;r<e.length;r+=1){const t=e[r],s=a?.findIndex(e=>{const a=e[n.value];return o?String(a)===String(t):a===t}),c=-1!==s?a?.[s]:null;l.push({value:c?.[n.value]??t,index:s,option:c}),a=c?.[n.children]}return l}function N(e,t){return s.useCallback(n=>{const o=[],a=[];return n.forEach(n=>{O(n,e,t).every(e=>e.option)?a.push(n):o.push(n)}),[a,o]},[e,t])}function P(e,t){const n=s.useMemo(()=>t||[],[t]),o=((e,t)=>{const n=s.useRef({options:[],info:{keyEntities:{},pathKeyEntities:{}}});return s.useCallback(()=>(n.current.options!==e&&(n.current.options=e,n.current.info=c(e,{fieldNames:t,initWrapper:e=>({...e,pathKeyEntities:{}}),processEntity:(e,n)=>{const o=e.nodes.map(e=>e[t.value]).join(m);n.pathKeyEntities[o]=e,e.key=o}})),n.current.info.pathKeyEntities),[t,e])})(n,e),a=s.useCallback(t=>{const n=o();return t.map(t=>{const{nodes:o}=n[t];return o.map(t=>t[e.value])})},[o,e]);return[n,o,a]}function j(e,t,n,o,a,l,r,s){return c=>{if(e){const e=y(c),u=v(n),p=v(o),d=u.includes(e),f=a.some(t=>y(t)===e);let h=n,m=a;if(f&&!d)m=a.filter(t=>y(t)!==e);else{const t=d?u.filter(t=>t!==e):[...u,e],n=l();let o;({checkedKeys:o}=i(t,!d||{halfCheckedKeys:p},n));const a=E(o,l,s);h=r(a)}t([...m,...h])}else t(c)}}function V(e,t,n,o,a){return s.useMemo(()=>{const[l,r]=a(t);if(!e||!t.length)return[l,[],r];const s=v(l),c=n(),{checkedKeys:u,halfCheckedKeys:p}=i(s,!0,c);return[o(u),o(p),r]},[e,t,n,o,a])}const M=s.memo(({children:e})=>e,(e,t)=>!t.open);function w({prefixCls:e,checked:t,halfChecked:n,disabled:o,onClick:a,disableCheckbox:l}){const{checkable:r}=s.useContext(p),c="boolean"!=typeof r?r:null;return s.createElement("span",{className:u(`${e}`,{[`${e}-checked`]:t,[`${e}-indeterminate`]:!t&&n,[`${e}-disabled`]:o||l}),onClick:a},c)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},I.apply(this,arguments)}const $="__cascader_fix_label__";function T({prefixCls:t,multiple:n,options:o,activeValue:a,prevValuePath:l,onToggleOpen:r,onSelect:c,onActive:i,checkedSet:f,halfCheckedSet:h,loadingKeys:m,isSelectable:b,disabled:g}){const v=`${t}-menu`,C=`${t}-menu-item`,x=s.useRef(null),{fieldNames:_,changeOnSelect:E,expandTrigger:O,expandIcon:N,loadingIcon:P,popupMenuColumnStyle:j,optionRender:V,classNames:M,styles:T}=s.useContext(p),R="hover"===O,K=e=>g||e,D=s.useMemo(()=>o.map(e=>{const{disabled:t,disableCheckbox:n}=e,o=e[d],a=e[$]??e[_.label],r=e[_.value],s=k(e,_),c=o?o.map(e=>e[_.value]):[...l,r],i=y(c);return{disabled:t,label:a,value:r,isLeaf:s,isLoading:m.includes(i),checked:f.has(i),halfChecked:h.has(i),option:e,disableCheckbox:n,fullPath:c,fullPathKey:i}}),[o,f,_,h,m,l]);return s.useEffect(()=>{if(x.current){const e=`.${C}-active`,t=x.current.querySelector(e);t&&S(t)}},[a,C]),s.createElement("ul",{className:u(v,M?.popup?.list),style:T?.popup?.list,ref:x,role:"menu"},D.map(({disabled:o,label:l,value:p,isLeaf:d,isLoading:f,checked:h,halfChecked:m,option:g,fullPath:y,fullPathKey:v,disableCheckbox:k})=>{const S=e(g,{aria:!0,data:!0}),x=()=>{if(K(o))return;const e=[...y];R&&d&&e.pop(),i(e)},_=()=>{b(g)&&!K(o)&&c(y,d)};let O;return"string"==typeof g.title?O=g.title:"string"==typeof l&&(O=l),s.createElement("li",I({key:v},S,{className:u(C,M?.popup?.listItem,{[`${C}-expand`]:!d,[`${C}-active`]:a===p||a===v,[`${C}-disabled`]:K(o),[`${C}-loading`]:f}),style:{...j,...T?.popup?.listItem},role:"menuitemcheckbox",title:O,"aria-checked":h,"data-path-key":v,onClick:()=>{x(),k||n&&!d||_()},onDoubleClick:()=>{E&&r(!1)},onMouseEnter:()=>{R&&x()},onMouseDown:e=>{e.preventDefault()}}),n&&s.createElement(w,{prefixCls:`${t}-checkbox`,checked:h,halfChecked:m,disabled:K(o)||k,disableCheckbox:k,onClick:e=>{k||(e.stopPropagation(),_())}}),s.createElement("div",{className:`${C}-content`},V?V(g):l),!f&&N&&!d&&s.createElement("div",{className:`${C}-expand-icon`},N),f&&P&&s.createElement("div",{className:`${C}-loading-icon`},P))}))}const R=(e,n,o,a,l,r,c)=>{const{direction:i,searchValue:u,toggleOpen:p,open:f}=c,h="rtl"===i,[m,b,g,v]=s.useMemo(()=>{let e=-1,t=n;const l=[],r=[],s=a.length,c=x(n,o);for(let n=0;n<s&&t;n+=1){const s=t.findIndex((e,t)=>(c[t]?y(c[t]):e[o.value])===a[n]);if(-1===s)break;e=s,l.push(e),r.push(a[n]),t=t[e][o.children]}let i=n;for(let n=0;n<l.length-1;n+=1)i=i[l[n]][o.children];return[r,e,i,c]},[a,o,n]),C=e=>{l(e)},k=()=>{if(m.length>1){const e=m.slice(0,-1);C(e)}else p(!1)},S=()=>{const e=(g[b]?.[o.children]||[]).find(e=>!e.disabled);if(e){const t=[...m,e[o.value]];C(t)}};s.useImperativeHandle(e,()=>({onKeyDown:e=>{const{which:n}=e;switch(n){case t.UP:case t.DOWN:{let e=0;n===t.UP?e=-1:n===t.DOWN&&(e=1),0!==e&&(e=>{const t=g.length;let n=b;-1===n&&e<0&&(n=t);for(let a=0;a<t;a+=1){n=(n+e+t)%t;const a=g[n];if(a&&!a.disabled){const e=m.slice(0,-1).concat(v[n]?y(v[n]):a[o.value]);return void C(e)}}})(e);break}case t.LEFT:if(u)break;h?S():k();break;case t.RIGHT:if(u)break;h?k():S();break;case t.BACKSPACE:u||k();break;case t.ENTER:if(m.length){const e=g[b],t=e?.[d]||[];t.length?r(t.map(e=>e[o.value]),t[t.length-1]):r(m,g[b])}break;case t.ESC:p(!1),f&&e.stopPropagation()}},onKeyUp:()=>{}}))};function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K.apply(this,arguments)}const D=s.forwardRef((e,t)=>{const{prefixCls:n,multiple:o,searchValue:a,toggleOpen:l,notFoundContent:r,direction:c,open:i,disabled:d}=e,f=s.useRef(null),h="rtl"===c,{options:b,values:g,halfValues:C,fieldNames:_,changeOnSelect:E,onSelect:N,searchOptions:P,popupPrefixCls:j,loadData:V,expandTrigger:w}=s.useContext(p),I=j||n,[D,A]=s.useState([]);s.useEffect(()=>{D.length&&D.forEach(e=>{const t=O(e.split(m),b,_,!0).map(({option:e})=>e),n=t[t.length-1];(!n||n[_.children]||k(n,_))&&A(t=>t.filter(t=>t!==e))})},[b,D,_]);const H=s.useMemo(()=>new Set(v(g)),[g]),L=s.useMemo(()=>new Set(v(C)),[C]),[W,F]=((e,t)=>{const{values:n}=s.useContext(p),o=n[0],[a,l]=s.useState([]);return s.useEffect(()=>{e||l(o||[])},[t,o]),[a,l]})(o,i),U=e=>{F(e),(e=>{if(!V||a)return;const t=O(e,b,_).map(({option:e})=>e),n=t[t.length-1];if(n&&!k(n,_)){const n=y(e);A(e=>[...e,n]),V(t)}})(e)},q=e=>{if(d)return!1;const{disabled:t}=e,n=k(e,_);return!t&&(n||E||o)},z=(e,t,n=!1)=>{N(e),!o&&(t||E&&("hover"===w||n))&&l(!1)},B=s.useMemo(()=>a?P:b,[a,P,b]),J=s.useMemo(()=>{const e=[{options:B}];let t=B;const n=x(t,_);for(let o=0;o<W.length;o+=1){const a=W[o],l=t.find((e,t)=>(n[t]?y(n[t]):e[_.value])===a),r=l?.[_.children];if(!r?.length)break;t=r,e.push({options:r})}return e},[B,W,_]);R(t,B,_,W,U,(e,t)=>{q(t)&&z(e,k(t,_),!0)},{direction:c,searchValue:a,toggleOpen:l,open:i}),s.useEffect(()=>{if(!a)for(let e=0;e<W.length;e+=1){const t=y(W.slice(0,e+1)),n=f.current?.querySelector(`li[data-path-key="${t.replace(/\\{0,2}"/g,'\\"')}"]`);n&&S(n)}},[W,a]);const G=!J[0]?.options?.length,Y=[{[_.value]:"__EMPTY__",[$]:r,disabled:!0}],Q={...e,multiple:!G&&o,onSelect:z,onActive:U,onToggleOpen:l,checkedSet:H,halfCheckedSet:L,loadingKeys:D,isSelectable:q},X=(G?[{options:Y}]:J).map((e,t)=>{const n=W.slice(0,t),o=W[t];return s.createElement(T,K({key:t},Q,{prefixCls:I,options:e.options,prevValuePath:n,activeValue:o}))});return s.createElement(M,{open:i},s.createElement("div",{className:u(`${I}-menus`,{[`${I}-menu-empty`]:G,[`${I}-rtl`]:h}),ref:f},X))});function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},A.apply(this,arguments)}const H=s.forwardRef((e,t)=>{const n=l();return s.createElement(D,A({},e,n,{ref:t}))});function L(){}function W(e){const{prefixCls:t="rc-cascader",style:a,className:l,options:r,checkable:c,defaultValue:i,value:d,fieldNames:f,changeOnSelect:h,onChange:m,showCheckedStrategy:b,loadData:g,expandTrigger:y,expandIcon:v=">",loadingIcon:k,direction:S,notFoundContent:x="Not Found",disabled:E,optionRender:M}=e,w=!!c,[I,$]=n(i,d),T=_(I),R=s.useMemo(()=>C(f),[JSON.stringify(f)]),[K,A,H]=P(R,r),W=N(K,R),[F,U,q]=V(w,T,A,H,W),z=o(e=>{if($(e),m){const t=_(e),n=t.map(e=>O(e,K,R).map(e=>e.option)),o=w?t:t[0],a=w?n:n[0];m(o,a)}}),B=j(w,z,F,U,q,A,H,b),J=o(e=>{B(e)}),G=s.useMemo(()=>({options:K,fieldNames:R,values:F,halfValues:U,changeOnSelect:h,onSelect:J,checkable:c,searchOptions:[],popupPrefixCls:void 0,loadData:g,expandTrigger:y,expandIcon:v,loadingIcon:k,popupMenuColumnStyle:void 0,optionRender:M}),[K,R,F,U,h,J,c,g,y,v,k,M]),Y=`${t}-panel`,Q=!K.length;return s.createElement(p.Provider,{value:G},s.createElement("div",{className:u(Y,{[`${Y}-rtl`]:"rtl"===S,[`${Y}-empty`]:Q},l),style:a},Q?x:s.createElement(D,{prefixCls:t,searchValue:"",multiple:w,toggleOpen:L,open:!0,direction:S,disabled:E})))}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},F.apply(this,arguments)}const U=s.forwardRef((e,t)=>{const{id:l,prefixCls:c="rc-cascader",fieldNames:i,defaultValue:u,value:m,changeOnSelect:g,onChange:k,displayRender:S,checkable:x,showSearch:M,expandTrigger:w,options:I,popupPrefixCls:$,loadData:T,open:R,popupClassName:K,popupMenuColumnStyle:D,popupStyle:A,classNames:L,styles:W,placement:U,onPopupVisibleChange:q,expandIcon:z=">",loadingIcon:B,children:J,popupMatchSelectWidth:G=!1,showCheckedStrategy:Y=b,optionRender:Q,...X}=e,Z=a(l),ee=!!x,[te,ne]=n(u,m),oe=_(te),ae=s.useMemo(()=>C(i),[JSON.stringify(i)]),[le,re,se]=P(ae,I),[ce,ie]=function(e,t){const{autoClearSearchValue:n,searchValue:o,onSearch:a}=t;return s.useMemo(()=>{if(!e)return[!1,{}];let t={matchInputWidth:!0,limit:50,autoClearSearchValue:n,searchValue:o,onSearch:a};return e&&"object"==typeof e&&(t={...t,...e}),t.limit<=0&&(t.limit=!1),[!0,t]},[e,n,o,a])}(M,e),{autoClearSearchValue:ue=!0,searchValue:pe,onSearch:de}=ie,[fe,he]=n("",pe),me=fe||"",be=((e,t,n,o,a,l)=>{const{filter:r=f,render:c=h,limit:i=50,sort:u}=a;return s.useMemo(()=>{const a=[];return e?(function t(s,p,f=!1){s.forEach(s=>{if(!u&&!1!==i&&i>0&&a.length>=i)return;const h=[...p,s],m=s[n.children],b=f||s.disabled;m&&0!==m.length&&!l||r(e,h,{label:n.label})&&a.push({...s,disabled:b,[n.label]:c(e,h,o,n),[d]:h,[n.children]:void 0}),m&&t(s[n.children],h,b)})}(t,[]),u&&a.sort((t,o)=>u(t[d],o[d],e,n)),!1!==i&&i>0?a.slice(0,i):a):[]},[e,t,n,o,c,l,r,u,i])})(me,le,ae,$||c,ie,g||ee),ge=N(le,ae),[ye,ve,Ce]=V(ee,oe,re,se,ge),ke=((e,t,n,o,a)=>s.useMemo(()=>{const l=a||(e=>{const t=o?e.slice(-1):e;return t.every(e=>["string","number"].includes(typeof e))?t.join(" / "):t.reduce((e,t,n)=>{const o=s.isValidElement(t)?s.cloneElement(t,{key:n}):t;return 0===n?[o]:[...e," / ",o]},[])});return e.map(e=>{const o=O(e,t,n),a=l(o.map(({option:e,value:t})=>e?.[n.label]??t),o.map(({option:e})=>e)),r=y(e);return{label:a,value:r,key:r,valueCells:e,disabled:o[o.length-1]?.option?.disabled}})},[e,t,n,a,o]))(s.useMemo(()=>{const e=E(v(ye),re,Y);return[...Ce,...se(e)]},[ye,re,se,Ce,Y]),le,ae,ee,S),Se=o(e=>{if(ne(e),k){const t=_(e),n=t.map(e=>O(e,le,ae).map(e=>e.option)),o=ee?t:t[0],a=ee?n:n[0];k(o,a)}}),xe=j(ee,Se,ye,ve,Ce,re,se,Y),_e=o(e=>{ee&&!ue||he(""),xe(e)}),Ee=s.useMemo(()=>({classNames:L,styles:W,options:le,fieldNames:ae,values:ye,halfValues:ve,changeOnSelect:g,onSelect:_e,checkable:x,searchOptions:be,popupPrefixCls:$,loadData:T,expandTrigger:w,expandIcon:z,loadingIcon:B,popupMenuColumnStyle:D,optionRender:Q}),[L,W,le,ae,ye,ve,g,_e,x,be,$,T,w,z,B,D,Q]),Oe=!(me?be:le).length,Ne=me&&ie.matchInputWidth||Oe?{}:{minWidth:"auto"};return s.createElement(p.Provider,{value:Ee},s.createElement(r,F({},X,{ref:t,id:Z,prefixCls:c,autoClearSearchValue:ue,popupMatchSelectWidth:G,classNames:L,styles:W,popupStyle:{...Ne,...A},displayValues:ke,onDisplayValuesChange:(e,t)=>{if("clear"===t.type)return void Se([]);const{valueCells:n}=t.values[0];_e(n)},mode:ee?"multiple":void 0,searchValue:me,onSearch:(e,t)=>{he(e),"blur"!==t.source&&de&&de(e)},showSearch:ce,OptionList:H,emptyOptions:Oe,open:R,popupClassName:K,placement:U,onPopupVisibleChange:e=>{q?.(e)},getRawInputElement:()=>J})))});U.SHOW_PARENT=b,U.SHOW_CHILD=g,U.Panel=W;export{U as C,W as P};
