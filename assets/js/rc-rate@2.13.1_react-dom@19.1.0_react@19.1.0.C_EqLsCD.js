import{i as e,h as n,d as a,k as t}from"./@babel_runtime@7.27.6.R8rA2vPb.js";import{c as o}from"./classnames@2.5.1.6O6XshCl.js";import{K as r,C as l,B as c}from"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0.ZpIlvg4e.js";import{e as u,r as i}from"./react@19.1.0.QBh3HWPD.js";function f(e,n){var a=e.disabled,t=e.prefixCls,l=e.character,c=e.characterRender,i=e.index,f=e.count,d=e.value,s=e.allowHalf,v=e.focused,m=e.onHover,p=e.onClick,b=i+1,w=new Set([t]);0===d&&0===i&&v?w.add("".concat(t,"-focused")):s&&d+.5>=b&&d<b?(w.add("".concat(t,"-half")),w.add("".concat(t,"-active")),v&&w.add("".concat(t,"-focused"))):(b<=d?w.add("".concat(t,"-full")):w.add("".concat(t,"-zero")),b===d&&v&&w.add("".concat(t,"-focused")));var C="function"==typeof l?l(e):l,h=u.createElement("li",{className:o(Array.from(w)),ref:n},u.createElement("div",{onClick:a?null:function(e){p(e,i)},onKeyDown:a?null:function(e){e.keyCode===r.ENTER&&p(e,i)},onMouseMove:a?null:function(e){m(e,i)},role:"radio","aria-checked":d>i?"true":"false","aria-posinset":i+1,"aria-setsize":f,tabIndex:a?-1:0},u.createElement("div",{className:"".concat(t,"-first")},C),u.createElement("div",{className:"".concat(t,"-second")},C)));return c&&(h=c(h,e)),h}const d=u.forwardRef(f);var s=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","keyboard","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function v(f,v){var m,p=f.prefixCls,b=void 0===p?"rc-rate":p,w=f.className,C=f.defaultValue,h=f.value,y=f.count,E=void 0===y?5:y,R=f.allowHalf,x=void 0!==R&&R,H=f.allowClear,g=void 0===H||H,k=f.keyboard,D=void 0===k||k,L=f.character,F=void 0===L?"â˜…":L,I=f.characterRender,N=f.disabled,T=f.direction,B=void 0===T?"ltr":T,K=f.tabIndex,M=void 0===K?0:K,j=f.autoFocus,S=f.onHoverChange,V=f.onChange,X=f.onFocus,_=f.onBlur,z=f.onKeyDown,A=f.onMouseLeave,G=e(f,s),W=(m=i.useRef({}),[function(e){return m.current[e]},function(e){return function(n){m.current[e]=n}}]),O=n(W,2),q=O[0],J=O[1],P=u.useRef(null),Q=function(){var e;N||(null===(e=P.current)||void 0===e||e.focus())};u.useImperativeHandle(v,(function(){return{focus:Q,blur:function(){var e;N||(null===(e=P.current)||void 0===e||e.blur())}}}));var U=l(C||0,{value:h}),Y=n(U,2),Z=Y[0],$=Y[1],ee=l(null),ne=n(ee,2),ae=ne[0],te=ne[1],oe=function(e,n){var a,t,o,r,l="rtl"===B,c=e+1;if(x){var u=q(e),i=(t=function(e){var n,a,t=e.ownerDocument,o=t.body,r=t&&t.documentElement,l=e.getBoundingClientRect();return n=l.left,a=l.top,{left:n-=r.clientLeft||o.clientLeft||0,top:a-=r.clientTop||o.clientTop||0}}(a=u),o=a.ownerDocument,r=o.defaultView||o.parentWindow,t.left+=function(e){var n=e.pageXOffset,a="scrollLeft";if("number"!=typeof n){var t=e.document;"number"!=typeof(n=t.documentElement[a])&&(n=t.body[a])}return n}(r),t.left),f=u.clientWidth;(l&&n-i>f/2||!l&&n-i<f/2)&&(c-=.5)}return c},re=function(e){$(e),null==V||V(e)},le=u.useState(!1),ce=n(le,2),ue=ce[0],ie=ce[1],fe=u.useState(null),de=n(fe,2),se=de[0],ve=de[1],me=function(e,n){var a=oe(n,e.pageX);a!==ae&&(ve(a),te(null)),null==S||S(a)},pe=function(e){N||(ve(null),te(null),null==S||S(void 0)),e&&(null==A||A(e))},be=function(e,n){var a=oe(n,e.pageX),t=!1;g&&(t=a===Z),pe(),re(t?0:a),te(t?a:null)};u.useEffect((function(){j&&!N&&Q()}),[]);var we=new Array(E).fill(0).map((function(e,n){return u.createElement(d,{ref:J(n),index:n,count:E,disabled:N,prefixCls:"".concat(b,"-star"),allowHalf:x,value:null===se?Z:se,onClick:be,onHover:me,key:e||n,character:F,characterRender:I,focused:ue})})),Ce=o(b,w,a(a({},"".concat(b,"-disabled"),N),"".concat(b,"-rtl"),"rtl"===B));return u.createElement("ul",t({className:Ce,onMouseLeave:pe,tabIndex:N?-1:M,onFocus:N?null:function(){ie(!0),null==X||X()},onBlur:N?null:function(){ie(!1),null==_||_()},onKeyDown:N?null:function(e){var n=e.keyCode,a="rtl"===B,t=x?.5:1;D&&(n===r.RIGHT&&Z<E&&!a?(re(Z+t),e.preventDefault()):n===r.LEFT&&Z>0&&!a||n===r.RIGHT&&Z>0&&a?(re(Z-t),e.preventDefault()):n===r.LEFT&&Z<E&&a&&(re(Z+t),e.preventDefault())),null==z||z(e)},ref:P},c(G,{aria:!0,data:!0,attr:!0})),we)}const m=u.forwardRef(v);export{m as R};
