import{P as e}from"./@rc-component_portal@2.2.0__30be2453c38b20155edeebc9c29d42c5.DagWnXct.js";import{j as n,p as t,e as r,b as o,K as a,h as l}from"./@rc-component_util@1.7.0_re_e38ee95702524036372f825efc96e921.ChzNieGb.js";import{r as s}from"./react@18.3.1.zoCbf7Ot.js";import{c}from"./clsx@2.1.1.DMqMD_4V.js";import{C as i}from"./@rc-component_motion@1.1.6__dd380705019fc1f37cb412b879364c7d.CnAyZ8EB.js";const u=s.createContext(null),d=s.createContext({});function m(){return m=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m.apply(this,arguments)}const p=e=>{const{prefixCls:r,className:o,containerRef:a,...l}=e,{panel:i}=s.useContext(d),u=n(i,a);return s.createElement("div",m({className:c("".concat(r,"-section"),o),role:"dialog",ref:u},t(e,{aria:!0}),{"aria-modal":"true"},l))};function f(e){if("string"==typeof e){const n=Number(e.replace(/px$/i,""));if(parseFloat(e)===n&&o(!1,"Invalid value type of `width` or `height` which should be number type instead."),!Number.isNaN(n))return n}return e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v.apply(this,arguments)}const g={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"},h=(e,n)=>{var o,l;const{prefixCls:d,open:m,placement:h,inline:y,push:b,forceRender:C,autoFocus:E,keyboard:k,classNames:z,rootClassName:w,rootStyle:x,zIndex:R,className:S,id:N,style:M,motion:O,width:j,height:D,size:K,maxSize:L,children:P,mask:_,maskClosable:I,maskMotion:B,maskClassName:F,maskStyle:U,afterOpenChange:X,onClose:Y,onMouseEnter:A,onMouseOver:H,onMouseLeave:T,onClick:V,onKeyDown:$,onKeyUp:q,styles:G,drawerRender:J,resizable:Q,defaultSize:W}=e,Z=s.useRef(null),ee=s.useRef(null),ne=s.useRef(null);s.useImperativeHandle(n,()=>Z.current);s.useEffect(()=>{var e;m&&E&&(null==(e=Z.current)||e.focus({preventScroll:!0}))},[m]);const[te,re]=s.useState(!1),oe=s.useContext(u);let ae;ae="boolean"==typeof b?b?{}:{distance:0}:b||{};const le=null!=(l=null!=(o=null==ae?void 0:ae.distance)?o:null==oe?void 0:oe.pushDistance)?l:180,se=s.useMemo(()=>({pushDistance:le,push:()=>{re(!0)},pull:()=>{re(!1)}}),[le]);s.useEffect(()=>{var e,n;m?null==(e=null==oe?void 0:oe.push)||e.call(oe):null==(n=null==oe?void 0:oe.pull)||n.call(oe)},[m]),s.useEffect(()=>()=>{var e;null==(e=null==oe?void 0:oe.pull)||e.call(oe)},[]);const ce=s.createElement(i,v({key:"mask"},B,{visible:_&&m}),({className:e,style:n},t)=>s.createElement("div",{className:c("".concat(d,"-mask"),e,null==z?void 0:z.mask,F),style:{...n,...U,...null==G?void 0:G.mask},onClick:I&&m?Y:void 0,ref:t})),ie="function"==typeof O?O(h):O,[ue,de]=s.useState(),me="left"===h||"right"===h,pe=s.useMemo(()=>{var e,n,t;return f(null!=(t=null!=(n=null!=(e=null!=K?K:me?j:D)?e:ue)?n:W)?t:me?378:void 0)},[K,j,D,W,me,ue]),fe=s.useMemo(()=>{const e={};if(te&&le)switch(h){case"top":e.transform="translateY(".concat(le,"px)");break;case"bottom":e.transform="translateY(".concat(-le,"px)");break;case"left":e.transform="translateX(".concat(le,"px)");break;default:e.transform="translateX(".concat(-le,"px)")}return me?e.width=f(pe):e.height=f(pe),e},[te,le,h,me,pe]),ve=s.useRef(null),ge=!!Q,he="object"==typeof Q&&Q||{},ye=r(e=>{var n;de(e),null==(n=he.onResize)||n.call(he,e)}),{dragElementProps:be,isDragging:Ce}=function(e){const{prefixCls:n,direction:t,className:o,style:a,maxSize:l,containerRef:i,currentSize:u,onResize:d,onResizeEnd:m,onResizeStart:p}=e,[f,v]=s.useState(!1),[g,h]=s.useState(0),[y,b]=s.useState(0),C="left"===t||"right"===t,E=r(e=>{let n;if(e.preventDefault(),e.stopPropagation(),v(!0),h(C?e.clientX:e.clientY),"number"==typeof u)n=u;else if(null==i?void 0:i.current){const e=i.current.getBoundingClientRect();n=C?e.width:e.height}b(n),null==p||p(n)}),k=r(e=>{if(!f)return;let n=(C?e.clientX:e.clientY)-g;"right"!==t&&"bottom"!==t||(n=-n);let r=y+n;r<0&&(r=0),l&&r>l&&(r=l),null==d||d(r)}),z=s.useCallback(()=>{if(f&&(v(!1),null==i?void 0:i.current)){const e=i.current.getBoundingClientRect(),n=C?e.width:e.height;null==m||m(n)}},[f,i,m,C]);return s.useEffect(()=>{if(f)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",z),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",z)}},[f,k,z]),{dragElementProps:{className:c("".concat(n,"-dragger"),"".concat(n,"-dragger-").concat(t),{["".concat(n,"-dragger-dragging")]:f,["".concat(n,"-dragger-horizontal")]:C,["".concat(n,"-dragger-vertical")]:!C},o),style:a,onMouseDown:E},isDragging:f}}({prefixCls:"".concat(d,"-resizable"),direction:h,className:null==z?void 0:z.dragger,style:null==G?void 0:G.dragger,maxSize:L,containerRef:ve,currentSize:pe,onResize:ye,onResizeStart:he.onResizeStart,onResizeEnd:he.onResizeEnd}),Ee={onMouseEnter:A,onMouseOver:H,onMouseLeave:T,onClick:V,onKeyDown:$,onKeyUp:q},ke=s.createElement(i,v({key:"panel"},ie,{visible:m,forceRender:C,onVisibleChanged:e=>{null==X||X(e)},removeOnLeave:!1,leavedClassName:"".concat(d,"-content-wrapper-hidden")}),({className:n,style:r},o)=>{const a=s.createElement(p,v({id:N,containerRef:o,prefixCls:d,className:c(S,null==z?void 0:z.section),style:{...M,...null==G?void 0:G.section}},t(e,{aria:!0}),Ee),P);return s.createElement("div",v({ref:ve,className:c("".concat(d,"-content-wrapper"),Ce&&"".concat(d,"-content-wrapper-dragging"),null==z?void 0:z.wrapper,!Ce&&n),style:{...r,...fe,...null==G?void 0:G.wrapper}},t(e,{data:!0})),ge&&s.createElement("div",be),J?J(a):a)}),ze={...x};return R&&(ze.zIndex=R),s.createElement(u.Provider,{value:se},s.createElement("div",{className:c(d,"".concat(d,"-").concat(h),w,{["".concat(d,"-open")]:m,["".concat(d,"-inline")]:y}),style:ze,tabIndex:-1,ref:Z,onKeyDown:e=>{var n,t;const{keyCode:r,shiftKey:o}=e;switch(r){case a.TAB:r===a.TAB&&(o||document.activeElement!==ne.current?o&&document.activeElement===ee.current&&(null==(t=ne.current)||t.focus({preventScroll:!0})):null==(n=ee.current)||n.focus({preventScroll:!0}));break;case a.ESC:Y&&k&&(e.stopPropagation(),Y(e))}}},ce,s.createElement("div",{tabIndex:0,ref:ee,style:g,"aria-hidden":"true","data-sentinel":"start"}),ke,s.createElement("div",{tabIndex:0,ref:ne,style:g,"aria-hidden":"true","data-sentinel":"end"})))},y=s.forwardRef(h),b=n=>{const{open:t=!1,prefixCls:r="rc-drawer",placement:o="right",autoFocus:a=!0,keyboard:c=!0,width:i,height:u,size:m,maxSize:p,mask:f=!0,maskClosable:v=!0,getContainer:g,forceRender:h,afterOpenChange:b,destroyOnHidden:C,onMouseEnter:E,onMouseOver:k,onMouseLeave:z,onClick:w,onKeyDown:x,onKeyUp:R,resizable:S,defaultSize:N,panelRef:M}=n,[O,j]=s.useState(!1),[D,K]=s.useState(!1);l(()=>{K(!0)},[]);const L=!!D&&t,P=s.useRef(null),_=s.useRef(null);l(()=>{L&&(_.current=document.activeElement)},[L]);const I=s.useMemo(()=>({panel:M}),[M]);if(!h&&!O&&!L&&C)return null;const B={onMouseEnter:E,onMouseOver:k,onMouseLeave:z,onClick:w,onKeyDown:x,onKeyUp:R},F={...n,open:L,prefixCls:r,placement:o,autoFocus:a,keyboard:c,width:i,height:u,size:m,maxSize:p,defaultSize:N,mask:f,maskClosable:v,inline:!1===g,afterOpenChange:e=>{var n,t;j(e),null==b||b(e),e||!_.current||(null==(n=P.current)?void 0:n.contains(_.current))||null==(t=_.current)||t.focus({preventScroll:!0})},ref:P,resizable:S,...B};return s.createElement(d.Provider,{value:I},s.createElement(e,{open:L||h||O,autoDestroy:!1,getContainer:g,autoLock:f&&(L||O)},s.createElement(y,F)))};export{b as D};
