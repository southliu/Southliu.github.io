import{e,r as n}from"./react@19.2.3.DikTGMTS.js";import{c as t}from"./clsx@2.1.1.DMqMD_4V.js";import{d as r,z as l,B as a}from"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.BwjZ45jd.js";function o(e,n,t){const r=n.cloneNode(!0),l=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=t,"number"==typeof n.selectionStart&&"number"==typeof n.selectionEnd&&(r.selectionStart=n.selectionStart,r.selectionEnd=n.selectionEnd),r.setSelectionRange=(...e)=>{n.setSelectionRange(...e)},l}function s(e,n,t,r){if(!t)return;let l=n;return"click"===n.type?(l=o(n,e,""),void t(l)):"file"!==e.type&&void 0!==r?(l=o(n,e,r),void t(l)):void t(l)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c.apply(this,arguments)}const u=e.forwardRef((r,l)=>{var a,o,s;const{inputElement:u,children:i,prefixCls:f,prefix:d,suffix:p,addonBefore:m,addonAfter:v,className:x,style:y,disabled:g,readOnly:h,focused:E,triggerFocus:w,allowClear:b,value:N,handleReset:C,hidden:S,classes:R,classNames:j,dataAttrs:F,styles:O,components:B,onClear:W}=r,I=null!=i?i:u,k=(null==B?void 0:B.affixWrapper)||"span",A=(null==B?void 0:B.groupWrapper)||"span",z=(null==B?void 0:B.wrapper)||"span",D=(null==B?void 0:B.groupAddon)||"span",K=n.useRef(null),P=e=>{var n;(null==(n=K.current)?void 0:n.contains(e.target))&&(null==w||w())},_=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(r);let H=n.cloneElement(I,{value:N,className:t(null==(a=I.props)?void 0:a.className,!_&&(null==j?void 0:j.variant))||null});const L=n.useRef(null);if(e.useImperativeHandle(l,()=>({nativeElement:L.current||K.current})),_){let n=null;if(b){const r=!g&&!h&&N,l="".concat(f,"-clear-icon"),a="object"==typeof b&&(null==b?void 0:b.clearIcon)?b.clearIcon:"âœ–";n=e.createElement("button",{type:"button",tabIndex:-1,onClick:e=>{null==C||C(e),null==W||W()},onMouseDown:e=>e.preventDefault(),className:t(l,{["".concat(l,"-hidden")]:!r,["".concat(l,"-has-suffix")]:!!p})},a)}const r="".concat(f,"-affix-wrapper"),l=t(r,{["".concat(f,"-disabled")]:g,["".concat(r,"-disabled")]:g,["".concat(r,"-focused")]:E,["".concat(r,"-readonly")]:h,["".concat(r,"-input-with-clear-btn")]:p&&b&&N},null==R?void 0:R.affixWrapper,null==j?void 0:j.affixWrapper,null==j?void 0:j.variant),a=(p||b)&&e.createElement("span",{className:t("".concat(f,"-suffix"),null==j?void 0:j.suffix),style:null==O?void 0:O.suffix},n,p);H=e.createElement(k,c({className:l,style:null==O?void 0:O.affixWrapper,onClick:P},null==F?void 0:F.affixWrapper,{ref:K}),d&&e.createElement("span",{className:t("".concat(f,"-prefix"),null==j?void 0:j.prefix),style:null==O?void 0:O.prefix},d),H,a)}if(function(e){return!(!e.addonBefore&&!e.addonAfter)}(r)){const n="".concat(f,"-group"),r="".concat(n,"-addon"),l="".concat(n,"-wrapper"),a=t("".concat(f,"-wrapper"),n,null==R?void 0:R.wrapper,null==j?void 0:j.wrapper),o=t(l,{["".concat(l,"-disabled")]:g},null==R?void 0:R.group,null==j?void 0:j.groupWrapper);H=e.createElement(A,{className:o,ref:L},e.createElement(z,{className:a},m&&e.createElement(D,{className:r},m),H,v&&e.createElement(D,{className:r},v)))}return e.cloneElement(H,{className:t(null==(o=H.props)?void 0:o.className,x)||null,style:{...null==(s=H.props)?void 0:s.style,...y},hidden:S})});function i(e,t){return n.useMemo(()=>{let n={};t&&(n.show="object"==typeof t&&t.formatter?t.formatter:!!t),n={...n,...e};const{show:r,...l}=n;return{...l,show:!!r,showFormatter:"function"==typeof r?r:void 0,strategy:l.strategy||(e=>e.length)}},[e,t])}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f.apply(this,arguments)}const d=n.forwardRef((o,c)=>{const{autoComplete:d,onChange:p,onFocus:m,onBlur:v,onPressEnter:x,onKeyDown:y,onKeyUp:g,prefixCls:h="rc-input",disabled:E,htmlSize:w,className:b,maxLength:N,suffix:C,showCount:S,count:R,type:j="text",classes:F,classNames:O,styles:B,onCompositionStart:W,onCompositionEnd:I,...k}=o,[A,z]=n.useState(!1),D=n.useRef(!1),K=n.useRef(!1),P=n.useRef(null),_=n.useRef(null),H=e=>{P.current&&l(P.current,e)},[L,M]=r(o.defaultValue,o.value),T=null==L?"":String(L),[U,V]=n.useState(null),q=i(R,S),G=q.max||N,J=q.strategy(T),Q=!!G&&J>G;n.useImperativeHandle(c,()=>{var e;return{focus:H,blur:()=>{var e;null==(e=P.current)||e.blur()},setSelectionRange:(e,n,t)=>{var r;null==(r=P.current)||r.setSelectionRange(e,n,t)},select:()=>{var e;null==(e=P.current)||e.select()},input:P.current,nativeElement:(null==(e=_.current)?void 0:e.nativeElement)||P.current}}),n.useEffect(()=>{K.current&&(K.current=!1),z(e=>(!e||!E)&&e)},[E]);const X=(e,n,t)=>{var r,l;let a=n;if(!D.current&&q.exceedFormatter&&q.max&&q.strategy(n)>q.max)a=q.exceedFormatter(n,{max:q.max}),n!==a&&V([(null==(r=P.current)?void 0:r.selectionStart)||0,(null==(l=P.current)?void 0:l.selectionEnd)||0]);else if("compositionEnd"===t.source)return;M(a),P.current&&s(P.current,e,p,a)};n.useEffect(()=>{var e;U&&(null==(e=P.current)||e.setSelectionRange(...U))},[U]);const Y=e=>{X(e,e.target.value,{source:"change"})},Z=e=>{D.current=!1,X(e,e.currentTarget.value,{source:"compositionEnd"}),null==I||I(e)},$=e=>{!x||"Enter"!==e.key||K.current||e.nativeEvent.isComposing||(K.current=!0,x(e)),null==y||y(e)},ee=e=>{"Enter"===e.key&&(K.current=!1),null==g||g(e)},ne=e=>{z(!0),null==m||m(e)},te=e=>{K.current&&(K.current=!1),z(!1),null==v||v(e)},re=Q&&"".concat(h,"-out-of-range");return e.createElement(u,f({},k,{prefixCls:h,className:t(b,re),handleReset:e=>{M(""),H(),P.current&&s(P.current,e,p)},value:T,focused:A,triggerFocus:H,suffix:(()=>{const n=Number(G)>0;if(C||q.show){const r=q.showFormatter?q.showFormatter({value:T,count:J,maxLength:G}):"".concat(J).concat(n?" / ".concat(G):"");return e.createElement(e.Fragment,null,q.show&&e.createElement("span",{className:t("".concat(h,"-show-count-suffix"),{["".concat(h,"-show-count-has-suffix")]:!!C},null==O?void 0:O.count),style:{...null==B?void 0:B.count}},r),C)}return null})(),disabled:E,classes:F,classNames:O,styles:B,ref:_}),(()=>{const n=a(o,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return e.createElement("input",f({autoComplete:d},n,{onChange:Y,onFocus:ne,onBlur:te,onKeyDown:$,onKeyUp:ee,className:t(h,{["".concat(h,"-disabled")]:E},null==O?void 0:O.input),style:null==B?void 0:B.input,ref:P,size:w,type:j,onCompositionStart:e=>{D.current=!0,null==W||W(e)},onCompositionEnd:Z}))})())});export{u as B,d as I,s as r,i as u};
