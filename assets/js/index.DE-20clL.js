import{r as e,j as t}from"./react@19.2.3.DikTGMTS.js";import{H as a}from"./keepalive-for-react@5.0.7_r_33100828a8f90b61e9967b46b3101fcd.CeIOHkrT.js";import{tableColumns as o,searchList as r,createList as s}from"./model.CdnVw6lZ.js";import{A as c,I as i,a as n,k as p,E as m,l as d,m as _,n as b,o as f}from"./index.CBHmgQm4.js";import{c as l,B as j}from"./BaseContent.BsrVffw5.js";import{U as u}from"./UpdateBtn.BR31tGom.js";import{D as g,B as y}from"./BasePagination.BjPnphOZ.js";import{B as h}from"./BaseCard.DCIFwc7r.js";import{B as x}from"./BaseSearch.BqlQ2yLQ.js";import{B as k}from"./BaseTable.DZAKLAzC.js";import{B as v}from"./BaseModal.CiR32vsW.js";import{B as w}from"./BaseForm.7n4TiU6c.js";import{u as S}from"./react-i18next@16.5.1_i18nex_e0732ae603aefaca3ccb08379955d50d.BfBA-dM1.js";import{s as B,F as C,B as z}from"./antd@6.1.3_react-dom@19.2.3_react@19.2.3__react@19.2.3.BPu5MWj7.js";import"./clsx@2.1.1.DMqMD_4V.js";import"./react-dom@19.2.3_react@19.2.3.CfFRTaoX.js";import"./scheduler@0.27.0.6ULW7vKx.js";import"./constants.5OLMXA36.js";import"./@iconify_react@6.0.2_react@19.2.3.Cu4YUmvy.js";import"./IconInput.DNNqqMqZ.js";import"./@ant-design_icons@6.1.0_rea_578d967b89ca52aedd84b4dfb2c6cf72.Cc9lQV8s.js";import"./@ant-design_icons-svg@4.4.2.CjW3sjtx.js";import"./@ant-design_colors@8.0.0.C_9FKw7I.js";import"./@ant-design_fast-color@3.0.0.Bv-idf8E.js";import"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.BwjZ45jd.js";import"./react-is@18.3.1.USR0mOhp.js";import"./is-mobile@5.0.0.D2pt-sMC.js";import"./StateSwitch.CgAtufwU.js";import"./i18next-http-backend@3.0.2.CrAdD4hv.js";import"./nprogress@0.2.0.CrEkXCuG.js";import"./crypto-js@4.2.0.gRZQeTrA.js";import"./axios@1.13.2.DDVHPqWP.js";import"./lodash@4.17.21.CxmCRF7_.js";import"./zustand@5.0.9_@types_react@_5454f66ab05067d144a1abef0fde1e8c.BSDGg82B.js";import"./react-router@7.11.0_react-d_9bf5140e9212b7cc8e1e4977b49a16e8.D4jMOoH1.js";import"./@ant-design_cssinjs@2.0.1_r_52ebc5f68c5d55a7b1a8f8a117b18eba.CKm-ebu2.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.CDtraqjp.js";import"./i18next@25.7.3_typescript@5.9.3.oPH98fpq.js";import"./i18next-browser-languagedetector@8.2.0.q5bUM8v9.js";import"./dayjs@1.11.19.DTq05uGT.js";import"./web-vitals@5.1.0.C9lpl2zp.js";import"./@sentry_react@10.38.0_react@19.2.3.BWOZVc26.js";import"./@sentry_core@10.38.0.B-bj8hQP.js";import"./@sentry_browser@10.38.0.DJM_bMq3.js";import"./@sentry-internal_browser-utils@10.38.0.Bc5JQQFT.js";import"./@sentry-internal_replay@10.38.0.4OC3EoWI.js";import"./@ant-design_cssinjs-utils@2_9cdeccd52263af62f34dd9f213f921e5.DDTdniY7.js";import"./@babel_runtime@7.28.4.CxDHAbvQ.js";import"./@rc-component_resize-observ_a5d141e3de655ef602de0c6d9e51ffb4.BcYDcD7g.js";import"./@rc-component_motion@1.1.6__75bed58c5aa0279623e804b6e3100d82.BH4WDxGu.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./@rc-component_pagination@1._c8c3dfc82534658d6c7c4054f0d2f69c.B94sHowS.js";import"./@rc-component_picker@1.9.0__52a8cb63fe1d91d00305622cb5380f6e.CrolyJCD.js";import"./@rc-component_trigger@3.7.2_b5d51e27885fcdc381f6db89cb94580b.CPKSUJO9.js";import"./@rc-component_portal@2.2.0__23d0e188c8e59a845be2370f4ba3b141.C5QFGiBV.js";import"./@rc-component_overflow@1.0._000e3b789f0a378ea10d91c90289e484.CzJM8PZE.js";import"./@rc-component_notification@_6b5601d366b139db646993c6d2b44fe7.DLisougw.js";import"./@rc-component_color-picker@_b31871ba6e7583d0e0030156daa2c231.COZgnpLT.js";import"./@rc-component_collapse@1.1._228d3773bbed33f966bd3893dbe8729d.DUVwZ0yu.js";import"./@rc-component_dialog@1.5.1__3a9190aeba7b200bd9ee7697ebc43c96.JVLS7szE.js";import"./@rc-component_form@1.6.0_re_b998db7a1757bdc2c2d6e65b57d3d80e.AwMRaMSI.js";import"./@rc-component_async-validator@5.0.4.CknKSRqr.js";import"./@rc-component_select@1.4.0__72937b420adc00cfcd381e86fe79d4ff.8MZYS8R4.js";import"./@rc-component_virtual-list@_eab7c240f5d5dcfc3960e23bede0b5bd.CuVrcOVa.js";import"./@rc-component_tooltip@1.4.0_24ce817bfa5749bd0e3c36dde530a97c.C_byx7yF.js";import"./@rc-component_dropdown@1.0._53032f4203d2df29a251177758ef8582.CVgUq2c-.js";import"./@rc-component_menu@1.2.0_re_22c4d0f32307dedeae1bf96beb63120f.DTqF3GQe.js";import"./@rc-component_checkbox@1.0._e8e0ff7b3fc71b270e8f41769fdc08ef.DJL_yI_u.js";import"./@rc-component_tabs@1.7.0_re_2e2b6a6e8158979ca118318443a5e725.BkW3mZpo.js";import"./@ant-design_react-slick@2.0_7e7eaf031d783e1bf442b33d4a0ab896.Bdn3fO8F.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./json2mq@0.2.0.5yP7-Ybv.js";import"./string-convert@0.2.1.CCzxSb8Y.js";import"./@rc-component_cascader@1.10_6ebff9b01a4e20f17bf5315b0fdf89e4.r6kg2lso.js";import"./@rc-component_tree@1.1.0_re_16b118318364c8e3af872a05fdf7f126.BEof-dAA.js";import"./@rc-component_segmented@1.3_21ca68187e5dbc0fdd04919b00514bb2.BmYT-Utv.js";import"./@rc-component_input-number@_8344498727e4684fb6e2c8a86fda3337.uOIVUFF_.js";import"./@rc-component_mini-decimal@1.1.0.DDB4x329.js";import"./@rc-component_input@1.1.2_r_6672dd2a1daa1d4fb8167692335bdc32.DkdSbKjI.js";import"./@rc-component_slider@1.0.1__528977580e75fd5a617258a02a5eb89f.Di9pPjPd.js";import"./@rc-component_drawer@1.3.0__a3d615bbff00e7f3d4a92805dfb7be48.D6FKC-R7.js";import"./@rc-component_image@1.5.3_r_dcb3ab75ae693752d40558f143f9ffbd.KNiZd_NH.js";import"./@rc-component_textarea@1.1._509480b13cbc5aaa7fb930d30d5446b8.D5f5N-N8.js";import"./@rc-component_mentions@1.6._78da067fea4317b9a061ddd8114d8e2c.DJMMdHhy.js";import"./@rc-component_progress@1.0._690d9711439beca726bc73677291eda2.CI9rio0-.js";import"./@rc-component_qrcode@1.1.1__0f9c8c9acd773e58dc69db4d81fa0587.DmD-Q-MG.js";import"./@rc-component_rate@1.0.1_re_607aeea99259c177b103a2159d2187ff.DcA_Dpee.js";import"./@rc-component_steps@1.2.2_r_676c9cf2ee63b15ecfba1a57f7fa461f.XVVUfPzR.js";import"./@rc-component_switch@1.0.3__79f884f0de666becb31c50b27a07c8e0.B1i6IAua.js";import"./@rc-component_table@1.9.0_r_af629d240898c7fe2c8824967839d777.DIgAaK_y.js";import"./@rc-component_context@2.0.1_9fe36d481fc46b168d9be8c7e1532bb4.BnFYUOb6.js";import"./@rc-component_tour@2.2.1_re_c814a7862157707785c7770d3c2b3347.Bbw2ugaR.js";import"./@rc-component_tree-select@1_ca468fe32827d69ce4681fdcb142e602.BCsPYFh7.js";import"./@rc-component_upload@1.1.0__a6e83aac22b2c573f173681e85b72b7b.DLTiVLW4.js";import"./@rc-component_mutate-observ_e6130eca8f32f9ca6ca6e4795e1097a7.C45aD8MB.js";import"./use-sync-external-store@1.6.0_react@19.2.3.DPc7I-Qr.js";import"./403.CHLua-6G.js";import"./helper.CTTvVNP0.js";import"./BaseTimeRangePicker.IVI79WAs.js";import"./react-resizable@3.1.2_react_5d246e7116c7c3f8eee3a59a08959a6f.Uuxg2K0q.js";import"./react-draggable@4.5.0_react_38b3ec0b5b5ffe2dfcce8c9bab4916d1.CeAM4Xig.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./is.BeBpkxAQ.js";import"./@dnd-kit_core@6.3.1_react-d_faeaa4ec592555ff24d378ec7b025ac6.BFZcAsKv.js";import"./@dnd-kit_utilities@3.2.2_react@19.2.3.Zu-YmhMD.js";import"./@dnd-kit_accessibility@3.1.1_react@19.2.3.BRj3-Usf.js";import"./@dnd-kit_sortable@10.0.0_@d_bb9a87c2c20c367037e96a5cfbc9db8c.B0Bs0FsN.js";const N={state:1,order:0};function F(){const{t:F,i18n:I}=S(),D=e.useRef(null),[E,M]=e.useState(!1),[P,q]=e.useState(!1),[L,A]=e.useState(!1),[H,O]=e.useState(!1),[R,T]=e.useState(c(F)),[U,K]=e.useState(""),[W,G]=e.useState(N),[J,Q]=e.useState({}),[V,X]=e.useState(i.page),[Y,Z]=e.useState(i.pageSize),[$,ee]=e.useState(0),[te,ae]=e.useState([]),[oe,re]=B.useMessage(),[se]=C.useForm(),ce=C.useWatch("type",se),{permissions:ie}=n(),ne="/authority/menu",pe={page:l(ne,ie),create:l("".concat(ne,"/create"),ie),update:l("".concat(ne,"/update"),ie),delete:l("".concat(ne,"/delete"),ie)},me=e.useCallback(async()=>{const e={...J,page:V,pageSize:Y};try{A(!0);const t=await p(e),{code:a,data:o}=t;if(200!==Number(a))return;const{items:r,total:s}=o;ee(s||0),ae(r||[])}finally{M(!1),A(!1)}},[V,Y,J]);e.useEffect(()=>{E&&me()},[me,E]),e.useEffect(()=>{pe.page&&me()},[pe.page]),a(()=>{me()},[]);const de=e=>{const t=null==e?void 0:e.id;let a=(null==e?void 0:e.id)?null==e?void 0:e.type:void 0;a&&a<3&&(a+=1),q(!0),T(c(F)),K(""),G({...N,parentId:t,type:a})},_e=async e=>{try{q(!0),T(m(F,e)),K(e),O(!0);const{code:t,data:a}=await d(e);if(200!==Number(t))return;G(a)}finally{O(!1)}},be=async e=>{try{A(!0);const{code:t,message:a}=await _(e);200===Number(t)&&(oe.success(a||F("public.successfullyDeleted")),me())}finally{A(!1)}},fe=e.useCallback((e,t)=>{X(e),Z(t),M(!0)},[]),le=e.useCallback((e,a)=>t.jsxs("div",{className:"flex flex-wrap gap-5px",children:[!0===pe.create&&(null==a?void 0:a.type)<=2&&t.jsx(z,{className:"small-btn",type:"primary",onClick:()=>de(a),children:F("systems:menu.addChildMenu")}),!0===pe.update&&t.jsx(u,{onClick:()=>_e(a.id)}),!0===pe.delete&&t.jsx(g,{name:"zh"===I.language?a.label:a.labelEn,handleDelete:()=>be(a.id)})]}),[pe.create,pe.update,pe.delete,F,I.language,de,_e,be]),je=e.useMemo(()=>o(F,le),[F,le]);return t.jsxs(j,{isPermission:pe.page,children:[re,t.jsx(h,{children:t.jsx(x,{list:r(F),data:J,isLoading:L,handleFinish:e=>{Q(e),M(!0)}})}),t.jsxs(h,{className:"mt-10px",children:[t.jsx(k,{isLoading:L,isCreate:pe.create,columns:je,dataSource:te,getPage:me,onCreate:de}),t.jsx(y,{disabled:L,current:V,pageSize:Y,total:$,onChange:fe})]}),t.jsx(v,{width:600,title:R,open:P,style:{top:20},confirmLoading:H,onOk:()=>{var e;null==(e=null==D?void 0:D.current)||e.submit()},onCancel:()=>{q(!1)},children:t.jsx(w,{ref:D,form:se,list:s(F,U,ce),data:W,labelCol:{span:4},wrapperCol:{span:19},handleFinish:async e=>{try{O(!0);const t=()=>U?b(U,e):f(e),{code:a,message:o}=await t();if(200!==Number(a))return;oe.success(o||F("public.successfulOperation")),q(!1),me()}catch(t){}finally{O(!1)}}})})]})}export{F as default};
