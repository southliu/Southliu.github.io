import{P as e}from"./@rc-component_portal@2.0.1__3d144a3e75e5531d8ca8009183b58415.Bf4rG5sj.js";import{r as t,e as n}from"./react@19.2.1.BpVBN_43.js";import{c as r}from"./clsx@2.1.1.BvmCeSbq.js";import{j as o,p as a,f as s,k as l,K as c}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{C as i}from"./@rc-component_motion@1.1.6__0afcbe001b0ce065bd610efbbf939bf0.BsUikez1.js";const u=t.createContext({});function f(e,t,n){let r=t;return!r&&n&&(r=`${e}-${n}`),r}function m(e,t){let n=e[`page${t?"Y":"X"}Offset`];const r="scroll"+(t?"Top":"Left");if("number"!=typeof n){const t=e.document;n=t.documentElement[r],"number"!=typeof n&&(n=t.body[r])}return n}const d=t.memo(({children:e})=>e,(e,{shouldUpdate:t})=>!t);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}const b={width:0,height:0,overflow:"hidden",outline:"none"},y={outline:"none"},v=n.forwardRef((e,s)=>{const{prefixCls:l,className:c,style:i,title:f,ariaId:m,footer:v,closable:h,closeIcon:g,onClose:C,children:E,bodyStyle:N,bodyProps:O,modalRender:j,onMouseDown:w,onMouseUp:k,holderRef:x,visible:R,forceRender:P,width:$,height:I,classNames:M,styles:S}=e,{panel:_}=n.useContext(u),D=o(x,_),T=t.useRef(null),A=t.useRef(null);n.useImperativeHandle(s,()=>({focus:()=>{T.current?.focus({preventScroll:!0})},changeActive:e=>{const{activeElement:t}=document;e&&t===A.current?T.current.focus({preventScroll:!0}):e||t!==T.current||A.current.focus({preventScroll:!0})}}));const H={};void 0!==$&&(H.width=$),void 0!==I&&(H.height=I);const U=v?n.createElement("div",{className:r(`${l}-footer`,M?.footer),style:{...S?.footer}},v):null,V=f?n.createElement("div",{className:r(`${l}-header`,M?.header),style:{...S?.header}},n.createElement("div",{className:r(`${l}-title`,M?.title),id:m,style:{...S?.title}},f)):null,z=t.useMemo(()=>"object"==typeof h&&null!==h?h:h?{closeIcon:g??n.createElement("span",{className:`${l}-close-x`})}:{},[h,g,l]),K=a(z,!0),L="object"==typeof h&&h.disabled,B=h?n.createElement("button",p({type:"button",onClick:C,"aria-label":"Close"},K,{className:`${l}-close`,disabled:L}),z.closeIcon):null,F=n.createElement("div",{className:r(`${l}-container`,M?.container),style:S?.container},B,V,n.createElement("div",p({className:r(`${l}-body`,M?.body),style:{...N,...S?.body}},O),E),U);return n.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":f?m:null,"aria-modal":"true",ref:D,style:{...i,...H},className:r(l,c),onMouseDown:w,onMouseUp:k},n.createElement("div",{ref:T,tabIndex:0,style:y},n.createElement(d,{shouldUpdate:R||P},j?j(F):F)),n.createElement("div",{tabIndex:0,ref:A,style:b}))});function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}const g=t.forwardRef((e,n)=>{const{prefixCls:o,title:a,style:s,className:l,visible:c,forceRender:u,destroyOnHidden:f,motionName:d,ariaId:p,onVisibleChanged:b,mousePosition:y}=e,g=t.useRef(null),C=t.useRef(null);t.useImperativeHandle(n,()=>({...C.current,inMotion:g.current.inMotion,enableMotion:g.current.enableMotion}));const[E,N]=t.useState(),O={};function j(){const e=function(e){const t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,o=r.defaultView||r.parentWindow;return n.left+=m(o),n.top+=m(o,!0),n}(g.current.nativeElement);N(y&&(y.x||y.y)?`${y.x-e.left}px ${y.y-e.top}px`:"")}return E&&(O.transformOrigin=E),t.createElement(i,{visible:c,onVisibleChanged:b,onAppearPrepare:j,onEnterPrepare:j,forceRender:u,motionName:d,removeOnLeave:f,ref:g},({className:n,style:c},i)=>t.createElement(v,h({},e,{ref:C,title:a,ariaId:p,prefixCls:o,holderRef:i,style:{...c,...s,...O},className:r(l,n)})))});function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}const E=e=>{const{prefixCls:n,style:o,visible:a,maskProps:s,motionName:l,className:c}=e;return t.createElement(i,{key:"mask",visible:a,motionName:l,leavedClassName:`${n}-mask-hidden`},({className:e,style:a},l)=>t.createElement("div",C({ref:l,style:{...a,...o},className:r(`${n}-mask`,e,c)},s)))};function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}const O=e=>{const{prefixCls:n="rc-dialog",zIndex:o,visible:i=!1,keyboard:u=!0,focusTriggerAfterClose:m=!0,wrapStyle:d,wrapClassName:p,wrapProps:b,onClose:y,afterOpenChange:v,afterClose:h,transitionName:C,animation:O,closable:j=!0,mask:w=!0,maskTransitionName:k,maskAnimation:x,maskClosable:R=!0,maskStyle:P,maskProps:$,rootClassName:I,rootStyle:M,classNames:S,styles:_}=e,D=t.useRef(null),T=t.useRef(null),A=t.useRef(null),[H,U]=t.useState(i),V=s();function z(){if(U(!1),w&&D.current&&m){try{D.current.focus({preventScroll:!0})}catch(e){}D.current=null}H&&h?.()}function K(e){y?.(e)}const L=t.useRef(!1),B=t.useRef(null);let F=null;R&&(F=e=>{L.current?L.current=!1:T.current===e.target&&K(e)}),t.useEffect(()=>{i?(U(!0),l(T.current,document.activeElement)||(D.current=document.activeElement)):H&&A.current.enableMotion()&&!A.current.inMotion()&&z()},[i]),t.useEffect(()=>()=>{clearTimeout(B.current)},[]);const W={zIndex:o,...d,..._?.wrapper,display:H?null:"none"};return t.createElement("div",N({className:r(`${n}-root`,I),style:M},a(e,{data:!0})),t.createElement(E,{prefixCls:n,visible:w&&i,motionName:f(n,k,x),style:{zIndex:o,...P,..._?.mask},maskProps:$,className:S?.mask}),t.createElement("div",N({tabIndex:-1,onKeyDown:function(e){if(u&&e.keyCode===c.ESC)return e.stopPropagation(),void K(e);i&&e.keyCode===c.TAB&&A.current.changeActive(!e.shiftKey)},className:r(`${n}-wrap`,p,S?.wrapper),ref:T,onClick:F,style:W},b),t.createElement(g,N({},e,{onMouseDown:()=>{clearTimeout(B.current),L.current=!0},onMouseUp:()=>{B.current=setTimeout(()=>{L.current=!1})},ref:A,closable:j,ariaId:V,prefixCls:n,visible:i&&H,onClose:K,onVisibleChanged:function(e){e?l(T.current,document.activeElement)||A.current?.focus():z(),v?.(e)},motionName:f(n,C,O)}))))};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}const w=n=>{const{visible:r,getContainer:o,forceRender:a,destroyOnHidden:s=!1,afterClose:l,closable:c,panelRef:i}=n,[f,m]=t.useState(r),d=t.useMemo(()=>({panel:i}),[i]);return t.useEffect(()=>{r&&m(!0)},[r]),a||!s||f?t.createElement(u.Provider,{value:d},t.createElement(e,{open:r||a||f,autoDestroy:!1,getContainer:o,autoLock:r||f},t.createElement(O,j({},n,{destroyOnHidden:s,afterClose:()=>{const e=c&&"object"==typeof c?c:{},{afterClose:t}=e||{};t?.(),l?.(),m(!1)}})))):null};export{w as D,v as P};
