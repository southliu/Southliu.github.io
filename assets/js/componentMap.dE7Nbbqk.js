import{j as e,r as t}from"./react@19.1.1.osUeTYwR.js";import{l}from"./lodash@4.17.21.dYGZUVbZ.js";import{T as a,D as n,r,P as o}from"./index.CPSoCv0-.js";import{d as s}from"./dayjs@1.11.13.IJKq6rJZ.js";import{o as i,p as u,f as c,q as p,r as d,v as f,I as v,a as m,w as h,C as g,x as b,i as y,y as j,z as S,U as x}from"./antd@5.27.0_react-dom@19.1.1_react@19.1.1__react@19.1.1.C9M9EXgq.js";import{u as P}from"./react-i18next@15.6.1_i18nex_74a7e71e4075fb517089ab3b681ca6ee.DYNCe44U.js";function C(e){switch(e){case"Switch":return"checked";case"Upload":return"fileList";default:return"value"}}function w(e,t){switch(t){case"Select":case"TreeSelect":return{allowClear:!0,showSearch:!0,placeholder:e("public.inputPleaseSelect")};case"InputNumber":return{placeholder:e("public.inputPleaseEnter")};case"Checkbox":case"CheckboxGroup":return{};case"DatePicker":return{placeholder:e("public.inputPleaseSelect"),format:n};case"RangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[n,n]};case"TimePicker":return{placeholder:e("public.inputPleaseSelect"),format:a};case"TimeRangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[a,a]};default:return{allowClear:!0,placeholder:e("public.inputPleaseEnter")}}}const D=e=>Array.isArray(e)?e:null==e?void 0:e.fileList,k=e=>{var t;const a=l.cloneDeep(e);return delete a.wrapperWidth,delete a.componentProps,delete a.render,a.hidden&&(null==(t=a.rules)?void 0:t.length)&&(a.rules=void 0),"Upload"!==a.component||(null==a?void 0:a.getValueFromEvent)||(a.getValueFromEvent=D),a},N=e=>{const t={};return Object.keys(e).forEach(l=>{var a;"string"==typeof e[l]&&(e[l]=null==(a=e[l])?void 0:a.trim()),""!==e[l]&&(t[l]=e[l])}),t};function T(e){return r.get("/authority/common/games",{params:e})}function A(){return e.jsx("div",{className:"absolute left-50% top-50% -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx(c,{spinning:!0})})}function R(l){var a;const{t:n}=P(),[r,o]=t.useState(!1),[s,u]=t.useState([]),c={...l};delete c.api,delete c.params,delete c.apiResultKey;const p=t.useCallback(async()=>{if(l.api)try{const{api:e,params:t,apiResultKey:a}=l;if(o(!0),e){const l=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await l;if(200!==Number(n))return;const o=a?null==r?void 0:r[a]:r;u(o)}}finally{o(!1)}},[l]);t.useEffect(()=>{l.value&&0===s.length&&p()},[l.value]);return e.jsx(i,{allowClear:!0,showSearch:!0,maxTagCount:F,placeholder:n("public.inputPleaseSelect"),optionFilterProp:(null==(a=null==c?void 0:c.fieldNames)?void 0:a.label)||"label",...c,loading:r,options:s,notFoundContent:r&&e.jsx(A,{}),onOpenChange:e=>{var t;e&&p(),null==(t=l.onOpenChange)||t.call(l,e)}})}const F="responsive";function K(t){return e.jsx(e.Fragment,{children:e.jsx(R,{...t,mode:"multiple",api:T,fieldNames:{label:"name",value:"id"}})})}function E(e){return r.get("/platform/partner",{params:e})}function z(e,t){return r.get(e,{params:t})}function O(t){return e.jsx(R,{...t,api:E,mode:"multiple",fieldNames:{label:"name",value:"id"}})}function G(e,t=n){return s.isDayjs(e)?e.format(t):e}function I(e){return s.isDayjs(e)?e:s(e)}function _(e,t=n){if(e)return(null==e?void 0:e.length)>1&&s.isDayjs(null==e?void 0:e[0])&&s.isDayjs(null==e?void 0:e[1])?[e[0].format(t),e[1].format(t)]:e}function U(e){if(e)return(null==e?void 0:e.length)>1&&!s.isDayjs(null==e?void 0:e[0])&&s.isDayjs(null==e?void 0:e[1])?[s(e[0]),e[1]]:(null==e?void 0:e.length)>1&&s.isDayjs(null==e?void 0:e[0])&&!s.isDayjs(null==e?void 0:e[1])?[e[0],s(e[1])]:(null==e?void 0:e.length)>1&&!s.isDayjs(null==e?void 0:e[0])&&!s.isDayjs(null==e?void 0:e[1])?[s(e[0]),s(e[1])]:e}function q(e,t){var l;for(let a=0;a<e.length;a++)if(e[a].name===t)return(null==(l=e[a].componentProps)?void 0:l.format)||n;return n}function M(e,t){var l;const a=t.filter(e=>"customize"===e.component).map(e=>e.name);for(const n in e)if(!(null==a?void 0:a.includes(n))){if(2===(null==(l=e[n])?void 0:l.length)&&s.isDayjs(e[n][0])&&s.isDayjs(e[n][1])){const l=q(t,n);e[n]=_(e[n],l)}if((null==e?void 0:e[n])&&s.isDayjs(e[n])){const l=q(t,n);e[n]=G(e[n],l)}}return e}const{RangePicker:H}=p;const{RangePicker:L}=d;const V=new Map;function W(t,l){const{component:a,componentProps:n}=l,r=e.jsx(v,{...w(t,"Input"),...n});if("customize"===a){const{render:e}=l;if(!e)return r;B("customize",e)}const o=V.get(a);return o?e.jsx(e.Fragment,{children:e.jsx(o,{...w(t,a),...n})}):r}function B(e,t){V.set(e,t)}V.set("Input",v),V.set("TextArea",v.TextArea),V.set("InputNumber",m),V.set("InputPassword",v.Password),V.set("AutoComplete",h),V.set("Select",function(t){var l;const{options:a}=t,{t:n}=P(),r=(null==a?void 0:a.map(e=>"object"!=typeof e?{label:e,value:e}:e))||[];return e.jsx(i,{allowClear:!0,showSearch:!0,maxTagCount:F,placeholder:n("public.inputPleaseSelect"),optionFilterProp:(null==(l=null==t?void 0:t.fieldNames)?void 0:l.label)||"label",...t,options:r})}),V.set("TreeSelect",function(t){var l;const{treeData:a}=t,{t:n}=P(),r=(null==a?void 0:a.map(e=>"object"!=typeof e?{label:e,value:e}:e))||[];return e.jsx(u,{allowClear:!0,showSearch:!0,maxTagCount:F,treeNodeFilterProp:(null==(l=null==t?void 0:t.fieldNames)?void 0:l.label)||"label",placeholder:n("public.inputPleaseSelect"),...t,treeData:r})}),V.set("Checkbox",g),V.set("CheckboxGroup",g.Group),V.set("RadioGroup",b.Group),V.set("Switch",y),V.set("Rate",j),V.set("Slider",S),V.set("Upload",x),V.set("Transfer",function(l){const{value:a}=l,[n,r]=t.useState(a||[]);return e.jsx(f,{...l,targetKeys:n,onChange:e=>{var t;r(e),null==(t=null==l?void 0:l.onChange)||t.call(l,e)}})}),V.set("DatePicker",function(t){const{value:l}=t,a={...t};return l&&(a.value=I(l)),e.jsx(p,{...a})}),V.set("RangePicker",function(t){const{value:l}=t,a={...t};return l&&(a.value=U(l)),e.jsx(H,{...a})}),V.set("TimePicker",function(t){const{value:l}=t,a={...t};return l&&(a.value=I(l)),e.jsx(d,{...a})}),V.set("TimeRangePicker",function(t){const{value:l}=t,a={...t};return l&&(a.value=U(l)),e.jsx(L,{...a})}),V.set("ApiSelect",R),V.set("ApiTreeSelect",function(l){var a;const{t:n}=P(),[r,o]=t.useState(!1),[s,i]=t.useState([]),c={...l};delete c.api,delete c.params,delete c.apiResultKey;const p=t.useCallback(async()=>{if(l.api)try{const{api:e,params:t,apiResultKey:a}=l;if(o(!0),e){const l=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await l;if(200!==Number(n))return;const o=a?null==r?void 0:r[a]:r;i(o)}}finally{o(!1)}},[l]);return t.useEffect(()=>{l.value&&0===(null==s?void 0:s.length)&&p()},[l.value]),e.jsx(u,{allowClear:!0,showSearch:!0,maxTagCount:F,treeNodeFilterProp:(null==(a=null==c?void 0:c.fieldNames)?void 0:a.label)||"label",placeholder:n("public.inputPleaseSelect"),...c,loading:r,treeData:s,notFoundContent:r&&e.jsx(A,{}),onOpenChange:e=>{var t;e&&p(),null==(t=l.onOpenChange)||t.call(l,e)}})}),V.set("ApiPageSelect",function(a){var n;const{pageKey:r="page",pageSizeKey:o="pageSize",queryKey:s="query",page:u=1,pageSize:p=20}=a,{t:d}=P(),[f,v]=t.useState(!1),[m,h]=t.useState(u),[g,b]=t.useState([]),[y,j]=t.useState(!1),[S,x]=t.useState(""),C=t.useRef(!0),w={...a};delete w.api,delete w.params,delete w.apiResultKey,delete w.pageKey,delete w.pageSizeKey,t.useEffect(()=>{y&&(j(!1),D())},[y]);const D=t.useCallback(async()=>{if(a.api&&C.current)try{const{api:e,params:t,apiResultKey:l}=a,n={[r]:m,[o]:p,[s]:S||void 0};if(Array.isArray(t))for(let a=0;a<(null==t?void 0:t.length);a++){const e=t[a];e.constructor===Object&&(t[a]={...e,...n})}if(v(!0),e){const r=Array.isArray(t)?e(...t):e({...t,...n}),{code:o,data:s}=await r;if(200!==Number(o))return;const i=l?null==s?void 0:s[l]:s;if(null==i?void 0:i.length){const e=g.concat(i);b(e)}C.current=!!(null==i?void 0:i.length),C.current||b(e=>{var t,l;return e.length?e.concat([{[(null==(t=null==a?void 0:a.fieldNames)?void 0:t.label)||"label"]:d("public.noMoreData"),[(null==(l=null==a?void 0:a.fieldNames)?void 0:l.value)||"value"]:d("public.noMoreData"),disabled:!0,className:"text-center"}]):e})}}finally{v(!1)}},[m,S]);t.useEffect(()=>{a.value&&0===g.length&&D()},[a.value]);const k=t.useCallback(async e=>{const{scrollTop:t,scrollHeight:l,clientHeight:a}=e.currentTarget;t+a>=l-10&&!f&&C&&(h(m+1),j(!0))},[f,C,m]),N=l.debounce(e=>{var t;null==(t=null==a?void 0:a.onSearch)||t.call(a,e),b([]),h(u),C.current=!0,x(e),j(!0)},200);return e.jsx(i,{allowClear:!0,showSearch:!0,maxTagCount:F,placeholder:d("public.inputPleaseSelect"),optionFilterProp:(null==(n=null==w?void 0:w.fieldNames)?void 0:n.label)||"label",...w,onSearch:N,onPopupScroll:k,popupRender:t=>e.jsxs(e.Fragment,{children:[t,e.jsx("div",{className:"py-3px text-center",children:f&&C&&!!(null==g?void 0:g.length)&&e.jsx(c,{size:"small",spinning:!0})})]}),loading:f,options:g,notFoundContent:f&&e.jsx(A,{}),onOpenChange:e=>{var t;e&&!(null==g?void 0:g.length)&&D(),null==(t=a.onOpenChange)||t.call(a,e)}})}),V.set("PasswordStrength",o),B("GameSelect",K),B("PartnerSelect",O);export{B as a,N as b,W as c,k as d,M as f,z as g,C as h};
