import{i as e,h as t,k as o,d as r}from"./@babel_runtime@7.27.6.R8rA2vPb.js";import{T as n}from"./@rc-component_trigger@2.2.6_react-dom@19.1.0_react@19.1.0.qV0sH2t9.js";import{c as i}from"./classnames@2.5.1.6O6XshCl.js";import{t as a,K as s,j as l,l as c,s as f}from"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0.ZpIlvg4e.js";import{r as u,e as p}from"./react@19.1.0.QBh3HWPD.js";var v=s.ESC,m=s.TAB;var d=u.forwardRef((function(e,t){var o=e.overlay,r=e.arrow,n=e.prefixCls,i=u.useMemo((function(){return"function"==typeof o?o():o}),[o]),a=l(t,c(i));return p.createElement(p.Fragment,null,r&&p.createElement("div",{className:"".concat(n,"-arrow")}),p.cloneElement(i,{ref:f(i)?a:void 0}))})),g={adjustX:1,adjustY:1},w=[0,0],b={topLeft:{points:["bl","tl"],overflow:g,offset:[0,-4],targetOffset:w},top:{points:["bc","tc"],overflow:g,offset:[0,-4],targetOffset:w},topRight:{points:["br","tr"],overflow:g,offset:[0,-4],targetOffset:w},bottomLeft:{points:["tl","bl"],overflow:g,offset:[0,4],targetOffset:w},bottom:{points:["tc","bc"],overflow:g,offset:[0,4],targetOffset:w},bottomRight:{points:["tr","br"],overflow:g,offset:[0,4],targetOffset:w}},h=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function C(s,g){var w,C=s.arrow,y=void 0!==C&&C,R=s.prefixCls,E=void 0===R?"rc-dropdown":R,N=s.transitionName,O=s.animation,A=s.align,j=s.placement,k=void 0===j?"bottomLeft":j,x=s.placements,P=void 0===x?b:x,V=s.getPopupContainer,_=s.showAction,F=s.hideAction,L=s.overlayClassName,S=s.overlayStyle,T=s.visible,M=s.trigger,W=void 0===M?["hover"]:M,D=s.autoFocus,B=s.overlay,H=s.children,I=s.onVisibleChange,K=e(s,h),X=p.useState(),Y=t(X,2),q=Y[0],z=Y[1],G="visible"in s?T:q,J=p.useRef(null),Q=p.useRef(null),U=p.useRef(null);p.useImperativeHandle(g,(function(){return J.current}));var Z=function(e){z(e),null==I||I(e)};!function(e){var t=e.visible,o=e.triggerRef,r=e.onVisibleChange,n=e.autoFocus,i=e.overlayRef,s=u.useRef(!1),l=function(){var e,n;t&&(null===(e=o.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e),null==r||r(!1))},c=function(){var e;return!(null===(e=i.current)||void 0===e||!e.focus||(i.current.focus(),s.current=!0,0))},f=function(e){switch(e.keyCode){case v:l();break;case m:var t=!1;s.current||(t=c()),t?e.preventDefault():l()}};u.useEffect((function(){return t?(window.addEventListener("keydown",f),n&&a(c,3),function(){window.removeEventListener("keydown",f),s.current=!1}):function(){s.current=!1}}),[t])}({visible:G,triggerRef:U,onVisibleChange:Z,autoFocus:D,overlayRef:Q});var $,ee,te,oe=function(){return p.createElement(d,{ref:Q,overlay:B,prefixCls:E,arrow:y})},re=p.cloneElement(H,{className:i(null===(w=H.props)||void 0===w?void 0:w.className,G&&($=s.openClassName,void 0!==$?$:"".concat(E,"-open"))),ref:f(H)?l(U,c(H)):void 0}),ne=F;return ne||-1===W.indexOf("contextMenu")||(ne=["click"]),p.createElement(n,o({builtinPlacements:P},K,{prefixCls:E,ref:J,popupClassName:i(L,r({},"".concat(E,"-show-arrow"),y)),popupStyle:S,action:W,showAction:_,hideAction:ne,popupPlacement:k,popupAlign:A,popupTransitionName:N,popupAnimation:O,popupVisible:G,stretch:(ee=s.minOverlayWidthMatchTrigger,te=s.alignPoint,("minOverlayWidthMatchTrigger"in s?ee:!te)?"minWidth":""),popup:"function"==typeof B?oe:oe(),onPopupVisibleChange:Z,onPopupClick:function(e){var t=s.onOverlayClick;z(!1),t&&t(e)},getPopupContainer:V}),re)}const y=p.forwardRef(C);export{y as D};
