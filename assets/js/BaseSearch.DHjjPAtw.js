import{r as e,j as l}from"./react@18.2.0.CwGjMYfB.js";import{h as s,c as a,f as i}from"./componentMap.D0V4kLs6.js";import{u as t}from"./index.Byvhhw0N.js";import{u as r}from"./react-i18next@14.1.1_i18next@23.11.4_react-dom@18.2.0_react@18.2.0.CoFanrD1.js";import{F as n,B as d,f as o,e as c}from"./antd@5.20.2_react-dom@18.2.0_react@18.2.0.DxyHYYAl.js";import{l as m,m as h,n as p}from"./@ant-design_icons@5.3.7_react-dom@18.2.0_react@18.2.0.1hpSyJyf.js";const u=e.forwardRef(((u,x)=>{var f;const{list:j,data:b,initSearch:v,isLoading:C,isSearch:w=!0,isClear:y=!0,isRowExpand:g=!0,type:N="default",style:F,className:_,children:S,labelCol:E,wrapperCol:I,defaultColCount:k=4,defaultRowExpand:W=2,handleFinish:P}=u,{t:R}=r(),{isPhone:B}=t(),[L]=n.useForm(),[O,V]=e.useState(!1),[$,z]=e.useState(!0),[A,H]=e.useState(g);e.useEffect((()=>{if(H(g),g){H(k*W<j.length)}}),[k,W,g,j.length]),e.useEffect((()=>{try{Object.keys(b).length&&(z(!1),L.setFieldsValue({...b}))}catch(e){}}),[b,L,$]);const M={...u};delete M.type,delete M.isSearch,delete M.isClear,delete M.isLoading,delete M.initSearch,delete M.handleFinish;const T=()=>{null==L||L.submit()},q=e=>(null==e?void 0:e.labelWidth)?{style:{width:e.labelWidth}}:(null==e?void 0:e.labelCol)?e.labelCol:E||("grid"!==N||B?void 0:{span:6}),D=e=>(null==e?void 0:e.wrapperWidth)?{style:{width:e.wrapperWidth}}:(null==e?void 0:e.wrapperCol)?e.wrapperCol:I||("grid"!==N||B?void 0:{span:18}),G=l.jsxs("div",{className:"flex items-center flex-wrap",children:[!!w&&l.jsx(n.Item,{children:l.jsx(d,{type:"primary",htmlType:"submit",className:"!mb-5px "+(B?"mr-5px":""),loading:C,icon:l.jsx(m,{}),children:R("public.search")})}),!!y&&l.jsx(n.Item,{children:l.jsx(d,{className:"!mb-5px "+(B?"mr-5px":""),icon:l.jsx(h,{}),onClick:()=>{null==L||L.resetFields(),null==L||L.setFieldsValue(v?{...v}:{}),null==L||L.submit()},children:R("public.clear")})}),S&&l.jsx(n.Item,{children:l.jsx("div",{className:"!mb-5px "+(B?"mr-5px":""),children:S})}),"grid"===N&&!B&&!!A&&l.jsxs("div",{className:"text-12px cursor-pointer color-#1677ff hover:color-#69b1ff",onClick:()=>{V(!O)},children:[l.jsx(p,{rotate:O?180:0}),O?"收缩":"展开"]})]});return l.jsx("div",{id:"searches",style:F,className:_,children:l.jsxs(n,{layout:B?"horizontal":"inline",...M,ref:x,form:L,onFinish:e=>{if(P){let l=i(e,j);l=(e=>{const l={};return Object.keys(e).forEach((s=>{""!==e[s]&&(l[s]=e[s])})),l})(l),null==P||P(l)}},onFinishFailed:e=>{},autoComplete:"off",children:[("default"===N||B)&&l.jsxs(l.Fragment,{children:[null==j?void 0:j.map((e=>l.jsx(n.Item,{label:e.label,name:e.name,className:"!mb-5px",hidden:e.hidden,labelCol:q(e),wrapperCol:D(e),rules:e.rules,valuePropName:s(e.component),children:a(R,e,T)},`${e.name}`))),G]}),"grid"===N&&!B&&l.jsxs(o,{wrap:!0,className:"w-full",children:[null==(f=(e=>{if(!A)return e;const l=k*W;for(let s=0;s<e.length;s++){const a=e[s];s<l?a.hidden=!1:a.hidden=!O}return e})(j))?void 0:f.map((e=>l.jsx("div",{style:{width:e.hidden?0:100/k+"%"},children:l.jsx(n.Item,{label:e.label,name:e.name,className:"!mb-5px",hidden:e.hidden,labelCol:q(e),wrapperCol:D(e),rules:e.rules,valuePropName:s(e.component),children:a(R,e,T)})},`${e.name}`))),l.jsx(c,{flex:(null==j?void 0:j.length)%k==0||A?"auto":void 0,children:l.jsx(o,{justify:"flex-end",children:G})})]})]})})}));export{u as B};
