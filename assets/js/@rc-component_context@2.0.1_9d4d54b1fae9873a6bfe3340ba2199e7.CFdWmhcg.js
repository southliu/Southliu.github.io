import{h as e,e as t,i as r,s as n}from"./@rc-component_util@1.7.0_re_e38ee95702524036372f825efc96e921.ChzNieGb.js";import{r as u}from"./react@18.3.1.zoCbf7Ot.js";import{r as o}from"./react-dom@18.3.1_react@18.3.1.BHWKb6f6.js";function a(t){const r=u.createContext(void 0);return{Context:r,Provider:({value:t,children:n})=>{const a=u.useRef(t);a.current=t;const[c]=u.useState(()=>({getValue:()=>a.current,listeners:new Set}));return e(()=>{o.unstable_batchedUpdates(()=>{c.listeners.forEach(e=>{e(t)})})},[t]),u.createElement(r.Provider,{value:c},n)},defaultValue:t}}function c(n,o){const a=t("function"==typeof o?o:e=>{if(void 0===o)return e;if(!Array.isArray(o))return e[o];const t={};return o.forEach(r=>{t[r]=e[r]}),t}),c=u.useContext(null==n?void 0:n.Context),{listeners:s,getValue:l}=c||{},f=u.useRef();f.current=a(c?l():null==n?void 0:n.defaultValue);const[,i]=u.useState({});return e(()=>{if(c)return s.add(e),()=>{s.delete(e)};function e(e){const t=a(e);r(f.current,t,!0)||i({})}},[c]),f.current}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function l(){const e=u.createContext(null);function t(){return u.useContext(e)}return{makeImmutable:function(r,o){const a=n(r),c=(n,c)=>{const l=a?{ref:c}:{},f=u.useRef(0),i=u.useRef(n);return null!==t()?u.createElement(r,s({},n,l)):(o&&!o(i.current,n)||(f.current+=1),i.current=n,u.createElement(e.Provider,{value:f.current},u.createElement(r,s({},n,l))))};return a?u.forwardRef(c):c},responseImmutable:function(e,r){const o=n(e),a=(r,n)=>{const a=o?{ref:n}:{};return t(),u.createElement(e,s({},r,a))};return u.memo(o?u.forwardRef(a):a,r)},useImmutableMark:t}}export{a,l as c,c as u};
