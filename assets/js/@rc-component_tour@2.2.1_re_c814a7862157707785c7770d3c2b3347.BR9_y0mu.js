import{r as e,e as t}from"./react@19.2.3.D3o_8b5j.js";import{T as n}from"./@rc-component_trigger@3.7.2_b5d51e27885fcdc381f6db89cb94580b.7SPRIdKI.js";import{c as o}from"./clsx@2.1.1.BvmCeSbq.js";import{h as l,e as r,f as a,p as s,d as c}from"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.OytLLzRX.js";import{P as i}from"./@rc-component_portal@2.2.0__23d0e188c8e59a845be2370f4ba3b141.DMGK87O5.js";function u(e){return null!==e&&"object"==typeof e}function f(e,t,n){var o;if(!1===e||!1===t&&(!u(e)||!e.closeIcon))return null;const l="boolean"!=typeof t?t:void 0;return u(e)?{...e,closeIcon:null!=(o=e.closeIcon)?o:l}:n||e||t?{closeIcon:l}:"empty"}function d(t,n,o,a,s,c){const[i,u]=e.useState(void 0);l(()=>{const e="function"==typeof t?t():t;u(e||null)});const[f,d]=e.useState(null),p=r(()=>{var e,t;if(i){s||function(e){const t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:o,right:l,bottom:r,left:a}=e.getBoundingClientRect();return o>=0&&a>=0&&l<=t&&r<=n}(i)||!n||i.scrollIntoView(a);const{left:o,top:l,width:r,height:u}=i.getBoundingClientRect(),f={left:o,top:l,width:r,height:u,radius:0};if(s){const n=null==(t=null==(e=c.current)?void 0:e.parentElement)?void 0:t.getBoundingClientRect();n&&(f.left-=n.left,f.top-=n.top)}d(e=>JSON.stringify(e)!==JSON.stringify(f)?f:e)}else d(null)}),m=e=>{var t;return null!=(t=Array.isArray(null==o?void 0:o.offset)?null==o?void 0:o.offset[e]:null==o?void 0:o.offset)?t:6};l(()=>(p(),window.addEventListener("resize",p),window.addEventListener("scroll",p),()=>{window.removeEventListener("resize",p),window.removeEventListener("scroll",p)}),[i,n,p]);return[e.useMemo(()=>{if(!f)return f;const e=m(0),t=m(1),n="number"!=typeof(l=null==o?void 0:o.radius)||Number.isNaN(l)?2:null==o?void 0:o.radius;var l;return{left:f.left-e,top:f.top-t,width:f.width+2*e,height:f.height+2*t,radius:n}},[f,o]),i]}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(this,arguments)}const m={fill:"transparent",pointerEvents:"auto"},h=e=>{const{prefixCls:n,rootClassName:l,pos:r,showMask:s,style:c={},fill:u="rgba(0,0,0,0.5)",open:f,animated:d,zIndex:h,disabledInteraction:v,styles:b,classNames:g,getPopupContainer:y}=e,E=a(),w="".concat(n,"-mask-").concat(E),N="object"==typeof d?null==d?void 0:d.placeholder:d,C="undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?{width:"100%",height:"100%"}:{width:"100vw",height:"100vh"},x=!1===y;return t.createElement(i,{open:f,autoLock:!x,getContainer:y},t.createElement("div",{className:o("".concat(n,"-mask"),l,null==g?void 0:g.mask),style:{position:x?"absolute":"fixed",left:0,right:0,top:0,bottom:0,zIndex:h,pointerEvents:r&&!v?"none":"auto",...c,...null==b?void 0:b.mask}},s?t.createElement("svg",{style:{width:"100%",height:"100%"}},t.createElement("defs",null,t.createElement("mask",{id:w},t.createElement("rect",p({x:"0",y:"0"},C,{fill:"white"})),r&&t.createElement("rect",{x:r.left,y:r.top,rx:r.radius,width:r.width,height:r.height,fill:"black",className:N?"".concat(n,"-placeholder-animated"):""}))),t.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:u,mask:"url(#".concat(w,")")}),r&&t.createElement(t.Fragment,null,t.createElement("rect",p({},m,{x:"0",y:"0",width:"100%",height:Math.max(r.top,0)})),t.createElement("rect",p({},m,{x:"0",y:"0",width:Math.max(r.left,0),height:"100%"})),t.createElement("rect",p({},m,{x:"0",y:r.top+r.height,width:"100%",height:"calc(100% - ".concat(r.top+r.height,"px)")})),t.createElement("rect",p({},m,{x:r.left+r.width,y:"0",width:"calc(100% - ".concat(r.left+r.width,"px)"),height:"100%"})))):null))},v=[0,0],b={left:{points:["cr","cl"],offset:[-8,0]},right:{points:["cl","cr"],offset:[8,0]},top:{points:["bc","tc"],offset:[0,-8]},bottom:{points:["tc","bc"],offset:[0,8]},topLeft:{points:["bl","tl"],offset:[0,-8]},leftTop:{points:["tr","tl"],offset:[-8,0]},topRight:{points:["br","tr"],offset:[0,-8]},rightTop:{points:["tl","tr"],offset:[8,0]},bottomRight:{points:["tr","br"],offset:[0,8]},rightBottom:{points:["bl","br"],offset:[8,0]},bottomLeft:{points:["tl","bl"],offset:[0,8]},leftBottom:{points:["br","bl"],offset:[-8,0]}};function g(e=!1){const t={};return Object.keys(b).forEach(n=>{t[n]={...b[n],autoArrow:e,targetOffset:v}}),t}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y.apply(this,arguments)}function E(t){var n;const{prefixCls:l,current:r,total:a,title:c,description:i,onClose:u,onPrev:f,onNext:d,onFinish:p,className:m,closable:h,classNames:v,styles:b}=t,g=s(h||{},!0),E=null!=(n=null==h?void 0:h.closeIcon)?n:e.createElement("span",{className:"".concat(l,"-close-x")},"Ã—"),w=!!h;return e.createElement("div",{className:o("".concat(l,"-panel"),m)},e.createElement("div",{className:o("".concat(l,"-section"),null==v?void 0:v.section),style:null==b?void 0:b.section},w&&e.createElement("button",y({type:"button",onClick:u,"aria-label":"Close"},g,{className:"".concat(l,"-close")}),E),e.createElement("div",{className:o("".concat(l,"-header"),null==v?void 0:v.header),style:null==b?void 0:b.header},e.createElement("div",{className:o("".concat(l,"-title"),null==v?void 0:v.title),style:null==b?void 0:b.title},c)),e.createElement("div",{className:o("".concat(l,"-description"),null==v?void 0:v.description),style:null==b?void 0:b.description},i),e.createElement("div",{className:o("".concat(l,"-footer"),null==v?void 0:v.footer),style:null==b?void 0:b.footer},e.createElement("div",{className:"".concat(l,"-sliders")},a>1?[...Array.from({length:a}).keys()].map((t,n)=>e.createElement("span",{key:t,className:n===r?"active":""})):null),e.createElement("div",{className:o("".concat(l,"-actions"),null==v?void 0:v.actions),style:null==b?void 0:b.actions},0!==r?e.createElement("button",{className:"".concat(l,"-prev-btn"),onClick:f},"Prev"):null,r===a-1?e.createElement("button",{className:"".concat(l,"-finish-btn"),onClick:p},"Finish"):e.createElement("button",{className:"".concat(l,"-next-btn"),onClick:d},"Next")))))}g();const w=t=>{const{current:n,renderPanel:o}=t;return e.createElement(e.Fragment,null,"function"==typeof o?o(t,n):e.createElement(E,t))},N=e.forwardRef((t,n)=>{const{open:o,autoLock:l,getContainer:r,domRef:a,className:s,style:c,fallbackDOM:u}=t;return e.useImperativeHandle(n,()=>a.current||u()),e.createElement(i,{open:o,autoLock:l,getContainer:r},e.createElement("div",{ref:a,className:s,style:c}))});function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}const x={left:"50%",top:"50%",width:1,height:1},k={block:"center",inline:"center"},O=t=>{const{prefixCls:r="rc-tour",steps:a=[],defaultCurrent:s,current:i,onChange:u,onClose:p,onFinish:m,open:v,defaultOpen:b,mask:y=!0,arrow:E=!0,rootClassName:O,placement:I,renderPanel:j,gap:P,animated:R,scrollIntoViewOptions:L=k,zIndex:A=1001,closeIcon:M,closable:_,builtinPlacements:z,disabledInteraction:F,styles:S,classNames:B,className:D,style:T,getPopupContainer:V,...H}=t,J=e.useRef(),[W,q]=c(s||0,i),[G,K]=c(b,v),Q=!(W<0||W>=a.length)&&(null==G||G),[U,X]=e.useState(Q),Y=e.useRef(Q);l(()=>{Q&&(Y.current||q(0),X(!0)),Y.current=Q},[Q]);const{target:Z,placement:$,style:ee,arrow:te,className:ne,mask:oe,scrollIntoViewOptions:le=k,closeIcon:re,closable:ae}=a[W]||{},se=function(t,n,o,l){return e.useMemo(()=>{const e=f(t,n,!1),r=f(o,l,!0);return"empty"!==e?e:r},[o,l,t,n])}(ae,re,_,M),ce=Q&&(null!=oe?oe:y),ie=null!=le?le:L,ue=e.useRef(null),fe=!1===V,[de,pe]=d(Z,v,P,ie,fe,ue),me=function(e,t,n){var o;return null!=(o=null!=n?n:t)?o:null===e?"center":"bottom"}(pe,I,$),he=!!pe&&(void 0===te?E:te),ve="object"==typeof he&&he.pointAtCenter;l(()=>{var e;null==(e=J.current)||e.forceAlign()},[ve,W]);const be=e=>{q(e),null==u||u(e)},ge=e.useMemo(()=>z?"function"==typeof z?z({arrowPointAtCenter:ve}):z:g(ve),[z,ve]);if(void 0===pe||!U)return null;const ye=()=>{K(!1),null==p||p(W)},Ee="boolean"==typeof ce?ce:!!ce,we="boolean"==typeof ce?void 0:ce;return e.createElement(e.Fragment,null,e.createElement(h,{getPopupContainer:V,styles:S,classNames:B,zIndex:A,prefixCls:r,pos:de,showMask:Ee,style:null==we?void 0:we.style,fill:null==we?void 0:we.color,open:Q,animated:R,rootClassName:O,disabledInteraction:F}),e.createElement(n,C({},H,{getPopupContainer:V,builtinPlacements:ge,ref:J,popupStyle:ee,popupPlacement:me,popupVisible:Q,popupClassName:o(O,ne),prefixCls:r,popup:()=>e.createElement(w,C({styles:S,classNames:B,arrow:he,key:"content",prefixCls:r,total:a.length,renderPanel:j,onPrev:()=>{be(W-1)},onNext:()=>{be(W+1)},onClose:ye,current:W,onFinish:()=>{ye(),null==m||m()}},a[W],{closable:se})),forceRender:!1,autoDestroy:!0,zIndex:A,arrow:!!he}),e.createElement(N,{open:Q,autoLock:!fe,getContainer:V,domRef:ue,fallbackDOM:()=>pe||document.body,className:o(D,O,"".concat(r,"-target-placeholder")),style:{...de||x,position:fe?"absolute":"fixed",pointerEvents:"none",...T}})))};export{O as T};
