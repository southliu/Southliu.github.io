import{f as e,g as r,n,b as t,c as a,a as i,d as s,e as u,_ as o,o as c}from"./@babel_runtime@7.28.4.CxDHAbvQ.js";function f(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var l=f(),d=/%[sdj%]/g;function p(e){if(!e||!e.length)return null;var r={};return e.forEach(function(e){var n=e.field;r[n]=r[n]||[],r[n].push(e)}),r}function y(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];var a=0,i=n.length;return"function"==typeof e?e.apply(null,n):"string"==typeof e?e.replace(d,function(e){if("%%"===e)return"%";if(a>=i)return e;switch(e){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch(r){return"[Circular]"}break;default:return e}}):e}function g(e,r){return null==e||(!("array"!==r||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(r)||"string"!=typeof e||e))}function h(e,r,n){var t=0,a=e.length;!function i(s){if(s&&s.length)n(s);else{var u=t;t+=1,u<a?r(e[u],i):n([])}}([])}var v=function(e){t(n,e);var r=a(n);function n(e,t){var a;return i(this,n),a=r.call(this,"Async Validation Error"),s(u(a),"errors",void 0),s(u(a),"fields",void 0),a.errors=e,a.fields=t,a}return o(n)}(c(Error));function m(e,r,t,a,i){if(r.first){var s=new Promise(function(r,s){var u=function(e){var r=[];return Object.keys(e).forEach(function(t){r.push.apply(r,n(e[t]||[]))}),r}(e);h(u,t,function(e){return a(e),e.length?s(new v(e,p(e))):r(i)})});return s.catch(function(e){return e}),s}var u=!0===r.firstFields?Object.keys(e):r.firstFields||[],o=Object.keys(e),c=o.length,f=0,l=[],d=new Promise(function(r,s){var d=function(e){if(l.push.apply(l,e),++f===c)return a(l),l.length?s(new v(l,p(l))):r(i)};o.length||(a(l),r(i)),o.forEach(function(r){var a=e[r];-1!==u.indexOf(r)?h(a,t,d):function(e,r,t){var a=[],i=0,s=e.length;function u(e){a.push.apply(a,n(e||[])),++i===s&&t(a)}e.forEach(function(e){r(e,u)})}(a,t,d)})});return d.catch(function(e){return e}),d}function q(e,r){return function(n){var t,a;return t=e.fullFields?function(e,r){for(var n=e,t=0;t<r.length;t++){if(null==n)return n;n=n[r[t]]}return n}(r,e.fullFields):r[n.field||e.fullField],(a=n)&&void 0!==a.message?(n.field=n.field||e.fullField,n.fieldValue=t,n):{message:"function"==typeof n?n():n,fieldValue:t,field:n.field||e.fullField}}}function b(n,t){if(t)for(var a in t)if(t.hasOwnProperty(a)){var i=t[a];"object"===e(i)&&"object"===e(n[a])?n[a]=r(r({},n[a]),i):n[a]=i}return n}var w,F="enum",x=function(e,r,n,t,a,i){!e.required||n.hasOwnProperty(e.field)&&!g(r,i||e.type)||t.push(y(a.messages.required,e.fullField))};var O=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,A=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,E={integer:function(e){return E.number(e)&&parseInt(e,10)===e},float:function(e){return E.number(e)&&!E.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(r){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(r){return"object"===e(r)&&!E.array(r)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(O)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(function(){if(w)return w;var e="[a-fA-F\\d:]",r=function(r){return r&&r.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",t="[a-fA-F\\d]{1,4}",a=["(?:".concat(t,":){7}(?:").concat(t,"|:)"),"(?:".concat(t,":){6}(?:").concat(n,"|:").concat(t,"|:)"),"(?:".concat(t,":){5}(?::").concat(n,"|(?::").concat(t,"){1,2}|:)"),"(?:".concat(t,":){4}(?:(?::").concat(t,"){0,1}:").concat(n,"|(?::").concat(t,"){1,3}|:)"),"(?:".concat(t,":){3}(?:(?::").concat(t,"){0,2}:").concat(n,"|(?::").concat(t,"){1,4}|:)"),"(?:".concat(t,":){2}(?:(?::").concat(t,"){0,3}:").concat(n,"|(?::").concat(t,"){1,5}|:)"),"(?:".concat(t,":){1}(?:(?::").concat(t,"){0,4}:").concat(n,"|(?::").concat(t,"){1,6}|:)"),"(?::(?:(?::".concat(t,"){0,5}:").concat(n,"|(?::").concat(t,"){1,7}|:))")],i="(?:".concat(a.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),s=new RegExp("(?:^".concat(n,"$)|(?:^").concat(i,"$)")),u=new RegExp("^".concat(n,"$")),o=new RegExp("^".concat(i,"$")),c=function(e){return e&&e.exact?s:new RegExp("(?:".concat(r(e)).concat(n).concat(r(e),")|(?:").concat(r(e)).concat(i).concat(r(e),")"),"g")};c.v4=function(e){return e&&e.exact?u:new RegExp("".concat(r(e)).concat(n).concat(r(e)),"g")},c.v6=function(e){return e&&e.exact?o:new RegExp("".concat(r(e)).concat(i).concat(r(e)),"g")};var f=c.v4().source,l=c.v6().source,d="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(f,"|").concat(l,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return w=new RegExp("(?:^".concat(d,"$)"),"i")}())},hex:function(e){return"string"==typeof e&&!!e.match(A)}};const j={required:x,whitespace:function(e,r,n,t,a){(/^\s+$/.test(r)||""===r)&&t.push(y(a.messages.whitespace,e.fullField))},type:function(r,n,t,a,i){if(r.required&&void 0===n)x(r,n,t,a,i);else{var s=r.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(s)>-1?E[s](n)||a.push(y(i.messages.types[s],r.fullField,r.type)):s&&e(n)!==r.type&&a.push(y(i.messages.types[s],r.fullField,r.type))}},range:function(e,r,n,t,a){var i="number"==typeof e.len,s="number"==typeof e.min,u="number"==typeof e.max,o=r,c=null,f="number"==typeof r,l="string"==typeof r,d=Array.isArray(r);if(f?c="number":l?c="string":d&&(c="array"),!c)return!1;d&&(o=r.length),l&&(o=r.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?o!==e.len&&t.push(y(a.messages[c].len,e.fullField,e.len)):s&&!u&&o<e.min?t.push(y(a.messages[c].min,e.fullField,e.min)):u&&!s&&o>e.max?t.push(y(a.messages[c].max,e.fullField,e.max)):s&&u&&(o<e.min||o>e.max)&&t.push(y(a.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,r,n,t,a){e[F]=Array.isArray(e[F])?e[F]:[],-1===e[F].indexOf(r)&&t.push(y(a.messages[F],e.fullField,e[F].join(", ")))},pattern:function(e,r,n,t,a){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||t.push(y(a.messages.pattern.mismatch,e.fullField,r,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(r)||t.push(y(a.messages.pattern.mismatch,e.fullField,r,e.pattern))}}};var P=function(e,r,n,t,a){var i=e.type,s=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r,i)&&!e.required)return n();j.required(e,r,t,s,a,i),g(r,i)||j.type(e,r,t,s,a)}n(s)};const k={string:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r,"string")&&!e.required)return n();j.required(e,r,t,i,a,"string"),g(r,"string")||(j.type(e,r,t,i,a),j.range(e,r,t,i,a),j.pattern(e,r,t,i,a),!0===e.whitespace&&j.whitespace(e,r,t,i,a))}n(i)},method:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a),void 0!==r&&j.type(e,r,t,i,a)}n(i)},number:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(""===r&&(r=void 0),g(r)&&!e.required)return n();j.required(e,r,t,i,a),void 0!==r&&(j.type(e,r,t,i,a),j.range(e,r,t,i,a))}n(i)},boolean:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a),void 0!==r&&j.type(e,r,t,i,a)}n(i)},regexp:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a),g(r)||j.type(e,r,t,i,a)}n(i)},integer:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a),void 0!==r&&(j.type(e,r,t,i,a),j.range(e,r,t,i,a))}n(i)},float:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a),void 0!==r&&(j.type(e,r,t,i,a),j.range(e,r,t,i,a))}n(i)},array:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(null==r&&!e.required)return n();j.required(e,r,t,i,a,"array"),null!=r&&(j.type(e,r,t,i,a),j.range(e,r,t,i,a))}n(i)},object:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a),void 0!==r&&j.type(e,r,t,i,a)}n(i)},enum:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a),void 0!==r&&j.enum(e,r,t,i,a)}n(i)},pattern:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r,"string")&&!e.required)return n();j.required(e,r,t,i,a),g(r,"string")||j.pattern(e,r,t,i,a)}n(i)},date:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r,"date")&&!e.required)return n();var s;if(j.required(e,r,t,i,a),!g(r,"date"))s=r instanceof Date?r:new Date(r),j.type(e,s,t,i,a),s&&j.range(e,s.getTime(),t,i,a)}n(i)},url:P,hex:P,email:P,required:function(r,n,t,a,i){var s=[],u=Array.isArray(n)?"array":e(n);j.required(r,n,a,s,i,u),t(s)},any:function(e,r,n,t,a){var i=[];if(e.required||!e.required&&t.hasOwnProperty(e.field)){if(g(r)&&!e.required)return n();j.required(e,r,t,i,a)}n(i)}};var R=function(){function t(e){i(this,t),s(this,"rules",null),s(this,"_messages",l),this.define(e)}return o(t,[{key:"define",value:function(r){var n=this;if(!r)throw new Error("Cannot configure a schema with no rules");if("object"!==e(r)||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(e){var t=r[e];n.rules[e]=Array.isArray(t)?t:[t]})}},{key:"messages",value:function(e){return e&&(this._messages=b(f(),e)),this._messages}},{key:"validate",value:function(a){var i=this,s=a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"==typeof u&&(o=u,u={}),!this.rules||0===Object.keys(this.rules).length)return o&&o(null,s),Promise.resolve(s);if(u.messages){var c=this.messages();c===l&&(c=f()),b(c,u.messages),u.messages=c}else u.messages=this.messages();var d={};(u.keys||Object.keys(this.rules)).forEach(function(n){var t=i.rules[n],u=s[n];t.forEach(function(t){var o=t;"function"==typeof o.transform&&(s===a&&(s=r({},s)),null!=(u=s[n]=o.transform(u))&&(o.type=o.type||(Array.isArray(u)?"array":e(u)))),(o="function"==typeof o?{validator:o}:r({},o)).validator=i.getValidationMethod(o),o.validator&&(o.field=n,o.fullField=o.fullField||n,o.type=i.getType(o),d[n]=d[n]||[],d[n].push({rule:o,value:u,source:s,field:n}))})});var g={};return m(d,u,function(a,i){var o,c=a.rule,f=!("object"!==c.type&&"array"!==c.type||"object"!==e(c.fields)&&"object"!==e(c.defaultField));function l(e,t){return r(r({},t),{},{fullField:"".concat(c.fullField,".").concat(e),fullFields:c.fullFields?[].concat(n(c.fullFields),[e]):[e]})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Array.isArray(e)?e:[e];!u.suppressWarning&&o.length&&t.warning("async-validator:",o),o.length&&void 0!==c.message&&(o=[].concat(c.message));var d=o.map(q(c,s));if(u.first&&d.length)return g[c.field]=1,i(d);if(f){if(c.required&&!a.value)return void 0!==c.message?d=[].concat(c.message).map(q(c,s)):u.error&&(d=[u.error(c,y(u.messages.required,c.field))]),i(d);var p={};c.defaultField&&Object.keys(a.value).map(function(e){p[e]=c.defaultField}),p=r(r({},p),a.rule.fields);var h={};Object.keys(p).forEach(function(e){var r=p[e],n=Array.isArray(r)?r:[r];h[e]=n.map(l.bind(null,e))});var v=new t(h);v.messages(u.messages),a.rule.options&&(a.rule.options.messages=u.messages,a.rule.options.error=u.error),v.validate(a.value,a.rule.options||u,function(e){var r=[];d&&d.length&&r.push.apply(r,n(d)),e&&e.length&&r.push.apply(r,n(e)),i(r.length?r:null)})}else i(d)}if(f=f&&(c.required||!c.required&&a.value),c.field=a.field,c.asyncValidator)o=c.asyncValidator(c,a.value,d,a.source,u);else if(c.validator){try{o=c.validator(c,a.value,d,a.source,u)}catch(v){var p,h;null===(p=(h=console).error)||void 0===p||p.call(h,v),u.suppressValidatorError||setTimeout(function(){throw v},0),d(v.message)}!0===o?d():!1===o?d("function"==typeof c.message?c.message(c.fullField||c.field):c.message||"".concat(c.fullField||c.field," fails")):o instanceof Array?d(o):o instanceof Error&&d(o.message)}o&&o.then&&o.then(function(){return d()},function(e){return d(e)})},function(e){!function(e){var r=[],t={};function a(e){var t;Array.isArray(e)?r=(t=r).concat.apply(t,n(e)):r.push(e)}for(var i=0;i<e.length;i++)a(e[i]);r.length?(t=p(r),o(r,t)):o(null,s)}(e)},s)}},{key:"getType",value:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!k.hasOwnProperty(e.type))throw new Error(y("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if("function"==typeof e.validator)return e.validator;var r=Object.keys(e),n=r.indexOf("message");return-1!==n&&r.splice(n,1),1===r.length&&"required"===r[0]?k.required:k[this.getType(e)]||void 0}}]),t}();s(R,"register",function(e,r){if("function"!=typeof r)throw new Error("Cannot register a validator by type, validator is not a function");k[e]=r}),s(R,"warning",function(){}),s(R,"messages",l),s(R,"validators",k);export{R as S};
