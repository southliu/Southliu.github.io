import{i as e,h as t,f as n,g as a,k as r,d as o,j as i}from"./@babel_runtime@7.28.2.ESkOsrAB.js";import{c as l}from"./classnames@2.5.1.D0YHNMe_.js";import{u,B as s,r as c}from"./rc-input@1.8.0_react-dom@19.1.0_react@19.1.0__react@19.1.0.Dfwr1c0x.js";import{C as d,a as f,t as m}from"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0__react@19.1.0.cDkafaIC.js";import{r as p,e as g}from"./react@19.1.0.Bf1nU3Xp.js";import{R as v}from"./rc-resize-observer@1.4.3_re_83d0d5e9c67ffebc59212995af3a6882.CY0Jp_Qm.js";var h,b=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],x={};function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h||((h=document.createElement("textarea")).setAttribute("tab-index","-1"),h.setAttribute("aria-hidden","true"),h.setAttribute("name","hiddenTextarea"),document.body.appendChild(h)),e.getAttribute("wrap")?h.setAttribute("wrap",e.getAttribute("wrap")):h.removeAttribute("wrap");var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&x[n])return x[n];var a=window.getComputedStyle(e),r=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),o=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),i=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),l={sizingStyle:b.map(function(e){return"".concat(e,":").concat(a.getPropertyValue(e))}).join(";"),paddingSize:o,borderSize:i,boxSizing:r};return t&&n&&(x[n]=l),l}(e,t),o=r.paddingSize,i=r.borderSize,l=r.boxSizing,u=r.sizingStyle;h.setAttribute("style","".concat(u,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),h.value=e.value||e.placeholder||"";var s,c=void 0,d=void 0,f=h.scrollHeight;if("border-box"===l?f+=i:"content-box"===l&&(f-=o),null!==n||null!==a){h.value=" ";var m=h.scrollHeight-o;null!==n&&(c=m*n,"border-box"===l&&(c=c+o+i),f=Math.max(c,f)),null!==a&&(d=m*a,"border-box"===l&&(d=d+o+i),s=f>d?"":"hidden",f=Math.min(d,f))}var p={height:f,overflowY:s,resize:"none"};return c&&(p.minHeight=c),d&&(p.maxHeight=d),p}var w=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],z=p.forwardRef(function(i,u){var s=i,c=s.prefixCls,g=s.defaultValue,h=s.value,b=s.autoSize,x=s.onResize,z=s.className,S=s.style,C=s.disabled,E=s.onChange;s.onInternalAutoSize;var R=e(s,w),A=d(g,{value:h,postState:function(e){return null!=e?e:""}}),F=t(A,2),V=F[0],N=F[1],_=p.useRef();p.useImperativeHandle(u,function(){return{textArea:_.current}});var P=p.useMemo(function(){return b&&"object"===n(b)?[b.minRows,b.maxRows]:[]},[b]),j=t(P,2),T=j[0],H=j[1],k=!!b,B=p.useState(2),I=t(B,2),L=I[0],O=I[1],D=p.useState(),K=t(D,2),M=K[0],W=K[1],Y=function(){O(0)};f(function(){k&&Y()},[h,T,H,k]),f(function(){if(0===L)O(1);else if(1===L){var e=y(_.current,!1,T,H);O(2),W(e)}else!function(){try{if(navigator.userAgent.includes("Firefox")&&document.activeElement===_.current){var e=_.current,t=e.scrollTop,n=e.selectionStart,a=e.selectionEnd;_.current.setSelectionRange(n,a),_.current.scrollTop=t}}catch(r){}}()},[L]);var U=p.useRef(),X=function(){m.cancel(U.current)};p.useEffect(function(){return X},[]);var q=k?M:null,G=a(a({},S),q);return 0!==L&&1!==L||(G.overflowY="hidden",G.overflowX="hidden"),p.createElement(v,{onResize:function(e){2===L&&(null==x||x(e),b&&(X(),U.current=m(function(){Y()})))},disabled:!(b||x)},p.createElement("textarea",r({},R,{ref:_,style:G,className:l(c,z,o({},"".concat(c,"-disabled"),C)),disabled:C,value:V,onChange:function(e){N(e.target.value),null==E||E(e)}})))}),S=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],C=g.forwardRef(function(n,f){var m,v=n.defaultValue,h=n.value,b=n.onFocus,x=n.onBlur,y=n.onChange,w=n.allowClear,C=n.maxLength,E=n.onCompositionStart,R=n.onCompositionEnd,A=n.suffix,F=n.prefixCls,V=void 0===F?"rc-textarea":F,N=n.showCount,_=n.count,P=n.className,j=n.style,T=n.disabled,H=n.hidden,k=n.classNames,B=n.styles,I=n.onResize,L=n.onClear,O=n.onPressEnter,D=n.readOnly,K=n.autoSize,M=n.onKeyDown,W=e(n,S),Y=d(v,{value:h,defaultValue:v}),U=t(Y,2),X=U[0],q=U[1],G=null==X?"":String(X),J=g.useState(!1),Q=t(J,2),Z=Q[0],$=Q[1],ee=g.useRef(!1),te=g.useState(null),ne=t(te,2),ae=ne[0],re=ne[1],oe=p.useRef(null),ie=p.useRef(null),le=function(){var e;return null===(e=ie.current)||void 0===e?void 0:e.textArea},ue=function(){le().focus()};p.useImperativeHandle(f,function(){var e;return{resizableTextArea:ie.current,focus:ue,blur:function(){le().blur()},nativeElement:(null===(e=oe.current)||void 0===e?void 0:e.nativeElement)||le()}}),p.useEffect(function(){$(function(e){return!T&&e})},[T]);var se=g.useState(null),ce=t(se,2),de=ce[0],fe=ce[1];g.useEffect(function(){var e;de&&(e=le()).setSelectionRange.apply(e,i(de))},[de]);var me,pe=u(_,N),ge=null!==(m=pe.max)&&void 0!==m?m:C,ve=Number(ge)>0,he=pe.strategy(G),be=!!ge&&he>ge,xe=function(e,t){var n=t;!ee.current&&pe.exceedFormatter&&pe.max&&pe.strategy(t)>pe.max&&t!==(n=pe.exceedFormatter(t,{max:pe.max}))&&fe([le().selectionStart||0,le().selectionEnd||0]),q(n),c(e.currentTarget,e,y,n)},ye=A;pe.show&&(me=pe.showFormatter?pe.showFormatter({value:G,count:he,maxLength:ge}):"".concat(he).concat(ve?" / ".concat(ge):""),ye=g.createElement(g.Fragment,null,ye,g.createElement("span",{className:l("".concat(V,"-data-count"),null==k?void 0:k.count),style:null==B?void 0:B.count},me)));var we=!K&&!N&&!w;return g.createElement(s,{ref:oe,value:G,allowClear:w,handleReset:function(e){q(""),ue(),c(le(),e,y)},suffix:ye,prefixCls:V,classNames:a(a({},k),{},{affixWrapper:l(null==k?void 0:k.affixWrapper,o(o({},"".concat(V,"-show-count"),N),"".concat(V,"-textarea-allow-clear"),w))}),disabled:T,focused:Z,className:l(P,be&&"".concat(V,"-out-of-range")),style:a(a({},j),ae&&!we?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"==typeof me?me:void 0}},hidden:H,readOnly:D,onClear:L},g.createElement(z,r({},W,{autoSize:K,maxLength:C,onKeyDown:function(e){"Enter"===e.key&&O&&O(e),null==M||M(e)},onChange:function(e){xe(e,e.target.value)},onFocus:function(e){$(!0),null==b||b(e)},onBlur:function(e){$(!1),null==x||x(e)},onCompositionStart:function(e){ee.current=!0,null==E||E(e)},onCompositionEnd:function(e){ee.current=!1,xe(e,e.currentTarget.value),null==R||R(e)},className:l(null==k?void 0:k.textarea),style:a(a({},null==B?void 0:B.textarea),{},{resize:null==j?void 0:j.resize}),disabled:T,prefixCls:V,onResize:function(e){var t;null==I||I(e),null!==(t=le())&&void 0!==t&&t.style.height&&re(!0)},ref:ie,readOnly:D})))});export{C as T};
