import{c as e,h as t,G as n,a as o,r as c,s as r,n as u,j as s}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{r as l}from"./react@19.2.1.BpVBN_43.js";import{r as a}from"./react-dom@19.2.1_react@19.2.1.BLi5rGn2.js";const d=l.createContext(null);const i=[];const f=`rc-util-locker-${Date.now()}`;let m=0;function h(e){const r=!!e,[u]=l.useState(()=>(m+=1,`${f}_${m}`));t(()=>{if(r){const e=n(document.body).width,t=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;o(`\nhtml body {\n  overflow-y: hidden;\n  ${t?`width: calc(100% - ${e}px);`:""}\n}`,u)}else c(u);return()=>{c(u)}},[r,u])}const p=t=>!1!==t&&(e()&&t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:null),y=l.forwardRef((n,o)=>{const{open:c,autoLock:f,getContainer:m,debug:y,autoDestroy:b=!0,children:w}=n,[E,g]=l.useState(c),v=E||c;l.useEffect(()=>{(b||c)&&g(c)},[c,b]);const[S,C]=l.useState(()=>p(m));l.useEffect(()=>{const e=p(m);C(e??null)});const[$,_]=function(n){const[o]=l.useState(()=>e()?document.createElement("div"):null),c=l.useRef(!1),r=l.useContext(d),[u,s]=l.useState(i),a=r||(c.current?void 0:e=>{s(t=>[e,...t])});function f(){o.parentElement||document.body.appendChild(o),c.current=!0}function m(){o.parentElement?.removeChild(o),c.current=!1}return t(()=>(n?r?r(f):f():m(),m),[n]),t(()=>{u.length&&(u.forEach(e=>e()),s(i))},[u]),[o,a]}(v&&!S),j=S??$;h(f&&c&&e()&&(j===$||j===document.body));let x=null;w&&r(w)&&o&&(x=u(w));const H=s(x,o);if(!v||!e()||void 0===S)return null;const P=!1===j||!1;let k=w;return o&&(k=l.cloneElement(w,{ref:H})),l.createElement(d.Provider,{value:_},P?k:a.createPortal(k,j))});export{y as P};
