import{G as t,F as e,Q as n,aa as r,aH as i,af as o,o as s,an as a,as as c,ay as u,H as l,aI as d,aJ as p,aK as f,ag as m,ah as h,ae as v,aL as y,L as g,ak as _,X as b,I as T,al as S,aM as E,az as w,aN as k,aO as L,aP as C,P as I,b as P,aQ as q,aR as x,aS as M,Y as A,aT as N}from"./@sentry_core@10.38.0.B-bj8hQP.js";const R="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,O=t,H=(t,e,n,r)=>{let i,o;return s=>{e.value>=0&&(s||r)&&(o=e.value-(null!=i?i:0),(o||void 0===i)&&(i=e.value,e.delta=o,e.rating=((t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good")(e.value,n),t(e)))}},B=(t=!0)=>{var e,n;const r=null==(n=null==(e=O.performance)?void 0:e.getEntriesByType)?void 0:n.call(e,"navigation")[0];if(!t||r&&r.responseStart>0&&r.responseStart<performance.now())return r},D=()=>{var t;const e=B();return null!=(t=null==e?void 0:e.activationStart)?t:0};function z(t,e,n){O.document&&O.addEventListener(t,e,n)}function U(t,e,n){O.document&&O.removeEventListener(t,e,n)}let j=-1;const F=new Set,V=t=>{if(function(t){var e;return"pagehide"===t.type||"hidden"===(null==(e=O.document)?void 0:e.visibilityState)}(t)&&j>-1){if("visibilitychange"===t.type||"pagehide"===t.type)for(const t of F)t();isFinite(j)||(j="visibilitychange"===t.type?t.timeStamp:0,U("prerenderingchange",V,!0))}},Y=()=>{var t;if(O.document&&j<0){const e=D(),n=O.document.prerendering||null==(t=globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0])?void 0:t.startTime;j=null!=n?n:(()=>{var t,e;return"hidden"!==(null==(t=O.document)?void 0:t.visibilityState)||(null==(e=O.document)?void 0:e.prerendering)?1/0:0})(),z("visibilitychange",V,!0),z("pagehide",V,!0),z("prerenderingchange",V,!0)}return{get firstHiddenTime(){return j},onHidden(t){F.add(t)}}};const G=(t,e=-1)=>{var n,r;const i=B();let o="navigate";i&&((null==(n=O.document)?void 0:n.prerendering)||D()>0?o="prerender":(null==(r=O.document)?void 0:r.wasDiscarded)?o="restore":i.type&&(o=i.type.replace(/_/g,"-")));return{name:t,value:e,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},W=new WeakMap;function X(t,e){try{return W.get(t)||W.set(t,new e),W.get(t)}catch(n){return new e}}class J{constructor(){J.prototype.__init.call(this),J.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var e;if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),null==(e=this._onAfterProcessingUnexpectedShift)||e.call(this,t)}}const Q=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(t=>{Promise.resolve().then(()=>{e(t.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch(r){}},K=t=>{let e=!1;return()=>{e||(t(),e=!0)}},Z=t=>{var e;(null==(e=O.document)?void 0:e.prerendering)?addEventListener("prerenderingchange",()=>t(),!0):t()},$=[1800,3e3],tt=[.1,.25],et=(t,e={})=>{((t,e={})=>{Z(()=>{const n=Y(),r=G("FCP");let i;const o=Q("paint",t=>{for(const e of t)"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-D(),0),r.entries.push(e),i(!0)))});o&&(i=H(t,r,$,e.reportAllChanges))})})(K(()=>{var n;const r=G("CLS",0);let i;const o=Y(),s=X(e,J),a=t=>{for(const e of t)s._processEntry(e);s._sessionValue>r.value&&(r.value=s._sessionValue,r.entries=s._sessionEntries,i())},c=Q("layout-shift",a);c&&(i=H(t,r,tt,e.reportAllChanges),o.onHidden(()=>{a(c.takeRecords()),i(!0)}),null==(n=null==O?void 0:O.setTimeout)||n.call(O,i))}))};let nt=0,rt=1/0,it=0;const ot=t=>{t.forEach(t=>{t.interactionId&&(rt=Math.min(rt,t.interactionId),it=Math.max(it,t.interactionId),nt=it?(it-rt)/7+1:0)})};let st;const at=()=>st?nt:performance.interactionCount||0;let ct=0;class ut{constructor(){ut.prototype.__init.call(this),ut.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){ct=at(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor((at()-ct)/50));return this._longestInteractionList[t]}_processEntry(t){var e,n;if(null==(e=this._onBeforeProcessingEntry)||e.call(this,t),!t.interactionId&&"first-input"!==t.entryType)return;const r=this._longestInteractionList.at(-1);let i=this._longestInteractionMap.get(t.interactionId);if(i||this._longestInteractionList.length<10||t.duration>r._latency){if(i?t.duration>i._latency?(i.entries=[t],i._latency=t.duration):t.duration===i._latency&&t.startTime===i.entries[0].startTime&&i.entries.push(t):(i={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(i.id,i),this._longestInteractionList.push(i)),this._longestInteractionList.sort((t,e)=>e._latency-t._latency),this._longestInteractionList.length>10){const t=this._longestInteractionList.splice(10);for(const e of t)this._longestInteractionMap.delete(e.id)}null==(n=this._onAfterProcessingINPCandidate)||n.call(this,i)}}}const lt=t=>{var e;const n=O.requestIdleCallback||O.setTimeout;"hidden"===(null==(e=O.document)?void 0:e.visibilityState)?t():(z("visibilitychange",t=K(t),{once:!0,capture:!0}),z("pagehide",t,{once:!0,capture:!0}),n(()=>{t(),U("visibilitychange",t,{capture:!0}),U("pagehide",t,{capture:!0})}))},dt=[200,500],pt=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=Y();Z(()=>{var r;"interactionCount"in performance||st||(st=Q("event",ot,{type:"event",buffered:!0,durationThreshold:0}));const i=G("INP");let o;const s=X(e,ut),a=t=>{lt(()=>{for(const n of t)s._processEntry(n);const e=s._estimateP98LongestInteraction();e&&e._latency!==i.value&&(i.value=e._latency,i.entries=e.entries,o())})},c=Q("event",a,{durationThreshold:null!=(r=e.durationThreshold)?r:40});o=H(t,i,dt,e.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{a(c.takeRecords()),o(!0)}))})};class ft{_processEntry(t){var e;null==(e=this._onBeforeProcessingEntry)||e.call(this,t)}}const mt=[2500,4e3],ht=[800,1800],vt=t=>{var e,n;(null==(e=O.document)?void 0:e.prerendering)?Z(()=>vt(t)):"complete"!==(null==(n=O.document)?void 0:n.readyState)?addEventListener("load",()=>vt(t),!0):setTimeout(t)},yt={},gt={};let _t,bt,Tt,St;function Et(t,e=!1){return Mt("cls",t,It,_t,e)}function wt(t,e=!1){return Mt("lcp",t,Pt,bt,e)}function kt(t){return Mt("inp",t,xt,St)}function Lt(t,e){return At(t,e),gt[t]||(!function(t){const e={};"event"===t&&(e.durationThreshold=0);Q(t,e=>{Ct(t,{entries:e})},e)}(t),gt[t]=!0),Nt(t,e)}function Ct(t,r){const i=yt[t];if(null==i?void 0:i.length)for(const s of i)try{s(r)}catch(o){R&&e.error("Error while triggering instrumentation handler.\nType: ".concat(t,"\nName: ").concat(n(s),"\nError:"),o)}}function It(){return et(t=>{Ct("cls",{metric:t}),_t=t},{reportAllChanges:!0})}function Pt(){return((t,e={})=>{Z(()=>{const n=Y(),r=G("LCP");let i;const o=X(e,ft),s=t=>{e.reportAllChanges||(t=t.slice(-1));for(const e of t)o._processEntry(e),e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-D(),0),r.entries=[e],i())},a=Q("largest-contentful-paint",s);if(a){i=H(t,r,mt,e.reportAllChanges);const n=K(()=>{s(a.takeRecords()),a.disconnect(),i(!0)}),o=t=>{t.isTrusted&&(lt(n),U(t.type,o,{capture:!0}))};for(const t of["keydown","click","visibilitychange"])z(t,o,{capture:!0})}})})(t=>{Ct("lcp",{metric:t}),bt=t},{reportAllChanges:!0})}function qt(){return((t,e={})=>{const n=G("TTFB"),r=H(t,n,ht,e.reportAllChanges);vt(()=>{const t=B();t&&(n.value=Math.max(t.responseStart-D(),0),n.entries=[t],r(!0))})})(t=>{Ct("ttfb",{metric:t}),Tt=t})}function xt(){return pt(t=>{Ct("inp",{metric:t}),St=t})}function Mt(t,e,n,r,i=!1){let o;return At(t,e),gt[t]||(o=n(),gt[t]=!0),r&&e({metric:r}),Nt(t,e,i?o:void 0)}function At(t,e){yt[t]=yt[t]||[],yt[t].push(e)}function Nt(t,e,n){return()=>{n&&n();const r=yt[t];if(!r)return;const i=r.indexOf(e);-1!==i&&r.splice(i,1)}}function Rt(t){return"number"==typeof t&&isFinite(t)}function Ot(t,e,n,{...s}){const a=r(t).start_timestamp;return a&&a>e&&"function"==typeof t.updateStartTime&&t.updateStartTime(e),i(t,()=>{const t=o({startTime:e,...s});return t&&t.end(n),t})}function Ht(t){var e;const n=s();if(!n)return;const{name:r,transaction:i,attributes:c,startTime:u}=t,{release:l,environment:d,sendDefaultPii:p}=n.getOptions(),f=n.getIntegrationByName("Replay"),m=null==f?void 0:f.getReplayId(),h=a(),v=h.getUser(),y=void 0!==v?v.email||v.id||v.ip_address:void 0;let g;try{g=h.getScopeData().contexts.profile.profile_id}catch(b){}const _={release:l,environment:d,user:y||void 0,profile_id:g||void 0,replay_id:m||void 0,transaction:i,"user_agent.original":null==(e=O.navigator)?void 0:e.userAgent,"client.address":p?"{{auto}}":void 0,...c};return o({name:r,attributes:_,startTime:u,experimental:{standalone:!0}})}function Bt(){return O.addEventListener&&O.performance}function Dt(t){return t/1e3}function zt(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch(e){return!1}}function Ut(t,e){let n,r=!1;function i(t){!r&&n&&e(t,n),r=!0}(t=>{const e=e=>{var n;"pagehide"!==e.type&&"hidden"!==(null==(n=O.document)?void 0:n.visibilityState)||t(e)};z("visibilitychange",e,{capture:!0,once:!0}),z("pagehide",e,{capture:!0,once:!0})})(()=>{i("pagehide")});const o=t.on("beforeStartNavigationSpan",(t,e)=>{(null==e?void 0:e.isRedirect)||(i("navigation"),o(),s())}),s=t.on("afterStartPageLoadSpan",t=>{n=t.spanContext().spanId,s()})}function jt(t){let n,r=0;if(!zt("layout-shift"))return;const i=Et(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(r=t.value,n=e)},!0);Ut(t,(t,o)=>{!function(t,n,r,i){var o;R&&e.log("Sending CLS span (".concat(t,")"));const s=n?Dt((c()||0)+n.startTime):u(),v=a().getScopeData().transactionName,y=n?l(null==(o=n.sources[0])?void 0:o.node):"Layout shift",g={[h]:"auto.http.browser.cls",[m]:"ui.webvital.cls",[f]:0,"sentry.pageload.span_id":r,"sentry.report_event":i};(null==n?void 0:n.sources)&&n.sources.forEach((t,e)=>{g["cls.source.".concat(e+1)]=l(t.node)});const _=Ht({name:y,transaction:v,attributes:g,startTime:s});_&&(_.addEvent("cls",{[p]:"",[d]:t}),_.end(s))}(r,n,o,t),i()})}function Ft(t){let n,r=0;if(!zt("largest-contentful-paint"))return;const i=wt(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(r=t.value,n=e)},!0);Ut(t,(t,o)=>{!function(t,n,r,i){R&&e.log("Sending LCP span (".concat(t,")"));const o=Dt((c()||0)+((null==n?void 0:n.startTime)||0)),s=a().getScopeData().transactionName,u=n?l(n.element):"Largest contentful paint",v={[h]:"auto.http.browser.lcp",[m]:"ui.webvital.lcp",[f]:0,"sentry.pageload.span_id":r,"sentry.report_event":i};n&&(n.element&&(v["lcp.element"]=l(n.element)),n.id&&(v["lcp.id"]=n.id),n.url&&(v["lcp.url"]=n.url),null!=n.loadTime&&(v["lcp.loadTime"]=n.loadTime),null!=n.renderTime&&(v["lcp.renderTime"]=n.renderTime),null!=n.size&&(v["lcp.size"]=n.size));const y=Ht({name:u,transaction:s,attributes:v,startTime:o});y&&(y.addEvent("lcp",{[p]:"millisecond",[d]:t}),y.end(o))}(r,n,o,t),i()})}function Vt(t){return t?((c()||performance.timeOrigin)+t)/1e3:t}function Yt(t){var e;const n={};if(null!=t.nextHopProtocol){const{name:e,version:r}=function(t){let e="unknown",n="unknown",r="";for(const i of t){if("/"===i){[e,n]=t.split("/");break}if(!isNaN(Number(i))){e="h"===r?"http":r,n=t.split(r)[1];break}r+=i}return r===t&&(e=r),{name:e,version:n}}(t.nextHopProtocol);n["network.protocol.version"]=r,n["network.protocol.name"]=e}return c()||(null==(e=Bt())?void 0:e.timeOrigin)?(r={...n,"http.request.redirect_start":Vt(t.redirectStart),"http.request.redirect_end":Vt(t.redirectEnd),"http.request.worker_start":Vt(t.workerStart),"http.request.fetch_start":Vt(t.fetchStart),"http.request.domain_lookup_start":Vt(t.domainLookupStart),"http.request.domain_lookup_end":Vt(t.domainLookupEnd),"http.request.connect_start":Vt(t.connectStart),"http.request.secure_connection_start":Vt(t.secureConnectionStart),"http.request.connection_end":Vt(t.connectEnd),"http.request.request_start":Vt(t.requestStart),"http.request.response_start":Vt(t.responseStart),"http.request.response_end":Vt(t.responseEnd),"http.request.time_to_first_byte":null!=t.responseStart?t.responseStart/1e3:void 0},Object.fromEntries(Object.entries(r).filter(([,t])=>null!=t))):n;var r}const Gt=2147483647;let Wt,Xt,Jt=0,Qt={};function Kt({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:n}){const r=Bt();if(r&&c()){r.mark&&O.performance.mark("sentry-tracing-init");const i=e?Ft(n):wt(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Qt.lcp={value:t.value,unit:"millisecond"},Wt=e)},!0),o=Mt("ttfb",({metric:t})=>{t.entries[t.entries.length-1]&&(Qt.ttfb={value:t.value,unit:"millisecond"})},qt,Tt),s=t?jt(n):Et(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Qt.cls={value:t.value,unit:""},Xt=e)},!0);return()=>{null==i||i(),o(),null==s||s()}}return()=>{}}function Zt(){Lt("longtask",({entries:t})=>{const e=v();if(!e)return;const{op:n,start_timestamp:i}=r(e);for(const r of t){const t=Dt(c()+r.startTime),o=Dt(r.duration);"navigation"===n&&i&&t<i||Ot(e,t,t+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[h]:"auto.ui.browser.metrics"}})}})}function $t(){new PerformanceObserver(t=>{const e=v();if(e)for(const n of t.getEntries()){if(!n.scripts[0])continue;const t=Dt(c()+n.startTime),{start_timestamp:i,op:o}=r(e);if("navigation"===o&&i&&t<i)continue;const s=Dt(n.duration),a={[h]:"auto.ui.browser.metrics"},u=n.scripts[0],{invoker:l,invokerType:d,sourceURL:p,sourceFunctionName:f,sourceCharPosition:m}=u;a["browser.script.invoker"]=l,a["browser.script.invoker_type"]=d,p&&(a["code.filepath"]=p),f&&(a["code.function"]=f),-1!==m&&(a["browser.script.source_char_position"]=m),Ot(e,t,t+s,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:a})}}).observe({type:"long-animation-frame",buffered:!0})}function te(){Lt("event",({entries:t})=>{const e=v();if(e)for(const n of t)if("click"===n.name){const t=Dt(c()+n.startTime),r=Dt(n.duration),i={name:l(n.target),op:"ui.interaction.".concat(n.name),startTime:t,attributes:{[h]:"auto.ui.browser.metrics"}},o=T(n.target);o&&(i.attributes["ui.component_name"]=o),Ot(e,t,t+r,i)}})}function ee(t,e){const n=Bt(),i=c();if(!(null==n?void 0:n.getEntries)||!i)return;const o=Dt(i),s=n.getEntries(),{op:a,start_timestamp:u}=r(t);s.slice(Jt).forEach(n=>{const r=Dt(n.startTime),i=Dt(Math.max(0,n.duration));if(!("navigation"===a&&u&&o+r<u))switch(n.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{ne(t,e,r,n)}),ne(t,e,"secureConnection",n,"TLS/SSL"),ne(t,e,"fetch",n,"cache"),ne(t,e,"domainLookup",n,"DNS"),function(t,e,n){const r=n+Dt(e.requestStart),i=n+Dt(e.responseEnd),o=n+Dt(e.responseStart);e.responseEnd&&(Ot(t,r,i,{op:"browser.request",name:e.name,attributes:{[h]:"auto.ui.browser.metrics"}}),Ot(t,o,i,{op:"browser.response",name:e.name,attributes:{[h]:"auto.ui.browser.metrics"}}))}(t,e,n)}(t,n,o);break;case"mark":case"paint":case"measure":{!function(t,e,n,r,i,o){if(function(t){if("measure"!==(null==t?void 0:t.entryType))return;try{return"Components âš›"===t.detail.devtools.track}catch(e){return}}(e))return;if(["mark","measure"].includes(e.entryType)&&_(e.name,o))return;const s=B(!1),a=Dt(s?s.requestStart:0),c=i+Math.max(n,a),u=i+n,l=u+r,d={[h]:"auto.resource.browser.metrics"};c!==u&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=c);(function(t,e){try{const r=e.detail;if(!r)return;if("object"==typeof r){for(const[e,i]of Object.entries(r))if(i&&b(i))t["sentry.browser.measure.detail.".concat(e)]=i;else if(void 0!==i)try{t["sentry.browser.measure.detail.".concat(e)]=JSON.stringify(i)}catch(n){}return}if(b(r))return void(t["sentry.browser.measure.detail"]=r);try{t["sentry.browser.measure.detail"]=JSON.stringify(r)}catch(n){}}catch(n){}})(d,e),c<=l&&Ot(t,c,l,{name:e.name,op:e.entryType,attributes:d})}(t,n,r,i,o,e.ignorePerformanceApiSpans);const s=Y(),a=n.startTime<s.firstHiddenTime;"first-paint"===n.name&&a&&(Qt.fp={value:n.startTime,unit:"millisecond"}),"first-contentful-paint"===n.name&&a&&(Qt.fcp={value:n.startTime,unit:"millisecond"});break}case"resource":!function(t,e,n,r,i,o,s){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;const a=e.initiatorType?"resource.".concat(e.initiatorType):"resource.other";if(null==s?void 0:s.includes(a))return;const c={[h]:"auto.resource.browser.metrics"},u=g(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop());u.host&&(c["server.address"]=u.host);c["url.same_origin"]=n.includes(O.location.origin),function(t,e,n){n.forEach(([n,r])=>{const i=t[n];null!=i&&("number"==typeof i&&i<Gt||"string"==typeof i)&&(e[r]=i)})}(e,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const l={...c,...Yt(e)},d=o+r,p=d+i;Ot(t,d,p,{name:n.replace(O.location.origin,""),op:a,attributes:l})}(t,n,n.name,r,i,o,e.ignoreResourceSpans)}}),Jt=Math.max(s.length-1,0),function(t){const e=O.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),Rt(n.rtt)&&(Qt["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Rt(e.deviceMemory)&&t.setAttribute("deviceMemory","".concat(e.deviceMemory," GB"));Rt(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===a&&(function(t){const e=B(!1);if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Qt),e.recordClsOnPageloadSpan||delete Qt.cls,e.recordLcpOnPageloadSpan||delete Qt.lcp,Object.entries(Qt).forEach(([t,e])=>{y(t,e.value,e.unit)}),t.setAttribute("performance.timeOrigin",o),t.setAttribute("performance.activationStart",D()),function(t,e){Wt&&e.recordLcpOnPageloadSpan&&(Wt.element&&t.setAttribute("lcp.element",l(Wt.element)),Wt.id&&t.setAttribute("lcp.id",Wt.id),Wt.url&&t.setAttribute("lcp.url",Wt.url.trim().slice(0,200)),null!=Wt.loadTime&&t.setAttribute("lcp.loadTime",Wt.loadTime),null!=Wt.renderTime&&t.setAttribute("lcp.renderTime",Wt.renderTime),t.setAttribute("lcp.size",Wt.size));(null==Xt?void 0:Xt.sources)&&e.recordClsOnPageloadSpan&&Xt.sources.forEach((e,n)=>t.setAttribute("cls.source.".concat(n+1),l(e.node)))}(t,e)),Wt=void 0,Xt=void 0,Qt={}}function ne(t,e,n,r,i=n){const o=function(t){if("secureConnection"===t)return"connectEnd";if("fetch"===t)return"domainLookupStart";return"".concat(t,"End")}(n),s=e[o],a=e["".concat(n,"Start")];a&&s&&Ot(t,r+Dt(a),r+Dt(s),{op:"browser.".concat(i),name:e.name,attributes:{[h]:"auto.ui.browser.metrics",..."redirect"===n&&null!=e.redirectCount?{"http.redirect_count":e.redirectCount}:{}}})}function re(){return Bt()&&c()?Lt("element",ie):()=>{}}const ie=({entries:t})=>{const e=v(),n=e?S(e):void 0,i=n?r(n).description:a().getScopeData().transactionName;t.forEach(t=>{var e,n;const r=t;if(!r.identifier)return;const o=r.name,s=r.renderTime,a=r.loadTime,[c,l]=a?[Dt(a),"load-time"]:s?[Dt(s),"render-time"]:[u(),"entry-emission"],d="image-paint"===o?Dt(Math.max(0,(null!=s?s:0)-(null!=a?a:0))):0,p={[h]:"auto.ui.browser.elementtiming",[m]:"ui.elementtiming",[w]:"component","sentry.span_start_time_source":l,"sentry.transaction_name":i,"element.id":r.id,"element.type":(null==(n=null==(e=r.element)?void 0:e.tagName)?void 0:n.toLowerCase())||"unknown","element.size":r.naturalWidth&&r.naturalHeight?"".concat(r.naturalWidth,"x").concat(r.naturalHeight):void 0,"element.render_time":s,"element.load_time":a,"element.url":r.url||void 0,"element.identifier":r.identifier,"element.paint_type":o};E({name:"element[".concat(r.identifier,"]"),attributes:p,startTime:c,onlyIfParent:!0},t=>{t.end(c+d)})})};let oe,se,ae,ce;function ue(t){k("dom",t),L("dom",le)}function le(){if(!O.document)return;const t=C.bind(null,"dom"),e=de(t,!0);O.document.addEventListener("click",e,!1),O.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(e=>{var n,r;const i=null==(n=O[e])?void 0:n.prototype;(null==(r=null==i?void 0:i.hasOwnProperty)?void 0:r.call(i,"addEventListener"))&&(I(i,"addEventListener",function(e){return function(n,r,i){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},o=r[n]=r[n]||{refCount:0};if(!o.handler){const r=de(t);o.handler=r,e.call(this,n,r,i)}o.refCount++}catch(o){}return e.call(this,n,r,i)}}),I(i,"removeEventListener",function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{const n=this.__sentry_instrumentation_handlers__||{},i=n[e];i&&(i.refCount--,i.refCount<=0&&(t.call(this,e,i.handler,r),i.handler=void 0,delete n[e]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(i){}return t.call(this,e,n,r)}}))})}function de(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(t){try{return t.target}catch(e){return null}}(n);if(function(t,e){return"keypress"===t&&(!(null==e?void 0:e.tagName)||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable)}(n.type,r))return;P(n,"_sentryCaptured",!0),r&&!r._sentryId&&P(r,"_sentryId",q());const i="keypress"===n.type?"input":n.type;if(!function(t){if(t.type!==se)return!1;try{if(!t.target||t.target._sentryId!==ae)return!1}catch(e){}return!0}(n)){t({event:n,name:i,global:e}),se=n.type,ae=r?r._sentryId:void 0}clearTimeout(oe),oe=O.setTimeout(()=>{ae=void 0,se=void 0},1e3)}}function pe(t){const e="history";k(e,t),L(e,fe)}function fe(){function t(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const r=ce,i=function(t){try{return new URL(t,O.location.origin).toString()}catch(e){return t}}(String(n));if(ce=i,r===i)return t.apply(this,e);C("history",{from:r,to:i})}return t.apply(this,e)}}O.addEventListener("popstate",()=>{const t=O.location.href,e=ce;if(ce=t,e===t)return;C("history",{from:e,to:t})}),x()&&(I(O.history,"pushState",t),I(O.history,"replaceState",t))}const me={};function he(t){const n=me[t];if(n)return n;let r=O[t];if(M(r))return me[t]=r.bind(O);const i=O.document;if(i&&"function"==typeof i.createElement)try{const e=i.createElement("iframe");e.hidden=!0,i.head.appendChild(e);const n=e.contentWindow;(null==n?void 0:n[t])&&(r=n[t]),i.head.removeChild(e)}catch(o){R&&e.warn("Could not create sandbox iframe for ".concat(t," check, bailing to window.").concat(t,": "),o)}return r?me[t]=r.bind(O):r}function ve(t){me[t]=void 0}function ye(...t){return he("setTimeout")(...t)}const ge="__sentry_xhr_v3__";function _e(t){k("xhr",t),L("xhr",be)}function be(){if(!O.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(t,e,n){const r=new Error,i=1e3*u(),o=A(n[0])?n[0].toUpperCase():void 0,s=function(t){if(A(t))return t;try{return t.toString()}catch(e){}return}(n[1]);if(!o||!s)return t.apply(e,n);e[ge]={method:o,url:s,request_headers:{}},"POST"===o&&s.match(/sentry_key/)&&(e.__sentry_own_request__=!0);const a=()=>{const t=e[ge];if(t&&4===e.readyState){try{t.status_code=e.status}catch(n){}const o={endTimestamp:1e3*u(),startTimestamp:i,xhr:e,virtualError:r};C("xhr",o)}};return"onreadystatechange"in e&&"function"==typeof e.onreadystatechange?e.onreadystatechange=new Proxy(e.onreadystatechange,{apply:(t,e,n)=>(a(),t.apply(e,n))}):e.addEventListener("readystatechange",a),e.setRequestHeader=new Proxy(e.setRequestHeader,{apply(t,e,n){const[r,i]=n,o=e[ge];return o&&A(r)&&A(i)&&(o.request_headers[r.toLowerCase()]=i),t.apply(e,n)}}),t.apply(e,n)}}),t.send=new Proxy(t.send,{apply(t,e,n){const r=e[ge];if(!r)return t.apply(e,n);void 0!==n[0]&&(r.body=n[0]);const i={startTimestamp:1e3*u(),xhr:e};return C("xhr",i),t.apply(e,n)}})}const Te=Symbol.for("sentry__originalRequestBody");function Se(t){return new URLSearchParams(t).toString()}function Ee(t,n=e){try{if("string"==typeof t)return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Se(t)];if(!t)return[void 0]}catch(r){return R&&n.error(r,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return R&&n.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function we(t=[]){if(t.length>=2&&t[1]&&"object"==typeof t[1]&&"body"in t[1])return t[1].body;if(t.length>=1&&t[0]instanceof Request){const e=t[0][Te];return void 0!==e?e:void 0}}function ke(t){let n;try{n=t.getAllResponseHeaders()}catch(r){return R&&e.error(r,"Failed to get xhr response headers",t),{}}return n?n.split("\r\n").reduce((t,e)=>{const[n,r]=e.split(": ");return r&&(t[n.toLowerCase()]=r),t},{}):{}}const Le=[],Ce=new Map,Ie=new Map;function Pe(){if(Bt()&&c()){const t=kt(xe);return()=>{t()}}return()=>{}}const qe={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const xe=({metric:t})=>{if(null==t.value)return;const e=Dt(t.value);if(e>60)return;const n=t.entries.find(e=>e.duration===t.value&&qe[e.name]);if(!n)return;const{interactionId:i}=n,o=qe[n.name],s=Dt(c()+n.startTime),u=v(),y=u?S(u):void 0,g=null!=i?Ce.get(i):void 0,_=(null==g?void 0:g.span)||y,b=_?r(_).description:a().getScopeData().transactionName,T=Ht({name:(null==g?void 0:g.elementName)||l(n.target),transaction:b,attributes:{[h]:"auto.http.browser.inp",[m]:"ui.interaction.".concat(o),[f]:n.duration},startTime:s});T&&(T.addEvent("inp",{[p]:"millisecond",[d]:t.value}),T.end(s+e))};function Me(){const t=Object.keys(qe);function e(t){const e=t.target;if(!e)return;const n=l(e),r=Math.round(t.timeStamp);if(Ie.set(r,n),Ie.size>50){const t=Ie.keys().next().value;void 0!==t&&Ie.delete(t)}}N()&&t.forEach(t=>{O.addEventListener(t,e,{capture:!0,passive:!0})});const n=({entries:t})=>{const e=v(),n=e&&S(e);t.forEach(t=>{if(!function(t){return"duration"in t}(t))return;const e=t.interactionId;if(null==e)return;if(Ce.has(e))return;const r=t.target?l(t.target):function(t){const e=Math.round(t.startTime);let n=Ie.get(e);if(!n)for(let r=-5;r<=5;r++){const t=Ie.get(e+r);if(t){n=t;break}}return n||"<unknown>"}(t);if(Le.length>10){const t=Le.shift();Ce.delete(t)}Le.push(e),Ce.set(e,{span:n,elementName:r})})};Lt("event",n),Lt("first-input",n)}export{ge as S,ue as a,_e as b,ve as c,pe as d,Lt as e,Me as f,he as g,Pe as h,re as i,$t as j,Zt as k,te as l,ee as m,ye as n,wt as o,ke as p,Et as q,Yt as r,Kt as s,kt as t,we as u,Se as v,Ee as w};
