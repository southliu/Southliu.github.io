import{h as e,f as t,k as n,d as o,i as r,g as c,j as a}from"./@babel_runtime@7.28.3.ESkOsrAB.js";import{r as s,e as i}from"./react@19.1.1.osUeTYwR.js";import{r as l}from"./react-dom@19.1.1_react@19.1.1.Bn0b59nT.js";import{c as u}from"./classnames@2.5.1.C0tKfs1P.js";import{a as f}from"./rc-motion@2.9.5_react-dom@19.1.1_react@19.1.1__react@19.1.1.ClrEiIOp.js";import{B as m,K as d,e as v}from"./rc-util@5.44.4_react-dom@19.1.1_react@19.1.1__react@19.1.1.BCDSZbSC.js";var p=s.forwardRef(function(r,c){var a=r.prefixCls,i=r.style,l=r.className,f=r.duration,v=void 0===f?4.5:f,p=r.showProgress,y=r.pauseOnHover,h=void 0===y||y,g=r.eventKey,k=r.content,N=r.closable,E=r.closeIcon,C=void 0===E?"x":E,x=r.props,b=r.onClick,R=r.onNoticeClose,j=r.times,w=r.hovering,A=s.useState(!1),S=e(A,2),_=S[0],M=S[1],I=s.useState(0),F=e(I,2),H=F[0],L=F[1],O=s.useState(0),W=e(O,2),D=W[0],K=W[1],P=w||_,T=v>0&&p,q=function(){R(g)};s.useEffect(function(){if(!P&&v>0){var e=Date.now()-D,t=setTimeout(function(){q()},1e3*v-D);return function(){h&&clearTimeout(t),K(Date.now()-e)}}},[v,P,j]),s.useEffect(function(){if(!P&&T&&(h||0===D)){var e,t=performance.now();return function n(){cancelAnimationFrame(e),e=requestAnimationFrame(function(e){var o=e+D-t,r=Math.min(o/(1e3*v),1);L(100*r),r<1&&n()})}(),function(){h&&cancelAnimationFrame(e)}}},[v,D,P,T,j]);var B=s.useMemo(function(){return"object"===t(N)&&null!==N?N:N?{closeIcon:C}:{}},[N,C]),X=m(B,!0),z=100-(!H||H<0?0:H>100?100:H),G="".concat(a,"-notice");return s.createElement("div",n({},x,{ref:c,className:u(G,l,o({},"".concat(G,"-closable"),N)),style:i,onMouseEnter:function(e){var t;M(!0),null==x||null===(t=x.onMouseEnter)||void 0===t||t.call(x,e)},onMouseLeave:function(e){var t;M(!1),null==x||null===(t=x.onMouseLeave)||void 0===t||t.call(x,e)},onClick:b}),s.createElement("div",{className:"".concat(G,"-content")},k),N&&s.createElement("a",n({tabIndex:0,className:"".concat(G,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==d.ENTER||q()},"aria-label":"Close"},X,{onClick:function(e){e.preventDefault(),e.stopPropagation(),q()}}),B.closeIcon),T&&s.createElement("progress",{className:"".concat(G,"-progress"),max:"100",value:z},z+"%"))}),y=i.createContext({}),h=function(e){var t=e.children,n=e.classNames;return i.createElement(y.Provider,{value:{classNames:n}},t)},g=["className","style","classNames","styles"],k=function(l){var m,d,v,h,k,N=l.configList,E=l.placement,C=l.prefixCls,x=l.className,b=l.style,R=l.motion,j=l.onAllNoticeRemoved,w=l.onNoticeClose,A=l.stack,S=s.useContext(y).classNames,_=s.useRef({}),M=s.useState(null),I=e(M,2),F=I[0],H=I[1],L=s.useState([]),O=e(L,2),W=O[0],D=O[1],K=N.map(function(e){return{config:e,key:String(e.key)}}),P=(k={offset:8,threshold:3,gap:16},(m=A)&&"object"===t(m)&&(k.offset=null!==(d=m.offset)&&void 0!==d?d:8,k.threshold=null!==(v=m.threshold)&&void 0!==v?v:3,k.gap=null!==(h=m.gap)&&void 0!==h?h:16),[!!m,k]),T=e(P,2),q=T[0],B=T[1],X=B.offset,z=B.threshold,G=B.gap,J=q&&(W.length>0||K.length<=z),Q="function"==typeof R?R(E):R;return s.useEffect(function(){q&&W.length>1&&D(function(e){return e.filter(function(e){return K.some(function(t){var n=t.key;return e===n})})})},[W,K,q]),s.useEffect(function(){var e,t;q&&_.current[null===(e=K[K.length-1])||void 0===e?void 0:e.key]&&H(_.current[null===(t=K[K.length-1])||void 0===t?void 0:t.key])},[K,q]),i.createElement(f,n({key:E,className:u(C,"".concat(C,"-").concat(E),null==S?void 0:S.list,x,o(o({},"".concat(C,"-stack"),!!q),"".concat(C,"-stack-expanded"),J)),style:b,keys:K,motionAppear:!0},Q,{onAllRemoved:function(){j(E)}}),function(e,t){var o=e.config,s=e.className,l=e.style,f=e.index,m=o,d=m.key,v=m.times,y=String(d),h=o,k=h.className,N=h.style,x=h.classNames,b=h.styles,R=r(h,g),j=K.findIndex(function(e){return e.key===y}),A={};if(q){var M=K.length-1-(j>-1?j:f-1),I="top"===E||"bottom"===E?"-50%":"0";if(M>0){var H,L,O;A.height=J?null===(H=_.current[y])||void 0===H?void 0:H.offsetHeight:null==F?void 0:F.offsetHeight;for(var P=0,T=0;T<M;T++){var B;P+=(null===(B=_.current[K[K.length-1-T].key])||void 0===B?void 0:B.offsetHeight)+G}var z=(J?P:M*X)*(E.startsWith("top")?1:-1),Q=!J&&null!=F&&F.offsetWidth&&null!==(L=_.current[y])&&void 0!==L&&L.offsetWidth?((null==F?void 0:F.offsetWidth)-2*X*(M<3?M:3))/(null===(O=_.current[y])||void 0===O?void 0:O.offsetWidth):1;A.transform="translate3d(".concat(I,", ").concat(z,"px, 0) scaleX(").concat(Q,")")}else A.transform="translate3d(".concat(I,", 0, 0)")}return i.createElement("div",{ref:t,className:u("".concat(C,"-notice-wrapper"),s,null==x?void 0:x.wrapper),style:c(c(c({},l),A),null==b?void 0:b.wrapper),onMouseEnter:function(){return D(function(e){return e.includes(y)?e:[].concat(a(e),[y])})},onMouseLeave:function(){return D(function(e){return e.filter(function(e){return e!==y})})}},i.createElement(p,n({},R,{ref:function(e){j>-1?_.current[y]=e:delete _.current[y]},prefixCls:C,classNames:x,styles:b,className:u(k,null==S?void 0:S.notice),style:N,times:v,key:d,eventKey:d,onNoticeClose:w,hovering:q&&W.length>0})))})},N=s.forwardRef(function(t,n){var o=t.prefixCls,r=void 0===o?"rc-notification":o,i=t.container,u=t.motion,f=t.maxCount,m=t.className,d=t.style,v=t.onAllRemoved,p=t.stack,y=t.renderNotifications,h=s.useState([]),g=e(h,2),N=g[0],E=g[1],C=function(e){var t,n=N.find(function(t){return t.key===e});null==n||null===(t=n.onClose)||void 0===t||t.call(n),E(function(t){return t.filter(function(t){return t.key!==e})})};s.useImperativeHandle(n,function(){return{open:function(e){E(function(t){var n,o=a(t),r=o.findIndex(function(t){return t.key===e.key}),s=c({},e);r>=0?(s.times=((null===(n=t[r])||void 0===n?void 0:n.times)||0)+1,o[r]=s):(s.times=0,o.push(s));return f>0&&o.length>f&&(o=o.slice(-f)),o})},close:function(e){C(e)},destroy:function(){E([])}}});var x=s.useState({}),b=e(x,2),R=b[0],j=b[1];s.useEffect(function(){var e={};N.forEach(function(t){var n=t.placement,o=void 0===n?"topRight":n;o&&(e[o]=e[o]||[],e[o].push(t))}),Object.keys(R).forEach(function(t){e[t]=e[t]||[]}),j(e)},[N]);var w=function(e){j(function(t){var n=c({},t);return(n[e]||[]).length||delete n[e],n})},A=s.useRef(!1);if(s.useEffect(function(){Object.keys(R).length>0?A.current=!0:A.current&&(null==v||v(),A.current=!1)},[R]),!i)return null;var S=Object.keys(R);return l.createPortal(s.createElement(s.Fragment,null,S.map(function(e){var t=R[e],n=s.createElement(k,{key:e,configList:t,placement:e,prefixCls:r,className:null==m?void 0:m(e),style:null==d?void 0:d(e),motion:u,onNoticeClose:C,onAllNoticeRemoved:w,stack:p});return y?y(n,{prefixCls:r,key:e}):n})),i)}),E=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],C=function(){return document.body},x=0;function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getContainer,o=void 0===n?C:n,c=t.motion,i=t.prefixCls,l=t.maxCount,u=t.className,f=t.style,m=t.onAllRemoved,d=t.stack,p=t.renderNotifications,y=r(t,E),h=s.useState(),g=e(h,2),k=g[0],b=g[1],R=s.useRef(),j=s.createElement(N,{container:k,ref:R,prefixCls:i,motion:c,maxCount:l,className:u,style:f,onAllRemoved:m,stack:d,renderNotifications:p}),w=s.useState([]),A=e(w,2),S=A[0],_=A[1],M=v(function(e){var t=function(){for(var e={},t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach(function(t){t&&Object.keys(t).forEach(function(n){var o=t[n];void 0!==o&&(e[n]=o)})}),e}(y,e);null!==t.key&&void 0!==t.key||(t.key="rc-notification-".concat(x),x+=1),_(function(e){return[].concat(a(e),[{type:"open",config:t}])})}),I=s.useMemo(function(){return{open:M,close:function(e){_(function(t){return[].concat(a(t),[{type:"close",key:e}])})},destroy:function(){_(function(e){return[].concat(a(e),[{type:"destroy"}])})}}},[]);return s.useEffect(function(){b(o())}),s.useEffect(function(){var e,t;R.current&&S.length&&(S.forEach(function(e){switch(e.type){case"open":R.current.open(e.config);break;case"close":R.current.close(e.key);break;case"destroy":R.current.destroy()}}),_(function(n){return e===n&&t||(e=n,t=n.filter(function(e){return!S.includes(e)})),t}))},[S]),[I,j]}export{p as N,h as a,b as u};
