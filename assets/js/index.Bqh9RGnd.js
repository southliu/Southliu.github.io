import{r as t,j as e}from"./react@19.1.0.QBh3HWPD.js";import{t as r,g as s,s as a,c as o,a as c,d as i,b as m,u as n,e as p}from"./model.D-JFsqZw.js";import{A as d,I as l,u as _,B as j,p as u,E as f,q as g}from"./index.CbzFokE6.js";import y from"./PermissionDrawer.DoSWvadj.js";import{c as b,B as h}from"./BaseContent.BhDqIcd_.js";import{U as x,D as S,B as w}from"./BasePagination.CGuf9Hd1.js";import{B as C}from"./BaseCard.nxt24hSw.js";import{B}from"./BaseSearch.DR0Das6N.js";import{B as k}from"./BaseTable.CrKhoJwX.js";import{B as v}from"./BaseForm.CeuuOAst.js";import{u as N}from"./react-i18next@15.5.2_i18next@25.2.1_react-dom@19.1.0_react@19.1.0_typescript@5.8.3.BPrJqYVj.js";import{s as z,B as D}from"./antd@5.25.4_react-dom@19.1.0_react@19.1.0.kHAmv6cZ.js";import"./@babel_runtime@7.27.6.R8rA2vPb.js";import"./constants.D9MhJ5Zx.js";import"./react-dom@19.1.0_react@19.1.0.o1WqAU0f.js";import"./scheduler@0.26.0.CebB03oh.js";import"./nprogress@0.2.0.C3Hg9s_t.js";import"./i18next-http-backend@3.0.2.DhWuBXn3.js";import"./@loadable_component@5.16.7_react@19.1.0.Qeu0YpDv.js";import"./hoist-non-react-statics@3.3.2.DuVlxzJZ.js";import"./react-is@16.13.1.yJGO6Amu.js";import"./crypto-js@4.2.0.BDFvW1gg.js";import"./axios@1.9.0.rSMZb3Ae.js";import"./lodash@4.17.21.HHZ9h80f.js";import"./zustand@5.0.5_@types_react@19.1.6_react@19.1.0.BKkNMs5o.js";import"./@iconify_react@5.2.1_react@19.1.0.BMViFkUw.js";import"./react-router@7.5.1_react-dom@19.1.0_react@19.1.0.C7sHyRND.js";import"./cookie@1.0.2.BUTH-fPQ.js";import"./react-activation@0.13.4_react@19.1.0.BIE9KLRT.js";import"./szfe-tools@0.0.0-beta.7.apKt9ZQn.js";import"./react-node-key@0.4.0_react@19.1.0.8tQApNlM.js";import"./react-draggable@4.4.6_react-dom@19.1.0_react@19.1.0.BjQ5V6d-.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./clsx@1.2.1.BKB3NJQ_.js";import"./@ant-design_icons@6.0.0_react-dom@19.1.0_react@19.1.0.BE6VjIg_.js";import"./@ant-design_icons-svg@4.4.2.y_0dq8WL.js";import"./classnames@2.5.1.6O6XshCl.js";import"./@ant-design_colors@8.0.0.KAmQ1VyL.js";import"./@ant-design_fast-color@3.0.0.CuiH8vXZ.js";import"./@rc-component_util@1.2.1_react-dom@19.1.0_react@19.1.0.BugOSVeu.js";import"./react-is@18.3.1.USR0mOhp.js";import"./@ant-design_cssinjs@1.23.0_react-dom@19.1.0_react@19.1.0.BltCZQ6e.js";import"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0.ZpIlvg4e.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.BXpgKhw9.js";import"./i18next@25.2.1_typescript@5.8.3.BpJhskoh.js";import"./i18next-browser-languagedetector@8.1.0.BRm972Y6.js";import"./@ant-design_v5-patch-for-react-19@1.0.3_antd@5.25.4_react-dom@19.1.0_react@19.1.0.MfTe42pF.js";import"./dayjs@1.11.13.BdU3vb2R.js";import"./@ant-design_cssinjs-utils@1.1.3_react-dom@19.1.0_react@19.1.0.DKOve3Xy.js";import"./rc-resize-observer@1.4.3_react-dom@19.1.0_react@19.1.0.FPNjRaMA.js";import"./resize-observer-polyfill@1.5.1.CzGuHLZU.js";import"./rc-motion@2.9.5_react-dom@19.1.0_react@19.1.0.DwLOWyha.js";import"./@rc-component_color-picker@2.0.1_react-dom@19.1.0_react@19.1.0.ZBDYHYzV.js";import"./@ant-design_fast-color@2.0.6.BGAzuPzi.js";import"./rc-tooltip@6.4.0_react-dom@19.1.0_react@19.1.0.BmBchQ5l.js";import"./@rc-component_trigger@2.2.6_react-dom@19.1.0_react@19.1.0.qV0sH2t9.js";import"./@rc-component_portal@1.1.2_react-dom@19.1.0_react@19.1.0.DQ6b-AvD.js";import"./rc-overflow@1.4.1_react-dom@19.1.0_react@19.1.0.Btha8K3X.js";import"./rc-picker@4.11.3_dayjs@1.11.13_react-dom@19.1.0_react@19.1.0.B5hlwGHX.js";import"./@ant-design_icons@5.6.1_react-dom@19.1.0_react@19.1.0.CYpbpTAo.js";import"./@ant-design_colors@7.2.1.B1WvayP-.js";import"./rc-tabs@15.6.1_react-dom@19.1.0_react@19.1.0.DTE0EqPK.js";import"./rc-dropdown@4.2.1_react-dom@19.1.0_react@19.1.0.Ck0uesVC.js";import"./rc-menu@9.16.1_react-dom@19.1.0_react@19.1.0.CekRtWow.js";import"./rc-select@14.16.8_react-dom@19.1.0_react@19.1.0.CJvQ4nfS.js";import"./rc-virtual-list@3.18.6_react-dom@19.1.0_react@19.1.0.CoDISH5I.js";import"./rc-input-number@9.5.0_react-dom@19.1.0_react@19.1.0.B7wQaRqn.js";import"./@rc-component_mini-decimal@1.1.0.CjIQ85cq.js";import"./rc-input@1.8.0_react-dom@19.1.0_react@19.1.0.-qZ5DSfA.js";import"./rc-slider@11.1.8_react-dom@19.1.0_react@19.1.0.Gerc46Zm.js";import"./rc-drawer@7.3.0_react-dom@19.1.0_react@19.1.0.BQwExKl5.js";import"./rc-field-form@2.7.0_react-dom@19.1.0_react@19.1.0.BqnCm2bi.js";import"./@rc-component_async-validator@5.0.4.B9MR0Cgm.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./rc-dialog@9.6.0_react-dom@19.1.0_react@19.1.0.Cf4gD3tR.js";import"./rc-textarea@1.10.0_react-dom@19.1.0_react@19.1.0.CnQ3Ea55.js";import"./rc-notification@5.6.4_react-dom@19.1.0_react@19.1.0.B1urgneG.js";import"./rc-rate@2.13.1_react-dom@19.1.0_react@19.1.0.C_EqLsCD.js";import"./rc-switch@4.1.0_react-dom@19.1.0_react@19.1.0.tEJsjxwM.js";import"./rc-table@7.50.5_react-dom@19.1.0_react@19.1.0.DvewjP5U.js";import"./@rc-component_context@1.4.0_react-dom@19.1.0_react@19.1.0.BAdWOjF_.js";import"./rc-tree@5.13.1_react-dom@19.1.0_react@19.1.0.aFmaIJJm.js";import"./rc-checkbox@3.5.0_react-dom@19.1.0_react@19.1.0.DFzhbyzk.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./rc-pagination@5.1.0_react-dom@19.1.0_react@19.1.0.ByNKu0YI.js";import"./rc-tree-select@5.27.0_react-dom@19.1.0_react@19.1.0.Ek5F51IM.js";import"./rc-upload@4.9.2_react-dom@19.1.0_react@19.1.0.IYQmxDPx.js";import"./rc-progress@4.0.0_react-dom@19.1.0_react@19.1.0.QyyZHMB5.js";import"./componentMap.d1NAYGin.js";import"./react-resizable@3.0.5_react-dom@19.1.0_react@19.1.0.DUvuNxA3.js";const I={status:1};function L(){const{t:L}=N(),$=t.useRef(null),F=r(L,(function(t,r){return e.jsxs(e.Fragment,{children:[!0===bt.permission&&e.jsx(D,{className:"mr-2 small-btn",onClick:()=>xt(r.id),children:L("system.permissions")}),!0===bt.update&&e.jsx(x,{className:"mr-5px",onClick:()=>St(r.id)}),!0===bt.delete&&e.jsx(S,{className:"mr-5px",handleDelete:()=>wt(r.id)})]})})),[P,K]=z.useMessage(),[A,E]=t.useState(!1),[M,O]=t.useState(!1),[R,q]=t.useState(!1),[T,U]=t.useState(!1),[V,W]=t.useState(d(L)),[G,H]=t.useState(""),[J,Q]=t.useState(I),[X,Y]=t.useState({}),[Z,tt]=t.useState(l.page),[et,rt]=t.useState(l.pageSize),[st,at]=t.useState(0),[ot,ct]=t.useState([]),[it,mt]=t.useState(""),[nt,pt]=t.useState(!1),[dt,lt]=t.useState([]),[_t,jt]=t.useState([]),[ut,ft]=t.useState([]),{permissions:gt}=_(),yt="/authority/user",bt={page:b(`${yt}/index`,gt),create:b(`${yt}/create`,gt),update:b(`${yt}/update`,gt),delete:b(`${yt}/delete`,gt),permission:b(`${yt}/authority`,gt)},ht=t.useCallback((async()=>{const t={...X,page:Z,pageSize:et};try{O(!0);const{code:e,data:r}=await s(t);if(200!==Number(e))return;const{items:a,total:o}=r;at(o||0),ct(a||[])}finally{E(!1),O(!1)}}),[Z,et,X]);t.useEffect((()=>{A&&ht()}),[ht,A]);t.useEffect((()=>{bt.page&&ht()}),[bt.page]);const xt=async t=>{try{O(!0);const e={userId:t},{code:r,data:s}=await u(e);if(200!==Number(r))return;const{defaultCheckedKeys:a,treeData:o}=s;mt(t),jt(o),lt(a),pt(!0)}finally{O(!1)}},St=async t=>{try{U(!0),W(f(L,t)),H(t),q(!0);const{code:e,data:r}=await c(t);if(200!==Number(e))return;Q(r)}finally{q(!1)}},wt=async t=>{try{O(!0);const{code:e,message:r}=await i(t);200===Number(e)&&(P.success(r||L("public.successfullyDeleted")),ht())}finally{O(!1)}},Ct={selectedRowKeys:ut,onChange:t=>{ft(t)}};const Bt=e.jsx(S,{isIcon:!0,isLoading:M,name:L("public.batchDelete"),handleDelete:async()=>{try{if(!ut.length)return P.warning({content:L("public.tableSelectWarning"),key:"pleaseSelect"});O(!0);const t={ids:ut},{code:e,message:r}=await m(t);200===Number(e)&&(P.success(r||L("public.successfullyDeleted")),ht())}finally{O(!1)}}});return e.jsxs(h,{isPermission:bt.page,children:[K,e.jsx(C,{children:e.jsx(B,{list:a(L),data:X,type:"grid",isLoading:M,handleFinish:t=>{tt(1),Y(t),E(!0)}})}),e.jsxs(C,{className:"mt-10px",children:[e.jsx(k,{isLoading:M,isCreate:bt.create,columns:F,dataSource:ot,rowSelection:Ct,leftContent:Bt,rightContent:e.jsx("div",{children:"demo"}),getPage:ht,onCreate:()=>{U(!0),W(d(L)),H(""),Q(I)}}),e.jsx(w,{disabled:M,current:Z,pageSize:et,total:st,onChange:(t,e)=>{tt(t),rt(e),E(!0)}})]}),e.jsx(j,{title:V,open:T,confirmLoading:R,onOk:()=>{var t;null==(t=$.current)||t.submit()},onCancel:()=>{U(!1)},children:e.jsx(v,{ref:$,list:o(L),data:J,labelCol:{span:5},wrapperCol:{span:17},handleFinish:async t=>{try{q(!0);const e=()=>G?n(G,t):p(t),{code:r,message:s}=await e();if(200!==Number(r))return;P.success(s||L("public.successfulOperation")),U(!1),ht()}finally{q(!1)}}})}),e.jsx(y,{isVisible:nt,treeData:_t,checkedKeys:dt,onClose:()=>{pt(!1)},onSubmit:async t=>{try{O(!0);const e={menuIds:t,userId:it},{code:r,message:s}=await g(e);if(200!==Number(r))return;P.success(s||L("system.authorizationSuccessful")),pt(!1)}finally{O(!1)}}})]})}export{L as default};
