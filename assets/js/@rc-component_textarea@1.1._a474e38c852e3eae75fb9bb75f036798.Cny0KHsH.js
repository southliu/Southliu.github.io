import{u as e,B as t,r as n}from"./@rc-component_input@1.1.2_r_1c03f691cf199869e40e9ad757b3122a.B576X-cK.js";import{c as r}from"./clsx@2.1.1.BvmCeSbq.js";import{d as a,h as o,l as i}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{r as s,e as l}from"./react@19.2.1.BpVBN_43.js";import{R as u}from"./@rc-component_resize-observ_eaaccb47489da2719f35257c4ad9d3c9.BynXlAVv.js";const c=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],d={};let p;function m(e,t=!1,n=null,r=null){p||(p=document.createElement("textarea"),p.setAttribute("tab-index","-1"),p.setAttribute("aria-hidden","true"),p.setAttribute("name","hiddenTextarea"),document.body.appendChild(p)),e.getAttribute("wrap")?p.setAttribute("wrap",e.getAttribute("wrap")):p.removeAttribute("wrap");const{paddingSize:a,borderSize:o,boxSizing:i,sizingStyle:s}=function(e,t=!1){const n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&d[n])return d[n];const r=window.getComputedStyle(e),a=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),i=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s={sizingStyle:c.map(e=>`${e}:${r.getPropertyValue(e)}`).join(";"),paddingSize:o,borderSize:i,boxSizing:a};return t&&n&&(d[n]=s),s}(e,t);let l,u,m;p.setAttribute("style",`${s};\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n`),p.value=e.value||e.placeholder||"";let f=p.scrollHeight;if("border-box"===i?f+=o:"content-box"===i&&(f-=a),null!==n||null!==r){p.value=" ";const e=p.scrollHeight-a;null!==n&&(l=e*n,"border-box"===i&&(l=l+a+o),f=Math.max(l,f)),null!==r&&(u=e*r,"border-box"===i&&(u=u+a+o),m=f>u?"":"hidden",f=Math.min(u,f))}const g={height:f,overflowY:m,resize:"none"};return l&&(g.minHeight=l),u&&(g.maxHeight=u),g}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}const g=s.forwardRef((e,t)=>{const{prefixCls:n,defaultValue:l,value:c,autoSize:d,onResize:p,className:g,style:b,disabled:h,onChange:x,onInternalAutoSize:y,...w}=e,[v,z]=a(l,c),S=v??"",C=s.useRef();s.useImperativeHandle(t,()=>({textArea:C.current}));const[E,A]=s.useMemo(()=>d&&"object"==typeof d?[d.minRows,d.maxRows]:[],[d]),R=!!d,[j,F]=s.useState(2),[O,P]=s.useState(),$=()=>{F(0)};o(()=>{R&&$()},[c,E,A,R]),o(()=>{if(0===j)F(1);else if(1===j){const e=m(C.current,!1,E,A);F(2),P(e)}},[j]);const N=s.useRef(),V=()=>{i.cancel(N.current)};s.useEffect(()=>V,[]);const _={...b,...R?O:null};return 0!==j&&1!==j||(_.overflowY="hidden",_.overflowX="hidden"),s.createElement(u,{onResize:e=>{2===j&&(p?.(e),d&&(V(),N.current=i(()=>{$()})))},disabled:!(d||p)},s.createElement("textarea",f({},w,{ref:C,style:_,className:r(n,g,{[`${n}-disabled`]:h}),disabled:h,value:S,onChange:e=>{z(e.target.value),x?.(e)}})))});function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}const h=l.forwardRef(({defaultValue:o,value:i,onFocus:u,onBlur:c,onChange:d,allowClear:p,maxLength:m,onCompositionStart:f,onCompositionEnd:h,suffix:x,prefixCls:y="rc-textarea",showCount:w,count:v,className:z,style:S,disabled:C,hidden:E,classNames:A,styles:R,onResize:j,onClear:F,onPressEnter:O,readOnly:P,autoSize:$,onKeyDown:N,...V},_)=>{const[H,T]=a(o,i),k=null==H?"":String(H),[B,I]=l.useState(!1),L=l.useRef(!1),[M,W]=l.useState(null),D=s.useRef(null),K=s.useRef(null),Y=()=>K.current?.textArea,X=()=>{Y().focus()};s.useImperativeHandle(_,()=>({resizableTextArea:K.current,focus:X,blur:()=>{Y().blur()},nativeElement:D.current?.nativeElement||Y()})),s.useEffect(()=>{I(e=>!C&&e)},[C]);const[q,G]=l.useState(null);l.useEffect(()=>{q&&Y().setSelectionRange(...q)},[q]);const J=e(v,w),Q=J.max??m,U=Number(Q)>0,Z=J.strategy(k),ee=!!Q&&Z>Q,te=(e,t)=>{let r=t;!L.current&&J.exceedFormatter&&J.max&&J.strategy(t)>J.max&&(r=J.exceedFormatter(t,{max:J.max}),t!==r&&G([Y().selectionStart||0,Y().selectionEnd||0])),T(r),n(e.currentTarget,e,d,r)};let ne,re=x;J.show&&(ne=J.showFormatter?J.showFormatter({value:k,count:Z,maxLength:Q}):`${Z}${U?` / ${Q}`:""}`,re=l.createElement(l.Fragment,null,re,l.createElement("span",{className:r(`${y}-data-count`,A?.count),style:R?.count},ne)));const ae=!$&&!w&&!p;return l.createElement(t,{ref:D,value:k,allowClear:p,handleReset:e=>{T(""),X(),n(Y(),e,d)},suffix:re,prefixCls:y,classNames:{...A,affixWrapper:r(A?.affixWrapper,{[`${y}-show-count`]:w,[`${y}-textarea-allow-clear`]:p})},disabled:C,focused:B,className:r(z,ee&&`${y}-out-of-range`),style:{...S,...M&&!ae?{height:"auto"}:{}},dataAttrs:{affixWrapper:{"data-count":"string"==typeof ne?ne:void 0}},hidden:E,readOnly:P,onClear:F},l.createElement(g,b({},V,{autoSize:$,maxLength:m,onKeyDown:e=>{"Enter"===e.key&&O&&!e.nativeEvent.isComposing&&O(e),N?.(e)},onChange:e=>{te(e,e.target.value)},onFocus:e=>{I(!0),u?.(e)},onBlur:e=>{I(!1),c?.(e)},onCompositionStart:e=>{L.current=!0,f?.(e)},onCompositionEnd:e=>{L.current=!1,te(e,e.currentTarget.value),h?.(e)},className:r(A?.textarea),style:{resize:S?.resize,...R?.textarea},disabled:C,prefixCls:y,onResize:e=>{j?.(e),Y()?.style.height&&W(!0)},ref:K,readOnly:P})))});export{h as T};
