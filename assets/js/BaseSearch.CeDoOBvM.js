import{r as e,j as l}from"./react@19.1.1.DFOJwFPq.js";import{h as s,c as a,b as i,f as t,a as r}from"./helper.DO6WBYIh.js";import"./BaseTimeRangePicker.gMvhogup.js";import{a as n}from"./index.CBpzx_fz.js";import{u as o}from"./react-i18next@15.6.1_i18nex_74a7e71e4075fb517089ab3b681ca6ee.DqlQsN0m.js";import{F as d,B as c,n as m,h as p}from"./antd@5.27.0_react-dom@19.1.1_react@19.1.1__react@19.1.1.C_MuLWdp.js";import{l as h,m as u,n as x}from"./@ant-design_icons@6.0.0_rea_847732ab2d986d5c093170829ace02ec.CYIqqZyR.js";const f=e.forwardRef((f,j)=>{var b;const{list:v,data:g,initialValues:w,isLoading:y,isSearch:C=!0,isReset:N=!0,isRowExpand:F=!0,type:_="default",style:R,className:k,children:E,labelCol:P,wrapperCol:S,defaultColCount:W=4,defaultRowExpand:$=2,handleFinish:B}=f,{t:V}=o(),{isPhone:I}=n(),[L]=d.useForm(),[T,q]=e.useState(!1),[z,G]=e.useState(!0),M=e.useMemo(()=>{if(!F)return!1;return W*$<v.length},[W,$,F,v.length]);e.useEffect(()=>{try{Object.keys(g).length&&z&&(G(!1),L.setFieldsValue({...g}))}catch(e){}},[g,L,z]);const O={...f};delete O.type,delete O.isSearch,delete O.isReset,delete O.isLoading,delete O.handleFinish;const A=e=>(null==e?void 0:e.labelWidth)?{style:{width:e.labelWidth}}:(null==e?void 0:e.labelCol)?e.labelCol:P||("grid"!==_||I?void 0:{span:6}),D=e=>(null==e?void 0:e.wrapperWidth)?{style:{width:e.wrapperWidth}}:(null==e?void 0:e.wrapperCol)?e.wrapperCol:S||("grid"!==_||I?void 0:{span:18}),H=l.jsxs("div",{className:"flex items-center flex-wrap gap-10px",children:[!!C&&l.jsx(c,{type:"primary",htmlType:"submit",className:"!mb-5px "+(I?"mr-5px":""),loading:y,icon:l.jsx(h,{}),children:V("public.search")}),!!N&&l.jsx(c,{className:"!mb-5px "+(I?"mr-5px":""),icon:l.jsx(u,{}),onClick:()=>{null==L||L.resetFields(),null==L||L.setFieldsValue(w?{...w}:{}),null==L||L.submit()},children:V("public.reset")}),E&&l.jsx("div",{className:"!mb-5px "+(I?"mr-5px":""),children:E}),"grid"===_&&!!M&&l.jsxs("div",{className:"text-12px cursor-pointer color-#1677ff hover:color-#69b1ff",onClick:()=>{q(!T)},children:[l.jsx(x,{rotate:T?180:0}),T?"收缩":"展开"]})]});return l.jsx("div",{id:"searches",style:R,className:k,children:l.jsxs(d,{layout:I?"horizontal":"inline",...O,ref:j,form:L,onFinish:e=>{if(B){let l=t(e,v);l=r(l),null==B||B(l)}},onFinishFailed:e=>{},autoComplete:"off",children:["default"===_&&l.jsxs(l.Fragment,{children:[null==v?void 0:v.map(l=>e.createElement(d.Item,{...a(l),key:`${l.name}`,className:`${(null==l?void 0:l.className)||""} !mb-5px`,labelCol:A(l),wrapperCol:D(l),valuePropName:s(l.component)},i(V,l,L))),H]}),"grid"===_&&l.jsxs(m,{wrap:!0,className:"w-full",children:[null==(b=(e=>{if(!M)return e;const l=W*$;for(let s=0;s<e.length;s++){const a=e[s];s<l?a.hidden=!1:a.hidden=!T}return e})(v))?void 0:b.map(e=>l.jsx("div",{style:{width:e.hidden?0:100/(I?1:W)+"%"},children:l.jsx(d.Item,{...a(e),className:`${(null==e?void 0:e.className)||""} !mb-5px`,labelCol:A(e),wrapperCol:D(e),valuePropName:s(e.component),children:i(V,e,L)})},`${e.name}`)),l.jsx(p,{flex:(null==v?void 0:v.length)%W===0||M?"auto":void 0,children:l.jsx(m,{justify:"flex-end",children:H})})]})]})})});export{f as B};
