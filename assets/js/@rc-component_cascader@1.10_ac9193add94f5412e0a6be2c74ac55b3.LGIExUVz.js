import{p as e,K as n,d as t,e as o,f as l}from"./@rc-component_util@1.7.0_re_e38ee95702524036372f825efc96e921.ChzNieGb.js";import{u as a,B as c}from"./@rc-component_select@1.4.0__6161f2ffd6045dd7d52e56179e93e0af.Yqb57vYx.js";import{r}from"./react@18.3.1.zoCbf7Ot.js";import{c as s,a as i}from"./@rc-component_tree@1.1.0_re_93dfedb1a39129d2d0c08eff1f05fe8f.Sg9Ew3g3.js";import"./react-dom@18.3.1_react@18.3.1.BHWKb6f6.js";import"./@rc-component_resize-observ_35a2a421c5cd253a7d47dbcc31e42719.C1D9mLz0.js";import"./@rc-component_motion@1.1.6__dd380705019fc1f37cb412b879364c7d.CnAyZ8EB.js";import"./@rc-component_overflow@1.0._9cdaaacfa8236b45116cac679203410a.BwUkuoE5.js";import{c as u}from"./clsx@2.1.1.DMqMD_4V.js";const p=r.createContext({}),d="__rc_cascader_search_mark__",f=(e,n,{label:t=""})=>n.some(n=>String(n[t]).toLowerCase().includes(e.toLowerCase())),h=(e,n,t,o)=>n.map(e=>e[o.label]).join(" / "),m="__RC_CASCADER_SPLIT__",v="SHOW_PARENT",g="SHOW_CHILD";function b(e){return e.join(m)}function y(e){return e.map(b)}function C(e){const{label:n,value:t,children:o}=e||{},l=t||"value";return{label:n||"label",value:l,key:l,children:o||"children"}}function k(e,n){var t,o;return null!=(o=e.isLeaf)?o:!(null==(t=e[n.children])?void 0:t.length)}function S(e){const n=e.parentElement;if(!n)return;const t=e.offsetTop-n.offsetTop;t-n.scrollTop<0?n.scrollTo({top:t}):t+e.offsetHeight-n.scrollTop>n.offsetHeight&&n.scrollTo({top:t+e.offsetHeight-n.offsetHeight})}function x(e,n){return e.map(e=>{var t;return null==(t=e[d])?void 0:t.map(e=>e[n.value])})}function _(e){return e?function(e){return Array.isArray(e)&&Array.isArray(e[0])}(e)?e:(0===e.length?[]:[e]).map(e=>Array.isArray(e)?e:[e]):[]}function E(e,n,t){const o=new Set(e),l=n();return e.filter(e=>{const n=l[e],a=n?n.parent:null,c=n?n.children:null;return!(!n||!n.node.disabled)||(t===g?!(c&&c.some(e=>e.key&&o.has(e.key))):!(a&&!a.node.disabled&&o.has(a.key)))})}function O(e,n,t,o=!1){var l;let a=n;const c=[];for(let r=0;r<e.length;r+=1){const n=e[r],s=null==a?void 0:a.findIndex(e=>{const l=e[t.value];return o?String(l)===String(n):l===n}),i=-1!==s?null==a?void 0:a[s]:null;c.push({value:null!=(l=null==i?void 0:i[t.value])?l:n,index:s,option:i}),a=null==i?void 0:i[t.children]}return c}function N(e,n){return r.useCallback(t=>{const o=[],l=[];return t.forEach(t=>{O(t,e,n).every(e=>e.option)?l.push(t):o.push(t)}),[l,o]},[e,n])}function P(e,n){const t=r.useMemo(()=>n||[],[n]),o=((e,n)=>{const t=r.useRef({options:[],info:{keyEntities:{},pathKeyEntities:{}}});return r.useCallback(()=>(t.current.options!==e&&(t.current.options=e,t.current.info=s(e,{fieldNames:n,initWrapper:e=>({...e,pathKeyEntities:{}}),processEntity:(e,t)=>{const o=e.nodes.map(e=>e[n.value]).join(m);t.pathKeyEntities[o]=e,e.key=o}})),t.current.info.pathKeyEntities),[n,e])})(t,e),l=r.useCallback(n=>{const t=o();return n.map(n=>{const{nodes:o}=t[n];return o.map(n=>n[e.value])})},[o,e]);return[t,o,l]}function j(e,n,t,o,l,a,c,r){return s=>{if(e){const e=b(s),u=y(t),p=y(o),d=u.includes(e),f=l.some(n=>b(n)===e);let h=t,m=l;if(f&&!d)m=l.filter(n=>b(n)!==e);else{const n=d?u.filter(n=>n!==e):[...u,e],t=a();let o;({checkedKeys:o}=i(n,!d||{halfCheckedKeys:p},t));const l=E(o,a,r);h=c(l)}n([...m,...h])}else n(s)}}function V(e,n,t,o,l){return r.useMemo(()=>{const[a,c]=l(n);if(!e||!n.length)return[a,[],c];const r=y(a),s=t(),{checkedKeys:u,halfCheckedKeys:p}=i(r,!0,s);return[o(u),o(p),c]},[e,n,t,o,l])}const M=r.memo(({children:e})=>e,(e,n)=>!n.open);function w({prefixCls:e,checked:n,halfChecked:t,disabled:o,onClick:l,disableCheckbox:a}){const{checkable:c}=r.useContext(p),s="boolean"!=typeof c?c:null;return r.createElement("span",{className:u("".concat(e),{["".concat(e,"-checked")]:n,["".concat(e,"-indeterminate")]:!n&&t,["".concat(e,"-disabled")]:o||a}),onClick:l},s)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},I.apply(this,arguments)}const T="__cascader_fix_label__";function R({prefixCls:n,multiple:t,options:o,activeValue:l,prevValuePath:a,onToggleOpen:c,onSelect:s,onActive:i,checkedSet:f,halfCheckedSet:h,loadingKeys:m,isSelectable:v,disabled:g}){var y,C;const x="".concat(n,"-menu"),_="".concat(n,"-menu-item"),E=r.useRef(null),{fieldNames:O,changeOnSelect:N,expandTrigger:P,expandIcon:j,loadingIcon:V,popupMenuColumnStyle:M,optionRender:R,classNames:K,styles:D}=r.useContext(p),A="hover"===P,H=e=>g||e,L=r.useMemo(()=>o.map(e=>{var n;const{disabled:t,disableCheckbox:o}=e,l=e[d],c=null!=(n=e[T])?n:e[O.label],r=e[O.value],s=k(e,O),i=l?l.map(e=>e[O.value]):[...a,r],u=b(i);return{disabled:t,label:c,value:r,isLeaf:s,isLoading:m.includes(u),checked:f.has(u),halfChecked:h.has(u),option:e,disableCheckbox:o,fullPath:i,fullPathKey:u}}),[o,f,O,h,m,a]);return r.useEffect(()=>{if(E.current){const e=".".concat(_,"-active"),n=E.current.querySelector(e);n&&S(n)}},[l,_]),r.createElement("ul",{className:u(x,null==(y=null==K?void 0:K.popup)?void 0:y.list),style:null==(C=null==D?void 0:D.popup)?void 0:C.list,ref:E,role:"menu"},L.map(({disabled:o,label:a,value:p,isLeaf:d,isLoading:f,checked:h,halfChecked:m,option:g,fullPath:b,fullPathKey:y,disableCheckbox:C})=>{var k,S;const x=e(g,{aria:!0,data:!0}),E=()=>{if(H(o))return;const e=[...b];A&&d&&e.pop(),i(e)},O=()=>{v(g)&&!H(o)&&s(b,d)};let P;return"string"==typeof g.title?P=g.title:"string"==typeof a&&(P=a),r.createElement("li",I({key:y},x,{className:u(_,null==(k=null==K?void 0:K.popup)?void 0:k.listItem,{["".concat(_,"-expand")]:!d,["".concat(_,"-active")]:l===p||l===y,["".concat(_,"-disabled")]:H(o),["".concat(_,"-loading")]:f}),style:{...M,...null==(S=null==D?void 0:D.popup)?void 0:S.listItem},role:"menuitemcheckbox",title:P,"aria-checked":h,"data-path-key":y,onClick:()=>{E(),C||t&&!d||O()},onDoubleClick:()=>{N&&c(!1)},onMouseEnter:()=>{A&&E()},onMouseDown:e=>{e.preventDefault()}}),t&&r.createElement(w,{prefixCls:"".concat(n,"-checkbox"),checked:h,halfChecked:m,disabled:H(o)||C,disableCheckbox:C,onClick:e=>{C||(e.stopPropagation(),O())}}),r.createElement("div",{className:"".concat(_,"-content")},R?R(g):a),!f&&j&&!d&&r.createElement("div",{className:"".concat(_,"-expand-icon")},j),f&&V&&r.createElement("div",{className:"".concat(_,"-loading-icon")},V))}))}const K=(e,t,o,l,a,c,s)=>{const{direction:i,searchValue:u,toggleOpen:p,open:f}=s,h="rtl"===i,[m,v,g,y]=r.useMemo(()=>{let e=-1,n=t;const a=[],c=[],r=l.length,s=x(t,o);for(let t=0;t<r&&n;t+=1){const r=n.findIndex((e,n)=>(s[n]?b(s[n]):e[o.value])===l[t]);if(-1===r)break;e=r,a.push(e),c.push(l[t]),n=n[e][o.children]}let i=t;for(let t=0;t<a.length-1;t+=1)i=i[a[t]][o.children];return[c,e,i,s]},[l,o,t]),C=e=>{a(e)},k=()=>{if(m.length>1){const e=m.slice(0,-1);C(e)}else p(!1)},S=()=>{var e;const n=((null==(e=g[v])?void 0:e[o.children])||[]).find(e=>!e.disabled);if(n){const e=[...m,n[o.value]];C(e)}};r.useImperativeHandle(e,()=>({onKeyDown:e=>{const{which:t}=e;switch(t){case n.UP:case n.DOWN:{let e=0;t===n.UP?e=-1:t===n.DOWN&&(e=1),0!==e&&(e=>{const n=g.length;let t=v;-1===t&&e<0&&(t=n);for(let l=0;l<n;l+=1){t=(t+e+n)%n;const l=g[t];if(l&&!l.disabled){const e=m.slice(0,-1).concat(y[t]?b(y[t]):l[o.value]);return void C(e)}}})(e);break}case n.LEFT:if(u)break;h?S():k();break;case n.RIGHT:if(u)break;h?k():S();break;case n.BACKSPACE:u||k();break;case n.ENTER:if(m.length){const e=g[v],n=(null==e?void 0:e[d])||[];n.length?c(n.map(e=>e[o.value]),n[n.length-1]):c(m,g[v])}break;case n.ESC:p(!1),f&&e.stopPropagation()}},onKeyUp:()=>{}}))};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},D.apply(this,arguments)}const A=r.forwardRef((e,n)=>{var t,o;const{prefixCls:l,multiple:a,searchValue:c,toggleOpen:s,notFoundContent:i,direction:d,open:f,disabled:h}=e,v=r.useRef(null),g="rtl"===d,{options:C,values:_,halfValues:E,fieldNames:N,changeOnSelect:P,onSelect:j,searchOptions:V,popupPrefixCls:w,loadData:I,expandTrigger:A}=r.useContext(p),H=w||l,[L,W]=r.useState([]);r.useEffect(()=>{L.length&&L.forEach(e=>{const n=O(e.split(m),C,N,!0).map(({option:e})=>e),t=n[n.length-1];(!t||t[N.children]||k(t,N))&&W(n=>n.filter(n=>n!==e))})},[C,L,N]);const F=r.useMemo(()=>new Set(y(_)),[_]),U=r.useMemo(()=>new Set(y(E)),[E]),[q,B]=((e,n)=>{const{values:t}=r.useContext(p),o=t[0],[l,a]=r.useState([]);return r.useEffect(()=>{e||a(o||[])},[n,o]),[l,a]})(a,f),J=e=>{B(e),(e=>{if(!I||c)return;const n=O(e,C,N).map(({option:e})=>e),t=n[n.length-1];if(t&&!k(t,N)){const t=b(e);W(e=>[...e,t]),I(n)}})(e)},z=e=>{if(h)return!1;const{disabled:n}=e,t=k(e,N);return!n&&(t||P||a)},G=(e,n,t=!1)=>{j(e),!a&&(n||P&&("hover"===A||t))&&s(!1)},Y=r.useMemo(()=>c?V:C,[c,V,C]),Q=r.useMemo(()=>{const e=[{options:Y}];let n=Y;const t=x(n,N);for(let o=0;o<q.length;o+=1){const l=q[o],a=n.find((e,n)=>(t[n]?b(t[n]):e[N.value])===l),c=null==a?void 0:a[N.children];if(!(null==c?void 0:c.length))break;n=c,e.push({options:c})}return e},[Y,q,N]);K(n,Y,N,q,J,(e,n)=>{z(n)&&G(e,k(n,N),!0)},{direction:d,searchValue:c,toggleOpen:s,open:f}),r.useEffect(()=>{var e;if(!c)for(let n=0;n<q.length;n+=1){const t=b(q.slice(0,n+1)),o=null==(e=v.current)?void 0:e.querySelector('li[data-path-key="'.concat(t.replace(/\\{0,2}"/g,'\\"'),'"]'));o&&S(o)}},[q,c]);const X=!(null==(o=null==(t=Q[0])?void 0:t.options)?void 0:o.length),Z=[{[N.value]:"__EMPTY__",[T]:i,disabled:!0}],$={...e,multiple:!X&&a,onSelect:G,onActive:J,onToggleOpen:s,checkedSet:F,halfCheckedSet:U,loadingKeys:L,isSelectable:z},ee=(X?[{options:Z}]:Q).map((e,n)=>{const t=q.slice(0,n),o=q[n];return r.createElement(R,D({key:n},$,{prefixCls:H,options:e.options,prevValuePath:t,activeValue:o}))});return r.createElement(M,{open:f},r.createElement("div",{className:u("".concat(H,"-menus"),{["".concat(H,"-menu-empty")]:X,["".concat(H,"-rtl")]:g}),ref:v},ee))});function H(){return H=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},H.apply(this,arguments)}const L=r.forwardRef((e,n)=>{const t=a();return r.createElement(A,H({},e,t,{ref:n}))});function W(){}function F(e){const{prefixCls:n="rc-cascader",style:l,className:a,options:c,checkable:s,defaultValue:i,value:d,fieldNames:f,changeOnSelect:h,onChange:m,showCheckedStrategy:v,loadData:g,expandTrigger:b,expandIcon:y=">",loadingIcon:k,direction:S,notFoundContent:x="Not Found",disabled:E,optionRender:M}=e,w=!!s,[I,T]=t(i,d),R=_(I),K=r.useMemo(()=>C(f),[JSON.stringify(f)]),[D,H,L]=P(K,c),F=N(D,K),[U,q,B]=V(w,R,H,L,F),J=o(e=>{if(T(e),m){const n=_(e),t=n.map(e=>O(e,D,K).map(e=>e.option)),o=w?n:n[0],l=w?t:t[0];m(o,l)}}),z=j(w,J,U,q,B,H,L,v),G=o(e=>{z(e)}),Y=r.useMemo(()=>({options:D,fieldNames:K,values:U,halfValues:q,changeOnSelect:h,onSelect:G,checkable:s,searchOptions:[],popupPrefixCls:void 0,loadData:g,expandTrigger:b,expandIcon:y,loadingIcon:k,popupMenuColumnStyle:void 0,optionRender:M}),[D,K,U,q,h,G,s,g,b,y,k,M]),Q="".concat(n,"-panel"),X=!D.length;return r.createElement(p.Provider,{value:Y},r.createElement("div",{className:u(Q,{["".concat(Q,"-rtl")]:"rtl"===S,["".concat(Q,"-empty")]:X},a),style:l},X?x:r.createElement(A,{prefixCls:n,searchValue:"",multiple:w,toggleOpen:W,open:!0,direction:S,disabled:E})))}function U(){return U=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},U.apply(this,arguments)}const q=r.forwardRef((e,n)=>{const{id:a,prefixCls:s="rc-cascader",fieldNames:i,defaultValue:u,value:m,changeOnSelect:g,onChange:k,displayRender:S,checkable:x,showSearch:M,expandTrigger:w,options:I,popupPrefixCls:T,loadData:R,open:K,popupClassName:D,popupMenuColumnStyle:A,popupStyle:H,classNames:W,styles:F,placement:q,onPopupVisibleChange:B,expandIcon:J=">",loadingIcon:z,children:G,popupMatchSelectWidth:Y=!1,showCheckedStrategy:Q=v,optionRender:X,...Z}=e,$=l(a),ee=!!x,[ne,te]=t(u,m),oe=_(ne),le=r.useMemo(()=>C(i),[JSON.stringify(i)]),[ae,ce,re]=P(le,I),[se,ie]=function(e,n){const{autoClearSearchValue:t,searchValue:o,onSearch:l}=n;return r.useMemo(()=>{if(!e)return[!1,{}];let n={matchInputWidth:!0,limit:50,autoClearSearchValue:t,searchValue:o,onSearch:l};return e&&"object"==typeof e&&(n={...n,...e}),n.limit<=0&&(n.limit=!1),[!0,n]},[e,t,o,l])}(M,e),{autoClearSearchValue:ue=!0,searchValue:pe,onSearch:de}=ie,[fe,he]=t("",pe),me=fe||"",ve=((e,n,t,o,l,a)=>{const{filter:c=f,render:s=h,limit:i=50,sort:u}=l;return r.useMemo(()=>{const l=[];return e?(function n(r,p,f=!1){r.forEach(r=>{if(!u&&!1!==i&&i>0&&l.length>=i)return;const h=[...p,r],m=r[t.children],v=f||r.disabled;m&&0!==m.length&&!a||c(e,h,{label:t.label})&&l.push({...r,disabled:v,[t.label]:s(e,h,o,t),[d]:h,[t.children]:void 0}),m&&n(r[t.children],h,v)})}(n,[]),u&&l.sort((n,o)=>u(n[d],o[d],e,t)),!1!==i&&i>0?l.slice(0,i):l):[]},[e,n,t,o,s,a,c,u,i])})(me,ae,le,T||s,ie,g||ee),ge=N(ae,le),[be,ye,Ce]=V(ee,oe,ce,re,ge),ke=((e,n,t,o,l)=>r.useMemo(()=>{const a=l||(e=>{const n=o?e.slice(-1):e;return n.every(e=>["string","number"].includes(typeof e))?n.join(" / "):n.reduce((e,n,t)=>{const o=r.isValidElement(n)?r.cloneElement(n,{key:t}):n;return 0===t?[o]:[...e," / ",o]},[])});return e.map(e=>{var o,l;const c=O(e,n,t),r=a(c.map(({option:e,value:n})=>{var o;return null!=(o=null==e?void 0:e[t.label])?o:n}),c.map(({option:e})=>e)),s=b(e);return{label:r,value:s,key:s,valueCells:e,disabled:null==(l=null==(o=c[c.length-1])?void 0:o.option)?void 0:l.disabled}})},[e,n,t,l,o]))(r.useMemo(()=>{const e=E(y(be),ce,Q);return[...Ce,...re(e)]},[be,ce,re,Ce,Q]),ae,le,ee,S),Se=o(e=>{if(te(e),k){const n=_(e),t=n.map(e=>O(e,ae,le).map(e=>e.option)),o=ee?n:n[0],l=ee?t:t[0];k(o,l)}}),xe=j(ee,Se,be,ye,Ce,ce,re,Q),_e=o(e=>{ee&&!ue||he(""),xe(e)}),Ee=r.useMemo(()=>({classNames:W,styles:F,options:ae,fieldNames:le,values:be,halfValues:ye,changeOnSelect:g,onSelect:_e,checkable:x,searchOptions:ve,popupPrefixCls:T,loadData:R,expandTrigger:w,expandIcon:J,loadingIcon:z,popupMenuColumnStyle:A,optionRender:X}),[W,F,ae,le,be,ye,g,_e,x,ve,T,R,w,J,z,A,X]),Oe=!(me?ve:ae).length,Ne=me&&ie.matchInputWidth||Oe?{}:{minWidth:"auto"};return r.createElement(p.Provider,{value:Ee},r.createElement(c,U({},Z,{ref:n,id:$,prefixCls:s,autoClearSearchValue:ue,popupMatchSelectWidth:Y,classNames:W,styles:F,popupStyle:{...Ne,...H},displayValues:ke,onDisplayValuesChange:(e,n)=>{if("clear"===n.type)return void Se([]);const{valueCells:t}=n.values[0];_e(t)},mode:ee?"multiple":void 0,searchValue:me,onSearch:(e,n)=>{he(e),"blur"!==n.source&&de&&de(e)},showSearch:se,OptionList:L,emptyOptions:Oe,open:K,popupClassName:D,placement:q,onPopupVisibleChange:e=>{null==B||B(e)},getRawInputElement:()=>G})))});q.SHOW_PARENT=v,q.SHOW_CHILD=g,q.Panel=F;export{q as C,F as P};
