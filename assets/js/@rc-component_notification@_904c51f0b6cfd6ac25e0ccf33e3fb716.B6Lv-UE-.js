import{r as e,e as t}from"./react@19.2.1.BpVBN_43.js";import{r as s}from"./react-dom@19.2.1_react@19.2.1.BLi5rGn2.js";import{c as o}from"./clsx@2.1.1.BvmCeSbq.js";import{a as n}from"./@rc-component_motion@1.1.6__0afcbe001b0ce065bd610efbbf939bf0.BsUikez1.js";import{p as r,K as c,e as a}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},l.apply(this,arguments)}const i=e.forwardRef((t,s)=>{const{prefixCls:n,style:a,className:i,duration:f=4.5,showProgress:u,pauseOnHover:m=!0,eventKey:p,content:y,closable:d,props:h,onClick:g,onNoticeClose:k,times:b,hovering:E}=t,[N,v]=e.useState(!1),[C,x]=e.useState(0),[j,$]=e.useState(0),w=E||N,O="number"==typeof f?f:0,R=O>0&&u,S=()=>{k(p)};e.useEffect(()=>{if(!w&&O>0){const e=Date.now()-j,t=setTimeout(()=>{S()},1e3*O-j);return()=>{m&&clearTimeout(t),$(Date.now()-e)}}},[O,w,b]),e.useEffect(()=>{if(!w&&R&&(m||0===j)){const e=performance.now();let t;const s=()=>{cancelAnimationFrame(t),t=requestAnimationFrame(t=>{const o=t+j-e,n=Math.min(o/(1e3*O),1);x(100*n),n<1&&s()})};return s(),()=>{m&&cancelAnimationFrame(t)}}},[O,j,w,R,b]);const A=e.useMemo(()=>"object"==typeof d&&null!==d?d:{},[d]),M=r(A,!0),_=100-(!C||C<0?0:C>100?100:C),P=`${n}-notice`;return e.createElement("div",l({},h,{ref:s,className:o(P,i,{[`${P}-closable`]:d}),style:a,onMouseEnter:e=>{v(!0),h?.onMouseEnter?.(e)},onMouseLeave:e=>{v(!1),h?.onMouseLeave?.(e)},onClick:g}),e.createElement("div",{className:`${P}-content`},y),d&&e.createElement("button",l({className:`${P}-close`,onKeyDown:e=>{"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==c.ENTER||S()},"aria-label":"Close"},M,{onClick:e=>{e.preventDefault(),e.stopPropagation(),S()}}),A.closeIcon??"x"),R&&e.createElement("progress",{className:`${P}-progress`,max:"100",value:_},_+"%"))}),f=t.createContext({}),u=({children:e,classNames:s})=>t.createElement(f.Provider,{value:{classNames:s}},e);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},m.apply(this,arguments)}const p=s=>{const{configList:r,placement:c,prefixCls:a,className:l,style:u,motion:p,onAllNoticeRemoved:y,onNoticeClose:d,stack:h}=s,{classNames:g}=e.useContext(f),k=e.useRef({}),[b,E]=e.useState(null),[N,v]=e.useState([]),C=r.map(e=>({config:e,key:String(e.key)})),[x,{offset:j,threshold:$,gap:w}]=(e=>{const t={offset:8,threshold:3,gap:16};return e&&"object"==typeof e&&(t.offset=e.offset??8,t.threshold=e.threshold??3,t.gap=e.gap??16),[!!e,t]})(h),O=x&&(N.length>0||C.length<=$),R="function"==typeof p?p(c):p;return e.useEffect(()=>{x&&N.length>1&&v(e=>e.filter(e=>C.some(({key:t})=>e===t)))},[N,C,x]),e.useEffect(()=>{x&&k.current[C[C.length-1]?.key]&&E(k.current[C[C.length-1]?.key])},[C,x]),t.createElement(n,m({key:c,className:o(a,`${a}-${c}`,g?.list,l,{[`${a}-stack`]:!!x,[`${a}-stack-expanded`]:O}),style:u,keys:C,motionAppear:!0},R,{onAllRemoved:()=>{y(c)}}),({config:e,className:s,style:n,index:r},l)=>{const{key:f,times:u}=e,p=String(f),{className:y,style:h,classNames:E,styles:$,...R}=e,S=C.findIndex(e=>e.key===p),A={};if(x){const e=C.length-1-(S>-1?S:r-1),t="top"===c||"bottom"===c?"-50%":"0";if(e>0){A.height=O?k.current[p]?.offsetHeight:b?.offsetHeight;let s=0;for(let t=0;t<e;t++)s+=k.current[C[C.length-1-t].key]?.offsetHeight+w;const o=(O?s:e*j)*(c.startsWith("top")?1:-1),n=!O&&b?.offsetWidth&&k.current[p]?.offsetWidth?(b?.offsetWidth-2*j*(e<3?e:3))/k.current[p]?.offsetWidth:1;A.transform=`translate3d(${t}, ${o}px, 0) scaleX(${n})`}else A.transform=`translate3d(${t}, 0, 0)`}return t.createElement("div",{ref:l,className:o(`${a}-notice-wrapper`,s,E?.wrapper),style:{...n,...A,...$?.wrapper},onMouseEnter:()=>v(e=>e.includes(p)?e:[...e,p]),onMouseLeave:()=>v(e=>e.filter(e=>e!==p))},t.createElement(i,m({},R,{ref:e=>{S>-1?k.current[p]=e:delete k.current[p]},prefixCls:a,classNames:E,styles:$,className:o(y,g?.notice),style:h,times:u,key:f,eventKey:f,onNoticeClose:d,hovering:x&&N.length>0})))})},y=e.forwardRef((t,o)=>{const{prefixCls:n="rc-notification",container:r,motion:c,maxCount:a,className:l,style:i,onAllRemoved:f,stack:u,renderNotifications:m}=t,[y,d]=e.useState([]),h=e=>{const t=y.find(t=>t.key===e),s=t?.closable,o=s&&"object"==typeof s?s:{},{onClose:n}=o;n?.(),t?.onClose?.(),d(t=>t.filter(t=>t.key!==e))};e.useImperativeHandle(o,()=>({open:e=>{d(t=>{let s=[...t];const o=s.findIndex(t=>t.key===e.key),n={...e};return o>=0?(n.times=(t[o]?.times||0)+1,s[o]=n):(n.times=0,s.push(n)),a>0&&s.length>a&&(s=s.slice(-a)),s})},close:e=>{h(e)},destroy:()=>{d([])}}));const[g,k]=e.useState({});e.useEffect(()=>{const e={};y.forEach(t=>{const{placement:s="topRight"}=t;s&&(e[s]=e[s]||[],e[s].push(t))}),Object.keys(g).forEach(t=>{e[t]=e[t]||[]}),k(e)},[y]);const b=e=>{k(t=>{const s={...t};return(s[e]||[]).length||delete s[e],s})},E=e.useRef(!1);if(e.useEffect(()=>{Object.keys(g).length>0?E.current=!0:E.current&&(f?.(),E.current=!1)},[g]),!r)return null;const N=Object.keys(g);return s.createPortal(e.createElement(e.Fragment,null,N.map(t=>{const s=g[t],o=e.createElement(p,{key:t,configList:s,placement:t,prefixCls:n,className:l?.(t),style:i?.(t),motion:c,onNoticeClose:h,onAllNoticeRemoved:b,stack:u});return m?m(o,{prefixCls:n,key:t}):o})),r)}),d=()=>document.body;let h=0;function g(t={}){const{getContainer:s=d,motion:o,prefixCls:n,maxCount:r,className:c,style:l,onAllRemoved:i,stack:f,renderNotifications:u,...m}=t,[p,g]=e.useState(),k=e.useRef(),b=e.createElement(y,{container:p,ref:k,prefixCls:n,motion:o,maxCount:r,className:c,style:l,onAllRemoved:i,stack:f,renderNotifications:u}),[E,N]=e.useState([]),v=a(e=>{const t=function(...e){const t={};return e.forEach(e=>{e&&Object.keys(e).forEach(s=>{const o=e[s];void 0!==o&&(t[s]=o)})}),t}(m,e);null!==t.key&&void 0!==t.key||(t.key=`rc-notification-${h}`,h+=1),N(e=>[...e,{type:"open",config:t}])}),C=e.useMemo(()=>({open:v,close:e=>{N(t=>[...t,{type:"close",key:e}])},destroy:()=>{N(e=>[...e,{type:"destroy"}])}}),[]);return e.useEffect(()=>{g(s())}),e.useEffect(()=>{if(k.current&&E.length){let e,t;E.forEach(e=>{switch(e.type){case"open":k.current.open(e.config);break;case"close":k.current.close(e.key);break;case"destroy":k.current.destroy()}}),N(s=>(e===s&&t||(e=s,t=s.filter(e=>!E.includes(e))),t))}},[E]),[C,b]}export{i as N,u as a,g as u};
