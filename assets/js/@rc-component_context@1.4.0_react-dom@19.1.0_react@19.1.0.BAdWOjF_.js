import{h as e,k as r}from"./@babel_runtime@7.27.6.R8rA2vPb.js";import{a as t,e as n,i as u,s as a}from"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0.ZpIlvg4e.js";import{r as o}from"./react@19.1.0.QBh3HWPD.js";import{r as c}from"./react-dom@19.1.0_react@19.1.0.o1WqAU0f.js";function f(r){var n=o.createContext(void 0);return{Context:n,Provider:function(r){var u=r.value,a=r.children,f=o.useRef(u);f.current=u;var i=o.useState((function(){return{getValue:function(){return f.current},listeners:new Set}})),s=e(i,1)[0];return t((function(){c.unstable_batchedUpdates((function(){s.listeners.forEach((function(e){e(u)}))}))}),[u]),o.createElement(n.Provider,{value:s},a)},defaultValue:r}}function i(r,a){var c=n("function"==typeof a?a:function(e){if(void 0===a)return e;if(!Array.isArray(a))return e[a];var r={};return a.forEach((function(t){r[t]=e[t]})),r}),f=o.useContext(null==r?void 0:r.Context),i=f||{},s=i.listeners,l=i.getValue,m=o.useRef();m.current=c(f?l():null==r?void 0:r.defaultValue);var v=o.useState({}),d=e(v,2)[1];return t((function(){if(f)return s.add(e),function(){s.delete(e)};function e(e){var r=c(e);u(m.current,r,!0)||d({})}}),[f]),m.current}function s(){var e=o.createContext(null);function t(){return o.useContext(e)}return{makeImmutable:function(n,u){var c=a(n),f=function(a,f){var i=c?{ref:f}:{},s=o.useRef(0),l=o.useRef(a);return null!==t()?o.createElement(n,r({},a,i)):(u&&!u(l.current,a)||(s.current+=1),l.current=a,o.createElement(e.Provider,{value:s.current},o.createElement(n,r({},a,i))))};return c?o.forwardRef(f):f},responseImmutable:function(e,n){var u=a(e),c=function(n,a){var c=u?{ref:a}:{};return t(),o.createElement(e,r({},n,c))};return u?o.memo(o.forwardRef(c),n):o.memo(c,n)},useImmutableMark:t}}export{f as a,s as c,i as u};
