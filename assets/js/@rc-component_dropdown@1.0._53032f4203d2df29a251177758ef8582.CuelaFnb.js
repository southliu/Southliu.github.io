import{T as e}from"./@rc-component_trigger@3.7.2_b5d51e27885fcdc381f6db89cb94580b.MgdExJH2.js";import{l as t,K as o,m as r,n,s as a}from"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.4n28hD7h.js";import{c as s}from"./clsx@2.1.1.DMqMD_4V.js";import{r as i,e as l}from"./react@19.2.3.DikTGMTS.js";const{ESC:c,TAB:f}=o;const p=i.forwardRef((e,t)=>{const{overlay:o,arrow:s,prefixCls:c}=e,f=i.useMemo(()=>{let e;return e="function"==typeof o?o():o,e},[o]),p=r(t,n(f));return l.createElement(l.Fragment,null,s&&l.createElement("div",{className:"".concat(c,"-arrow")}),l.cloneElement(f,{ref:a(f)?p:void 0}))}),u={adjustX:1,adjustY:1},m=[0,0],v={topLeft:{points:["bl","tl"],overflow:u,offset:[0,-4],targetOffset:m},top:{points:["bc","tc"],overflow:u,offset:[0,-4],targetOffset:m},topRight:{points:["br","tr"],overflow:u,offset:[0,-4],targetOffset:m},bottomLeft:{points:["tl","bl"],overflow:u,offset:[0,4],targetOffset:m},bottom:{points:["tc","bc"],overflow:u,offset:[0,4],targetOffset:m},bottomRight:{points:["tr","br"],overflow:u,offset:[0,4],targetOffset:m}};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},d.apply(this,arguments)}const g=l.forwardRef((o,u)=>{var m;const{arrow:g=!1,prefixCls:b="rc-dropdown",transitionName:w,animation:h,align:y,placement:C="bottomLeft",placements:O=v,getPopupContainer:R,showAction:E,hideAction:j,overlayClassName:k,overlayStyle:x,visible:N,trigger:P=["hover"],autoFocus:A,overlay:L,children:M,onVisibleChange:_,...F}=o,[S,T]=l.useState(),V="visible"in o?N:S,D=h?"".concat(b,"-").concat(h):w,W=l.useRef(null),B=l.useRef(null),H=l.useRef(null);l.useImperativeHandle(u,()=>W.current);const I=e=>{T(e),null==_||_(e)};!function({visible:e,triggerRef:o,onVisibleChange:r,autoFocus:n,overlayRef:a}){const s=i.useRef(!1),l=()=>{var t,n;e&&(null==(n=null==(t=o.current)?void 0:t.focus)||n.call(t),null==r||r(!1))},p=()=>{var e;return!!(null==(e=a.current)?void 0:e.focus)&&(a.current.focus(),s.current=!0,!0)},u=e=>{switch(e.keyCode){case c:l();break;case f:{let t=!1;s.current||(t=p()),t?e.preventDefault():l();break}}};i.useEffect(()=>e?(window.addEventListener("keydown",u),n&&t(p,3),()=>{window.removeEventListener("keydown",u),s.current=!1}):()=>{s.current=!1},[e])}({visible:V,triggerRef:H,onVisibleChange:I,autoFocus:A,overlayRef:B});const K=()=>l.createElement(p,{ref:B,overlay:L,prefixCls:b,arrow:g}),X=l.cloneElement(M,{className:s(null==(m=M.props)?void 0:m.className,V&&(()=>{const{openClassName:e}=o;return void 0!==e?e:"".concat(b,"-open")})()),ref:a(M)?r(H,n(M)):void 0});let Y=j;return Y||-1===P.indexOf("contextMenu")||(Y=["click"]),l.createElement(e,d({builtinPlacements:O},F,{prefixCls:b,ref:W,popupClassName:s(k,{["".concat(b,"-show-arrow")]:g}),popupStyle:x,action:P,showAction:E,hideAction:Y,popupPlacement:C,popupAlign:y,popupMotion:{motionName:D},popupVisible:V,stretch:(()=>{const{minOverlayWidthMatchTrigger:e,alignPoint:t}=o;return"minOverlayWidthMatchTrigger"in o?e:!t})()?"minWidth":"",popup:"function"==typeof L?K:K(),onOpenChange:I,onPopupClick:e=>{const{onOverlayClick:t}=o;T(!1),t&&t(e)},getPopupContainer:R}),X)});export{g as D};
