import{P as e}from"./@rc-component_portal@2.2.0__23d0e188c8e59a845be2370f4ba3b141.Br4DFYg2.js";import{j as n,p as t,e as a,b as r,K as o,h as l}from"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.4n28hD7h.js";import{r as s}from"./react@19.2.3.DikTGMTS.js";import{c}from"./clsx@2.1.1.DMqMD_4V.js";import{C as i}from"./@rc-component_motion@1.1.6__75bed58c5aa0279623e804b6e3100d82.CHs99PZw.js";const u=s.createContext(null),d=s.createContext({});function m(){return m=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},m.apply(this,arguments)}const p=e=>{const{prefixCls:a,className:r,containerRef:o,...l}=e,{panel:i}=s.useContext(d),u=n(i,o);return s.createElement("div",m({className:c("".concat(a,"-section"),r),role:"dialog",ref:u},t(e,{aria:!0}),{"aria-modal":"true"},l))};function f(e){if("string"==typeof e){const n=Number(e.replace(/px$/i,""));if(parseFloat(e)===n&&r(!1,"Invalid value type of `width` or `height` which should be number type instead."),!Number.isNaN(n))return n}return e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},v.apply(this,arguments)}const g={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"},h=(e,n)=>{var r,l;const{prefixCls:d,open:m,placement:h,inline:b,push:y,forceRender:C,autoFocus:E,keyboard:k,classNames:z,rootClassName:w,rootStyle:x,zIndex:R,className:S,id:N,style:M,motion:O,width:j,height:D,size:K,maxSize:L,children:P,mask:_,maskClosable:I,maskMotion:B,maskClassName:F,maskStyle:U,afterOpenChange:X,onClose:Y,onMouseEnter:A,onMouseOver:H,onMouseLeave:T,onClick:V,onKeyDown:$,onKeyUp:q,styles:G,drawerRender:J,resizable:Q,defaultSize:W}=e,Z=s.useRef(null),ee=s.useRef(null),ne=s.useRef(null);s.useImperativeHandle(n,()=>Z.current);s.useEffect(()=>{var e;m&&E&&(null==(e=Z.current)||e.focus({preventScroll:!0}))},[m]);const[te,ae]=s.useState(!1),re=s.useContext(u);let oe;oe="boolean"==typeof y?y?{}:{distance:0}:y||{};const le=null!=(l=null!=(r=null==oe?void 0:oe.distance)?r:null==re?void 0:re.pushDistance)?l:180,se=s.useMemo(()=>({pushDistance:le,push:()=>{ae(!0)},pull:()=>{ae(!1)}}),[le]);s.useEffect(()=>{var e,n;m?null==(e=null==re?void 0:re.push)||e.call(re):null==(n=null==re?void 0:re.pull)||n.call(re)},[m]),s.useEffect(()=>()=>{var e;null==(e=null==re?void 0:re.pull)||e.call(re)},[]);const ce=s.createElement(i,v({key:"mask"},B,{visible:_&&m}),({className:e,style:n},t)=>s.createElement("div",{className:c("".concat(d,"-mask"),e,null==z?void 0:z.mask,F),style:{...n,...U,...null==G?void 0:G.mask},onClick:I&&m?Y:void 0,ref:t})),ie="function"==typeof O?O(h):O,[ue,de]=s.useState(),me="left"===h||"right"===h,pe=s.useMemo(()=>{var e,n,t;return f(null!=(t=null!=(n=null!=(e=null!=K?K:me?j:D)?e:ue)?n:W)?t:me?378:void 0)},[K,j,D,W,me,ue]),fe=s.useMemo(()=>{const e={};if(te&&le)switch(h){case"top":e.transform="translateY(".concat(le,"px)");break;case"bottom":e.transform="translateY(".concat(-le,"px)");break;case"left":e.transform="translateX(".concat(le,"px)");break;default:e.transform="translateX(".concat(-le,"px)")}return me?e.width=f(pe):e.height=f(pe),e},[te,le,h,me,pe]),ve=s.useRef(null),ge=!!Q,he="object"==typeof Q&&Q||{},be=a(e=>{var n;de(e),null==(n=he.onResize)||n.call(he,e)}),{dragElementProps:ye,isDragging:Ce}=function(e){const{prefixCls:n,direction:t,className:r,style:o,maxSize:l,containerRef:i,currentSize:u,onResize:d,onResizeEnd:m,onResizeStart:p}=e,[f,v]=s.useState(!1),[g,h]=s.useState(0),[b,y]=s.useState(0),C="left"===t||"right"===t,E=a(e=>{let n;if(e.preventDefault(),e.stopPropagation(),v(!0),h(C?e.clientX:e.clientY),"number"==typeof u)n=u;else if(null==i?void 0:i.current){const e=i.current.getBoundingClientRect();n=C?e.width:e.height}y(n),null==p||p(n)}),k=a(e=>{if(!f)return;let n=(C?e.clientX:e.clientY)-g;"right"!==t&&"bottom"!==t||(n=-n);let a=b+n;a<0&&(a=0),l&&a>l&&(a=l),null==d||d(a)}),z=s.useCallback(()=>{if(f&&(v(!1),null==i?void 0:i.current)){const e=i.current.getBoundingClientRect(),n=C?e.width:e.height;null==m||m(n)}},[f,i,m,C]);return s.useEffect(()=>{if(f)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",z),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",z)}},[f,k,z]),{dragElementProps:{className:c("".concat(n,"-dragger"),"".concat(n,"-dragger-").concat(t),{["".concat(n,"-dragger-dragging")]:f,["".concat(n,"-dragger-horizontal")]:C,["".concat(n,"-dragger-vertical")]:!C},r),style:o,onMouseDown:E},isDragging:f}}({prefixCls:"".concat(d,"-resizable"),direction:h,className:null==z?void 0:z.dragger,style:null==G?void 0:G.dragger,maxSize:L,containerRef:ve,currentSize:pe,onResize:be,onResizeStart:he.onResizeStart,onResizeEnd:he.onResizeEnd}),Ee={onMouseEnter:A,onMouseOver:H,onMouseLeave:T,onClick:V,onKeyDown:$,onKeyUp:q},ke=s.createElement(i,v({key:"panel"},ie,{visible:m,forceRender:C,onVisibleChanged:e=>{null==X||X(e)},removeOnLeave:!1,leavedClassName:"".concat(d,"-content-wrapper-hidden")}),({className:n,style:a},r)=>{const o=s.createElement(p,v({id:N,containerRef:r,prefixCls:d,className:c(S,null==z?void 0:z.section),style:{...M,...null==G?void 0:G.section}},t(e,{aria:!0}),Ee),P);return s.createElement("div",v({ref:ve,className:c("".concat(d,"-content-wrapper"),Ce&&"".concat(d,"-content-wrapper-dragging"),null==z?void 0:z.wrapper,!Ce&&n),style:{...a,...fe,...null==G?void 0:G.wrapper}},t(e,{data:!0})),ge&&s.createElement("div",ye),J?J(o):o)}),ze={...x};return R&&(ze.zIndex=R),s.createElement(u.Provider,{value:se},s.createElement("div",{className:c(d,"".concat(d,"-").concat(h),w,{["".concat(d,"-open")]:m,["".concat(d,"-inline")]:b}),style:ze,tabIndex:-1,ref:Z,onKeyDown:e=>{var n,t;const{keyCode:a,shiftKey:r}=e;switch(a){case o.TAB:a===o.TAB&&(r||document.activeElement!==ne.current?r&&document.activeElement===ee.current&&(null==(t=ne.current)||t.focus({preventScroll:!0})):null==(n=ee.current)||n.focus({preventScroll:!0}));break;case o.ESC:Y&&k&&(e.stopPropagation(),Y(e))}}},ce,s.createElement("div",{tabIndex:0,ref:ee,style:g,"aria-hidden":"true","data-sentinel":"start"}),ke,s.createElement("div",{tabIndex:0,ref:ne,style:g,"aria-hidden":"true","data-sentinel":"end"})))},b=s.forwardRef(h),y=n=>{const{open:t=!1,prefixCls:a="rc-drawer",placement:r="right",autoFocus:o=!0,keyboard:c=!0,width:i,height:u,size:m,maxSize:p,mask:f=!0,maskClosable:v=!0,getContainer:g,forceRender:h,afterOpenChange:y,destroyOnHidden:C,onMouseEnter:E,onMouseOver:k,onMouseLeave:z,onClick:w,onKeyDown:x,onKeyUp:R,resizable:S,defaultSize:N,panelRef:M}=n,[O,j]=s.useState(!1),[D,K]=s.useState(!1);l(()=>{K(!0)},[]);const L=!!D&&t,P=s.useRef(null),_=s.useRef(null);l(()=>{L&&(_.current=document.activeElement)},[L]);const I=s.useMemo(()=>({panel:M}),[M]);if(!h&&!O&&!L&&C)return null;const B={onMouseEnter:E,onMouseOver:k,onMouseLeave:z,onClick:w,onKeyDown:x,onKeyUp:R},F={...n,open:L,prefixCls:a,placement:r,autoFocus:o,keyboard:c,width:i,height:u,size:m,maxSize:p,defaultSize:N,mask:f,maskClosable:v,inline:!1===g,afterOpenChange:e=>{var n,t;j(e),null==y||y(e),e||!_.current||(null==(n=P.current)?void 0:n.contains(_.current))||null==(t=_.current)||t.focus({preventScroll:!0})},ref:P,resizable:S,...B};return s.createElement(d.Provider,{value:I},s.createElement(e,{open:L||h||O,autoDestroy:!1,getContainer:g,autoLock:f&&(L||O)},s.createElement(b,F)))};export{y as D};
