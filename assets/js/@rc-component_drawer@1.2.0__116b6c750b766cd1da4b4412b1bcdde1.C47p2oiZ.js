import{P as e}from"./@rc-component_portal@2.0.1__3d144a3e75e5531d8ca8009183b58415.Bf4rG5sj.js";import{j as t,p as n,e as r,b as a,K as o,h as s}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{r as i}from"./react@19.2.1.BpVBN_43.js";import{c as l}from"./classnames@2.5.1.BUu94-of.js";import{C as c}from"./@rc-component_motion@1.1.6__0afcbe001b0ce065bd610efbbf939bf0.BsUikez1.js";const u=i.createContext(null),d=i.createContext({});function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}const f=e=>{const{prefixCls:r,className:a,containerRef:o,...s}=e,{panel:c}=i.useContext(d),u=t(c,o);return i.createElement("div",m({className:l(`${r}-section`,a),role:"dialog",ref:u},n(e,{aria:!0}),{"aria-modal":"true"},s))};function p(e){if("string"==typeof e){const t=Number(e.replace(/px$/i,""));if(parseFloat(e)===t&&a(!1,"Invalid value type of `width` or `height` which should be number type instead."),!Number.isNaN(t))return t}return e}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const h={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"},v=(e,t)=>{const{prefixCls:a,open:s,placement:d,inline:m,push:v,forceRender:b,autoFocus:y,keyboard:C,classNames:E,rootClassName:k,rootStyle:z,zIndex:w,className:x,id:R,style:S,motion:$,width:N,height:M,size:O,maxSize:D,children:j,mask:K,maskClosable:L,maskMotion:P,maskClassName:_,maskStyle:I,afterOpenChange:F,onClose:B,onMouseEnter:U,onMouseOver:X,onMouseLeave:Y,onClick:A,onKeyDown:H,onKeyUp:T,styles:V,drawerRender:q,resizable:G,defaultSize:J}=e,Q=i.useRef(null),W=i.useRef(null),Z=i.useRef(null);i.useImperativeHandle(t,()=>Q.current);i.useEffect(()=>{s&&y&&Q.current?.focus({preventScroll:!0})},[s]);const[ee,te]=i.useState(!1),ne=i.useContext(u);let re;re="boolean"==typeof v?v?{}:{distance:0}:v||{};const ae=re?.distance??ne?.pushDistance??180,oe=i.useMemo(()=>({pushDistance:ae,push:()=>{te(!0)},pull:()=>{te(!1)}}),[ae]);i.useEffect(()=>{s?ne?.push?.():ne?.pull?.()},[s]),i.useEffect(()=>()=>{ne?.pull?.()},[]);const se=i.createElement(c,g({key:"mask"},P,{visible:K&&s}),({className:e,style:t},n)=>i.createElement("div",{className:l(`${a}-mask`,e,E?.mask,_),style:{...t,...I,...V?.mask},onClick:L&&s?B:void 0,ref:n})),ie="function"==typeof $?$(d):$,[le,ce]=i.useState(),ue="left"===d||"right"===d,de=i.useMemo(()=>p(O??(ue?N:M)??le??J??(ue?378:void 0)),[O,N,M,J,ue,le]),me=i.useMemo(()=>{const e={};if(ee&&ae)switch(d){case"top":e.transform=`translateY(${ae}px)`;break;case"bottom":e.transform=`translateY(${-ae}px)`;break;case"left":e.transform=`translateX(${ae}px)`;break;default:e.transform=`translateX(${-ae}px)`}return ue?e.width=p(de):e.height=p(de),e},[ee,ae,d,ue,de]),fe=i.useRef(null),pe=r(e=>{ce(e),G?.onResize?.(e)}),{dragElementProps:ge,isDragging:he}=function(e){const{prefixCls:t,direction:n,className:a,style:o,maxSize:s,containerRef:c,currentSize:u,onResize:d,onResizeEnd:m,onResizeStart:f}=e,[p,g]=i.useState(!1),[h,v]=i.useState(0),[b,y]=i.useState(0),C="left"===n||"right"===n,E=r(e=>{let t;if(e.preventDefault(),e.stopPropagation(),g(!0),v(C?e.clientX:e.clientY),"number"==typeof u)t=u;else if(c?.current){const e=c.current.getBoundingClientRect();t=C?e.width:e.height}y(t),f?.(t)}),k=r(e=>{if(!p)return;let t=(C?e.clientX:e.clientY)-h;"right"!==n&&"bottom"!==n||(t=-t);let r=b+t;r<0&&(r=0),s&&r>s&&(r=s),d?.(r)}),z=i.useCallback(()=>{if(p&&(g(!1),c?.current)){const e=c.current.getBoundingClientRect(),t=C?e.width:e.height;m?.(t)}},[p,c,m,C]);return i.useEffect(()=>{if(p)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",z),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",z)}},[p,k,z]),{dragElementProps:{className:l(`${t}-dragger`,`${t}-dragger-${n}`,{[`${t}-dragger-dragging`]:p,[`${t}-dragger-horizontal`]:C,[`${t}-dragger-vertical`]:!C},a),style:o,onMouseDown:E},isDragging:p}}({prefixCls:`${a}-resizable`,direction:d,className:E?.dragger,style:V?.dragger,maxSize:D,containerRef:fe,currentSize:de,onResize:pe,onResizeStart:G?.onResizeStart,onResizeEnd:G?.onResizeEnd}),ve={onMouseEnter:U,onMouseOver:X,onMouseLeave:Y,onClick:A,onKeyDown:H,onKeyUp:T},be=i.createElement(c,g({key:"panel"},ie,{visible:s,forceRender:b,onVisibleChanged:e=>{F?.(e)},removeOnLeave:!1,leavedClassName:`${a}-content-wrapper-hidden`}),({className:t,style:r},o)=>{const s=i.createElement(f,g({id:R,containerRef:o,prefixCls:a,className:l(x,E?.section),style:{...S,...V?.section}},n(e,{aria:!0}),ve),j);return i.createElement("div",g({ref:fe,className:l(`${a}-content-wrapper`,he&&`${a}-content-wrapper-dragging`,E?.wrapper,!he&&t),style:{...r,...me,...V?.wrapper}},n(e,{data:!0})),G&&i.createElement("div",ge),q?q(s):s)}),ye={...z};return w&&(ye.zIndex=w),i.createElement(u.Provider,{value:oe},i.createElement("div",{className:l(a,`${a}-${d}`,k,{[`${a}-open`]:s,[`${a}-inline`]:m}),style:ye,tabIndex:-1,ref:Q,onKeyDown:e=>{const{keyCode:t,shiftKey:n}=e;switch(t){case o.TAB:t===o.TAB&&(n||document.activeElement!==Z.current?n&&document.activeElement===W.current&&Z.current?.focus({preventScroll:!0}):W.current?.focus({preventScroll:!0}));break;case o.ESC:B&&C&&(e.stopPropagation(),B(e))}}},se,i.createElement("div",{tabIndex:0,ref:W,style:h,"aria-hidden":"true","data-sentinel":"start"}),be,i.createElement("div",{tabIndex:0,ref:Z,style:h,"aria-hidden":"true","data-sentinel":"end"})))},b=i.forwardRef(v),y=t=>{const{open:n=!1,prefixCls:r="rc-drawer",placement:a="right",autoFocus:o=!0,keyboard:l=!0,width:c,height:u,size:m,maxSize:f,mask:p=!0,maskClosable:g=!0,getContainer:h,forceRender:v,afterOpenChange:y,destroyOnHidden:C,onMouseEnter:E,onMouseOver:k,onMouseLeave:z,onClick:w,onKeyDown:x,onKeyUp:R,resizable:S,defaultSize:$,panelRef:N}=t,[M,O]=i.useState(!1),[D,j]=i.useState(!1);s(()=>{j(!0)},[]);const K=!!D&&n,L=i.useRef(null),P=i.useRef(null);s(()=>{K&&(P.current=document.activeElement)},[K]);const _=i.useMemo(()=>({panel:N}),[N]);if(!v&&!M&&!K&&C)return null;const I={onMouseEnter:E,onMouseOver:k,onMouseLeave:z,onClick:w,onKeyDown:x,onKeyUp:R},F={...t,open:K,prefixCls:r,placement:a,autoFocus:o,keyboard:l,width:c,height:u,size:m,maxSize:f,defaultSize:$,mask:p,maskClosable:g,inline:!1===h,afterOpenChange:e=>{O(e),y?.(e),e||!P.current||L.current?.contains(P.current)||P.current?.focus({preventScroll:!0})},ref:L,resizable:S,...I};return i.createElement(d.Provider,{value:_},i.createElement(e,{open:K||v||M,autoDestroy:!1,getContainer:h,autoLock:p&&(K||M)},i.createElement(b,F)))};export{y as D};
