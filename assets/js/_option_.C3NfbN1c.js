import{r as e,j as t}from"./react@18.3.1.zoCbf7Ot.js";import{g as c,c as o,u as r,a}from"./article.BGvUJTr3.js";import{u as s,a as n,b as i,s as d,g as m,c as p,d as f,A as l,E as _,e as b,f as j}from"./index.CgiVVguX.js";import{$ as u,k as h}from"./keepalive-for-react@4.0.3_r_cee44704dfde6ca4220495092865c434.Bns-pOC5.js";import{u as g}from"./react-i18next@16.5.1_i18nex_69da7d7501e747dcbd332c25d34b320c.zxEW3akL.js";import{u as x}from"./react-router@7.11.0_react-d_afb6786dc8df5b79d753296512adcc38.CR3zbk4D.js";import{c as v,B as y}from"./BaseContent.CCpUpZX7.js";import{B as k}from"./BaseCard.Cydxq7tJ.js";import{B as w}from"./BaseForm.d6o-BuLf.js";import{B,F as C,s as N,d as z}from"./antd@6.1.3_react-dom@18.3.1_react@18.3.1__react@18.3.1.BuknFP3A.js";import"./clsx@2.1.1.DMqMD_4V.js";import"./CustomizeInput.D7YHLM9E.js";import"./react-dom@18.3.1_react@18.3.1.BHWKb6f6.js";import"./scheduler@0.23.2.CNpwfz3n.js";import"./nprogress@0.2.0.CrEkXCuG.js";import"./i18next-http-backend@3.0.2.CrAdD4hv.js";import"./@loadable_component@5.16.7_react@18.3.1.3aUyfYum.js";import"./@babel_runtime@7.28.4.C0xEPFvw.js";import"./hoist-non-react-statics@3.3.2.D05qL7KP.js";import"./react-is@16.13.1.yJGO6Amu.js";import"./crypto-js@4.2.0.gRZQeTrA.js";import"./axios@1.13.2.DDVHPqWP.js";import"./lodash@4.17.21.CxmCRF7_.js";import"./zustand@5.0.9_@types_react@_ce00ab85a92278456ad1966ff42c9354.LtwpIKvk.js";import"./@iconify_react@6.0.2_react@18.3.1.nvK1dcHL.js";import"./react-draggable@4.5.0_react_265ce1c3fd3bdad62ec73ca7e6d38239.lZq8y0iP.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./@ant-design_icons@6.1.0_rea_e8060a2ee6ab5d6188665a0ba343cea3.PdQQB1-F.js";import"./@ant-design_icons-svg@4.4.2.CjW3sjtx.js";import"./@ant-design_colors@8.0.0.C_9FKw7I.js";import"./@ant-design_fast-color@3.0.0.Bv-idf8E.js";import"./@rc-component_util@1.7.0_re_e38ee95702524036372f825efc96e921.ChzNieGb.js";import"./react-is@18.3.1.USR0mOhp.js";import"./is-mobile@5.0.0.D2pt-sMC.js";import"./@dnd-kit_core@6.3.1_react-d_dd28f9613915b34fadb5fb09ef9e129f.BbhQSf3N.js";import"./@dnd-kit_utilities@3.2.2_react@18.3.1.znExHT3J.js";import"./@dnd-kit_accessibility@3.1.1_react@18.3.1.DtmXWjAF.js";import"./@dnd-kit_sortable@10.0.0_@d_c1e55cf3798f3fa02aae1475903908f9.ChX-p3J1.js";import"./dayjs@1.11.19.DTq05uGT.js";import"./@ant-design_cssinjs@2.0.1_r_4432f5d8eb5fe12ba269923da5954874.CVcOpm3y.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.CDtraqjp.js";import"./i18next@25.7.3_typescript@5.9.3.oPH98fpq.js";import"./i18next-browser-languagedetector@8.2.0.q5bUM8v9.js";import"./@ant-design_cssinjs-utils@2_300a861791b9a8cac3821b2eab46cc7b.B8RohEd7.js";import"./@rc-component_resize-observ_35a2a421c5cd253a7d47dbcc31e42719.C1D9mLz0.js";import"./@rc-component_motion@1.1.6__dd380705019fc1f37cb412b879364c7d.CnAyZ8EB.js";import"./scroll-into-view-if-needed@3.1.0.Dau-yzRY.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./@rc-component_pagination@1._be6d53eec443f5d92b77cde0717889be.Bzor5obL.js";import"./@rc-component_picker@1.9.0__658566d2d14395b696b4b50a6133d66f.B35WigJy.js";import"./@rc-component_trigger@3.7.2_5e370e7d0715fdad4f2b80df8d4c3f35.DdCIFpIW.js";import"./@rc-component_portal@2.2.0__30be2453c38b20155edeebc9c29d42c5.DagWnXct.js";import"./@rc-component_overflow@1.0._9cdaaacfa8236b45116cac679203410a.BwUkuoE5.js";import"./@rc-component_notification@_993d93c48a92caae0673d392e684aef8.ChXwHqNU.js";import"./@rc-component_color-picker@_ea1bf1949d12d0876cffab9ee3bef94c.DrFJctvn.js";import"./@rc-component_collapse@1.1._320a533978ee14a199caf359501f0a94.DJ35S6t_.js";import"./@rc-component_dialog@1.5.1__aa11f6c6090f9d155142e3cce069c86f.BKp0nivO.js";import"./@rc-component_form@1.6.0_re_eaee3d008311c8e31b75f69585c36999.DTtrRijj.js";import"./@rc-component_async-validator@5.0.4.BzPnjApf.js";import"./@rc-component_select@1.4.0__6161f2ffd6045dd7d52e56179e93e0af.Yqb57vYx.js";import"./@rc-component_virtual-list@_133515869ff2983b40cb1d0926a9be50.CqxDmv0F.js";import"./@rc-component_tooltip@1.4.0_91e3d27c9f2ea52c05202bb8dafe1e28.CSU9sj1a.js";import"./@rc-component_dropdown@1.0._6c3ed7aa6a28a6faf59e3de1c48b0591.C2K6RRKM.js";import"./@rc-component_menu@1.2.0_re_9e4eae45ee066211f26fe7af983d1bf8.DiQXUDKa.js";import"./@rc-component_checkbox@1.0._b68db7b72a0f06de719b02dee520fe8b.BemYdnkl.js";import"./@rc-component_tabs@1.7.0_re_2525321a7db6bf5f622c322762aef5f6.BWjV1Fvx.js";import"./@ant-design_react-slick@2.0_76e377cccb8084384e5bab9ee83725bd.CyVlS0ux.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./json2mq@0.2.0.5yP7-Ybv.js";import"./string-convert@0.2.1.CCzxSb8Y.js";import"./@rc-component_cascader@1.10_ac9193add94f5412e0a6be2c74ac55b3.LGIExUVz.js";import"./@rc-component_tree@1.1.0_re_93dfedb1a39129d2d0c08eff1f05fe8f.Sg9Ew3g3.js";import"./@rc-component_segmented@1.3_7f5a92cad6d35a929ed4de9330bc12f8.niK_wppG.js";import"./@rc-component_input-number@_eb795e432b64928bc57ac0f0f64fa8da.DkcGp4Q_.js";import"./@rc-component_mini-decimal@1.1.0.BMqwrDW7.js";import"./@rc-component_input@1.1.2_r_6c49387ef109b708e26df2fdfd707796.wzc1ODv6.js";import"./@rc-component_slider@1.0.1__61bf829ae5410bcf3496bc51e6ffc897.DKu0z1vg.js";import"./@rc-component_drawer@1.3.0__9b6773847a998a182d6e44ee6adbf089.BZNy2I1S.js";import"./@rc-component_image@1.5.3_r_3e99a3d6d12de8890d00f9aa3d91ed01.COpR1jAW.js";import"./@rc-component_textarea@1.1._8d2e72fe559c15681bc2ccffdcb9cdda.BokyS9jw.js";import"./@rc-component_mentions@1.6._d3c99e6fa7c243cc19acda3df255297e.BL41JUBR.js";import"./@rc-component_progress@1.0._54f4629cb7d178cbfbebb5ae8d0ae6f9.DF514NlP.js";import"./@rc-component_qrcode@1.1.1__274dcf27e6965ec43a99180875ac3b29.BO8d2NCy.js";import"./@rc-component_rate@1.0.1_re_b69fd73eff5b890ad026d7a1d29ac71d.QuWBz_9o.js";import"./@rc-component_steps@1.2.2_r_5eaa62c4f7ce783c145d27d64691fbf8.7qZowHB7.js";import"./@rc-component_switch@1.0.3__c4ef8cd2fab9cb2a7b1c1fb0c9cbad0e.DxwCcYWx.js";import"./@rc-component_table@1.9.0_r_7270e5f52d8bd9dfb57706151da22be7.DRURCJBX.js";import"./@rc-component_context@2.0.1_9d4d54b1fae9873a6bfe3340ba2199e7.CFdWmhcg.js";import"./@rc-component_tour@2.2.1_re_b20b57e5b8f175b650723333aedfd347.CLz1ZmGR.js";import"./@rc-component_tree-select@1_882eea81c624ec8e8446ca1b1096aa3e.UuVcxIiv.js";import"./@rc-component_upload@1.1.0__cbffd664d2bfc5d0edd243b7c12b4f29.BTHomuAo.js";import"./@rc-component_mutate-observ_65e6ac37b4964094fde0d2cbd75eb2bd.Dm2-c9iA.js";import"./use-sync-external-store@1.6.0_react@18.3.1.BnuPlee_.js";import"./helper.DTmoI8X5.js";function S(t){const{fatherPath:c,zhTitle:o,enTitle:r,name:a}=t,{t:b,i18n:j}=g(),{pathname:h,search:v}=x(),{setOpenKeys:y,setSelectedKeys:k}=s(e=>e),{isPhone:w,isCollapsed:B,menuList:C,permissions:N}=n(),{addTabs:z,setNav:S,setActiveKey:E}=i(e=>e),F=e.useCallback(()=>{const e=A();d(b,e);const t=m(c);w||B||(y(t),k(c))},[]);e.useEffect(()=>{F()},[]);const P=e.useCallback((e=h)=>{var t;if("/"===e)return;const a="zh"===j.language?o:r,s=A(),n=(null==(t=p({menus:C,permissions:N,key:c}))?void 0:t.nav)||[];n.push({label:a,labelZh:o,labelEn:r});const i={label:s,labelEn:r,labelZh:o,key:h,nav:n,urlParams:v};E(i.key),S(i.nav),z(i)},[h,v]);e.useEffect(()=>{P()},[]),u(()=>{P(),F()},[]);const A=()=>{let e="",t="",s="";const n=(()=>{const e=null==v?void 0:v.substring(1,v.length),t=null==e?void 0:e.split("&");for(let c=0;c<(null==t?void 0:t.length);c++){const e=t[c],o=null==e?void 0:e.split("="),r=null==o?void 0:o[0],s=null==o?void 0:o[1];if(r===a)return s}return""})(),i="zh"===j.language?o:r;if(i){const e=n?"(".concat(n,")"):"";s="".concat(i||l(b)).concat(e),t="".concat(i).concat(e)}else{const e=f(C,c,j.language);s="".concat(i||l(b)).concat(e),t="".concat(_(b,n,e))}return e=n?t:s,e};return[]}function E(e){const{t:c}=g(),{goBack:o,handleSubmit:r,isLoading:a,children:s}=e;return t.jsxs("div",{className:"\n        w-full\n        bg\n        fixed\n        flex\n        justify-end\n        left-0\n        right-0\n        bottom-0\n        py-5px\n        px-30px\n        box-border\n        shadow\n        shadow-gray-500\n    ",children:[s,t.jsx(B,{className:"mr-10px",danger:!0,onClick:o,children:c("public.back")}),t.jsx(B,{loading:!!a,type:"primary",onClick:r,children:c("public.submit")})]})}const F={content:"<h4>初始化内容</h4>",transfer:Array.from({length:20}).map((e,t)=>({key:t.toString(),title:"content".concat(t+1),description:"description of content".concat(t+1)})).filter(e=>Number(e.key)>10).map(e=>e.key)},P="/content/article";function A(){const{t:s}=g(),{pathname:d,search:m}=x(),p=b(m,"id"),f=e.useRef(p),l=e.useRef(null),[_]=C.useForm(),[B,A]=e.useState(!1),[T,q]=e.useState(""),[K,L]=e.useState(F),[M,R]=N.useMessage(),{permissions:O}=n(),Z=h(),D=i(e=>e.closeTabGoNext),G=j(e=>e.setRefreshPage);S({fatherPath:P,zhTitle:p?"编辑文章管理":"新增文章管理",enTitle:p?"Edit Article Management":"Add Article Management"});const I="/content/article",H={create:v("".concat(I,"/create"),O),update:v("".concat(I,"/update"),O)};e.useEffect(()=>{p?Q(p):J()},[]),u(()=>{var e;const{href:t}=window.location,c=null==(e=t.split("?")[1])?void 0:e.split("=")[1];f.current!==c&&(c?Q(c):J(),f.current=c||"")},[]);const J=()=>{q(""),L(F)},Q=async e=>{try{q(e),A(!0);const{code:t,data:o}=await c(e);if(200!==Number(t))return;L(o)}finally{A(!1)}},U=e=>{var t,c;null==(t=l.current)||t.resetFields(),e&&G(!0),D({key:d,nextPath:P,dropScope:null==(c=Z.current)?void 0:c.destroy})};return t.jsxs(y,{isPermission:p?H.update:H.create,children:[R,t.jsx("div",{className:"!h-[calc(100vh-98px)] ",children:t.jsx(k,{children:t.jsx("div",{className:"mt-20px mb-50px",children:t.jsx(z,{spinning:B,children:t.jsx(w,{form:_,ref:l,list:o(s),data:K,labelCol:{span:5},handleFinish:async e=>{var t;try{A(!0);const c=()=>T?r(T,e):a(e),{code:o,message:n}=await c();if(200!==Number(o))return;M.success(n||s("public.successfulOperation")),null==(t=l.current)||t.resetFields(),U(!0)}finally{A(!1)}}})})})})}),t.jsx(E,{isLoading:B,goBack:()=>U(),handleSubmit:()=>{var e;null==(e=l.current)||e.submit()}})]})}export{A as default};
