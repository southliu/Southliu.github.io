import{e,r as t}from"./react@18.3.1.zoCbf7Ot.js";import{F as n}from"./@ant-design_fast-color@3.0.0.Bv-idf8E.js";import{c as r}from"./clsx@2.1.1.DMqMD_4V.js";import{e as o,d as c}from"./@rc-component_util@1.7.0_re_e38ee95702524036372f825efc96e921.ChzNieGb.js";const a=e=>Math.round(Number(e||0));class s extends n{constructor(e){super((e=>{if(e instanceof n)return e;if(e&&"object"==typeof e&&"h"in e&&"b"in e){const{b:t,...n}=e;return{...n,v:t}}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e})(e))}toHsbString(){const e=this.toHsb(),t=a(100*e.s),n=a(100*e.b),r=a(e.h),o=e.a,c="hsb(".concat(r,", ").concat(t,"%, ").concat(n,"%)"),s="hsba(".concat(r,", ").concat(t,"%, ").concat(n,"%, ").concat(o.toFixed(0===o?0:2),")");return 1===o?c:s}toHsb(){const{v:e,...t}=this.toHsv();return{...t,b:e,a:this.a}}}const l="rc-color-picker",u=e=>e instanceof s?e:new s(e),i=u("#1677ff"),m=e=>{const{offset:t,targetRef:n,containerRef:r,color:o,type:c}=e,{width:a,height:s}=r.current.getBoundingClientRect(),{width:l,height:i}=n.current.getBoundingClientRect(),m=l/2,d=i/2,f=(t.x+m)/a,p=1-(t.y+d)/s,g=o.toHsb(),h=f,v=(t.x+m)/a*360;if(c)switch(c){case"hue":return u({...g,h:v<=0?0:v});case"alpha":return u({...g,a:h<=0?0:h})}return u({h:g.h,s:f<=0?0:f,b:p>=1?1:p,a:g.a})},d=(e,t)=>{const n=e.toHsb();switch(t){case"hue":return{x:n.h/360*100,y:50};case"alpha":return{x:100*e.a,y:50};default:return{x:100*n.s,y:100*(1-n.b)}}},f=({color:t,prefixCls:n,className:o,style:c,onClick:a})=>{const s="".concat(n,"-color-block");return e.createElement("div",{className:r(s,o),style:c,onClick:a},e.createElement("div",{className:"".concat(s,"-inner"),style:{background:t}}))};function p(e){const{targetRef:n,containerRef:r,direction:o,onDragChange:c,onDragChangeComplete:a,calculate:s,color:l,disabledDrag:u}=e,[i,m]=t.useState({x:0,y:0}),d=t.useRef(null),f=t.useRef(null);t.useEffect(()=>{m(s())},[l]),t.useEffect(()=>()=>{document.removeEventListener("mousemove",d.current),document.removeEventListener("mouseup",f.current),document.removeEventListener("touchmove",d.current),document.removeEventListener("touchend",f.current),d.current=null,f.current=null},[]);const p=e=>{const{pageX:t,pageY:a}=function(e){const t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}(e),{x:s,y:l,width:u,height:m}=r.current.getBoundingClientRect(),{width:d,height:f}=n.current.getBoundingClientRect(),p=d/2,g=f/2,h=Math.max(0,Math.min(t-s,u))-p,v=Math.max(0,Math.min(a-l,m))-g,b={x:h,y:"x"===o?i.y:v};if(0===d&&0===f||d!==f)return!1;null==c||c(b)},g=e=>{e.preventDefault(),p(e)},h=e=>{e.preventDefault(),document.removeEventListener("mousemove",d.current),document.removeEventListener("mouseup",f.current),document.removeEventListener("touchmove",d.current),document.removeEventListener("touchend",f.current),d.current=null,f.current=null,null==a||a()};return[i,e=>{document.removeEventListener("mousemove",d.current),document.removeEventListener("mouseup",f.current),u||(p(e),document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),document.addEventListener("touchmove",g),document.addEventListener("touchend",h),d.current=g,f.current=h)}]}const g=({size:t="default",color:n,prefixCls:o})=>e.createElement("div",{className:r("".concat(o,"-handler"),{["".concat(o,"-handler-sm")]:"small"===t}),style:{backgroundColor:n}}),h=({children:t,style:n,prefixCls:r})=>e.createElement("div",{className:"".concat(r,"-palette"),style:{position:"relative",...n}},t),v=t.forwardRef((t,n)=>{const{children:r,x:o,y:c}=t;return e.createElement("div",{ref:n,style:{position:"absolute",left:"".concat(o,"%"),top:"".concat(c,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},r)}),b=({color:n,onChange:r,prefixCls:c,onChangeComplete:a,disabled:s})=>{const l=t.useRef(),u=t.useRef(),i=t.useRef(n),f=o(e=>{const t=m({offset:e,targetRef:u,containerRef:l,color:n});i.current=t,r(t)}),[b,C]=p({color:n,containerRef:l,targetRef:u,calculate:()=>d(n),onDragChange:f,onDragChangeComplete:()=>null==a?void 0:a(i.current),disabledDrag:s});return e.createElement("div",{ref:l,className:"".concat(c,"-select"),onMouseDown:C,onTouchStart:C},e.createElement(h,{prefixCls:c},e.createElement(v,{x:b.x,y:b.y,ref:u},e.createElement(g,{color:n.toRgbString(),prefixCls:c})),e.createElement("div",{className:"".concat(c,"-saturation"),style:{backgroundColor:"hsl(".concat(n.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},C=({colors:n,children:r,direction:o="to right",type:c,prefixCls:a})=>{const l=t.useMemo(()=>n.map((e,t)=>{let r=u(e);return"alpha"===c&&t===n.length-1&&(r=new s(r.setA(1))),r.toRgbString()}).join(","),[n,c]);return e.createElement("div",{className:"".concat(a,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(o,", ").concat(l,")")}},r)},E=n=>{const{prefixCls:c,colors:a,disabled:l,onChange:u,onChangeComplete:i,color:f,type:b}=n,E=t.useRef(null),y=t.useRef(null),x=t.useRef(f),R=e=>"hue"===b?e.getHue():100*e.a,w=o(e=>{const t=m({offset:e,targetRef:y,containerRef:E,color:f,type:b});x.current=t,u(R(t))}),[L,N]=p({color:f,targetRef:y,containerRef:E,calculate:()=>d(f,b),onDragChange:w,onDragChangeComplete(){i(R(x.current))},direction:"x",disabledDrag:l}),D=e.useMemo(()=>{if("hue"===b){const e=f.toHsb();e.s=1,e.b=1,e.a=1;return new s(e)}return f},[f,b]),M=e.useMemo(()=>a.map(e=>"".concat(e.color," ").concat(e.percent,"%")),[a]);return e.createElement("div",{ref:E,className:r("".concat(c,"-slider"),"".concat(c,"-slider-").concat(b)),onMouseDown:N,onTouchStart:N},e.createElement(h,{prefixCls:c},e.createElement(v,{x:L.x,y:L.y,ref:y},e.createElement(g,{size:"small",color:D.toHexString(),prefixCls:c})),e.createElement(C,{colors:M,type:b,prefixCls:c})))};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const x=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],R=t.forwardRef((n,o)=>{const{value:a,defaultValue:m,prefixCls:d=l,onChange:p,onChangeComplete:g,className:h,style:v,panelRender:C,disabledAlpha:R=!1,disabled:w=!1,components:L}=n,[N]=function(e){return t.useMemo(()=>{const{slider:t}=e||{};return[t||E]},[e])}(L),[D,M]=((e,n)=>{const[r,o]=c(e,n);return[t.useMemo(()=>u(r),[r]),o]})(m||i,a),H=t.useMemo(()=>D.setA(1).toRgbString(),[D]),j=(e,t)=>{a||M(e),null==p||p(e,t)},k=e=>new s(D.setHue(e)),S=e=>new s(D.setA(e/100)),O=r("".concat(d,"-panel"),h,{["".concat(d,"-panel-disabled")]:w}),A={prefixCls:d,disabled:w,color:D},B=e.createElement(e.Fragment,null,e.createElement(b,y({onChange:j},A,{onChangeComplete:g})),e.createElement("div",{className:"".concat(d,"-slider-container")},e.createElement("div",{className:r("".concat(d,"-slider-group"),{["".concat(d,"-slider-group-disabled-alpha")]:R})},e.createElement(N,y({},A,{type:"hue",colors:x,min:0,max:359,value:D.getHue(),onChange:e=>{j(k(e),{type:"hue",value:e})},onChangeComplete:e=>{g&&g(k(e))}})),!R&&e.createElement(N,y({},A,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:H}],min:0,max:100,value:100*D.a,onChange:e=>{j(S(e),{type:"alpha",value:e})},onChangeComplete:e=>{g&&g(S(e))}}))),e.createElement(f,{color:D.toRgbString(),prefixCls:d})));return e.createElement("div",{className:O,style:v,ref:o},"function"==typeof C?C(B):B)});export{s as C,f as a,R as b};
