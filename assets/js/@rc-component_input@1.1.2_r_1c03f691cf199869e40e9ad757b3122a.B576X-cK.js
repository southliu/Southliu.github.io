import{e,r as t}from"./react@19.2.1.BpVBN_43.js";import{c as r}from"./clsx@2.1.1.BvmCeSbq.js";import{d as n,y as s,A as a}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";function o(e,t,r){const n=t.cloneNode(!0),s=Object.create(e,{target:{value:n},currentTarget:{value:n}});return n.value=r,"number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd&&(n.selectionStart=t.selectionStart,n.selectionEnd=t.selectionEnd),n.setSelectionRange=(...e)=>{t.setSelectionRange(...e)},s}function l(e,t,r,n){if(!r)return;let s=t;return"click"===t.type?(s=o(t,e,""),void r(s)):"file"!==e.type&&void 0!==n?(s=o(t,e,n),void r(s)):void r(s)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}const u=e.forwardRef((n,s)=>{const{inputElement:a,children:o,prefixCls:l,prefix:u,suffix:i,addonBefore:f,addonAfter:p,className:m,style:d,disabled:y,readOnly:x,focused:g,triggerFocus:h,allowClear:E,value:v,handleReset:b,hidden:w,classes:N,classNames:$,dataAttrs:C,styles:S,components:R,onClear:j}=n,F=o??a,O=R?.affixWrapper||"span",W=R?.groupWrapper||"span",A=R?.wrapper||"span",B=R?.groupAddon||"span",I=t.useRef(null),k=e=>{I.current?.contains(e.target)&&h?.()},D=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(n);let K=t.cloneElement(F,{value:v,className:r(F.props?.className,!D&&$?.variant)||null});const P=t.useRef(null);if(e.useImperativeHandle(s,()=>({nativeElement:P.current||I.current})),D){let t=null;if(E){const n=!y&&!x&&v,s=`${l}-clear-icon`,a="object"==typeof E&&E?.clearIcon?E.clearIcon:"âœ–";t=e.createElement("button",{type:"button",tabIndex:-1,onClick:e=>{b?.(e),j?.()},onMouseDown:e=>e.preventDefault(),className:r(s,{[`${s}-hidden`]:!n,[`${s}-has-suffix`]:!!i})},a)}const n=`${l}-affix-wrapper`,s=r(n,{[`${l}-disabled`]:y,[`${n}-disabled`]:y,[`${n}-focused`]:g,[`${n}-readonly`]:x,[`${n}-input-with-clear-btn`]:i&&E&&v},N?.affixWrapper,$?.affixWrapper,$?.variant),a=(i||E)&&e.createElement("span",{className:r(`${l}-suffix`,$?.suffix),style:S?.suffix},t,i);K=e.createElement(O,c({className:s,style:S?.affixWrapper,onClick:k},C?.affixWrapper,{ref:I}),u&&e.createElement("span",{className:r(`${l}-prefix`,$?.prefix),style:S?.prefix},u),K,a)}if(function(e){return!(!e.addonBefore&&!e.addonAfter)}(n)){const t=`${l}-group`,n=`${t}-addon`,s=`${t}-wrapper`,a=r(`${l}-wrapper`,t,N?.wrapper,$?.wrapper),o=r(s,{[`${s}-disabled`]:y},N?.group,$?.groupWrapper);K=e.createElement(W,{className:o,ref:P},e.createElement(A,{className:a},f&&e.createElement(B,{className:n},f),K,p&&e.createElement(B,{className:n},p)))}return e.cloneElement(K,{className:r(K.props?.className,m)||null,style:{...K.props?.style,...d},hidden:w})});function i(e,r){return t.useMemo(()=>{let t={};r&&(t.show="object"==typeof r&&r.formatter?r.formatter:!!r),t={...t,...e};const{show:n,...s}=t;return{...s,show:!!n,showFormatter:"function"==typeof n?n:void 0,strategy:s.strategy||(e=>e.length)}},[e,r])}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}const p=t.forwardRef((o,c)=>{const{autoComplete:p,onChange:m,onFocus:d,onBlur:y,onPressEnter:x,onKeyDown:g,onKeyUp:h,prefixCls:E="rc-input",disabled:v,htmlSize:b,className:w,maxLength:N,suffix:$,showCount:C,count:S,type:R="text",classes:j,classNames:F,styles:O,onCompositionStart:W,onCompositionEnd:A,...B}=o,[I,k]=t.useState(!1),D=t.useRef(!1),K=t.useRef(!1),P=t.useRef(null),z=t.useRef(null),_=e=>{P.current&&s(P.current,e)},[H,L]=n(o.defaultValue,o.value),M=null==H?"":String(H),[T,U]=t.useState(null),V=i(S,C),q=V.max||N,G=V.strategy(M),J=!!q&&G>q;t.useImperativeHandle(c,()=>({focus:_,blur:()=>{P.current?.blur()},setSelectionRange:(e,t,r)=>{P.current?.setSelectionRange(e,t,r)},select:()=>{P.current?.select()},input:P.current,nativeElement:z.current?.nativeElement||P.current})),t.useEffect(()=>{K.current&&(K.current=!1),k(e=>(!e||!v)&&e)},[v]);const Q=(e,t,r)=>{let n=t;if(!D.current&&V.exceedFormatter&&V.max&&V.strategy(t)>V.max)n=V.exceedFormatter(t,{max:V.max}),t!==n&&U([P.current?.selectionStart||0,P.current?.selectionEnd||0]);else if("compositionEnd"===r.source)return;L(n),P.current&&l(P.current,e,m,n)};t.useEffect(()=>{T&&P.current?.setSelectionRange(...T)},[T]);const X=e=>{Q(e,e.target.value,{source:"change"})},Y=e=>{D.current=!1,Q(e,e.currentTarget.value,{source:"compositionEnd"}),A?.(e)},Z=e=>{!x||"Enter"!==e.key||K.current||e.nativeEvent.isComposing||(K.current=!0,x(e)),g?.(e)},ee=e=>{"Enter"===e.key&&(K.current=!1),h?.(e)},te=e=>{k(!0),d?.(e)},re=e=>{K.current&&(K.current=!1),k(!1),y?.(e)},ne=J&&`${E}-out-of-range`;return e.createElement(u,f({},B,{prefixCls:E,className:r(w,ne),handleReset:e=>{L(""),_(),P.current&&l(P.current,e,m)},value:M,focused:I,triggerFocus:_,suffix:(()=>{const t=Number(q)>0;if($||V.show){const n=V.showFormatter?V.showFormatter({value:M,count:G,maxLength:q}):`${G}${t?` / ${q}`:""}`;return e.createElement(e.Fragment,null,V.show&&e.createElement("span",{className:r(`${E}-show-count-suffix`,{[`${E}-show-count-has-suffix`]:!!$},F?.count),style:{...O?.count}},n),$)}return null})(),disabled:v,classes:j,classNames:F,styles:O,ref:z}),(()=>{const t=a(o,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return e.createElement("input",f({autoComplete:p},t,{onChange:X,onFocus:te,onBlur:re,onKeyDown:Z,onKeyUp:ee,className:r(E,{[`${E}-disabled`]:v},F?.input),style:O?.input,ref:P,size:b,type:R,onCompositionStart:e=>{D.current=!0,W?.(e)},onCompositionEnd:Y}))})())});export{u as B,p as I,l as r,i as u};
