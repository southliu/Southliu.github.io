var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{r as n}from"./react@19.2.1.BpVBN_43.js";import{c as r,l as o,C as s,D as i,e as a,s as c,n as u,E as l}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{c as f}from"./clsx@2.1.1.BvmCeSbq.js";const m=n.createContext({});function p({children:e,...t}){return n.createElement(m.Provider,{value:t},e)}const d="none",v="appear",y="enter",E="leave",b="none",h="prepare",k="start",A="active",L="end",g="prepared";function C(e,t){const n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit${e}`]=`webkit${t}`,n[`Moz${e}`]=`moz${t}`,n[`ms${e}`]=`MS${t}`,n[`O${e}`]=`o${t.toLowerCase()}`,n}const P=function(e,t){const n={animationend:C("Animation","AnimationEnd"),transitionend:C("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(r(),"undefined"!=typeof window?window:{});let j={};r()&&({style:j}=document.createElement("div"));const w={};function O(e){if(w[e])return w[e];const t=P[e];if(t){const n=Object.keys(t),r=n.length;for(let o=0;o<r;o+=1){const r=n[o];if(Object.prototype.hasOwnProperty.call(t,r)&&r in j)return w[e]=t[r],w[e]}}return""}const R=O("animationend"),S=O("transitionend"),$=!(!R||!S),M=R||"animationend",N=S||"transitionend";function x(e,t){if(!e)return null;if("object"==typeof e){return e[t.replace(/-\w/g,e=>e[1].toUpperCase())]}return`${e}-${t}`}const T=r()?n.useLayoutEffect:n.useEffect,D=[h,k,A,L],V=[h,g],I=!1;function _(e){return e===A||e===L}const z=(e,t,r)=>{const[i,a]=s(b),[c,u]=(()=>{const e=n.useRef(null);function t(){o.cancel(e.current)}return n.useEffect(()=>()=>{t()},[]),[function n(r,s=2){t();const i=o(()=>{s<=1?r({isCanceled:()=>i!==e.current}):n(r,s-1)});e.current=i},t]})();const l=t?V:D;return T(()=>{if(i!==b&&i!==L){const e=l.indexOf(i),t=l[e+1],n=r(i);n===I?a(t,!0):t&&c(e=>{function r(){e.isCanceled()||a(t,!0)}!0===n?r():Promise.resolve(n).then(r)})}},[e,i]),n.useEffect(()=>()=>{u()},[]),[function(){a(h,!0)},i]};function F(e,t,r,{motionEnter:o=!0,motionAppear:c=!0,motionLeave:u=!0,motionDeadline:l,motionLeaveImmediately:f,onAppearPrepare:m,onEnterPrepare:p,onLeavePrepare:b,onAppearStart:L,onEnterStart:C,onLeaveStart:P,onAppearActive:j,onEnterActive:w,onLeaveActive:O,onAppearEnd:R,onEnterEnd:S,onLeaveEnd:$,onVisibleChanged:x}){const[D,V]=s(),[F,K]=i(d),[H,U]=s(null),W=F(),q=n.useRef(!1),B=n.useRef(null);function G(){return r()}const J=n.useRef(!1);function Q(){K(d),U(null,!0)}const X=a(e=>{const t=F();if(t===d)return;const n=G();if(e&&!e.deadline&&e.target!==n)return;const r=J.current;let o;t===v&&r?o=R?.(n,e):t===y&&r?o=S?.(n,e):t===E&&r&&(o=$?.(n,e)),r&&!1!==o&&Q()}),[Y]=(e=>{const t=n.useRef();function r(t){t&&(t.removeEventListener(N,e),t.removeEventListener(M,e))}return n.useEffect(()=>()=>{r(t.current),t.current=null},[]),[function(n){t.current&&t.current!==n&&r(t.current),n&&n!==t.current&&(n.addEventListener(N,e),n.addEventListener(M,e),t.current=n)},r]})(X),Z=e=>{switch(e){case v:return{[h]:m,[k]:L,[A]:j};case y:return{[h]:p,[k]:C,[A]:w};case E:return{[h]:b,[k]:P,[A]:O};default:return{}}},ee=n.useMemo(()=>Z(W),[W]),[te,ne]=z(W,!e,e=>{if(e===h){const e=ee[h];return e?e(G()):I}return ne in ee&&U(ee[ne]?.(G(),null)||null),ne===A&&W!==d&&(Y(G()),l>0&&(clearTimeout(B.current),B.current=setTimeout(()=>{X({deadline:!0})},l))),ne===g&&Q(),true}),re=_(ne);J.current=re;const oe=n.useRef(null);T(()=>{if(q.current&&oe.current===t)return;V(t);const n=q.current;let r;q.current=!0,!n&&t&&c&&(r=v),n&&t&&o&&(r=y),(n&&!t&&u||!n&&f&&!t&&u)&&(r=E);const s=Z(r);r&&(e||s[h])?(K(r),te()):K(d),oe.current=t},[t]),n.useEffect(()=>{(W===v&&!c||W===y&&!o||W===E&&!u)&&K(d)},[c,o,u]),n.useEffect(()=>()=>{q.current=!1,clearTimeout(B.current)},[]);const se=n.useRef(!1);n.useEffect(()=>{D&&(se.current=!0),void 0!==D&&W===d&&((se.current||D)&&x?.(D),se.current=!0)},[D,W]);let ie=H;return ee[h]&&ne===k&&(ie={transition:"none",...ie}),[F,ne,ie,D??t]}const K=function(e){let t=e;"object"==typeof e&&({transitionSupport:t}=e);const r=n.forwardRef((e,r)=>{const{visible:o=!0,removeOnLeave:s=!0,forceRender:i,children:a,motionName:p,leavedClassName:v,eventProps:y}=e,{motion:E}=n.useContext(m),b=function(e,n){return!(!e.motionName||!t||!1===n)}(e,E),A=n.useRef();function L(){return l(A.current)}const[g,C,P,j]=F(b,o,L,e),w=g(),O=n.useRef(j);j&&(O.current=!0);const R=n.useMemo(()=>{const e={};return Object.defineProperties(e,{nativeElement:{enumerable:!0,get:L},inMotion:{enumerable:!0,get:()=>()=>g()!==d},enableMotion:{enumerable:!0,get:()=>()=>b}}),e},[]);let S;n.useImperativeHandle(r,()=>R,[]);const $={...y,visible:o};if(a)if(w===d)S=j?a({...$},A):!s&&O.current&&v?a({...$,className:v},A):i||!s&&!v?a({...$,style:{display:"none"}},A):null;else{let e;C===h?e="prepare":_(C)?e="active":C===k&&(e="start");const t=x(p,`${w}-${e}`);S=a({...$,className:f(x(p,w),{[t]:t&&e,[p]:"string"==typeof p}),style:P},A)}else S=null;if(n.isValidElement(S)&&c(S)){u(S)||(S=n.cloneElement(S,{ref:A}))}return S});return r.displayName="CSSMotion",r}($),H="add",U="keep",W="remove",q="removed";function B(e){let t;return t=e&&"object"==typeof e&&"key"in e?e:{key:e},{...t,key:String(t.key)}}function G(e=[]){return e.map(B)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}const Q=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const X=function(e,r=K){class o extends n.Component{constructor(){super(...arguments),t(this,"state",{keyEntities:[]}),t(this,"removeKey",e=>{this.setState(t=>({keyEntities:t.keyEntities.map(t=>t.key!==e?t:{...t,status:q})}),()=>{const{keyEntities:e}=this.state;0===e.filter(({status:e})=>e!==q).length&&this.props.onAllRemoved&&this.props.onAllRemoved()})})}static getDerivedStateFromProps({keys:e},{keyEntities:t}){const n=G(e),r=function(e=[],t=[]){let n=[],r=0;const o=t.length,s=G(e),i=G(t);s.forEach(e=>{let t=!1;for(let s=r;s<o;s+=1){const o=i[s];if(o.key===e.key){r<s&&(n=n.concat(i.slice(r,s).map(e=>({...e,status:H}))),r=s),n.push({...o,status:U}),r+=1,t=!0;break}}t||n.push({...e,status:W})}),r<o&&(n=n.concat(i.slice(r).map(e=>({...e,status:H}))));const a={};return n.forEach(({key:e})=>{a[e]=(a[e]||0)+1}),Object.keys(a).filter(e=>a[e]>1).forEach(e=>{n=n.filter(({key:t,status:n})=>t!==e||n!==W),n.forEach(t=>{t.key===e&&(t.status=U)})}),n}(t,n);return{keyEntities:r.filter(e=>{const n=t.find(({key:t})=>e.key===t);return!n||n.status!==q||e.status!==W})}}render(){const{keyEntities:e}=this.state,{component:t,children:o,onVisibleChanged:s,onAllRemoved:i,...a}=this.props,c=t||n.Fragment,u={};return Q.forEach(e=>{u[e]=a[e],delete a[e]}),delete a.keys,n.createElement(c,a,e.map(({status:e,...t},i)=>{const a=e===H||e===U;return n.createElement(r,J({},u,{key:t.key,visible:a,eventProps:t,onVisibleChanged:e=>{s?.(e,{key:t.key}),e||this.removeKey(t.key)}}),(e,t)=>o({...e,index:i},t))}))}}return t(o,"defaultProps",{component:"div"}),o}();export{K as C,p as M,X as a};
