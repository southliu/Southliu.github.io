import{r as t,j as e}from"./react@19.1.0.QBh3HWPD.js";import{t as r,g as s,s as a,c as o,a as c,d as i,b as m,u as n,e as p}from"./model.DHigcrOr.js";import{b as d,A as l,I as _,a as j,B as u,p as f,E as g,q as y}from"./index.QSHKou_T.js";import b from"./PermissionDrawer.BjUl1kcL.js";import{e as h,u as x}from"./react-router@7.5.1_react-dom@19.1.0_react@19.1.0.CjwP7qUz.js";import{c as S,B as w}from"./BaseContent.DAgsowpo.js";import{U as C,D as v,B}from"./BasePagination.B5UoCwnL.js";import{B as k}from"./BaseCard.nxt24hSw.js";import{B as N}from"./BaseSearch.u0uAV3GO.js";import{B as z}from"./BaseTable.BAo_e72r.js";import{B as D}from"./BaseForm.BoBkDjac.js";import{u as L}from"./react-i18next@15.5.2_i18next@25.2.1_react-dom@19.1.0_react@19.1.0_typescript@5.8.3.BPrJqYVj.js";import{s as $,B as I}from"./antd@5.25.4_react-dom@19.1.0_react@19.1.0.D3GrBiye.js";import"./@babel_runtime@7.27.6.R8rA2vPb.js";import"./constants.D9MhJ5Zx.js";import"./react-dom@19.1.0_react@19.1.0.o1WqAU0f.js";import"./scheduler@0.26.0.CebB03oh.js";import"./nprogress@0.2.0.C3Hg9s_t.js";import"./i18next-http-backend@3.0.2.DhWuBXn3.js";import"./@loadable_component@5.16.7_react@19.1.0.Qeu0YpDv.js";import"./hoist-non-react-statics@3.3.2.DuVlxzJZ.js";import"./react-is@16.13.1.yJGO6Amu.js";import"./crypto-js@4.2.0.BDFvW1gg.js";import"./axios@1.9.0.rSMZb3Ae.js";import"./lodash@4.17.21.HHZ9h80f.js";import"./zustand@5.0.5_@types_react@19.1.6_react@19.1.0.BKkNMs5o.js";import"./@iconify_react@5.2.1_react@19.1.0.BMViFkUw.js";import"./react-activation@0.13.4_react@19.1.0.BIE9KLRT.js";import"./szfe-tools@0.0.0-beta.7.apKt9ZQn.js";import"./react-node-key@0.4.0_react@19.1.0.8tQApNlM.js";import"./react-draggable@4.4.6_react-dom@19.1.0_react@19.1.0.BjQ5V6d-.js";import"./prop-types@15.8.1.Bx5UHif0.js";import"./clsx@1.2.1.BKB3NJQ_.js";import"./@ant-design_icons@6.0.0_react-dom@19.1.0_react@19.1.0.BE6VjIg_.js";import"./@ant-design_icons-svg@4.4.2.y_0dq8WL.js";import"./classnames@2.5.1.6O6XshCl.js";import"./@ant-design_colors@8.0.0.KAmQ1VyL.js";import"./@ant-design_fast-color@3.0.0.CuiH8vXZ.js";import"./@rc-component_util@1.2.1_react-dom@19.1.0_react@19.1.0.BugOSVeu.js";import"./react-is@18.3.1.USR0mOhp.js";import"./@ant-design_cssinjs@1.23.0_react-dom@19.1.0_react@19.1.0.BltCZQ6e.js";import"./rc-util@5.44.4_react-dom@19.1.0_react@19.1.0.ZpIlvg4e.js";import"./@emotion_hash@0.8.0.DFFAhID7.js";import"./@emotion_unitless@0.7.5.BWzHn38B.js";import"./stylis@4.3.6.BXpgKhw9.js";import"./i18next@25.2.1_typescript@5.8.3.BpJhskoh.js";import"./i18next-browser-languagedetector@8.1.0.BRm972Y6.js";import"./@ant-design_v5-patch-for-react-19@1.0.3_antd@5.25.4_react-dom@19.1.0_react@19.1.0.eYNd-W-x.js";import"./dayjs@1.11.13.BdU3vb2R.js";import"./@ant-design_cssinjs-utils@1.1.3_react-dom@19.1.0_react@19.1.0.DKOve3Xy.js";import"./rc-resize-observer@1.4.3_react-dom@19.1.0_react@19.1.0.FPNjRaMA.js";import"./resize-observer-polyfill@1.5.1.CzGuHLZU.js";import"./rc-motion@2.9.5_react-dom@19.1.0_react@19.1.0.DwLOWyha.js";import"./@rc-component_color-picker@2.0.1_react-dom@19.1.0_react@19.1.0.ZBDYHYzV.js";import"./@ant-design_fast-color@2.0.6.BGAzuPzi.js";import"./rc-tooltip@6.4.0_react-dom@19.1.0_react@19.1.0.BmBchQ5l.js";import"./@rc-component_trigger@2.2.6_react-dom@19.1.0_react@19.1.0.qV0sH2t9.js";import"./@rc-component_portal@1.1.2_react-dom@19.1.0_react@19.1.0.DQ6b-AvD.js";import"./rc-overflow@1.4.1_react-dom@19.1.0_react@19.1.0.Btha8K3X.js";import"./rc-picker@4.11.3_dayjs@1.11.13_react-dom@19.1.0_react@19.1.0.B5hlwGHX.js";import"./@ant-design_icons@5.6.1_react-dom@19.1.0_react@19.1.0.CYpbpTAo.js";import"./@ant-design_colors@7.2.1.B1WvayP-.js";import"./rc-tabs@15.6.1_react-dom@19.1.0_react@19.1.0.DTE0EqPK.js";import"./rc-dropdown@4.2.1_react-dom@19.1.0_react@19.1.0.Ck0uesVC.js";import"./rc-menu@9.16.1_react-dom@19.1.0_react@19.1.0.CekRtWow.js";import"./rc-select@14.16.8_react-dom@19.1.0_react@19.1.0.CJvQ4nfS.js";import"./rc-virtual-list@3.18.6_react-dom@19.1.0_react@19.1.0.CoDISH5I.js";import"./rc-input-number@9.5.0_react-dom@19.1.0_react@19.1.0.B7wQaRqn.js";import"./@rc-component_mini-decimal@1.1.0.CjIQ85cq.js";import"./rc-input@1.8.0_react-dom@19.1.0_react@19.1.0.-qZ5DSfA.js";import"./rc-slider@11.1.8_react-dom@19.1.0_react@19.1.0.Gerc46Zm.js";import"./rc-drawer@7.3.0_react-dom@19.1.0_react@19.1.0.BQwExKl5.js";import"./rc-field-form@2.7.0_react-dom@19.1.0_react@19.1.0.BqnCm2bi.js";import"./@rc-component_async-validator@5.0.4.B9MR0Cgm.js";import"./scroll-into-view-if-needed@3.1.0.B0UcSGS3.js";import"./compute-scroll-into-view@3.1.1.Cfyw3hb3.js";import"./rc-dialog@9.6.0_react-dom@19.1.0_react@19.1.0.Cf4gD3tR.js";import"./rc-textarea@1.10.0_react-dom@19.1.0_react@19.1.0.CnQ3Ea55.js";import"./rc-notification@5.6.4_react-dom@19.1.0_react@19.1.0.B1urgneG.js";import"./rc-rate@2.13.1_react-dom@19.1.0_react@19.1.0.C_EqLsCD.js";import"./rc-switch@4.1.0_react-dom@19.1.0_react@19.1.0.tEJsjxwM.js";import"./rc-table@7.50.5_react-dom@19.1.0_react@19.1.0.DvewjP5U.js";import"./@rc-component_context@1.4.0_react-dom@19.1.0_react@19.1.0.BAdWOjF_.js";import"./rc-tree@5.13.1_react-dom@19.1.0_react@19.1.0.aFmaIJJm.js";import"./rc-checkbox@3.5.0_react-dom@19.1.0_react@19.1.0.DFzhbyzk.js";import"./throttle-debounce@5.0.2.w9OM8Bxz.js";import"./rc-pagination@5.1.0_react-dom@19.1.0_react@19.1.0.ByNKu0YI.js";import"./rc-tree-select@5.27.0_react-dom@19.1.0_react@19.1.0.Ek5F51IM.js";import"./rc-upload@4.9.2_react-dom@19.1.0_react@19.1.0.IYQmxDPx.js";import"./rc-progress@4.0.0_react-dom@19.1.0_react@19.1.0.QyyZHMB5.js";import"./cookie@1.0.2.BUTH-fPQ.js";import"./componentMap.DkpVz5qa.js";import"./react-resizable@3.0.5_react-dom@19.1.0_react@19.1.0.DUvuNxA3.js";const P={status:1};function F(){const{t:F}=L(),O=t.useRef(null),[E]=(()=>{const[,t]=h(),{pathname:e}=x(),{setTabs:r}=d((t=>t));return[s=>{const a=Object.fromEntries(Object.entries(s).filter((([,t])=>void 0!==t)));let o=new URLSearchParams(a).toString();(null==o?void 0:o.length)&&(o=`?${o}`),t(a),r(e,o)}]})(),K=r(F,(function(t,r){return e.jsxs(e.Fragment,{children:[!0===wt.permission&&e.jsx(I,{className:"mr-2 small-btn",onClick:()=>vt(r.id),children:F("system.permissions")}),!0===wt.update&&e.jsx(C,{className:"mr-5px",onClick:()=>Bt(r.id)}),!0===wt.delete&&e.jsx(v,{className:"mr-5px",handleDelete:()=>kt(r.id)})]})})),[R,A]=$.useMessage(),[M,T]=t.useState(!1),[U,q]=t.useState(!1),[V,W]=t.useState(!1),[G,H]=t.useState(!1),[J,Q]=t.useState(l(F)),[X,Y]=t.useState(""),[Z,tt]=t.useState(P),[et,rt]=t.useState({}),[st,at]=t.useState(_.page),[ot,ct]=t.useState(_.pageSize),[it,mt]=t.useState(0),[nt,pt]=t.useState([]),[dt,lt]=t.useState(""),[_t,jt]=t.useState(!1),[ut,ft]=t.useState([]),[gt,yt]=t.useState([]),[bt,ht]=t.useState([]),{permissions:xt}=j(),St="/authority/user",wt={page:S(`${St}/index`,xt),create:S(`${St}/create`,xt),update:S(`${St}/update`,xt),delete:S(`${St}/delete`,xt),permission:S(`${St}/authority`,xt)},Ct=t.useCallback((async()=>{const t={...et,page:st,pageSize:ot};try{q(!0);const{code:e,data:r}=await s(t);if(200!==Number(e))return;const{items:a,total:o}=r;mt(o||0),pt(a||[])}finally{T(!1),q(!1)}}),[st,ot,et]);t.useEffect((()=>{M&&Ct()}),[Ct,M]);t.useEffect((()=>{wt.page&&Ct()}),[wt.page]);const vt=async t=>{try{q(!0);const e={userId:t},{code:r,data:s}=await f(e);if(200!==Number(r))return;const{defaultCheckedKeys:a,treeData:o}=s;lt(t),yt(o),ft(a),jt(!0)}finally{q(!1)}},Bt=async t=>{try{H(!0),Q(g(F,t)),Y(t),W(!0);const{code:e,data:r}=await c(t);if(200!==Number(e))return;tt(r)}finally{W(!1)}},kt=async t=>{try{q(!0);const{code:e,message:r}=await i(t);200===Number(e)&&(R.success(r||F("public.successfullyDeleted")),Ct())}finally{q(!1)}},Nt={selectedRowKeys:bt,onChange:t=>{ht(t)}};const zt=e.jsx(v,{isIcon:!0,isLoading:U,name:F("public.batchDelete"),handleDelete:async()=>{try{if(!bt.length)return R.warning({content:F("public.tableSelectWarning"),key:"pleaseSelect"});q(!0);const t={ids:bt},{code:e,message:r}=await m(t);200===Number(e)&&(R.success(r||F("public.successfullyDeleted")),Ct())}finally{q(!1)}}});return e.jsxs(w,{isPermission:wt.page,children:[A,e.jsx(k,{children:e.jsx(N,{list:a(F),data:et,type:"grid",isLoading:U,handleFinish:t=>{at(1),rt(t),E(t),T(!0)}})}),e.jsxs(k,{className:"mt-10px",children:[e.jsx(z,{isLoading:U,isCreate:wt.create,columns:K,dataSource:nt,rowSelection:Nt,leftContent:zt,rightContent:e.jsx("div",{children:"（搜索将参数放入url）"}),getPage:Ct,onCreate:()=>{H(!0),Q(l(F)),Y(""),tt(P)}}),e.jsx(B,{disabled:U,current:st,pageSize:ot,total:it,onChange:(t,e)=>{at(t),ct(e),T(!0)}})]}),e.jsx(u,{title:J,open:G,confirmLoading:V,onOk:()=>{var t;null==(t=O.current)||t.submit()},onCancel:()=>{H(!1)},children:e.jsx(D,{ref:O,list:o(F),data:Z,labelCol:{span:5},wrapperCol:{span:17},handleFinish:async t=>{try{W(!0);const e=()=>X?n(X,t):p(t),{code:r,message:s}=await e();if(200!==Number(r))return;R.success(s||F("public.successfulOperation")),H(!1),Ct()}finally{W(!1)}}})}),e.jsx(b,{isVisible:_t,treeData:gt,checkedKeys:ut,onClose:()=>{jt(!1)},onSubmit:async t=>{try{q(!0);const e={menuIds:t,userId:dt},{code:r,message:s}=await y(e);if(200!==Number(r))return;R.success(s||F("system.authorizationSuccessful")),jt(!1)}finally{q(!1)}}})]})}export{F as default};
