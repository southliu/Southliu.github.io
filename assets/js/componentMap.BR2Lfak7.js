import{j as e,r as t}from"./react@19.1.0.BqYkxQ4a.js";import{l as a}from"./lodash@4.17.21.DKG1Wmz_.js";import{D as l,T as n,r,P as s}from"./index.B8CUt8Kc.js";import{d as o}from"./dayjs@1.11.13.B77zkUA-.js";import{i,j as u,k as c,m as p,f as d,n as f,I as m,a as v,o as h,C as j,p as g,q as b,r as P,v as x,U as y}from"./antd@5.24.7_react-dom@19.1.0_react@19.1.0.DY78X8T8.js";import{u as S}from"./react-i18next@15.4.1_i18next@25.0.0_react-dom@19.1.0_react@19.1.0.Bl-q5qCL.js";function w(e,t=l){return o.isDayjs(e)?e.format(t):e}function C(e){return o.isDayjs(e)?e:o(e)}function D(e,t=l){if(e)return(null==e?void 0:e.length)>1&&o.isDayjs(null==e?void 0:e[0])&&o.isDayjs(null==e?void 0:e[1])?[e[0].format(t),e[1].format(t)]:e}function k(e){if(e)return(null==e?void 0:e.length)>1&&!o.isDayjs(null==e?void 0:e[0])&&o.isDayjs(null==e?void 0:e[1])?[o(e[0]),e[1]]:(null==e?void 0:e.length)>1&&o.isDayjs(null==e?void 0:e[0])&&!o.isDayjs(null==e?void 0:e[1])?[e[0],o(e[1])]:(null==e?void 0:e.length)>1&&!o.isDayjs(null==e?void 0:e[0])&&!o.isDayjs(null==e?void 0:e[1])?[o(e[0]),o(e[1])]:e}function T(e,t){var a;for(let n=0;n<e.length;n++)if(e[n].name===t)return(null==(a=e[n].componentProps)?void 0:a.format)||l;return l}function N(e,t){var a;for(const l in e){if(2===(null==(a=e[l])?void 0:a.length)&&o.isDayjs(e[l][0])&&o.isDayjs(e[l][1])){const a=T(t,l);e[l]=D(e[l],a)}if((null==e?void 0:e[l])&&o.isDayjs(e[l])){const a=T(t,l);e[l]=w(e[l],a)}}return e}const{RangePicker:R}=i;const{RangePicker:A}=u;function F(e){switch(e){case"Switch":return"checked";case"Upload":return"fileList";default:return"value"}}function E(e,t,a){switch(t){case"Select":case"TreeSelect":return{allowClear:!0,showSearch:!0,placeholder:e("public.inputPleaseSelect")};case"InputNumber":return{placeholder:e("public.inputPleaseEnter"),onPressEnter:a};case"Checkbox":case"CheckboxGroup":return{};case"DatePicker":return{placeholder:e("public.inputPleaseSelect"),format:l};case"RangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[l,l]};case"TimePicker":return{placeholder:e("public.inputPleaseSelect"),format:n};case"TimeRangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[n,n]};default:return{allowClear:!0,placeholder:e("public.inputPleaseEnter")}}}const G=e=>Array.isArray(e)?e:null==e?void 0:e.fileList,I=e=>{var t;const l=a.cloneDeep(e);return delete l.wrapperWidth,delete l.componentProps,delete l.render,l.hidden&&(null==(t=l.rules)?void 0:t.length)&&(l.rules=void 0),"Upload"!==l.component||(null==l?void 0:l.getValueFromEvent)||(l.getValueFromEvent=G),l},V=e=>{const t={};return Object.keys(e).forEach((a=>{var l;"string"==typeof e[a]&&(e[a]=null==(l=e[a])?void 0:l.trim()),""!==e[a]&&(t[a]=e[a])})),t};function K(e){return r.get("/authority/common/games",{params:e})}function _(){return e.jsx("div",{className:"absolute left-50% top-50% -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx(d,{spinning:!0})})}function U(a){var l;const{t:n}=S(),[r,s]=t.useState(!1),[o,i]=t.useState([]),u={...a};delete u.api,delete u.params,delete u.apiResultKey;const p=t.useCallback((async()=>{if(a.api)try{const{api:e,params:t,apiResultKey:l}=a;if(s(!0),e){const a=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await a;if(200!==Number(n))return;const s=l?null==r?void 0:r[l]:r;i(s)}}finally{s(!1)}}),[a]);t.useEffect((()=>{a.value&&0===o.length&&p()}),[a.value]);return e.jsx(c,{allowClear:!0,showSearch:!0,maxTagCount:L,placeholder:n("public.inputPleaseSelect"),optionFilterProp:(null==(l=null==u?void 0:u.fieldNames)?void 0:l.label)||"label",...u,loading:r,options:o,notFoundContent:r&&e.jsx(_,{}),onDropdownVisibleChange:e=>{var t;e&&p(),null==(t=a.onDropdownVisibleChange)||t.call(a,e)}})}function z(a){var l;const{t:n}=S(),[r,s]=t.useState(!1),[o,i]=t.useState([]),u={...a};delete u.api,delete u.params,delete u.apiResultKey;const c=t.useCallback((async()=>{if(a.api)try{const{api:e,params:t,apiResultKey:l}=a;if(s(!0),e){const a=Array.isArray(t)?e(...t):e(t),{code:n,data:r}=await a;if(200!==Number(n))return;const s=l?null==r?void 0:r[l]:r;i(s)}}finally{s(!1)}}),[a]);t.useEffect((()=>{a.value&&0===(null==o?void 0:o.length)&&c()}),[a.value]);return e.jsx(p,{allowClear:!0,showSearch:!0,maxTagCount:L,treeNodeFilterProp:(null==(l=null==u?void 0:u.fieldNames)?void 0:l.label)||"label",placeholder:n("public.inputPleaseSelect"),...u,loading:r,treeData:o,notFoundContent:r&&e.jsx(_,{}),onDropdownVisibleChange:e=>{var t;e&&c(),null==(t=a.onDropdownVisibleChange)||t.call(a,e)}})}const L="responsive";function q(t){return e.jsx(e.Fragment,{children:e.jsx(z,{...t,multiple:!0,api:K,fieldNames:{label:"name",value:"id"}})})}function M(e){return r.get("/platform/partner",{params:e})}function O(e,t){return r.get(e,{params:t})}function W(t){return e.jsx(U,{...t,api:M,mode:"multiple",fieldNames:{label:"name",value:"id"}})}const B=new Map;function H(t,a,l){const{component:n,componentProps:r}=a,s=e.jsx(m,{...E(t,"Input",l),...r});if("customize"===n){const{render:e}=a;if(!e)return s;J("customize",e)}const o=B.get(n);return o?e.jsx(e.Fragment,{children:e.jsx(o,{...E(t,n,l),...r})}):s}function J(e,t){B.set(e,t)}B.set("Input",m),B.set("TextArea",m.TextArea),B.set("InputNumber",v),B.set("InputPassword",m.Password),B.set("AutoComplete",h),B.set("Select",(function(t){var a;const{t:l}=S();return e.jsx(c,{allowClear:!0,showSearch:!0,maxTagCount:L,placeholder:l("public.inputPleaseSelect"),optionFilterProp:(null==(a=null==t?void 0:t.fieldNames)?void 0:a.label)||"label",...t})})),B.set("TreeSelect",(function(t){var a;const{t:l}=S();return e.jsx(p,{allowClear:!0,showSearch:!0,maxTagCount:L,treeNodeFilterProp:(null==(a=null==t?void 0:t.fieldNames)?void 0:a.label)||"label",placeholder:l("public.inputPleaseSelect"),...t})})),B.set("Checkbox",j),B.set("CheckboxGroup",j.Group),B.set("RadioGroup",g.Group),B.set("Switch",b),B.set("Rate",P),B.set("Slider",x),B.set("Upload",y),B.set("Transfer",(function(a){const{value:l}=a,[n,r]=t.useState(l||[]);return e.jsx(f,{...a,targetKeys:n,onChange:e=>{var t;r(e),null==(t=null==a?void 0:a.onChange)||t.call(a,e)}})})),B.set("DatePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=C(a)),e.jsx(i,{...l})})),B.set("RangePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=k(a)),e.jsx(R,{...l})})),B.set("TimePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=C(a)),e.jsx(u,{...l})})),B.set("TimeRangePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=k(a)),e.jsx(A,{...l})})),B.set("ApiSelect",U),B.set("ApiTreeSelect",z),B.set("PasswordStrength",s),J("GameSelect",q),J("PartnerSelect",W);export{J as a,O as b,V as c,H as d,I as e,N as f,K as g,F as h};
