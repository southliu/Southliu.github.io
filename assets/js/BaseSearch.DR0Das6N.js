import{r as e,j as l}from"./react@19.1.0.QBh3HWPD.js";import{h as s,e as a,d as t,f as i,c as r}from"./componentMap.d1NAYGin.js";import{u as n}from"./index.CbzFokE6.js";import{u as o}from"./react-i18next@15.5.2_i18next@25.2.1_react-dom@19.1.0_react@19.1.0_typescript@5.8.3.BPrJqYVj.js";import{F as d,B as c,h as m,g as p}from"./antd@5.25.4_react-dom@19.1.0_react@19.1.0.kHAmv6cZ.js";import{j as h,k as u,l as x}from"./@ant-design_icons@6.0.0_react-dom@19.1.0_react@19.1.0.BE6VjIg_.js";const f=e.forwardRef(((f,j)=>{var v;const{list:b,data:g,initialValues:w,isLoading:y,isSearch:C=!0,isReset:N=!0,isRowExpand:F=!0,type:_="default",style:k,className:E,children:R,labelCol:S,wrapperCol:W,defaultColCount:$=4,defaultRowExpand:P=2,handleFinish:V}=f,{t:B}=o(),{isPhone:I}=n(),[L]=d.useForm(),[z,A]=e.useState(!1),[M,O]=e.useState(!0),[T,q]=e.useState(F);e.useEffect((()=>{if(q(F),F){q($*P<b.length)}}),[$,P,I,F,b.length]),e.useEffect((()=>{try{Object.keys(g).length&&(O(!1),L.setFieldsValue({...g}))}catch(e){}}),[g,L,M]);const D={...f};delete D.type,delete D.isSearch,delete D.isReset,delete D.isLoading,delete D.handleFinish;const G=()=>{null==L||L.submit()},H=e=>(null==e?void 0:e.labelWidth)?{style:{width:e.labelWidth}}:(null==e?void 0:e.labelCol)?e.labelCol:S||("grid"!==_||I?void 0:{span:6}),J=e=>(null==e?void 0:e.wrapperWidth)?{style:{width:e.wrapperWidth}}:(null==e?void 0:e.wrapperCol)?e.wrapperCol:W||("grid"!==_||I?void 0:{span:18}),K=l.jsxs("div",{className:"flex items-center flex-wrap gap-10px",children:[!!C&&l.jsx(c,{type:"primary",htmlType:"submit",className:"!mb-5px "+(I?"mr-5px":""),loading:y,icon:l.jsx(h,{}),children:B("public.search")}),!!N&&l.jsx(c,{className:"!mb-5px "+(I?"mr-5px":""),icon:l.jsx(u,{}),onClick:()=>{null==L||L.resetFields(),null==L||L.setFieldsValue(w?{...w}:{}),null==L||L.submit()},children:B("public.reset")}),R&&l.jsx("div",{className:"!mb-5px "+(I?"mr-5px":""),children:R}),"grid"===_&&!!T&&l.jsxs("div",{className:"text-12px cursor-pointer color-#1677ff hover:color-#69b1ff",onClick:()=>{A(!z)},children:[l.jsx(x,{rotate:z?180:0}),z?"收缩":"展开"]})]});return l.jsx("div",{id:"searches",style:k,className:E,children:l.jsxs(d,{layout:I?"horizontal":"inline",...D,ref:j,form:L,onFinish:e=>{if(V){let l=i(e,b);l=r(l),null==V||V(l)}},onFinishFailed:e=>{},autoComplete:"off",children:["default"===_&&l.jsxs(l.Fragment,{children:[null==b?void 0:b.map((l=>e.createElement(d.Item,{...a(l),key:`${l.name}`,className:`${(null==l?void 0:l.className)||""} !mb-5px`,labelCol:H(l),wrapperCol:J(l),valuePropName:s(l.component)},t(B,l,G)))),K]}),"grid"===_&&l.jsxs(m,{wrap:!0,className:"w-full",children:[null==(v=(e=>{if(!T)return e;const l=$*P;for(let s=0;s<e.length;s++){const a=e[s];s<l?a.hidden=!1:a.hidden=!z}return e})(b))?void 0:v.map((e=>l.jsx("div",{style:{width:e.hidden?0:100/(I?1:$)+"%"},children:l.jsx(d.Item,{...a(e),className:`${(null==e?void 0:e.className)||""} !mb-5px`,labelCol:H(e),wrapperCol:J(e),valuePropName:s(e.component),children:t(B,e,G)})},`${e.name}`))),l.jsx(p,{flex:(null==b?void 0:b.length)%$===0||T?"auto":void 0,children:l.jsx(m,{justify:"flex-end",children:K})})]})]})})}));export{f as B};
