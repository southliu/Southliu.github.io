import{r as e}from"./react@19.2.1.BpVBN_43.js";import{s as t,n,j as r,E as o,t as s}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";const c=e.createContext(null);const f=new Map;function i(e){e.forEach(e=>{const{target:t}=e;f.get(t)?.forEach(e=>e(t))})}let u;function a(){return u||(u=new ResizeObserver(i)),u}function h(s,i){const{children:u,disabled:h}=s,l=e.useRef(null),d=e.useContext(c),g="function"==typeof u,p=g?u(l):u,b=e.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),m=!g&&e.isValidElement(p)&&t(p),v=m?n(p):null,R=r(v,l),w=()=>o(l.current);e.useImperativeHandle(i,()=>w());const y=e.useRef(s);y.current=s;const E=e.useCallback(e=>{const{onResize:t,data:n}=y.current,{width:r,height:o}=e.getBoundingClientRect(),{offsetWidth:s,offsetHeight:c}=e,f=Math.floor(r),i=Math.floor(o);if(b.current.width!==f||b.current.height!==i||b.current.offsetWidth!==s||b.current.offsetHeight!==c){const u={width:f,height:i,offsetWidth:s,offsetHeight:c};b.current=u;const a=s===Math.round(r)?r:s,h=c===Math.round(o)?o:c,l={...u,offsetWidth:a,offsetHeight:h};d?.(l,e,n),t&&Promise.resolve().then(()=>{t(l,e)})}},[]);return e.useEffect(()=>{const e=w();var t,n;return e&&!h&&(t=e,n=E,f.has(t)||(f.set(t,new Set),a().observe(t)),f.get(t).add(n)),()=>function(e,t){f.has(e)&&(f.get(e).delete(t),f.get(e).size||(a().unobserve(e),f.delete(e)))}(e,E)},[l.current,h]),m?e.cloneElement(p,{ref:R}):p}const l=e.forwardRef(h);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function g(t,n){const{children:r}=t;return("function"==typeof r?[r]:s(r)).map((r,o)=>{const s=r?.key||`rc-observer-key-${o}`;return e.createElement(l,d({},t,{key:s,ref:0===o?n:void 0}),r)})}const p=e.forwardRef(g);p.Collection=function({children:t,onBatchResize:n}){const r=e.useRef(0),o=e.useRef([]),s=e.useContext(c),f=e.useCallback((e,t,c)=>{r.current+=1;const f=r.current;o.current.push({size:e,element:t,data:c}),Promise.resolve().then(()=>{f===r.current&&(n?.(o.current),o.current=[])}),s?.(e,t,c)},[n,s]);return e.createElement(c.Provider,{value:f},t)};export{p as R};
