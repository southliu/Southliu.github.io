import{K as e,h as t,e as n,d as r,i as a,b as l}from"./@rc-component_util@1.4.0_re_a8b68d4fbe51b122ded4cf0ecf2ca619.D3_e-sfJ.js";import{c as s}from"./clsx@2.1.1.BvmCeSbq.js";import{r as o}from"./react@19.2.1.BpVBN_43.js";import{r as u}from"./react-dom@19.2.1_react@19.2.1.BLi5rGn2.js";function c(e,t,n){return(e-t)/(n-t)}function i(e,t,n,r){const a=c(t,n,r),l={};switch(e){case"rtl":l.right=100*a+"%",l.transform="translateX(50%)";break;case"btt":l.bottom=100*a+"%",l.transform="translateY(50%)";break;case"ttb":l.top=100*a+"%",l.transform="translateY(-50%)";break;default:l.left=100*a+"%",l.transform="translateX(-50%)"}return l}function d(e,t){return Array.isArray(e)?e[t]:e}const m=o.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),f=o.createContext({});function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}const h=o.forwardRef((t,n)=>{const{prefixCls:r,value:a,valueIndex:l,onStartMove:u,onDelete:c,style:f,render:h,dragging:v,draggingDelete:p,onOffsetChange:b,onChangeComplete:y,onFocus:x,onMouseEnter:E,...C}=t,{min:k,max:M,direction:S,disabled:w,keyboard:D,range:F,tabIndex:N,ariaLabelForHandle:O,ariaLabelledByForHandle:R,ariaRequired:H,ariaValueTextFormatterForHandle:L,styles:$,classNames:I}=o.useContext(m),P=`${r}-handle`,T=e=>{w||u(e,l)},A=e=>{x?.(e,l)},j=e=>{E(e,l)},B=t=>{if(!w&&D){let n=null;switch(t.which||t.keyCode){case e.LEFT:n="ltr"===S||"btt"===S?-1:1;break;case e.RIGHT:n="ltr"===S||"btt"===S?1:-1;break;case e.UP:n="ttb"!==S?1:-1;break;case e.DOWN:n="ttb"!==S?-1:1;break;case e.HOME:n="min";break;case e.END:n="max";break;case e.PAGE_UP:n=2;break;case e.PAGE_DOWN:n=-2;break;case e.BACKSPACE:case e.DELETE:c?.(l)}null!==n&&(t.preventDefault(),b(n,l))}},V=t=>{switch(t.which||t.keyCode){case e.LEFT:case e.RIGHT:case e.UP:case e.DOWN:case e.HOME:case e.END:case e.PAGE_UP:case e.PAGE_DOWN:y?.()}},_=i(S,a,k,M);let X={};null!==l&&(X={tabIndex:w?null:d(N,l),role:"slider","aria-valuemin":k,"aria-valuemax":M,"aria-valuenow":a,"aria-disabled":w,"aria-label":d(O,l),"aria-labelledby":d(R,l),"aria-required":d(H,l),"aria-valuetext":d(L,l)?.(a),"aria-orientation":"ltr"===S||"rtl"===S?"horizontal":"vertical",onMouseDown:T,onTouchStart:T,onFocus:A,onMouseEnter:j,onKeyDown:B,onKeyUp:V});let Y=o.createElement("div",g({ref:n,className:s(P,{[`${P}-${l+1}`]:null!==l&&F,[`${P}-dragging`]:v,[`${P}-dragging-delete`]:p},I.handle),style:{..._,...f,...$.handle}},X,C));return h&&(Y=h(Y,{index:l,prefixCls:r,value:a,dragging:v,draggingDelete:p})),Y});function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}const p=o.forwardRef((e,t)=>{const{prefixCls:n,style:r,onStartMove:a,onOffsetChange:l,values:s,handleRender:c,activeHandleRender:i,draggingIndex:m,draggingDelete:f,onFocus:g,...p}=e,b=o.useRef({}),[y,x]=o.useState(!1),[E,C]=o.useState(-1),k=e=>{C(e),x(!0)};o.useImperativeHandle(t,()=>({focus:e=>{b.current[e]?.focus()},hideHelp:()=>{u.flushSync(()=>{x(!1)})}}));const M={prefixCls:n,onStartMove:a,onOffsetChange:l,render:c,onFocus:(e,t)=>{k(t),g?.(e)},onMouseEnter:(e,t)=>{k(t)},...p};return o.createElement(o.Fragment,null,s.map((e,t)=>{const n=m===t;return o.createElement(h,v({ref:e=>{e?b.current[t]=e:delete b.current[t]},dragging:n,draggingDelete:n&&f,style:d(r,t),key:t,value:e,valueIndex:t},M))}),i&&y&&o.createElement(h,v({key:"a11y"},M,{value:s[E],valueIndex:null,dragging:-1!==m,draggingDelete:f,render:i,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),b=e=>{const{prefixCls:t,style:n,children:r,value:a,onClick:l}=e,{min:u,max:c,direction:d,includedStart:f,includedEnd:g,included:h}=o.useContext(m),v=`${t}-text`,p=i(d,a,u,c);return o.createElement("span",{className:s(v,{[`${v}-active`]:h&&f<=a&&a<=g}),style:{...p,...n},onMouseDown:e=>{e.stopPropagation()},onClick:()=>{l(a)}},r)},y=e=>{const{prefixCls:t,marks:n,onClick:r}=e,a=`${t}-mark`;return n.length?o.createElement("div",{className:a},n.map(({value:e,style:t,label:n})=>o.createElement(b,{key:e,prefixCls:a,style:t,value:e,onClick:r},n))):null},x=e=>{const{prefixCls:t,value:n,style:r,activeStyle:a}=e,{min:l,max:u,direction:c,included:d,includedStart:f,includedEnd:g}=o.useContext(m),h=`${t}-dot`,v=d&&f<=n&&n<=g;let p={...i(c,n,l,u),..."function"==typeof r?r(n):r};return v&&(p={...p,..."function"==typeof a?a(n):a}),o.createElement("span",{className:s(h,{[`${h}-active`]:v}),style:p})},E=e=>{const{prefixCls:t,marks:n,dots:r,style:a,activeStyle:l}=e,{min:s,max:u,step:c}=o.useContext(m),i=o.useMemo(()=>{const e=new Set;if(n.forEach(t=>{e.add(t.value)}),r&&null!==c){let t=s;for(;t<=u;)e.add(t),t+=c}return Array.from(e)},[s,u,c,r,n]);return o.createElement("div",{className:`${t}-step`},i.map(e=>o.createElement(x,{prefixCls:t,key:e,value:e,style:a,activeStyle:l})))},C=e=>{const{prefixCls:t,style:n,start:r,end:a,index:l,onStartMove:u,replaceCls:i}=e,{direction:d,min:f,max:g,disabled:h,range:v,classNames:p}=o.useContext(m),b=`${t}-track`,y=c(r,f,g),x=c(a,f,g),E=e=>{!h&&u&&u(e,-1)},C={};switch(d){case"rtl":C.right=100*y+"%",C.width=100*x-100*y+"%";break;case"btt":C.bottom=100*y+"%",C.height=100*x-100*y+"%";break;case"ttb":C.top=100*y+"%",C.height=100*x-100*y+"%";break;default:C.left=100*y+"%",C.width=100*x-100*y+"%"}const k=i||s(b,{[`${b}-${l+1}`]:null!==l&&v,[`${t}-track-draggable`]:u},p.track);return o.createElement("div",{className:k,style:{...C,...n},onMouseDown:E,onTouchStart:E})},k=e=>{const{prefixCls:t,style:n,values:r,startPoint:a,onStartMove:l}=e,{included:u,range:c,min:i,styles:f,classNames:g}=o.useContext(m),h=o.useMemo(()=>{if(!c){if(0===r.length)return[];const e=a??i,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}const e=[];for(let t=0;t<r.length-1;t+=1)e.push({start:r[t],end:r[t+1]});return e},[r,c,a,i]);if(!u)return null;const v=h?.length&&(g.tracks||f.tracks)?o.createElement(C,{index:null,prefixCls:t,start:h[0].start,end:h[h.length-1].end,replaceCls:s(g.tracks,`${t}-tracks`),style:f.tracks}):null;return o.createElement(o.Fragment,null,v,h.map(({start:e,end:r},a)=>o.createElement(C,{index:a,prefixCls:t,style:{...d(n,a),...f.track},start:e,end:r,key:a,onStartMove:l})))};function M(e){const t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}const S=o.forwardRef((e,u)=>{const{prefixCls:c="rc-slider",className:i,style:d,classNames:g,styles:h,id:v,disabled:b=!1,keyboard:x=!0,autoFocus:C,onFocus:S,onBlur:w,min:D=0,max:F=100,step:N=1,value:O,defaultValue:R,range:H,count:L,onChange:$,onBeforeChange:I,onAfterChange:P,onChangeComplete:T,allowCross:A=!0,pushable:j=!1,reverse:B,vertical:V,included:_=!0,startPoint:X,trackStyle:Y,handleStyle:G,railStyle:U,dotStyle:q,activeDotStyle:K,marks:W,dots:z,handleRender:J,activeHandleRender:Q,track:Z,tabIndex:ee=0,ariaLabelForHandle:te,ariaLabelledByForHandle:ne,ariaRequired:re,ariaValueTextFormatterForHandle:ae}=e,le=o.useRef(null),se=o.useRef(null),oe=o.useMemo(()=>V?B?"ttb":"btt":B?"rtl":"ltr",[B,V]),[ue,ce,ie,de,me]=function(e){return o.useMemo(()=>{if(!0===e||!e)return[!!e,!1,!1,0];const{editable:t,draggableTrack:n,minCount:r,maxCount:a}=e;return[!0,t,!t&&n,r||0,a]},[e])}(H),fe=o.useMemo(()=>isFinite(D)?D:0,[D]),ge=o.useMemo(()=>isFinite(F)?F:100,[F]),he=o.useMemo(()=>null!==N&&N<=0?1:N,[N]),ve=o.useMemo(()=>"boolean"==typeof j?!!j&&he:j>=0&&j,[j,he]),pe=o.useMemo(()=>Object.keys(W||{}).map(e=>{const t=W[e],n={value:Number(e)};return t&&"object"==typeof t&&!o.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n}).filter(({label:e})=>e||"number"==typeof e).sort((e,t)=>e.value-t.value),[W]),[be,ye]=function(e,t,n,r,a,l){const s=o.useCallback(n=>Math.max(e,Math.min(t,n)),[e,t]),u=o.useCallback(r=>{if(null!==n){const a=e+Math.round((s(r)-e)/n)*n,l=e=>(String(e).split(".")[1]||"").length,o=Math.max(l(n),l(t),l(e)),u=Number(a.toFixed(o));return e<=u&&u<=t?u:null}return null},[n,e,t,s]),c=o.useCallback(a=>{const l=s(a),o=r.map(e=>e.value);null!==n&&o.push(u(a)),o.push(e,t);let c=o[0],i=t-e;return o.forEach(e=>{const t=Math.abs(l-e);t<=i&&(c=e,i=t)}),c},[e,t,r,n,s,u]),i=(a,l,s,o="unit")=>{if("number"==typeof l){let c;const d=a[s],m=d+l;let f=[];r.forEach(e=>{f.push(e.value)}),f.push(e,t),f.push(u(d));const g=l>0?1:-1;"unit"===o?f.push(u(d+g*n)):f.push(u(m)),f=f.filter(e=>null!==e).filter(e=>l<0?e<=d:e>=d),"unit"===o&&(f=f.filter(e=>e!==d));const h="unit"===o?d:m;c=f[0];let v=Math.abs(c-h);if(f.forEach(e=>{const t=Math.abs(e-h);t<v&&(c=e,v=t)}),void 0===c)return l<0?e:t;if("dist"===o)return c;if(Math.abs(l)>1){const e=[...a];return e[s]=c,i(e,l-g,s,o)}return c}return"min"===l?e:"max"===l?t:void 0},d=(e,t,n,r="unit")=>{const a=e[n],l=i(e,t,n,r);return{value:l,changed:l!==a}},m=e=>null===l&&0===e||"number"==typeof l&&e<l;return[c,(e,t,n,r="unit")=>{const s=e.map(c),o=s[n],u=i(s,t,n,r);if(s[n]=u,!1===a){const e=l||0;n>0&&s[n-1]!==o&&(s[n]=Math.max(s[n],s[n-1]+e)),n<s.length-1&&s[n+1]!==o&&(s[n]=Math.min(s[n],s[n+1]-e))}else if("number"==typeof l||null===l){for(let e=n+1;e<s.length;e+=1){let t=!0;for(;m(s[e]-s[e-1])&&t;)({value:s[e],changed:t}=d(s,1,e))}for(let e=n;e>0;e-=1){let t=!0;for(;m(s[e]-s[e-1])&&t;)({value:s[e-1],changed:t}=d(s,-1,e-1))}for(let e=s.length-1;e>0;e-=1){let t=!0;for(;m(s[e]-s[e-1])&&t;)({value:s[e-1],changed:t}=d(s,-1,e-1))}for(let e=0;e<s.length-1;e+=1){let t=!0;for(;m(s[e+1]-s[e])&&t;)({value:s[e+1],changed:t}=d(s,1,e+1))}}return{value:s[n],values:s}}]}(fe,ge,he,pe,A,ve),[xe,Ee]=r(R,O),Ce=o.useMemo(()=>{const e=null==xe?[]:Array.isArray(xe)?xe:[xe],[t=fe]=e;let n=null===xe?[]:[t];if(ue){if(n=[...e],L||void 0===xe){const e=L>=0?L+1:2;for(n=n.slice(0,e);n.length<e;)n.push(n[n.length-1]??fe)}n.sort((e,t)=>e-t)}return n.forEach((e,t)=>{n[t]=be(e)}),n},[xe,ue,fe,L,be]),ke=e=>ue?e:e[0],Me=n(e=>{const t=[...e].sort((e,t)=>e-t);$&&!a(t,Ce,!0)&&$(ke(t)),Ee(t)}),Se=n(e=>{e&&le.current.hideHelp();const t=ke(Ce);P?.(t),l(!P,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),T?.(t)}),[we,De,Fe,Ne,Oe]=function(e,r,a,l,s,u,c,i,d,m,g){const[h,v]=o.useState(null),[p,b]=o.useState(-1),[y,x]=o.useState(!1),[E,C]=o.useState(a),[k,S]=o.useState(a),w=o.useRef(null),D=o.useRef(null),F=o.useRef(null),{onDragStart:N,onDragChange:O}=o.useContext(f);t(()=>{-1===p&&C(a)},[a,p]),o.useEffect(()=>()=>{document.removeEventListener("mousemove",w.current),document.removeEventListener("mouseup",D.current),F.current&&(F.current.removeEventListener("touchmove",w.current),F.current.removeEventListener("touchend",D.current))},[]);const R=(e,t,n)=>{void 0!==t&&v(t),C(e);let r=e;n&&(r=e.filter((e,t)=>t!==p)),c(r),O&&O({rawValues:e,deleteIndex:n?p:-1,draggingIndex:p,draggingValue:t})},H=n((e,t,n)=>{if(-1===e){const e=k[0],n=k[k.length-1],r=l-e,a=s-n;let o=t*(s-l);o=Math.max(o,r),o=Math.min(o,a);const c=u(e+o);o=c-e;const i=k.map(e=>e+o);R(i)}else{const r=(s-l)*t,a=[...E];a[e]=k[e];const o=d(a,r,e,"dist");R(o.values,o.value,n)}}),L=o.useMemo(()=>{const e=[...a].sort((e,t)=>e-t),t=[...E].sort((e,t)=>e-t),n={};t.forEach(e=>{n[e]=(n[e]||0)+1}),e.forEach(e=>{n[e]=(n[e]||0)-1});const r=m?1:0;return Object.values(n).reduce((e,t)=>e+Math.abs(t),0)<=r?E:a},[a,E,m]);return[p,h,y,L,(t,n,l)=>{t.stopPropagation();const s=l||a,o=s[n];b(n),v(o),S(s),C(s),x(!1);const{pageX:u,pageY:c}=M(t);let d=!1;N&&N({rawValues:s,draggingIndex:n,draggingValue:o});const f=t=>{t.preventDefault();const{pageX:a,pageY:l}=M(t),s=a-u,o=l-c,{width:i,height:f}=e.current.getBoundingClientRect();let h,v;switch(r){case"btt":h=-o/f,v=s;break;case"ttb":h=o/f,v=s;break;case"rtl":h=-s/i,v=o;break;default:h=s/i,v=o}d=!!m&&Math.abs(v)>130&&g<E.length,x(d),H(n,h,d)},h=e=>{e.preventDefault(),document.removeEventListener("mouseup",h),document.removeEventListener("mousemove",f),F.current&&(F.current.removeEventListener("touchmove",w.current),F.current.removeEventListener("touchend",D.current)),w.current=null,D.current=null,F.current=null,i(d),b(-1),x(!1)};document.addEventListener("mouseup",h),document.addEventListener("mousemove",f),t.currentTarget.addEventListener("touchend",h),t.currentTarget.addEventListener("touchmove",f),w.current=f,D.current=h,F.current=t.currentTarget}]}(se,oe,Ce,fe,ge,be,Me,Se,ye,ce,de),Re=(e,t)=>{if(!b){const n=[...Ce];let r=0,a=0,s=ge-fe;Ce.forEach((t,n)=>{const l=Math.abs(e-t);l<=s&&(s=l,r=n),t<e&&(a=n)});let o=r;ce&&0!==s&&(!me||Ce.length<me)?(n.splice(a+1,0,e),o=a+1):n[r]=e,ue&&!Ce.length&&void 0===L&&n.push(e);const u=ke(n);I?.(u),Me(n),t?(document.activeElement?.blur?.(),le.current.focus(o),Oe(t,o,n)):(P?.(u),l(!P,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),T?.(u))}},[He,Le]=o.useState(null);o.useEffect(()=>{if(null!==He){const e=Ce.indexOf(He);e>=0&&le.current.focus(e)}Le(null)},[He]);const $e=o.useMemo(()=>(!ie||null!==he)&&ie,[ie,he]),Ie=n((e,t)=>{Oe(e,t),I?.(ke(Ce))}),Pe=-1!==we;o.useEffect(()=>{if(!Pe){const e=Ce.lastIndexOf(De);le.current.focus(e)}},[Pe]);const Te=o.useMemo(()=>[...Ne].sort((e,t)=>e-t),[Ne]),[Ae,je]=o.useMemo(()=>ue?[Te[0],Te[Te.length-1]]:[fe,Te[0]],[Te,ue,fe]);o.useImperativeHandle(u,()=>({focus:()=>{le.current.focus(0)},blur:()=>{const{activeElement:e}=document;se.current?.contains(e)&&e?.blur()}})),o.useEffect(()=>{C&&le.current.focus(0)},[]);const Be=o.useMemo(()=>({min:fe,max:ge,direction:oe,disabled:b,keyboard:x,step:he,included:_,includedStart:Ae,includedEnd:je,range:ue,tabIndex:ee,ariaLabelForHandle:te,ariaLabelledByForHandle:ne,ariaRequired:re,ariaValueTextFormatterForHandle:ae,styles:h||{},classNames:g||{}}),[fe,ge,oe,b,x,he,_,Ae,je,ue,ee,te,ne,re,ae,h,g]);return o.createElement(m.Provider,{value:Be},o.createElement("div",{ref:se,className:s(c,i,{[`${c}-disabled`]:b,[`${c}-vertical`]:V,[`${c}-horizontal`]:!V,[`${c}-with-marks`]:pe.length}),style:d,onMouseDown:e=>{e.preventDefault();const{width:t,height:n,left:r,top:a,bottom:l,right:s}=se.current.getBoundingClientRect(),{clientX:o,clientY:u}=e;let c;switch(oe){case"btt":c=(l-u)/n;break;case"ttb":c=(u-a)/n;break;case"rtl":c=(s-o)/t;break;default:c=(o-r)/t}Re(be(fe+c*(ge-fe)),e)},id:v},o.createElement("div",{className:s(`${c}-rail`,g?.rail),style:{...U,...h?.rail}}),!1!==Z&&o.createElement(k,{prefixCls:c,style:Y,values:Ce,startPoint:X,onStartMove:$e?Ie:void 0}),o.createElement(E,{prefixCls:c,marks:pe,dots:z,style:q,activeStyle:K}),o.createElement(p,{ref:le,prefixCls:c,style:G,values:Ne,draggingIndex:we,draggingDelete:Fe,onStartMove:Ie,onOffsetChange:(e,t)=>{if(!b){const n=ye(Ce,e,t);I?.(ke(Ce)),Me(n.values),Le(n.value)}},onFocus:S,onBlur:w,handleRender:J,activeHandleRender:Q,onChangeComplete:Se,onDelete:ce?e=>{if(b||!ce||Ce.length<=de)return;const t=[...Ce];t.splice(e,1),I?.(ke(t)),Me(t);const n=Math.max(0,e-1);le.current.hideHelp(),le.current.focus(n)}:void 0}),o.createElement(y,{prefixCls:c,marks:pe,onClick:Re})))});export{S,f as U};
