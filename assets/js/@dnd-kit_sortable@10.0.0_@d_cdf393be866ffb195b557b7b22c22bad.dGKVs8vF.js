import{r as e,e as t}from"./react@19.1.1.DFOJwFPq.js";import{K as r,u as n,a as i,b as a,g as o}from"./@dnd-kit_core@6.3.1_react-d_b2d5886cf71f55202ee000d74755b8d0.CEF3D-Tp.js";import{a as s,d,v as l,C as c,i as u}from"./@dnd-kit_utilities@3.2.2_react@19.1.1.CCSpii8W.js";function f(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function g(e,t){return e.reduce((e,r,n)=>{const i=t.get(r);return i&&(e[n]=i),e},Array(e.length))}function v(e){return null!==e&&e>=0}const p={scaleX:1,scaleY:1},x=e=>{var t;let{rects:r,activeNodeRect:n,activeIndex:i,overIndex:a,index:o}=e;const s=null!=(t=r[i])?t:n;if(!s)return null;const d=function(e,t,r){const n=e[t],i=e[t-1],a=e[t+1];if(!n||!i&&!a)return 0;if(r<t)return i?n.left-(i.left+i.width):a.left-(n.left+n.width);return a?a.left-(n.left+n.width):n.left-(i.left+i.width)}(r,o,i);if(o===i){const e=r[a];return e?{x:i<a?e.left+e.width-(s.left+s.width):e.left-s.left,y:0,...p}:null}return o>i&&o<=a?{x:-s.width-d,y:0,...p}:o<i&&o>=a?{x:s.width+d,y:0,...p}:{x:0,y:0,...p}};const I=e=>{let{rects:t,activeIndex:r,overIndex:n,index:i}=e;const a=f(t,n,r),o=t[i],s=a[i];return s&&o?{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}:null},b={scaleX:1,scaleY:1},h=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:i,rects:a,overIndex:o}=e;const s=null!=(t=a[r])?t:n;if(!s)return null;if(i===r){const e=a[o];return e?{x:0,y:r<o?e.top+e.height-(s.top+s.height):e.top-s.top,...b}:null}const d=function(e,t,r){const n=e[t],i=e[t-1],a=e[t+1];if(!n)return 0;if(r<t)return i?n.top-(i.top+i.height):a?a.top-(n.top+n.height):0;return a?a.top-(n.top+n.height):i?n.top-(i.top+i.height):0}(a,i,r);return i>r&&i<=o?{x:0,y:-s.height-d,...b}:i<r&&i>=o?{x:0,y:s.height+d,...b}:{x:0,y:0,...b}};const m="Sortable",y=t.createContext({activeIndex:-1,containerId:m,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:I,disabled:{draggable:!1,droppable:!1}});function w(r){let{children:i,id:a,items:o,strategy:l=I,disabled:c=!1}=r;const{active:u,dragOverlay:f,droppableRects:v,over:p,measureDroppableContainers:x}=n(),b=s(m,a),h=Boolean(null!==f.rect),w=e.useMemo(()=>o.map(e=>"object"==typeof e&&"id"in e?e.id:e),[o]),R=null!=u,D=u?w.indexOf(u.id):-1,O=p?w.indexOf(p.id):-1,N=e.useRef(w),C=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(w,N.current),S=-1!==O&&-1===D||C,T=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(c);d(()=>{C&&R&&x(w)},[C,w,R,x]),e.useEffect(()=>{N.current=w},[w]);const E=e.useMemo(()=>({activeIndex:D,containerId:b,disabled:T,disableTransforms:S,items:w,overIndex:O,useDragOverlay:h,sortedRects:g(w,v),strategy:l}),[D,b,T.draggable,T.droppable,S,w,O,v,h,l]);return t.createElement(y.Provider,{value:E},i)}const R=e=>{let{id:t,items:r,activeIndex:n,overIndex:i}=e;return f(r,n,i).indexOf(t)},D=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:i,items:a,newIndex:o,previousItems:s,previousContainerId:d,transition:l}=e;return!(!l||!n)&&((s===a||i!==o)&&(!!r||o!==i&&t===d))},O={duration:200,easing:"ease"},N="transform",C=c.Transition.toString({property:N,duration:0,easing:"linear"}),S={roleDescription:"sortable"};function T(t){let{animateLayoutChanges:r=D,attributes:n,disabled:s,data:f,getNewIndex:g=R,id:p,strategy:x,resizeObserverConfig:I,transition:b=O}=t;const{items:h,containerId:m,activeIndex:w,disabled:T,disableTransforms:E,sortedRects:M,overIndex:_,useDragOverlay:j,strategy:X}=e.useContext(y),Y=function(e,t){var r,n;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(s,T),A=h.indexOf(p),k=e.useMemo(()=>({sortable:{containerId:m,index:A,items:h},...f}),[m,f,A,h]),z=e.useMemo(()=>h.slice(h.indexOf(p)),[h,p]),{rect:B,node:L,isOver:F,setNodeRef:K}=i({id:p,data:k,disabled:Y.droppable,resizeObserverConfig:{updateMeasurementsFor:z,...I}}),{active:P,activatorEvent:U,activeNodeRect:q,attributes:G,setNodeRef:H,listeners:J,isDragging:Q,over:V,setActivatorNodeRef:W,transform:Z}=a({id:p,data:k,attributes:{...S,...n},disabled:Y.draggable}),$=l(K,H),ee=Boolean(P),te=ee&&!E&&v(w)&&v(_),re=!j&&Q,ne=re&&te?Z:null,ie=te?null!=ne?ne:(null!=x?x:X)({rects:M,activeNodeRect:q,activeIndex:w,overIndex:_,index:A}):null,ae=v(w)&&v(_)?g({id:p,items:h,activeIndex:w,overIndex:_}):A,oe=null==P?void 0:P.id,se=e.useRef({activeId:oe,items:h,newIndex:ae,containerId:m}),de=h!==se.current.items,le=r({active:P,containerId:m,isDragging:Q,isSorting:ee,id:p,index:A,items:h,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:b,wasDragging:null!=se.current.activeId}),ce=function(t){let{disabled:r,index:n,node:i,rect:a}=t;const[s,l]=e.useState(null),c=e.useRef(n);return d(()=>{if(!r&&n!==c.current&&i.current){const e=a.current;if(e){const t=o(i.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&l(r)}}n!==c.current&&(c.current=n)},[r,n,i,a]),e.useEffect(()=>{s&&l(null)},[s]),s}({disabled:!le,index:A,node:L,rect:B});return e.useEffect(()=>{ee&&se.current.newIndex!==ae&&(se.current.newIndex=ae),m!==se.current.containerId&&(se.current.containerId=m),h!==se.current.items&&(se.current.items=h)},[ee,ae,m,h]),e.useEffect(()=>{if(oe===se.current.activeId)return;if(null!=oe&&null==se.current.activeId)return void(se.current.activeId=oe);const e=setTimeout(()=>{se.current.activeId=oe},50);return()=>clearTimeout(e)},[oe]),{active:P,activeIndex:w,attributes:G,data:k,rect:B,index:A,newIndex:ae,items:h,isOver:F,isSorting:ee,isDragging:Q,listeners:J,node:L,overIndex:_,over:V,setNodeRef:$,setActivatorNodeRef:W,setDroppableNodeRef:K,setDraggableNodeRef:H,transform:null!=ce?ce:ie,transition:function(){if(ce||de&&se.current.newIndex===A)return C;if(re&&!u(U)||!b)return;if(ee||le)return c.Transition.toString({...b,property:N});return}()}}r.Down,r.Right,r.Up,r.Left;export{w as S,f as a,x as h,T as u,h as v};
