import{G as e,g as t,a as n,m as a,b as r,w as o,c as s,d as i,e as c,i as u,f as d,h as l,j as p,k as m,l as f,_ as g,n as h,o as v,p as y,q as _,r as b,C as S,s as T,t as x,u as E,v as R,x as w,y as k,z as P,A as L,U as O,B as A,D as q,E as C,F as D,H as I,I as M,J as j,K as F,L as H,M as N,N as B,O as W,P as U,Q as z,R as X,S as Y,T as G,V as K,W as J,X as $,Y as V,Z as Q,$ as Z,a0 as ee,a1 as te,a2 as ne,a3 as ae,a4 as re,a5 as oe,a6 as se,a7 as ie,a8 as ce,a9 as ue,aa as de,ab as le,ac as pe,ad as me,ae as fe,af as ge,ag as he,ah as ve,ai as ye,aj as _e,ak as be,al as Se,am as Te,an as xe,ao as Ee,ap as Re,aq as we,ar as ke,as as Pe,at as Le,au as Oe,av as Ae,aw as qe,ax as Ce,ay as De,az as Ie,aA as Me,aB as je,aC as Fe,aD as He,aE as Ne,aF as Be}from"./@sentry_core@10.38.0.B-bj8hQP.js";import{g as We,c as Ue,a as ze,b as Xe,d as Ye,S as Ge,e as Ke,r as Je,p as $e,f as Ve,s as Qe,h as Ze,i as et,j as tt,k as nt,l as at,m as rt}from"./@sentry-internal_browser-utils@10.38.0.Bc5JQQFT.js";const ot=e;let st=0;function it(){return st>0}function ct(e,t={}){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(n(e))return e}catch(d){return e}const u=function(...n){try{const a=n.map(e=>ct(e,t));return e.apply(this,a)}catch(a){throw st++,setTimeout(()=>{st--}),o(e=>{e.addEventProcessor(e=>(t.mechanism&&(s(e,void 0),i(e,t.mechanism)),e.extra={...e.extra,arguments:n},e)),c(a)}),a}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(u[t]=e[t])}catch(d){}a(u,e),r(e,"__sentry_wrapped__",u);try{Object.getOwnPropertyDescriptor(u,"name").configurable&&Object.defineProperty(u,"name",{get:()=>e.name})}catch(d){}return u}function ut(){const e=t(),{referrer:n}=ot.document||{},{userAgent:a}=ot.navigator||{};return{url:e,headers:{...n&&{Referer:n},...a&&{"User-Agent":a}}}}function dt(e,t){const n=mt(e,t),a={type:ht(t),value:vt(t)};return n.length&&(a.stacktrace={frames:n}),void 0===a.type&&""===a.value&&(a.value="Unrecoverable error caught"),a}function lt(e,t,n,a){const r=v(),o=null==r?void 0:r.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),i={__serialized__:y(t,o)};if(s)return{exception:{values:[dt(e,s)]},extra:i};const c={exception:{values:[{type:f(t)?t.constructor.name:a?"UnhandledRejection":"Error",value:bt(t,{isUnhandledRejection:a})}]},extra:i};if(n){const t=mt(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function pt(e,t){return{exception:{values:[dt(e,t)]}}}function mt(e,t){const n=t.stacktrace||t.stack||"",a=function(e){if(e&&ft.test(e.message))return 1;return 0}(t),r=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,a,r)}catch(o){}return[]}const ft=/Minified React error #\d+;/i;function gt(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function ht(e){const t=null==e?void 0:e.name;if(!t&&gt(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function vt(e){const t=null==e?void 0:e.message;return gt(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?g(t.error):g(e):"No error message"}function yt(e,t,n,a,r){let o;if(u(t)&&t.error){return pt(e,t.error)}if(d(t)||l(t)){const r=t;if("stack"in t)o=pt(e,t);else{const t=r.name||(d(r)?"DOMError":"DOMException"),i=r.message?"".concat(t,": ").concat(r.message):t;o=_t(e,i,n,a),s(o,i)}return"code"in r&&(o.tags={...o.tags,"DOMException.code":"".concat(r.code)}),o}if(p(t))return pt(e,t);if(m(t)||f(t)){return o=lt(e,t,n,r),i(o,{synthetic:!0}),o}return o=_t(e,t,n,a),s(o,"".concat(t)),i(o,{synthetic:!0}),o}function _t(e,t,n,a){const r={};if(a&&n){const a=mt(e,n);a.length&&(r.exception={values:[{value:t,stacktrace:{frames:a}}]}),i(r,{synthetic:!0})}if(h(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return r.logentry={message:e,params:n},r}return r.message=t,r}function bt(e,{isUnhandledRejection:t}){const n=_(e),a=t?"promise rejection":"exception";if(u(e))return"Event `ErrorEvent` captured as ".concat(a," with message `").concat(e.message,"`");if(f(e)){const t=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(t){}}(e);return"Event `".concat(t,"` (type=").concat(e.type,") captured as ").concat(a)}return"Object captured as ".concat(a," with keys: ").concat(n)}class St extends S{constructor(e){var t,n;const a=function(e){var t;return{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null==(t=ot.SENTRY_RELEASE)?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}(e),r=ot.SENTRY_SDK_SOURCE||x();T(a,"browser",["browser"],r),(null==(t=a._metadata)?void 0:t.sdk)&&(a._metadata.sdk.settings={infer_ip:a.sendDefaultPii?"auto":"never",...a._metadata.sdk.settings}),super(a);const{sendDefaultPii:o,sendClientReports:s,enableLogs:i,_experiments:c,enableMetrics:u}=this._options,d=null==(n=null!=u?u:null==c?void 0:c.enableMetrics)||n;ot.document&&(s||i||d)&&ot.document.addEventListener("visibilitychange",()=>{"hidden"===ot.document.visibilityState&&(s&&this._flushOutcomes(),i&&E(this),d&&R(this))}),o&&this.on("beforeSendSession",w)}eventFromException(e,t){return function(e,t,n,a){const r=yt(e,t,(null==n?void 0:n.syntheticException)||void 0,a);return i(r),r.level="error",(null==n?void 0:n.event_id)&&(r.event_id=n.event_id),b(r)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",a,r){const o=_t(e,t,(null==a?void 0:a.syntheticException)||void 0,r);return o.level=n,(null==a?void 0:a.event_id)&&(o.event_id=a.event_id),b(o)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,a){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,a)}}function Tt(e,t=We("fetch")){let n=0,a=0;return k(e,async function(r){const o=r.body.length;n+=o,a++;const s={body:r.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&a<15,...e.fetchOptions};try{const n=await t(e.url,s);return{statusCode:n.status,headers:{"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")}}}catch(i){throw Ue("fetch"),i}finally{n-=o,a--}},P(e.bufferSize||40))}const xt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Et(e,t,n,a){const r={filename:e,function:"<anonymous>"===t?O:t,in_app:!0};return void 0!==n&&(r.lineno=n),void 0!==a&&(r.colno=a),r}const Rt=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,wt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,kt=/\((\S*)(?::(\d+))(?::(\d+))\)/,Pt=/at (.+?) ?\(data:(.+?),/,Lt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ot=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,At=L(...[[30,e=>{const t=e.match(Pt);if(t)return{filename:"<data:".concat(t[2],">"),function:t[1]};const n=Rt.exec(e);if(n){const[,e,t,a]=n;return Et(e,O,+t,+a)}const a=wt.exec(e);if(a){if(a[2]&&0===a[2].indexOf("eval")){const e=kt.exec(a[2]);e&&(a[2]=e[1],a[3]=e[2],a[4]=e[3])}const[e,t]=qt(a[1]||O,a[2]);return Et(t,e,a[3]?+a[3]:void 0,a[4]?+a[4]:void 0)}}],[50,e=>{const t=Lt.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Ot.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||O;return[n,e]=qt(n,e),Et(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),qt=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),a=-1!==e.indexOf("safari-web-extension");return n||a?[-1!==e.indexOf("@")?e.split("@")[0]:O,n?"safari-extension:".concat(t):"safari-web-extension:".concat(t)]:[e,t]},Ct=1024,Dt=A((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&q(function(e){return function(t){if(v()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:W(t.level),message:B(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message="Assertion failed: ".concat(B(t.args.slice(1)," ")||"console.assert"),n.data.arguments=t.args.slice(1)}j(n,{input:t.args,level:t.level})}}(e)),t.dom&&ze(function(e,t){return function(n){if(v()!==e)return;let a,r,o="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Ct&&(xt&&D.warn("`dom.maxStringLength` cannot exceed ".concat(Ct,", but a value of ").concat(s," was configured. Sentry will use ").concat(Ct," instead.")),s=Ct),"string"==typeof o&&(o=[o]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;a=I(t,{keyAttrs:o,maxStringLength:s}),r=M(t)}catch(c){a="<unknown>"}if(0===a.length)return;const i={category:"ui.".concat(n.name),message:a};r&&(i.data={"ui.component_name":r}),j(i,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Xe(function(e){return function(t){if(v()!==e)return;const{startTimestamp:n,endTimestamp:a}=t,r=t.xhr[Ge];if(!n||!a||!r)return;const{method:o,url:s,status_code:i,body:c}=r,u={method:o,url:s,status_code:i},d={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:a},l={category:"xhr",data:u,type:"http",level:F(i)};e.emit("beforeOutgoingRequestBreadcrumb",l,d),j(l,d)}}(e)),t.fetch&&C(function(e){return function(t){if(v()!==e)return;const{startTimestamp:n,endTimestamp:a}=t;if(a&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const r=t.fetchData,o={data:t.error,input:t.args,startTimestamp:n,endTimestamp:a},s={category:"fetch",data:r,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",s,o),j(s,o)}else{const r=t.response,o={...t.fetchData,status_code:null==r?void 0:r.status};t.fetchData.request_body_size,t.fetchData.response_body_size,null==r||r.status;const s={input:t.args,response:r,startTimestamp:n,endTimestamp:a},i={category:"fetch",data:o,type:"http",level:F(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",i,s),j(i,s)}}}(e)),t.history&&Ye(function(e){return function(t){if(v()!==e)return;let n=t.from,a=t.to;const r=H(ot.location.href);let o=n?H(n):void 0;const s=H(a);(null==o?void 0:o.path)||(o=r),r.protocol===s.protocol&&r.host===s.host&&(a=s.relative),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),j({category:"navigation",data:{from:n,to:a}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){v()===e&&j({category:"sentry.".concat("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:N(t)},{event:t})}}(e))}}});const It=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Mt=A((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&U(ot,"setTimeout",jt),t.setInterval&&U(ot,"setInterval",jt),t.requestAnimationFrame&&U(ot,"requestAnimationFrame",Ft),t.XMLHttpRequest&&"XMLHttpRequest"in ot&&U(XMLHttpRequest.prototype,"send",Ht);const e=t.eventTarget;if(e){(Array.isArray(e)?e:It).forEach(e=>function(e,t){var n,a;const r=null==(n=ot[e])?void 0:n.prototype;if(!(null==(a=null==r?void 0:r.hasOwnProperty)?void 0:a.call(r,"addEventListener")))return;U(r,"addEventListener",function(n){return function(a,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=ct(r.handleEvent,{mechanism:{data:{handler:z(r),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch(s){}return t.unregisterOriginalCallbacks&&function(e,t,n){e&&"object"==typeof e&&"removeEventListener"in e&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,n)}(this,a,r),n.apply(this,[a,ct(r,{mechanism:{data:{handler:z(r),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),o])}}),U(r,"removeEventListener",function(e){return function(t,n,a){try{const r=n.__sentry_wrapped__;r&&e.call(this,t,r,a)}catch(r){}return e.call(this,t,n,a)}})}(e,t))}}}});function jt(e){return function(...t){const n=t[0];return t[0]=ct(n,{mechanism:{handled:!1,type:"auto.browser.browserapierrors.".concat(z(e))}}),e.apply(this,t)}}function Ft(e){return function(t){return e.apply(this,[ct(t,{mechanism:{data:{handler:z(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Ht(e){return function(...t){const a=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in a&&"function"==typeof a[e]&&U(a,e,function(t){const a={mechanism:{data:{handler:z(t)},handled:!1,type:"auto.browser.browserapierrors.xhr.".concat(e)}},r=n(t);return r&&(a.mechanism.data.handler=z(r)),ct(t,a)})}),e.apply(this,t)}}const Nt=A(()=>({name:"BrowserSession",setupOnce(){void 0!==ot.document?(X({ignoreDuration:!0}),Y(),Ye(({from:e,to:t})=>{void 0!==e&&e!==t&&(X({ignoreDuration:!0}),Y())})):xt&&D.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}})),Bt=A((e={})=>{const n={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){n.onerror&&(!function(e){G(n=>{const{stackParser:a,attachStacktrace:r}=Ut();if(v()!==e||it())return;const{msg:o,url:s,line:i,column:c,error:u}=n,d=function(e,n,a,r){var o;const s=e.exception=e.exception||{},i=s.values=s.values||[],c=i[0]=i[0]||{},u=c.stacktrace=c.stacktrace||{},d=u.frames=u.frames||[],l=r,p=a,m=null!=(o=function(e){if(!V(e)||0===e.length)return;if(e.startsWith("data:"))return"<".concat(Q(e,!1),">");return e}(n))?o:t();0===d.length&&d.push({colno:l,filename:m,function:O,in_app:!0,lineno:p});return e}(yt(a,u||o,void 0,r,!1),s,i,c);d.level="error",K(d,{originalException:u,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}(e),Wt("onerror")),n.onunhandledrejection&&(!function(e){J(t=>{const{stackParser:n,attachStacktrace:a}=Ut();if(v()!==e||it())return;const r=function(e){if($(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}(t),o=$(r)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(r))}]}}:yt(n,r,void 0,a,!0);o.level="error",K(o,{originalException:r,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}(e),Wt("onunhandledrejection"))}}});function Wt(e){xt&&D.log("Global Handler attached: ".concat(e))}function Ut(){const e=v();return(null==e?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const zt=A(()=>({name:"HttpContext",preprocessEvent(e){var t;if(!ot.navigator&&!ot.location&&!ot.document)return;const n=ut(),a={...n.headers,...null==(t=e.request)?void 0:t.headers};e.request={...n,...e.request,headers:a}}})),Xt=A((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,a,r){const o=r.getOptions();Z(dt,o.stackParser,n,t,e,a)}}});function Yt(){return!!function(){var e;if(void 0===ot.window)return!1;const n=ot;if(n.nw)return!1;const a=n.chrome||n.browser;if(!(null==(e=null==a?void 0:a.runtime)?void 0:e.id))return!1;const r=t(),o=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ot===ot.top&&o.some(e=>r.startsWith("".concat(e,"://"))))}()&&(xt&&ee(()=>{}),!0)}function Gt(e={}){const t=!e.skipBrowserExtensionCheck&&Yt();let n=null==e.defaultIntegrations?[re(),oe(),se(),Mt(),Dt(),Bt(),Xt(),ie(),zt(),Nt()]:e.defaultIntegrations;const a={...e,enabled:!t&&e.enabled,stackParser:ne(e.stackParser||At),integrations:te({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||Tt};return ae(St,a)}function Kt(e){try{return new URL(e,ot.location.origin).href}catch(t){return}}function Jt(e){try{return new Headers(e)}catch(t){return}}const $t=new WeakMap,Vt=new Map,Qt={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Zt(e,n){const{traceFetch:a,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i,tracePropagationTargets:c,onRequestSpanStart:u,onRequestSpanEnd:d}={...Qt,...n},l="function"==typeof s?s:e=>!0,p=e=>function(e,n){const a=t();if(a){let t,o;try{t=new URL(e,a),o=new URL(a).origin}catch(r){return!1}const s=t.origin===o;return n?be(t.toString(),n)||s&&be(t.pathname,n):s}{const t=!!e.match(/^\/(?!\/)/);return n?be(e,n):t}}(e,c),m={},f=e.getOptions().propagateTraceparent;a&&(e.addEventProcessor(e=>("transaction"===e.type&&e.spans&&e.spans.forEach(e=>{if("http.client"===e.op){const t=Vt.get(e.span_id);t&&(e.timestamp=t/1e3,Vt.delete(e.span_id))}}),e)),o&&ce(e=>{if(e.response){const t=$t.get(e.response);t&&e.endTimestamp&&Vt.set(t,e.endTimestamp)}}),C(e=>{const t=ue(e,l,p,m,{propagateTraceparent:f,onRequestSpanEnd:d});if(e.response&&e.fetchData.__span&&$t.set(e.response,e.fetchData.__span),t){const n=Kt(e.fetchData.url),a=n?H(n).host:void 0;t.setAttributes({"http.url":n?Q(n):void 0,"server.address":a}),i&&en(t),null==u||u(t,{headers:e.headers})}})),r&&Xe(e=>{var t;const n=function(e,t,n,a,r,o){const s=e.xhr,i=null==s?void 0:s[Ge];if(!s||s.__sentry_own_request__||!i)return;const{url:c,method:u}=i,d=le()&&t(c);if(e.endTimestamp&&d){const t=s.__sentry_xhr_span_id__;if(!t)return;const n=a[t];return void(n&&void 0!==i.status_code&&(pe(n,i.status_code),n.end(),null==o||o(n,{headers:Jt($e(s)),error:e.error}),delete a[t]))}const l=Kt(c),p=H(l||c),m=Q(me(c)),f=!!fe(),g=d&&f?ge({name:"".concat(u," ").concat(m),attributes:{url:Q(c),type:"xhr","http.method":u,"http.url":l?Q(l):void 0,"server.address":null==p?void 0:p.host,[ve]:"auto.http.browser",[he]:"http.client",...(null==p?void 0:p.search)&&{"http.query":null==p?void 0:p.search},...(null==p?void 0:p.hash)&&{"http.fragment":null==p?void 0:p.hash}}}):new ye;s.__sentry_xhr_span_id__=g.spanContext().spanId,a[s.__sentry_xhr_span_id__]=g,n(c)&&function(e,t,n){const{"sentry-trace":a,baggage:r,traceparent:o}=_e({span:t,propagateTraceparent:n});a&&function(e,t,n,a){var r;const o=null==(r=e.__sentry_xhr_v3__)?void 0:r.request_headers;if((null==o?void 0:o["sentry-trace"])||!e.setRequestHeader)return;try{if(e.setRequestHeader("sentry-trace",t),a&&!(null==o?void 0:o.traceparent)&&e.setRequestHeader("traceparent",a),n){const t=null==o?void 0:o.baggage;t&&t.split(",").some(e=>e.trim().startsWith("sentry-"))||e.setRequestHeader("baggage",n)}}catch(s){}}(e,a,r,o)}(s,le()&&f?g:void 0,r);const h=v();h&&h.emit("beforeOutgoingRequestSpan",g,e);return g}(e,l,p,m,f,d);n&&(i&&en(n),null==u||u(n,{headers:Jt(null==(t=e.xhr.__sentry_xhr_v3__)?void 0:t.request_headers)}))})}function en(e){const{url:t}=de(e).data;if(!t||"string"!=typeof t)return;const n=Ke("resource",({entries:a})=>{a.forEach(a=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(a)&&a.name.endsWith(t)&&(e.setAttributes(Je(a)),setTimeout(n))})})}const tn="sentry_previous_trace",nn="sentry.previous_trace";function an(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const a="session-storage"===t;let r=a?function(){var e;try{const t=null==(e=ot.sessionStorage)?void 0:e.getItem(tn);return JSON.parse(t)}catch(t){return}}():void 0;e.on("spanStart",e=>{if(Se(e)!==e)return;const t=xe().getPropagationContext();r=function(e,t,n){const a=de(t);function r(){var e,t,r;try{return null!=(r=Number(null==(e=n.dsc)?void 0:e.sample_rate))?r:Number(null==(t=a.data)?void 0:t[we])}catch(o){return 0}}const o={spanContext:t.spanContext(),startTimestamp:a.start_timestamp,sampleRate:r(),sampleRand:n.sampleRand};if(!e)return o;const s=e.spanContext;if(s.traceId===a.trace_id)return e;Date.now()/1e3-e.startTimestamp<=3600&&(xt&&D.log("Adding previous_trace `".concat(JSON.stringify(s),"` link to span `").concat(JSON.stringify({op:a.op,...t.spanContext()}),"`")),t.addLink({context:s,attributes:{[Re]:"previous_trace"}}),t.setAttribute(nn,"".concat(s.traceId,"-").concat(s.spanId,"-").concat(rn(s)?1:0)));return o}(r,e,t),a&&function(e){try{ot.sessionStorage.setItem(tn,JSON.stringify(e))}catch(t){xt&&D.warn("Could not store previous trace in sessionStorage",t)}}(r)});let o=!0;n&&e.on("beforeSampling",e=>{if(!r)return;const t=xe(),n=t.getPropagationContext();o&&n.parentSpanId?o=!1:(t.setPropagationContext({...n,dsc:{...n.dsc,sample_rate:String(r.sampleRate),sampled:String(rn(r.spanContext))},sampleRand:r.sampleRand}),e.parentSampled=rn(r.spanContext),e.parentSampleRate=r.sampleRate,e.spanAttributes={...e.spanAttributes,[Ee]:r.sampleRate})})}function rn(e){return 1===e.traceFlags}const on={...ke,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Qt},sn=(n={})=>{const a={name:void 0,source:void 0},r=ot.document,{enableInp:o,enableElementTiming:s,enableLongTask:i,enableLongAnimationFrame:c,_experiments:{enableInteractions:u,enableStandaloneClsSpans:d,enableStandaloneLcpSpans:l},beforeStartSpan:p,idleTimeout:m,finalTimeout:f,childSpanTimeout:g,markBackgroundSpan:h,traceFetch:y,traceXHR:_,trackFetchStreamPerformance:b,shouldCreateSpanForRequest:S,enableHTTPTimings:T,ignoreResourceSpans:x,ignorePerformanceApiSpans:E,instrumentPageLoad:R,instrumentNavigation:w,detectRedirects:k,linkPreviousTrace:P,consistentTraceSampling:L,enableReportPageLoaded:O,onRequestSpanStart:A,onRequestSpanEnd:q}={...on,...n};let C,I,M;function j(e,t,n=!0){const o="pageload"===t.op,s=t.name,i=p?p(t):t,c=i.attributes||{};if(s!==i.name&&(c[Ie]="custom",i.attributes=c),!n){const e=Me();return void ge({...i,startTime:e}).end(e)}a.name=i.name,a.source=c[Ie];const u=je(i,{idleTimeout:m,finalTimeout:f,childSpanTimeout:g,disableAutoFinish:o,beforeSpanEnd:t=>{null==C||C(),rt(t,{recordClsOnPageloadSpan:!d,recordLcpOnPageloadSpan:!l,ignoreResourceSpans:x,ignorePerformanceApiSpans:E}),ln(e,void 0);const n=xe(),a=n.getPropagationContext();n.setPropagationContext({...a,traceId:u.spanContext().traceId,sampled:Ne(u),dsc:He(t)}),o&&(M=void 0)},trimIdleSpanEndTimestamp:!O});function h(){r&&["interactive","complete"].includes(r.readyState)&&e.emit("idleSpanEnableAutoFinish",u)}o&&O&&(M=u),ln(e,u),o&&!O&&r&&(r.addEventListener("readystatechange",()=>{h()}),h())}return{name:"BrowserTracing",setup(t){if(Le(),C=Qe({recordClsStandaloneSpans:d||!1,recordLcpStandaloneSpans:l||!1,client:t}),o&&Ze(),s&&et(),c&&e.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?tt():i&&nt(),u&&at(),k&&r){const e=()=>{I=De()};addEventListener("click",e,{capture:!0}),addEventListener("keydown",e,{capture:!0,passive:!0})}function n(){const e=dn(t);e&&!de(e).timestamp&&(xt&&D.log("[Tracing] Finishing current active span with op: ".concat(de(e).op)),e.setAttribute(Fe,"cancelled"),e.end())}t.on("startNavigationSpan",(e,a)=>{if(v()!==t)return;if(null==a?void 0:a.isRedirect)return xt&&D.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),void j(t,{op:"navigation.redirect",...e},!1);I=void 0,n(),Oe().setPropagationContext({traceId:qe(),sampleRand:Math.random(),propagationSpanId:le()?void 0:Ae()});const r=xe();r.setPropagationContext({traceId:qe(),sampleRand:Math.random(),propagationSpanId:le()?void 0:Ae()}),r.setSDKProcessingMetadata({normalizedRequest:void 0}),j(t,{op:"navigation",...e,parentSpan:null,forceTransaction:!0})}),t.on("startPageLoadSpan",(e,a={})=>{if(v()!==t)return;n();const r=a.sentryTrace||cn("sentry-trace"),o=a.baggage||cn("baggage"),s=Ce(r,o),i=xe();i.setPropagationContext(s),le()||(i.getPropagationContext().propagationSpanId=Ae()),i.setSDKProcessingMetadata({normalizedRequest:ut()}),j(t,{op:"pageload",...e})}),t.on("endPageloadSpan",()=>{O&&M&&(M.setAttribute(Fe,"reportPageLoaded"),M.end())})},afterAllSetup(e){let n=t();if("off"!==P&&an(e,{linkPreviousTrace:P,consistentTraceSampling:L}),ot.location){if(R){const t=Pe();!function(e,t,n){e.emit("startPageLoadSpan",t,n),xe().setTransactionName(t.name);const a=dn(e);a&&e.emit("afterStartPageLoadSpan",a)}(e,{name:ot.location.pathname,startTime:t?t/1e3:void 0,attributes:{[Ie]:"url",[ve]:"auto.pageload.browser"}})}w&&Ye(({to:t,from:a})=>{if(void 0===a&&-1!==(null==n?void 0:n.indexOf(t)))return void(n=void 0);n=void 0;const r=Be(t),o=dn(e),s=o&&k&&function(e,t){const n=de(e),a=Me(),r=n.start_timestamp;if(a-r>pn)return!1;if(t&&a-t<=pn)return!1;return!0}(o,I);!function(e,t,n){const{url:a,isRedirect:r}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:r}),e.emit("startNavigationSpan",t,{isRedirect:r});const o=xe();o.setTransactionName(t.name),a&&!r&&o.setSDKProcessingMetadata({normalizedRequest:{...ut(),url:a}});dn(e)}(e,{name:(null==r?void 0:r.pathname)||ot.location.pathname,attributes:{[Ie]:"url",[ve]:"auto.navigation.browser"}},{url:t,isRedirect:s})})}h&&(ot.document?ot.document.addEventListener("visibilitychange",()=>{const e=fe();if(!e)return;const t=Se(e);if(ot.document.hidden&&t){const e="cancelled",{op:n,status:a}=de(t);xt&&D.log("[Tracing] Transaction: ".concat(e," -> since tab moved to the background, op: ").concat(n)),a||t.setStatus({code:Te,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):xt&&D.warn("[Tracing] Could not set up background tab detection due to lack of global document")),u&&function(e,t,n,a,r){const o=ot.document;let s;const i=()=>{const o="ui.action.click",i=dn(e);if(i){const e=de(i).op;if(["navigation","pageload"].includes(e))return void(xt&&D.warn("[Tracing] Did not create ".concat(o," span because a pageload or navigation span is in progress.")))}s&&(s.setAttribute(Fe,"interactionInterrupted"),s.end(),s=void 0),r.name?s=je({name:r.name,op:o,attributes:{[Ie]:r.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:a}):xt&&D.warn("[Tracing] Did not create ".concat(o," transaction because _latestRouteName is missing."))};o&&addEventListener("click",i,{capture:!0})}(e,m,f,g,a),o&&Ve(),Zt(e,{traceFetch:y,traceXHR:_,trackFetchStreamPerformance:b,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:S,enableHTTPTimings:T,onRequestSpanStart:A,onRequestSpanEnd:q})}}};function cn(e){const t=ot.document,n=null==t?void 0:t.querySelector("meta[name=".concat(e,"]"));return(null==n?void 0:n.getAttribute("content"))||void 0}const un="_sentry_idleSpan";function dn(e){return e[un]}function ln(e,t){r(e,un,t)}const pn=1.5;export{Dt as a,sn as b,Gt as i};
