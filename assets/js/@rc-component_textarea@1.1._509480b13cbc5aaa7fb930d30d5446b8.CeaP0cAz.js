import{u as e,B as t,r as n}from"./@rc-component_input@1.1.2_r_6672dd2a1daa1d4fb8167692335bdc32.Cwueeivh.js";import{c as r}from"./clsx@2.1.1.DMqMD_4V.js";import{d as a,h as o,l}from"./@rc-component_util@1.7.0_re_97ed4941f5d27d044aa2ecbc4a75f304.4n28hD7h.js";import{r as i,e as s}from"./react@19.2.3.DikTGMTS.js";import{R as u}from"./@rc-component_resize-observ_a5d141e3de655ef602de0c6d9e51ffb4.BTh966e6.js";const c=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],d={};let p;function m(e,t=!1,n=null,r=null){p||(p=document.createElement("textarea"),p.setAttribute("tab-index","-1"),p.setAttribute("aria-hidden","true"),p.setAttribute("name","hiddenTextarea"),document.body.appendChild(p)),e.getAttribute("wrap")?p.setAttribute("wrap",e.getAttribute("wrap")):p.removeAttribute("wrap");const{paddingSize:a,borderSize:o,boxSizing:l,sizingStyle:i}=function(e,t=!1){const n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&d[n])return d[n];const r=window.getComputedStyle(e),a=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),l=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),i={sizingStyle:c.map(e=>"".concat(e,":").concat(r.getPropertyValue(e))).join(";"),paddingSize:o,borderSize:l,boxSizing:a};return t&&n&&(d[n]=i),i}(e,t);let s,u,m;p.setAttribute("style","".concat(i,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),p.value=e.value||e.placeholder||"";let f=p.scrollHeight;if("border-box"===l?f+=o:"content-box"===l&&(f-=a),null!==n||null!==r){p.value=" ";const e=p.scrollHeight-a;null!==n&&(s=e*n,"border-box"===l&&(s=s+a+o),f=Math.max(s,f)),null!==r&&(u=e*r,"border-box"===l&&(u=u+a+o),m=f>u?"":"hidden",f=Math.min(u,f))}const g={height:f,overflowY:m,resize:"none"};return s&&(g.minHeight=s),u&&(g.maxHeight=u),g}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}const g=i.forwardRef((e,t)=>{const{prefixCls:n,defaultValue:s,value:c,autoSize:d,onResize:p,className:g,style:b,disabled:h,onChange:x,onInternalAutoSize:v,...y}=e,[w,z]=a(s,c),S=null!=w?w:"",C=i.useRef();i.useImperativeHandle(t,()=>({textArea:C.current}));const[E,A]=i.useMemo(()=>d&&"object"==typeof d?[d.minRows,d.maxRows]:[],[d]),R=!!d,[j,F]=i.useState(2),[O,P]=i.useState(),V=()=>{F(0)};o(()=>{R&&V()},[c,E,A,R]),o(()=>{if(0===j)F(1);else if(1===j){const e=m(C.current,!1,E,A);F(2),P(e)}},[j]);const N=i.useRef(),_=()=>{l.cancel(N.current)};i.useEffect(()=>_,[]);const H={...b,...R?O:null};return 0!==j&&1!==j||(H.overflowY="hidden",H.overflowX="hidden"),i.createElement(u,{onResize:e=>{2===j&&(null==p||p(e),d&&(_(),N.current=l(()=>{V()})))},disabled:!(d||p)},i.createElement("textarea",f({},y,{ref:C,style:H,className:r(n,g,{["".concat(n,"-disabled")]:h}),disabled:h,value:S,onChange:e=>{z(e.target.value),null==x||x(e)}})))});function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}const h=s.forwardRef(({defaultValue:o,value:l,onFocus:u,onBlur:c,onChange:d,allowClear:p,maxLength:m,onCompositionStart:f,onCompositionEnd:h,suffix:x,prefixCls:v="rc-textarea",showCount:y,count:w,className:z,style:S,disabled:C,hidden:E,classNames:A,styles:R,onResize:j,onClear:F,onPressEnter:O,readOnly:P,autoSize:V,onKeyDown:N,..._},H)=>{var T;const[I,k]=a(o,l),B=null==I?"":String(I),[L,M]=s.useState(!1),W=s.useRef(!1),[D,K]=s.useState(null),Y=i.useRef(null),X=i.useRef(null),q=()=>{var e;return null==(e=X.current)?void 0:e.textArea},G=()=>{q().focus()};i.useImperativeHandle(H,()=>{var e;return{resizableTextArea:X.current,focus:G,blur:()=>{q().blur()},nativeElement:(null==(e=Y.current)?void 0:e.nativeElement)||q()}}),i.useEffect(()=>{M(e=>!C&&e)},[C]);const[J,Q]=s.useState(null);s.useEffect(()=>{J&&q().setSelectionRange(...J)},[J]);const U=e(w,y),Z=null!=(T=U.max)?T:m,$=Number(Z)>0,ee=U.strategy(B),te=!!Z&&ee>Z,ne=(e,t)=>{let r=t;!W.current&&U.exceedFormatter&&U.max&&U.strategy(t)>U.max&&(r=U.exceedFormatter(t,{max:U.max}),t!==r&&Q([q().selectionStart||0,q().selectionEnd||0])),k(r),n(e.currentTarget,e,d,r)};let re,ae=x;U.show&&(re=U.showFormatter?U.showFormatter({value:B,count:ee,maxLength:Z}):"".concat(ee).concat($?" / ".concat(Z):""),ae=s.createElement(s.Fragment,null,ae,s.createElement("span",{className:r("".concat(v,"-data-count"),null==A?void 0:A.count),style:null==R?void 0:R.count},re)));const oe=!V&&!y&&!p;return s.createElement(t,{ref:Y,value:B,allowClear:p,handleReset:e=>{k(""),G(),n(q(),e,d)},suffix:ae,prefixCls:v,classNames:{...A,affixWrapper:r(null==A?void 0:A.affixWrapper,{["".concat(v,"-show-count")]:y,["".concat(v,"-textarea-allow-clear")]:p})},disabled:C,focused:L,className:r(z,te&&"".concat(v,"-out-of-range")),style:{...S,...D&&!oe?{height:"auto"}:{}},dataAttrs:{affixWrapper:{"data-count":"string"==typeof re?re:void 0}},hidden:E,readOnly:P,onClear:F},s.createElement(g,b({},_,{autoSize:V,maxLength:m,onKeyDown:e=>{"Enter"===e.key&&O&&!e.nativeEvent.isComposing&&O(e),null==N||N(e)},onChange:e=>{ne(e,e.target.value)},onFocus:e=>{M(!0),null==u||u(e)},onBlur:e=>{M(!1),null==c||c(e)},onCompositionStart:e=>{W.current=!0,null==f||f(e)},onCompositionEnd:e=>{W.current=!1,ne(e,e.currentTarget.value),null==h||h(e)},className:r(null==A?void 0:A.textarea),style:{resize:null==S?void 0:S.resize,...null==R?void 0:R.textarea},disabled:C,prefixCls:v,onResize:e=>{var t;null==j||j(e),(null==(t=q())?void 0:t.style.height)&&K(!0)},ref:X,readOnly:P})))});export{h as T};
