import{r as e,j as t}from"./react@19.1.1.DAMsdXqD.js";const n=typeof window<"u"?e.useLayoutEffect:e.useEffect;function i(e){if(void 0!==e)switch(typeof e){case"number":return e;case"string":if(e.endsWith("px"))return parseFloat(e)}}function s({containerElement:e,direction:t,isRtl:n,scrollOffset:i}){return i}function o(e,t="Assertion error"){if(!e)throw Error(t)}function r(e,t){if(e===t)return!0;if(!!e!=!!t||(o(void 0!==e),o(void 0!==t),Object.keys(e).length!==Object.keys(t).length))return!1;for(const n in e)if(!Object.is(t[n],e[n]))return!1;return!0}function c({cachedBounds:e,itemCount:t,itemSize:n}){if(0===t)return 0;if("number"==typeof n)return t*n;{const n=e.get(0===e.size?0:e.size-1);o(void 0!==n,"Unexpected bounds cache miss");return t*((n.scrollOffset+n.size)/e.size)}}function a({cachedBounds:e,containerScrollOffset:t,containerSize:n,itemCount:i,overscanCount:s}){const o=i-1;let r=0,c=-1,a=0,l=-1,u=0;for(;u<o;){const n=e.get(u);if(n.scrollOffset+n.size>t)break;u++}for(r=u,a=Math.max(0,r-s);u<o;){const i=e.get(u);if(i.scrollOffset+i.size>=t+n)break;u++}return c=Math.min(o,u),l=Math.min(i-1,c+s),r<0&&(r=0,c=-1,a=0,l=-1),{startIndexVisible:r,stopIndexVisible:c,startIndexOverscan:a,stopIndexOverscan:l}}function l({itemCount:t,itemProps:n,itemSize:i}){return e.useMemo(()=>function({itemCount:e,itemProps:t,itemSize:n}){const i=new Map;return{get(s){for(o(s<e,`Invalid index ${s}`);i.size-1<s;){const e=i.size;let r;switch(typeof n){case"function":r=n(e,t);break;case"number":r=n}if(0===e)i.set(e,{size:r,scrollOffset:0});else{const t=i.get(e-1);o(void 0!==t,`Unexpected bounds cache miss for index ${s}`),i.set(e,{scrollOffset:t.scrollOffset+t.size,size:r})}}const r=i.get(s);return o(void 0!==r,`Unexpected bounds cache miss for index ${s}`),r},set(e,t){i.set(e,t)},get size(){return i.size}}}({itemCount:t,itemProps:n,itemSize:i}),[t,n,i])}function u({containerElement:t,containerStyle:u,defaultContainerSize:d=0,direction:f,isRtl:h=!1,itemCount:m,itemProps:x,itemSize:g,onResize:p,overscanCount:v}){const[z,b]=e.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:O,startIndexOverscan:I,stopIndexVisible:w,stopIndexOverscan:S}={startIndexVisible:Math.min(m-1,z.startIndexVisible),startIndexOverscan:Math.min(m-1,z.startIndexOverscan),stopIndexVisible:Math.min(m-1,z.stopIndexVisible),stopIndexOverscan:Math.min(m-1,z.stopIndexOverscan)},{height:C=d,width:y=d}=function({box:t,defaultHeight:s,defaultWidth:o,disabled:r,element:c,mode:a,style:l}){const{styleHeight:u,styleWidth:d}=e.useMemo(()=>({styleHeight:i(l?.height),styleWidth:i(l?.width)}),[l?.height,l?.width]),[f,h]=e.useState({height:s,width:o}),m=r||void 0!==u||"only-width"===a||void 0!==u&&void 0!==d;return n(()=>{if(null===c||m)return;const e=new ResizeObserver(e=>{for(const t of e){const{contentRect:e,target:n}=t;c===n&&h(t=>t.height===e.height&&t.width===e.width?t:{height:e.height,width:e.width})}});return e.observe(c,{box:t}),()=>{e?.unobserve(c)}},[t,m,c,u,d]),e.useMemo(()=>({height:u??f.height,width:d??f.width}),[f,u,d])}({defaultHeight:d,defaultWidth:void 0,element:t,mode:"only-height",style:u}),E=e.useRef({height:0,width:0}),M=C,R=function({containerSize:e,itemSize:t}){let n;"string"==typeof t?(o(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),o(void 0!==e,"Container size must be defined if a percentage item size is specified"),n=e*parseInt(t)/100):n=t;return n}({containerSize:M,itemSize:g});e.useLayoutEffect(()=>{if("function"==typeof p){const e=E.current;(e.height!==C||e.width!==y)&&(p({height:C,width:y},{...e}),e.height=C,e.width=y)}},[C,p,y]);const V=l({itemCount:m,itemProps:x,itemSize:R}),k=e.useCallback(e=>V.get(e),[V]),B=e.useCallback(()=>c({cachedBounds:V,itemCount:m,itemSize:R}),[V,m,R]),T=e.useCallback(e=>{const n=s({containerElement:t,direction:f,isRtl:h,scrollOffset:e});return a({cachedBounds:V,containerScrollOffset:n,containerSize:M,itemCount:m,overscanCount:v})},[V,t,M,f,h,m,v]);n(()=>{b(T(t?.scrollTop??0))},[t,f,T]),n(()=>{if(!t)return;const e=()=>{b(e=>{const{scrollLeft:n,scrollTop:i}=t,o=s({containerElement:t,direction:f,isRtl:h,scrollOffset:i}),c=a({cachedBounds:V,containerScrollOffset:o,containerSize:M,itemCount:m,overscanCount:v});return r(c,e)?e:c})};return t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e)}},[V,t,M,f,m,v]);const H=function(t){const i=e.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return n(()=>{i.current=t},[t]),e.useCallback(e=>i.current?.(e),[i])}(({align:e="auto",containerScrollOffset:n,index:i})=>{let o=function({align:e,cachedBounds:t,index:n,itemCount:i,itemSize:s,containerScrollOffset:o,containerSize:r}){const a=c({cachedBounds:t,itemCount:i,itemSize:s}),l=t.get(n),u=Math.max(0,Math.min(a-r,l.scrollOffset)),d=Math.max(0,l.scrollOffset-r+l.size);switch("smart"===e&&(e=o>=d&&o<=u?"auto":"center"),e){case"start":return u;case"end":return d;case"center":return l.scrollOffset<=r/2?0:l.scrollOffset+l.size/2>=a-r/2?a-r:l.scrollOffset+l.size/2-r/2;default:return o>=d&&o<=u?o:o<d?d:u}}({align:e,cachedBounds:V,containerScrollOffset:n,containerSize:M,index:i,itemCount:m,itemSize:R});if(t){if(o=s({containerElement:t,direction:f,isRtl:h,scrollOffset:o}),"function"!=typeof t.scrollTo){const e=T(o);r(z,e)||b(e)}return o}});return{getCellBounds:k,getEstimatedSize:B,scrollToIndex:H,startIndexOverscan:I,startIndexVisible:O,stopIndexOverscan:S,stopIndexVisible:w}}function d(e,t){const{ariaAttributes:n,style:i,...s}=e,{ariaAttributes:o,style:c,...a}=t;return r(n,o)&&r(i,c)&&r(s,a)}function f({children:n,className:i,defaultHeight:s=0,listRef:o,onResize:r,onRowsRendered:c,overscanCount:a=3,rowComponent:l,rowCount:f,rowHeight:h,rowProps:m,tagName:x="div",style:g,...p}){const v=function(t){return e.useMemo(()=>t,Object.values(t))}(m),z=e.useMemo(()=>e.memo(l,d),[l]),[b,O]=e.useState(null),{getCellBounds:I,getEstimatedSize:w,scrollToIndex:S,startIndexOverscan:C,startIndexVisible:y,stopIndexOverscan:E,stopIndexVisible:M}=u({containerElement:b,defaultContainerSize:s,direction:"vertical",itemCount:f,itemProps:v,itemSize:h,onResize:r,overscanCount:a});e.useImperativeHandle(o,()=>({get element(){return b},scrollToRow({align:e="auto",behavior:t="auto",index:n}){const i=S({align:e,containerScrollOffset:b?.scrollTop??0,index:n});"function"==typeof b?.scrollTo&&b.scrollTo({behavior:t,top:i})}}),[b,S]),e.useEffect(()=>{C>=0&&E>=0&&c&&c({startIndex:y,stopIndex:M},{startIndex:C,stopIndex:E})},[c,C,y,E,M]);const R=e.useMemo(()=>{const t=[];if(f>0)for(let n=C;n<=E;n++){const i=I(n);t.push(e.createElement(z,{...v,ariaAttributes:{"aria-posinset":n+1,"aria-setsize":f,role:"listitem"},key:n,index:n,style:{position:"absolute",left:0,transform:`translateY(${i.scrollOffset}px)`,height:i.size,width:"100%"}}))}return t},[z,I,f,v,C,E]),V=t.jsx("div",{"aria-hidden":!0,style:{height:w(),width:"100%",zIndex:-1}});return e.createElement(x,{role:"list",...p,className:i,ref:O,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...g}},R,n,V)}export{f as k};
