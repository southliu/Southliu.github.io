import{r as e,j as t}from"./react@18.3.1.zoCbf7Ot.js";const n=typeof window<"u"?e.useLayoutEffect:e.useEffect;function i(e){if(void 0!==e)switch(typeof e){case"number":return e;case"string":if(e.endsWith("px"))return parseFloat(e)}}function o({containerElement:e,direction:t,isRtl:n,scrollOffset:i}){return i}function s(e,t="Assertion error"){if(!e)throw Error(t)}function r(e,t){if(e===t)return!0;if(!!e!=!!t||(s(void 0!==e),s(void 0!==t),Object.keys(e).length!==Object.keys(t).length))return!1;for(const n in e)if(!Object.is(t[n],e[n]))return!1;return!0}function c({cachedBounds:e,itemCount:t,itemSize:n}){if(0===t)return 0;if("number"==typeof n)return t*n;{const n=e.get(0===e.size?0:e.size-1);s(void 0!==n,"Unexpected bounds cache miss");return t*((n.scrollOffset+n.size)/e.size)}}function l({cachedBounds:e,containerScrollOffset:t,containerSize:n,itemCount:i,overscanCount:o}){const s=i-1;let r=0,c=-1,l=0,a=-1,u=0;for(;u<s;){const n=e.get(u);if(n.scrollOffset+n.size>t)break;u++}for(r=u,l=Math.max(0,r-o);u<s;){const i=e.get(u);if(i.scrollOffset+i.size>=t+n)break;u++}return c=Math.min(s,u),a=Math.min(i-1,c+o),r<0&&(r=0,c=-1,l=0,a=-1),{startIndexVisible:r,stopIndexVisible:c,startIndexOverscan:l,stopIndexOverscan:a}}function a({itemCount:t,itemProps:n,itemSize:i}){return e.useMemo(()=>function({itemCount:e,itemProps:t,itemSize:n}){const i=new Map;return{get(o){for(s(o<e,"Invalid index ".concat(o));i.size-1<o;){const e=i.size;let r;switch(typeof n){case"function":r=n(e,t);break;case"number":r=n}if(0===e)i.set(e,{size:r,scrollOffset:0});else{const t=i.get(e-1);s(void 0!==t,"Unexpected bounds cache miss for index ".concat(o)),i.set(e,{scrollOffset:t.scrollOffset+t.size,size:r})}}const r=i.get(o);return s(void 0!==r,"Unexpected bounds cache miss for index ".concat(o)),r},set(e,t){i.set(e,t)},get size(){return i.size}}}({itemCount:t,itemProps:n,itemSize:i}),[t,n,i])}function u({containerElement:t,containerStyle:u,defaultContainerSize:d=0,direction:f,isRtl:h=!1,itemCount:m,itemProps:v,itemSize:g,onResize:x,overscanCount:p}){const[z,b]=e.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:w,startIndexOverscan:O,stopIndexVisible:I,stopIndexOverscan:S}={startIndexVisible:Math.min(m-1,z.startIndexVisible),startIndexOverscan:Math.min(m-1,z.startIndexOverscan),stopIndexVisible:Math.min(m-1,z.stopIndexVisible),stopIndexOverscan:Math.min(m-1,z.stopIndexOverscan)},{height:y=d,width:C=d}=function({box:t,defaultHeight:o,defaultWidth:s,disabled:r,element:c,mode:l,style:a}){const{styleHeight:u,styleWidth:d}=e.useMemo(()=>({styleHeight:i(null==a?void 0:a.height),styleWidth:i(null==a?void 0:a.width)}),[null==a?void 0:a.height,null==a?void 0:a.width]),[f,h]=e.useState({height:o,width:s}),m=r||void 0!==u||"only-width"===l||void 0!==u&&void 0!==d;return n(()=>{if(null===c||m)return;const e=new ResizeObserver(e=>{for(const t of e){const{contentRect:e,target:n}=t;c===n&&h(t=>t.height===e.height&&t.width===e.width?t:{height:e.height,width:e.width})}});return e.observe(c,{box:t}),()=>{null==e||e.unobserve(c)}},[t,m,c,u,d]),e.useMemo(()=>({height:null!=u?u:f.height,width:null!=d?d:f.width}),[f,u,d])}({defaultHeight:d,defaultWidth:void 0,element:t,mode:"only-height",style:u}),R=e.useRef({height:0,width:0}),E=y,M=function({containerSize:e,itemSize:t}){let n;"string"==typeof t?(s(t.endsWith("%"),'Invalid item size: "'.concat(t,'"; string values must be percentages (e.g. "100%")')),s(void 0!==e,"Container size must be defined if a percentage item size is specified"),n=e*parseInt(t)/100):n=t;return n}({containerSize:E,itemSize:g});e.useLayoutEffect(()=>{if("function"==typeof x){const e=R.current;(e.height!==y||e.width!==C)&&(x({height:y,width:C},{...e}),e.height=y,e.width=C)}},[y,x,C]);const V=a({itemCount:m,itemProps:v,itemSize:M}),H=e.useCallback(e=>V.get(e),[V]),A=e.useCallback(()=>c({cachedBounds:V,itemCount:m,itemSize:M}),[V,m,M]),k=e.useCallback(e=>{const n=o({containerElement:t,direction:f,isRtl:h,scrollOffset:e});return l({cachedBounds:V,containerScrollOffset:n,containerSize:E,itemCount:m,overscanCount:p})},[V,t,E,f,h,m,p]);n(()=>{var e;const n=null!=(e=null==t?void 0:t.scrollTop)?e:0;b(k(n))},[t,f,k]),n(()=>{if(!t)return;const e=()=>{b(e=>{const{scrollLeft:n,scrollTop:i}=t,s=o({containerElement:t,direction:f,isRtl:h,scrollOffset:i}),c=l({cachedBounds:V,containerScrollOffset:s,containerSize:E,itemCount:m,overscanCount:p});return r(c,e)?e:c})};return t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e)}},[V,t,E,f,m,p]);const B=function(t){const i=e.useRef(()=>{throw new Error("Cannot call during render.")});return n(()=>{i.current=t},[t]),e.useCallback(e=>{var t;return null==(t=i.current)?void 0:t.call(i,e)},[i])}(({align:e="auto",containerScrollOffset:n,index:i})=>{let s=function({align:e,cachedBounds:t,index:n,itemCount:i,itemSize:o,containerScrollOffset:s,containerSize:r}){if(n<0||n>=i)throw RangeError("Invalid index specified: ".concat(n),{cause:"Index ".concat(n," is not within the range of 0 - ").concat(i-1)});const l=c({cachedBounds:t,itemCount:i,itemSize:o}),a=t.get(n),u=Math.max(0,Math.min(l-r,a.scrollOffset)),d=Math.max(0,a.scrollOffset-r+a.size);switch("smart"===e&&(e=s>=d&&s<=u?"auto":"center"),e){case"start":return u;case"end":return d;case"center":return a.scrollOffset<=r/2?0:a.scrollOffset+a.size/2>=l-r/2?l-r:a.scrollOffset+a.size/2-r/2;default:return s>=d&&s<=u?s:s<d?d:u}}({align:e,cachedBounds:V,containerScrollOffset:n,containerSize:E,index:i,itemCount:m,itemSize:M});if(t){if(s=o({containerElement:t,direction:f,isRtl:h,scrollOffset:s}),"function"!=typeof t.scrollTo){const e=k(s);r(z,e)||b(e)}return s}});return{getCellBounds:H,getEstimatedSize:A,scrollToIndex:B,startIndexOverscan:O,startIndexVisible:w,stopIndexOverscan:S,stopIndexVisible:I}}function d(e,t){const{ariaAttributes:n,style:i,...o}=e,{ariaAttributes:s,style:c,...l}=t;return r(n,s)&&r(i,c)&&r(o,l)}function f({children:i,className:o,defaultHeight:s=0,listRef:r,onResize:c,onRowsRendered:l,overscanCount:a=3,rowComponent:f,rowCount:h,rowHeight:m,rowProps:v,tagName:g="div",style:x,...p}){const z=function(t){return e.useMemo(()=>t,Object.values(t))}(v),b=e.useMemo(()=>e.memo(f,d),[f]),[w,O]=e.useState(null),I=function(e){return null!=e&&"object"==typeof e&&"getAverageRowHeight"in e&&"function"==typeof e.getAverageRowHeight}(m),S=e.useMemo(()=>I?e=>{var t;return null!=(t=m.getRowHeight(e))?t:m.getAverageRowHeight()}:m,[I,m]),{getCellBounds:y,getEstimatedSize:C,scrollToIndex:R,startIndexOverscan:E,startIndexVisible:M,stopIndexOverscan:V,stopIndexVisible:H}=u({containerElement:w,containerStyle:x,defaultContainerSize:s,direction:"vertical",itemCount:h,itemProps:z,itemSize:S,onResize:c,overscanCount:a});e.useImperativeHandle(r,()=>({get element(){return w},scrollToRow({align:e="auto",behavior:t="auto",index:n}){var i;const o=R({align:e,containerScrollOffset:null!=(i=null==w?void 0:w.scrollTop)?i:0,index:n});"function"==typeof(null==w?void 0:w.scrollTo)&&w.scrollTo({behavior:t,top:o})}}),[w,R]),n(()=>{if(!w)return;const e=Array.from(w.children).filter((e,t)=>{if(e.hasAttribute("aria-hidden"))return!1;const n="".concat(E+t);return e.setAttribute("data-react-window-index",n),!0});return I?m.observeRowElements(e):void 0},[w,I,m,E,V]),e.useEffect(()=>{E>=0&&V>=0&&l&&l({startIndex:M,stopIndex:H},{startIndex:E,stopIndex:V})},[l,E,M,V,H]);const A=e.useMemo(()=>{const t=[];if(h>0)for(let n=E;n<=V;n++){const i=y(n);t.push(e.createElement(b,{...z,ariaAttributes:{"aria-posinset":n+1,"aria-setsize":h,role:"listitem"},key:n,index:n,style:{position:"absolute",left:0,transform:"translateY(".concat(i.scrollOffset,"px)"),height:I?void 0:i.size,width:"100%"}}))}return t},[b,y,I,h,z,E,V]),k=t.jsx("div",{"aria-hidden":!0,style:{height:C(),width:"100%",zIndex:-1}});return e.createElement(g,{role:"list",...p,className:o,ref:O,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...x}},A,i,k)}export{f as A};
